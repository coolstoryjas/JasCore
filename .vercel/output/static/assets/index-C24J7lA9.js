function vL(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var Gg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function D0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function xL(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var Kg={exports:{}},Vc={},Yg={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QC;function wL(){if(QC)return tt;QC=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;function m(P){return P===null||typeof P!="object"?null:(P=f&&P[f]||P["@@iterator"],typeof P=="function"?P:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,w={};function S(P,j,J){this.props=P,this.context=j,this.refs=w,this.updater=J||y}S.prototype.isReactComponent={},S.prototype.setState=function(P,j){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,j,"setState")},S.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function C(){}C.prototype=S.prototype;function T(P,j,J){this.props=P,this.context=j,this.refs=w,this.updater=J||y}var k=T.prototype=new C;k.constructor=T,v(k,S.prototype),k.isPureReactComponent=!0;var M=Array.isArray,N=Object.prototype.hasOwnProperty,O={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function I(P,j,J){var te,ne={},ue=null,ce=null;if(j!=null)for(te in j.ref!==void 0&&(ce=j.ref),j.key!==void 0&&(ue=""+j.key),j)N.call(j,te)&&!D.hasOwnProperty(te)&&(ne[te]=j[te]);var ae=arguments.length-2;if(ae===1)ne.children=J;else if(1<ae){for(var xe=Array(ae),ke=0;ke<ae;ke++)xe[ke]=arguments[ke+2];ne.children=xe}if(P&&P.defaultProps)for(te in ae=P.defaultProps,ae)ne[te]===void 0&&(ne[te]=ae[te]);return{$$typeof:n,type:P,key:ue,ref:ce,props:ne,_owner:O.current}}function L(P,j){return{$$typeof:n,type:P.type,key:j,ref:P.ref,props:P.props,_owner:P._owner}}function A(P){return typeof P=="object"&&P!==null&&P.$$typeof===n}function V(P){var j={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(J){return j[J]})}var F=/\/+/g;function U(P,j){return typeof P=="object"&&P!==null&&P.key!=null?V(""+P.key):j.toString(36)}function B(P,j,J,te,ne){var ue=typeof P;(ue==="undefined"||ue==="boolean")&&(P=null);var ce=!1;if(P===null)ce=!0;else switch(ue){case"string":case"number":ce=!0;break;case"object":switch(P.$$typeof){case n:case e:ce=!0}}if(ce)return ce=P,ne=ne(ce),P=te===""?"."+U(ce,0):te,M(ne)?(J="",P!=null&&(J=P.replace(F,"$&/")+"/"),B(ne,j,J,"",function(ke){return ke})):ne!=null&&(A(ne)&&(ne=L(ne,J+(!ne.key||ce&&ce.key===ne.key?"":(""+ne.key).replace(F,"$&/")+"/")+P)),j.push(ne)),1;if(ce=0,te=te===""?".":te+":",M(P))for(var ae=0;ae<P.length;ae++){ue=P[ae];var xe=te+U(ue,ae);ce+=B(ue,j,J,xe,ne)}else if(xe=m(P),typeof xe=="function")for(P=xe.call(P),ae=0;!(ue=P.next()).done;)ue=ue.value,xe=te+U(ue,ae++),ce+=B(ue,j,J,xe,ne);else if(ue==="object")throw j=String(P),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.");return ce}function q(P,j,J){if(P==null)return P;var te=[],ne=0;return B(P,te,"","",function(ue){return j.call(J,ue,ne++)}),te}function K(P){if(P._status===-1){var j=P._result;j=j(),j.then(function(J){(P._status===0||P._status===-1)&&(P._status=1,P._result=J)},function(J){(P._status===0||P._status===-1)&&(P._status=2,P._result=J)}),P._status===-1&&(P._status=0,P._result=j)}if(P._status===1)return P._result.default;throw P._result}var G={current:null},$={transition:null},z={ReactCurrentDispatcher:G,ReactCurrentBatchConfig:$,ReactCurrentOwner:O};function W(){throw Error("act(...) is not supported in production builds of React.")}return tt.Children={map:q,forEach:function(P,j,J){q(P,function(){j.apply(this,arguments)},J)},count:function(P){var j=0;return q(P,function(){j++}),j},toArray:function(P){return q(P,function(j){return j})||[]},only:function(P){if(!A(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},tt.Component=S,tt.Fragment=t,tt.Profiler=s,tt.PureComponent=T,tt.StrictMode=r,tt.Suspense=c,tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z,tt.act=W,tt.cloneElement=function(P,j,J){if(P==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+P+".");var te=v({},P.props),ne=P.key,ue=P.ref,ce=P._owner;if(j!=null){if(j.ref!==void 0&&(ue=j.ref,ce=O.current),j.key!==void 0&&(ne=""+j.key),P.type&&P.type.defaultProps)var ae=P.type.defaultProps;for(xe in j)N.call(j,xe)&&!D.hasOwnProperty(xe)&&(te[xe]=j[xe]===void 0&&ae!==void 0?ae[xe]:j[xe])}var xe=arguments.length-2;if(xe===1)te.children=J;else if(1<xe){ae=Array(xe);for(var ke=0;ke<xe;ke++)ae[ke]=arguments[ke+2];te.children=ae}return{$$typeof:n,type:P.type,key:ne,ref:ue,props:te,_owner:ce}},tt.createContext=function(P){return P={$$typeof:o,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},P.Provider={$$typeof:i,_context:P},P.Consumer=P},tt.createElement=I,tt.createFactory=function(P){var j=I.bind(null,P);return j.type=P,j},tt.createRef=function(){return{current:null}},tt.forwardRef=function(P){return{$$typeof:a,render:P}},tt.isValidElement=A,tt.lazy=function(P){return{$$typeof:h,_payload:{_status:-1,_result:P},_init:K}},tt.memo=function(P,j){return{$$typeof:d,type:P,compare:j===void 0?null:j}},tt.startTransition=function(P){var j=$.transition;$.transition={};try{P()}finally{$.transition=j}},tt.unstable_act=W,tt.useCallback=function(P,j){return G.current.useCallback(P,j)},tt.useContext=function(P){return G.current.useContext(P)},tt.useDebugValue=function(){},tt.useDeferredValue=function(P){return G.current.useDeferredValue(P)},tt.useEffect=function(P,j){return G.current.useEffect(P,j)},tt.useId=function(){return G.current.useId()},tt.useImperativeHandle=function(P,j,J){return G.current.useImperativeHandle(P,j,J)},tt.useInsertionEffect=function(P,j){return G.current.useInsertionEffect(P,j)},tt.useLayoutEffect=function(P,j){return G.current.useLayoutEffect(P,j)},tt.useMemo=function(P,j){return G.current.useMemo(P,j)},tt.useReducer=function(P,j,J){return G.current.useReducer(P,j,J)},tt.useRef=function(P){return G.current.useRef(P)},tt.useState=function(P){return G.current.useState(P)},tt.useSyncExternalStore=function(P,j,J){return G.current.useSyncExternalStore(P,j,J)},tt.useTransition=function(){return G.current.useTransition()},tt.version="18.3.1",tt}var e_;function Il(){return e_||(e_=1,Yg.exports=wL()),Yg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t_;function bL(){if(t_)return Vc;t_=1;var n=Il(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(a,c,d){var h,f={},m=null,y=null;d!==void 0&&(m=""+d),c.key!==void 0&&(m=""+c.key),c.ref!==void 0&&(y=c.ref);for(h in c)r.call(c,h)&&!i.hasOwnProperty(h)&&(f[h]=c[h]);if(a&&a.defaultProps)for(h in c=a.defaultProps,c)f[h]===void 0&&(f[h]=c[h]);return{$$typeof:e,type:a,key:m,ref:y,props:f,_owner:s.current}}return Vc.Fragment=t,Vc.jsx=o,Vc.jsxs=o,Vc}var n_;function SL(){return n_||(n_=1,Kg.exports=bL()),Kg.exports}var g=SL(),b=Il();const Ct=D0(b),CL=vL({__proto__:null,default:Ct},[b]);var Ch={},Xg={exports:{}},Jn={},Jg={exports:{}},Zg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r_;function _L(){return r_||(r_=1,function(n){function e($,z){var W=$.length;$.push(z);e:for(;0<W;){var P=W-1>>>1,j=$[P];if(0<s(j,z))$[P]=z,$[W]=j,W=P;else break e}}function t($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var z=$[0],W=$.pop();if(W!==z){$[0]=W;e:for(var P=0,j=$.length,J=j>>>1;P<J;){var te=2*(P+1)-1,ne=$[te],ue=te+1,ce=$[ue];if(0>s(ne,W))ue<j&&0>s(ce,ne)?($[P]=ce,$[ue]=W,P=ue):($[P]=ne,$[te]=W,P=te);else if(ue<j&&0>s(ce,W))$[P]=ce,$[ue]=W,P=ue;else break e}}return z}function s($,z){var W=$.sortIndex-z.sortIndex;return W!==0?W:$.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var c=[],d=[],h=1,f=null,m=3,y=!1,v=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k($){for(var z=t(d);z!==null;){if(z.callback===null)r(d);else if(z.startTime<=$)r(d),z.sortIndex=z.expirationTime,e(c,z);else break;z=t(d)}}function M($){if(w=!1,k($),!v)if(t(c)!==null)v=!0,K(N);else{var z=t(d);z!==null&&G(M,z.startTime-$)}}function N($,z){v=!1,w&&(w=!1,C(I),I=-1),y=!0;var W=m;try{for(k(z),f=t(c);f!==null&&(!(f.expirationTime>z)||$&&!V());){var P=f.callback;if(typeof P=="function"){f.callback=null,m=f.priorityLevel;var j=P(f.expirationTime<=z);z=n.unstable_now(),typeof j=="function"?f.callback=j:f===t(c)&&r(c),k(z)}else r(c);f=t(c)}if(f!==null)var J=!0;else{var te=t(d);te!==null&&G(M,te.startTime-z),J=!1}return J}finally{f=null,m=W,y=!1}}var O=!1,D=null,I=-1,L=5,A=-1;function V(){return!(n.unstable_now()-A<L)}function F(){if(D!==null){var $=n.unstable_now();A=$;var z=!0;try{z=D(!0,$)}finally{z?U():(O=!1,D=null)}}else O=!1}var U;if(typeof T=="function")U=function(){T(F)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,q=B.port2;B.port1.onmessage=F,U=function(){q.postMessage(null)}}else U=function(){S(F,0)};function K($){D=$,O||(O=!0,U())}function G($,z){I=S(function(){$(n.unstable_now())},z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_continueExecution=function(){v||y||(v=!0,K(N))},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function($){switch(m){case 1:case 2:case 3:var z=3;break;default:z=m}var W=m;m=z;try{return $()}finally{m=W}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function($,z){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var W=m;m=$;try{return z()}finally{m=W}},n.unstable_scheduleCallback=function($,z,W){var P=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?P+W:P):W=P,$){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=W+j,$={id:h++,callback:z,priorityLevel:$,startTime:W,expirationTime:j,sortIndex:-1},W>P?($.sortIndex=W,e(d,$),t(c)===null&&$===t(d)&&(w?(C(I),I=-1):w=!0,G(M,W-P))):($.sortIndex=j,e(c,$),v||y||(v=!0,K(N))),$},n.unstable_shouldYield=V,n.unstable_wrapCallback=function($){var z=m;return function(){var W=m;m=z;try{return $.apply(this,arguments)}finally{m=W}}}}(Zg)),Zg}var s_;function TL(){return s_||(s_=1,Jg.exports=_L()),Jg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i_;function kL(){if(i_)return Jn;i_=1;var n=Il(),e=TL();function t(l){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+l,p=1;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function i(l,u){o(l,u),o(l+"Capture",u)}function o(l,u){for(s[l]=u,l=0;l<u.length;l++)r.add(u[l])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},f={};function m(l){return c.call(f,l)?!0:c.call(h,l)?!1:d.test(l)?f[l]=!0:(h[l]=!0,!1)}function y(l,u,p,x){if(p!==null&&p.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return x?!1:p!==null?!p.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function v(l,u,p,x){if(u===null||typeof u>"u"||y(l,u,p,x))return!0;if(x)return!1;if(p!==null)switch(p.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function w(l,u,p,x,_,E,R){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=x,this.attributeNamespace=_,this.mustUseProperty=p,this.propertyName=l,this.type=u,this.sanitizeURL=E,this.removeEmptyString=R}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){S[l]=new w(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var u=l[0];S[u]=new w(u,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){S[l]=new w(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){S[l]=new w(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){S[l]=new w(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){S[l]=new w(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){S[l]=new w(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){S[l]=new w(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){S[l]=new w(l,5,!1,l.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function T(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var u=l.replace(C,T);S[u]=new w(u,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var u=l.replace(C,T);S[u]=new w(u,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var u=l.replace(C,T);S[u]=new w(u,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){S[l]=new w(l,1,!1,l.toLowerCase(),null,!1,!1)}),S.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){S[l]=new w(l,1,!1,l.toLowerCase(),null,!0,!0)});function k(l,u,p,x){var _=S.hasOwnProperty(u)?S[u]:null;(_!==null?_.type!==0:x||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(v(u,p,_,x)&&(p=null),x||_===null?m(u)&&(p===null?l.removeAttribute(u):l.setAttribute(u,""+p)):_.mustUseProperty?l[_.propertyName]=p===null?_.type===3?!1:"":p:(u=_.attributeName,x=_.attributeNamespace,p===null?l.removeAttribute(u):(_=_.type,p=_===3||_===4&&p===!0?"":""+p,x?l.setAttributeNS(x,u,p):l.setAttribute(u,p))))}var M=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),O=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),V=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),G=Symbol.for("react.offscreen"),$=Symbol.iterator;function z(l){return l===null||typeof l!="object"?null:(l=$&&l[$]||l["@@iterator"],typeof l=="function"?l:null)}var W=Object.assign,P;function j(l){if(P===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);P=u&&u[1]||""}return`
`+P+l}var J=!1;function te(l,u){if(!l||J)return"";J=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(le){var x=le}Reflect.construct(l,[],u)}else{try{u.call()}catch(le){x=le}l.call(u.prototype)}else{try{throw Error()}catch(le){x=le}l()}}catch(le){if(le&&x&&typeof le.stack=="string"){for(var _=le.stack.split(`
`),E=x.stack.split(`
`),R=_.length-1,H=E.length-1;1<=R&&0<=H&&_[R]!==E[H];)H--;for(;1<=R&&0<=H;R--,H--)if(_[R]!==E[H]){if(R!==1||H!==1)do if(R--,H--,0>H||_[R]!==E[H]){var Z=`
`+_[R].replace(" at new "," at ");return l.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",l.displayName)),Z}while(1<=R&&0<=H);break}}}finally{J=!1,Error.prepareStackTrace=p}return(l=l?l.displayName||l.name:"")?j(l):""}function ne(l){switch(l.tag){case 5:return j(l.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return l=te(l.type,!1),l;case 11:return l=te(l.type.render,!1),l;case 1:return l=te(l.type,!0),l;default:return""}}function ue(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case D:return"Fragment";case O:return"Portal";case L:return"Profiler";case I:return"StrictMode";case U:return"Suspense";case B:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case V:return(l.displayName||"Context")+".Consumer";case A:return(l._context.displayName||"Context")+".Provider";case F:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case q:return u=l.displayName||null,u!==null?u:ue(l.type)||"Memo";case K:u=l._payload,l=l._init;try{return ue(l(u))}catch{}}return null}function ce(l){var u=l.type;switch(l.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=u.render,l=l.displayName||l.name||"",u.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ue(u);case 8:return u===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function ae(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function xe(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function ke(l){var u=xe(l)?"checked":"value",p=Object.getOwnPropertyDescriptor(l.constructor.prototype,u),x=""+l[u];if(!l.hasOwnProperty(u)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var _=p.get,E=p.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return _.call(this)},set:function(R){x=""+R,E.call(this,R)}}),Object.defineProperty(l,u,{enumerable:p.enumerable}),{getValue:function(){return x},setValue:function(R){x=""+R},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function pe(l){l._valueTracker||(l._valueTracker=ke(l))}function ye(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var p=u.getValue(),x="";return l&&(x=xe(l)?l.checked?"true":"false":l.value),l=x,l!==p?(u.setValue(l),!0):!1}function re(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function Q(l,u){var p=u.checked;return W({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??l._wrapperState.initialChecked})}function X(l,u){var p=u.defaultValue==null?"":u.defaultValue,x=u.checked!=null?u.checked:u.defaultChecked;p=ae(u.value!=null?u.value:p),l._wrapperState={initialChecked:x,initialValue:p,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function Y(l,u){u=u.checked,u!=null&&k(l,"checked",u,!1)}function fe(l,u){Y(l,u);var p=ae(u.value),x=u.type;if(p!=null)x==="number"?(p===0&&l.value===""||l.value!=p)&&(l.value=""+p):l.value!==""+p&&(l.value=""+p);else if(x==="submit"||x==="reset"){l.removeAttribute("value");return}u.hasOwnProperty("value")?se(l,u.type,p):u.hasOwnProperty("defaultValue")&&se(l,u.type,ae(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(l.defaultChecked=!!u.defaultChecked)}function _e(l,u,p){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var x=u.type;if(!(x!=="submit"&&x!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+l._wrapperState.initialValue,p||u===l.value||(l.value=u),l.defaultValue=u}p=l.name,p!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,p!==""&&(l.name=p)}function se(l,u,p){(u!=="number"||re(l.ownerDocument)!==l)&&(p==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+p&&(l.defaultValue=""+p))}var ge=Array.isArray;function he(l,u,p,x){if(l=l.options,u){u={};for(var _=0;_<p.length;_++)u["$"+p[_]]=!0;for(p=0;p<l.length;p++)_=u.hasOwnProperty("$"+l[p].value),l[p].selected!==_&&(l[p].selected=_),_&&x&&(l[p].defaultSelected=!0)}else{for(p=""+ae(p),u=null,_=0;_<l.length;_++){if(l[_].value===p){l[_].selected=!0,x&&(l[_].defaultSelected=!0);return}u!==null||l[_].disabled||(u=l[_])}u!==null&&(u.selected=!0)}}function je(l,u){if(u.dangerouslySetInnerHTML!=null)throw Error(t(91));return W({},u,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function Je(l,u){var p=u.value;if(p==null){if(p=u.children,u=u.defaultValue,p!=null){if(u!=null)throw Error(t(92));if(ge(p)){if(1<p.length)throw Error(t(93));p=p[0]}u=p}u==null&&(u=""),p=u}l._wrapperState={initialValue:ae(p)}}function mt(l,u){var p=ae(u.value),x=ae(u.defaultValue);p!=null&&(p=""+p,p!==l.value&&(l.value=p),u.defaultValue==null&&l.defaultValue!==p&&(l.defaultValue=p)),x!=null&&(l.defaultValue=""+x)}function Qt(l){var u=l.textContent;u===l._wrapperState.initialValue&&u!==""&&u!==null&&(l.value=u)}function Lr(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tt(l,u){return l==null||l==="http://www.w3.org/1999/xhtml"?Lr(u):l==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var Yt,da=function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,p,x,_){MSApp.execUnsafeLocalFunction(function(){return l(u,p,x,_)})}:l}(function(l,u){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=u;else{for(Yt=Yt||document.createElement("div"),Yt.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=Yt.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;u.firstChild;)l.appendChild(u.firstChild)}});function di(l,u){if(u){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=u;return}}l.textContent=u}var Is={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lm=["Webkit","ms","Moz","O"];Object.keys(Is).forEach(function(l){lm.forEach(function(u){u=u+l.charAt(0).toUpperCase()+l.substring(1),Is[u]=Is[l]})});function vr(l,u,p){return u==null||typeof u=="boolean"||u===""?"":p||typeof u!="number"||u===0||Is.hasOwnProperty(l)&&Is[l]?(""+u).trim():u+"px"}function Lt(l,u){l=l.style;for(var p in u)if(u.hasOwnProperty(p)){var x=p.indexOf("--")===0,_=vr(p,u[p],x);p==="float"&&(p="cssFloat"),x?l.setProperty(p,_):l[p]=_}}var cm=W({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tc(l,u){if(u){if(cm[l]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(t(137,l));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(t(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(t(61))}if(u.style!=null&&typeof u.style!="object")throw Error(t(62))}}function ha(l,u){if(l.indexOf("-")===-1)return typeof u.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hi=null;function js(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var cs=null,xr=null,dn=null;function md(l){if(l=_c(l)){if(typeof cs!="function")throw Error(t(280));var u=l.stateNode;u&&(u=Fd(u),cs(l.stateNode,l.type,u))}}function nc(l){xr?dn?dn.push(l):dn=[l]:xr=l}function vb(){if(xr){var l=xr,u=dn;if(dn=xr=null,md(l),u)for(l=0;l<u.length;l++)md(u[l])}}function xb(l,u){return l(u)}function wb(){}var um=!1;function bb(l,u,p){if(um)return l(u,p);um=!0;try{return xb(l,u,p)}finally{um=!1,(xr!==null||dn!==null)&&(wb(),vb())}}function rc(l,u){var p=l.stateNode;if(p===null)return null;var x=Fd(p);if(x===null)return null;p=x[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(l=l.type,x=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!x;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(t(231,u,typeof p));return p}var dm=!1;if(a)try{var sc={};Object.defineProperty(sc,"passive",{get:function(){dm=!0}}),window.addEventListener("test",sc,sc),window.removeEventListener("test",sc,sc)}catch{dm=!1}function _j(l,u,p,x,_,E,R,H,Z){var le=Array.prototype.slice.call(arguments,3);try{u.apply(p,le)}catch(we){this.onError(we)}}var ic=!1,gd=null,yd=!1,hm=null,Tj={onError:function(l){ic=!0,gd=l}};function kj(l,u,p,x,_,E,R,H,Z){ic=!1,gd=null,_j.apply(Tj,arguments)}function Ej(l,u,p,x,_,E,R,H,Z){if(kj.apply(this,arguments),ic){if(ic){var le=gd;ic=!1,gd=null}else throw Error(t(198));yd||(yd=!0,hm=le)}}function wo(l){var u=l,p=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(p=u.return),l=u.return;while(l)}return u.tag===3?p:null}function Sb(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function Cb(l){if(wo(l)!==l)throw Error(t(188))}function Nj(l){var u=l.alternate;if(!u){if(u=wo(l),u===null)throw Error(t(188));return u!==l?null:l}for(var p=l,x=u;;){var _=p.return;if(_===null)break;var E=_.alternate;if(E===null){if(x=_.return,x!==null){p=x;continue}break}if(_.child===E.child){for(E=_.child;E;){if(E===p)return Cb(_),l;if(E===x)return Cb(_),u;E=E.sibling}throw Error(t(188))}if(p.return!==x.return)p=_,x=E;else{for(var R=!1,H=_.child;H;){if(H===p){R=!0,p=_,x=E;break}if(H===x){R=!0,x=_,p=E;break}H=H.sibling}if(!R){for(H=E.child;H;){if(H===p){R=!0,p=E,x=_;break}if(H===x){R=!0,x=E,p=_;break}H=H.sibling}if(!R)throw Error(t(189))}}if(p.alternate!==x)throw Error(t(190))}if(p.tag!==3)throw Error(t(188));return p.stateNode.current===p?l:u}function _b(l){return l=Nj(l),l!==null?Tb(l):null}function Tb(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var u=Tb(l);if(u!==null)return u;l=l.sibling}return null}var kb=e.unstable_scheduleCallback,Eb=e.unstable_cancelCallback,Aj=e.unstable_shouldYield,Mj=e.unstable_requestPaint,Ft=e.unstable_now,Oj=e.unstable_getCurrentPriorityLevel,fm=e.unstable_ImmediatePriority,Nb=e.unstable_UserBlockingPriority,vd=e.unstable_NormalPriority,Pj=e.unstable_LowPriority,Ab=e.unstable_IdlePriority,xd=null,us=null;function Dj(l){if(us&&typeof us.onCommitFiberRoot=="function")try{us.onCommitFiberRoot(xd,l,void 0,(l.current.flags&128)===128)}catch{}}var Fr=Math.clz32?Math.clz32:jj,Rj=Math.log,Ij=Math.LN2;function jj(l){return l>>>=0,l===0?32:31-(Rj(l)/Ij|0)|0}var wd=64,bd=4194304;function oc(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function Sd(l,u){var p=l.pendingLanes;if(p===0)return 0;var x=0,_=l.suspendedLanes,E=l.pingedLanes,R=p&268435455;if(R!==0){var H=R&~_;H!==0?x=oc(H):(E&=R,E!==0&&(x=oc(E)))}else R=p&~_,R!==0?x=oc(R):E!==0&&(x=oc(E));if(x===0)return 0;if(u!==0&&u!==x&&(u&_)===0&&(_=x&-x,E=u&-u,_>=E||_===16&&(E&4194240)!==0))return u;if((x&4)!==0&&(x|=p&16),u=l.entangledLanes,u!==0)for(l=l.entanglements,u&=x;0<u;)p=31-Fr(u),_=1<<p,x|=l[p],u&=~_;return x}function Lj(l,u){switch(l){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fj(l,u){for(var p=l.suspendedLanes,x=l.pingedLanes,_=l.expirationTimes,E=l.pendingLanes;0<E;){var R=31-Fr(E),H=1<<R,Z=_[R];Z===-1?((H&p)===0||(H&x)!==0)&&(_[R]=Lj(H,u)):Z<=u&&(l.expiredLanes|=H),E&=~H}}function pm(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function Mb(){var l=wd;return wd<<=1,(wd&4194240)===0&&(wd=64),l}function mm(l){for(var u=[],p=0;31>p;p++)u.push(l);return u}function ac(l,u,p){l.pendingLanes|=u,u!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,u=31-Fr(u),l[u]=p}function Vj(l,u){var p=l.pendingLanes&~u;l.pendingLanes=u,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=u,l.mutableReadLanes&=u,l.entangledLanes&=u,u=l.entanglements;var x=l.eventTimes;for(l=l.expirationTimes;0<p;){var _=31-Fr(p),E=1<<_;u[_]=0,x[_]=-1,l[_]=-1,p&=~E}}function gm(l,u){var p=l.entangledLanes|=u;for(l=l.entanglements;p;){var x=31-Fr(p),_=1<<x;_&u|l[x]&u&&(l[x]|=u),p&=~_}}var lt=0;function Ob(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var Pb,ym,Db,Rb,Ib,vm=!1,Cd=[],fi=null,pi=null,mi=null,lc=new Map,cc=new Map,gi=[],Bj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jb(l,u){switch(l){case"focusin":case"focusout":fi=null;break;case"dragenter":case"dragleave":pi=null;break;case"mouseover":case"mouseout":mi=null;break;case"pointerover":case"pointerout":lc.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":cc.delete(u.pointerId)}}function uc(l,u,p,x,_,E){return l===null||l.nativeEvent!==E?(l={blockedOn:u,domEventName:p,eventSystemFlags:x,nativeEvent:E,targetContainers:[_]},u!==null&&(u=_c(u),u!==null&&ym(u)),l):(l.eventSystemFlags|=x,u=l.targetContainers,_!==null&&u.indexOf(_)===-1&&u.push(_),l)}function zj(l,u,p,x,_){switch(u){case"focusin":return fi=uc(fi,l,u,p,x,_),!0;case"dragenter":return pi=uc(pi,l,u,p,x,_),!0;case"mouseover":return mi=uc(mi,l,u,p,x,_),!0;case"pointerover":var E=_.pointerId;return lc.set(E,uc(lc.get(E)||null,l,u,p,x,_)),!0;case"gotpointercapture":return E=_.pointerId,cc.set(E,uc(cc.get(E)||null,l,u,p,x,_)),!0}return!1}function Lb(l){var u=bo(l.target);if(u!==null){var p=wo(u);if(p!==null){if(u=p.tag,u===13){if(u=Sb(p),u!==null){l.blockedOn=u,Ib(l.priority,function(){Db(p)});return}}else if(u===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function _d(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var p=wm(l.domEventName,l.eventSystemFlags,u[0],l.nativeEvent);if(p===null){p=l.nativeEvent;var x=new p.constructor(p.type,p);hi=x,p.target.dispatchEvent(x),hi=null}else return u=_c(p),u!==null&&ym(u),l.blockedOn=p,!1;u.shift()}return!0}function Fb(l,u,p){_d(l)&&p.delete(u)}function Wj(){vm=!1,fi!==null&&_d(fi)&&(fi=null),pi!==null&&_d(pi)&&(pi=null),mi!==null&&_d(mi)&&(mi=null),lc.forEach(Fb),cc.forEach(Fb)}function dc(l,u){l.blockedOn===u&&(l.blockedOn=null,vm||(vm=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Wj)))}function hc(l){function u(_){return dc(_,l)}if(0<Cd.length){dc(Cd[0],l);for(var p=1;p<Cd.length;p++){var x=Cd[p];x.blockedOn===l&&(x.blockedOn=null)}}for(fi!==null&&dc(fi,l),pi!==null&&dc(pi,l),mi!==null&&dc(mi,l),lc.forEach(u),cc.forEach(u),p=0;p<gi.length;p++)x=gi[p],x.blockedOn===l&&(x.blockedOn=null);for(;0<gi.length&&(p=gi[0],p.blockedOn===null);)Lb(p),p.blockedOn===null&&gi.shift()}var fa=M.ReactCurrentBatchConfig,Td=!0;function $j(l,u,p,x){var _=lt,E=fa.transition;fa.transition=null;try{lt=1,xm(l,u,p,x)}finally{lt=_,fa.transition=E}}function Hj(l,u,p,x){var _=lt,E=fa.transition;fa.transition=null;try{lt=4,xm(l,u,p,x)}finally{lt=_,fa.transition=E}}function xm(l,u,p,x){if(Td){var _=wm(l,u,p,x);if(_===null)Lm(l,u,x,kd,p),jb(l,x);else if(zj(_,l,u,p,x))x.stopPropagation();else if(jb(l,x),u&4&&-1<Bj.indexOf(l)){for(;_!==null;){var E=_c(_);if(E!==null&&Pb(E),E=wm(l,u,p,x),E===null&&Lm(l,u,x,kd,p),E===_)break;_=E}_!==null&&x.stopPropagation()}else Lm(l,u,x,null,p)}}var kd=null;function wm(l,u,p,x){if(kd=null,l=js(x),l=bo(l),l!==null)if(u=wo(l),u===null)l=null;else if(p=u.tag,p===13){if(l=Sb(u),l!==null)return l;l=null}else if(p===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null);return kd=l,null}function Vb(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Oj()){case fm:return 1;case Nb:return 4;case vd:case Pj:return 16;case Ab:return 536870912;default:return 16}default:return 16}}var yi=null,bm=null,Ed=null;function Bb(){if(Ed)return Ed;var l,u=bm,p=u.length,x,_="value"in yi?yi.value:yi.textContent,E=_.length;for(l=0;l<p&&u[l]===_[l];l++);var R=p-l;for(x=1;x<=R&&u[p-x]===_[E-x];x++);return Ed=_.slice(l,1<x?1-x:void 0)}function Nd(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function Ad(){return!0}function zb(){return!1}function rr(l){function u(p,x,_,E,R){this._reactName=p,this._targetInst=_,this.type=x,this.nativeEvent=E,this.target=R,this.currentTarget=null;for(var H in l)l.hasOwnProperty(H)&&(p=l[H],this[H]=p?p(E):E[H]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Ad:zb,this.isPropagationStopped=zb,this}return W(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Ad)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Ad)},persist:function(){},isPersistent:Ad}),u}var pa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sm=rr(pa),fc=W({},pa,{view:0,detail:0}),Uj=rr(fc),Cm,_m,pc,Md=W({},fc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:km,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==pc&&(pc&&l.type==="mousemove"?(Cm=l.screenX-pc.screenX,_m=l.screenY-pc.screenY):_m=Cm=0,pc=l),Cm)},movementY:function(l){return"movementY"in l?l.movementY:_m}}),Wb=rr(Md),qj=W({},Md,{dataTransfer:0}),Gj=rr(qj),Kj=W({},fc,{relatedTarget:0}),Tm=rr(Kj),Yj=W({},pa,{animationName:0,elapsedTime:0,pseudoElement:0}),Xj=rr(Yj),Jj=W({},pa,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Zj=rr(Jj),Qj=W({},pa,{data:0}),$b=rr(Qj),e2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},n2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r2(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=n2[l])?!!u[l]:!1}function km(){return r2}var s2=W({},fc,{key:function(l){if(l.key){var u=e2[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=Nd(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?t2[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:km,charCode:function(l){return l.type==="keypress"?Nd(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Nd(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),i2=rr(s2),o2=W({},Md,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hb=rr(o2),a2=W({},fc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:km}),l2=rr(a2),c2=W({},pa,{propertyName:0,elapsedTime:0,pseudoElement:0}),u2=rr(c2),d2=W({},Md,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),h2=rr(d2),f2=[9,13,27,32],Em=a&&"CompositionEvent"in window,mc=null;a&&"documentMode"in document&&(mc=document.documentMode);var p2=a&&"TextEvent"in window&&!mc,Ub=a&&(!Em||mc&&8<mc&&11>=mc),qb=" ",Gb=!1;function Kb(l,u){switch(l){case"keyup":return f2.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yb(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var ma=!1;function m2(l,u){switch(l){case"compositionend":return Yb(u);case"keypress":return u.which!==32?null:(Gb=!0,qb);case"textInput":return l=u.data,l===qb&&Gb?null:l;default:return null}}function g2(l,u){if(ma)return l==="compositionend"||!Em&&Kb(l,u)?(l=Bb(),Ed=bm=yi=null,ma=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Ub&&u.locale!=="ko"?null:u.data;default:return null}}var y2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xb(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!y2[l.type]:u==="textarea"}function Jb(l,u,p,x){nc(x),u=Id(u,"onChange"),0<u.length&&(p=new Sm("onChange","change",null,p,x),l.push({event:p,listeners:u}))}var gc=null,yc=null;function v2(l){mS(l,0)}function Od(l){var u=wa(l);if(ye(u))return l}function x2(l,u){if(l==="change")return u}var Zb=!1;if(a){var Nm;if(a){var Am="oninput"in document;if(!Am){var Qb=document.createElement("div");Qb.setAttribute("oninput","return;"),Am=typeof Qb.oninput=="function"}Nm=Am}else Nm=!1;Zb=Nm&&(!document.documentMode||9<document.documentMode)}function eS(){gc&&(gc.detachEvent("onpropertychange",tS),yc=gc=null)}function tS(l){if(l.propertyName==="value"&&Od(yc)){var u=[];Jb(u,yc,l,js(l)),bb(v2,u)}}function w2(l,u,p){l==="focusin"?(eS(),gc=u,yc=p,gc.attachEvent("onpropertychange",tS)):l==="focusout"&&eS()}function b2(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Od(yc)}function S2(l,u){if(l==="click")return Od(u)}function C2(l,u){if(l==="input"||l==="change")return Od(u)}function _2(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var Vr=typeof Object.is=="function"?Object.is:_2;function vc(l,u){if(Vr(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var p=Object.keys(l),x=Object.keys(u);if(p.length!==x.length)return!1;for(x=0;x<p.length;x++){var _=p[x];if(!c.call(u,_)||!Vr(l[_],u[_]))return!1}return!0}function nS(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function rS(l,u){var p=nS(l);l=0;for(var x;p;){if(p.nodeType===3){if(x=l+p.textContent.length,l<=u&&x>=u)return{node:p,offset:u-l};l=x}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=nS(p)}}function sS(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?sS(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function iS(){for(var l=window,u=re();u instanceof l.HTMLIFrameElement;){try{var p=typeof u.contentWindow.location.href=="string"}catch{p=!1}if(p)l=u.contentWindow;else break;u=re(l.document)}return u}function Mm(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}function T2(l){var u=iS(),p=l.focusedElem,x=l.selectionRange;if(u!==p&&p&&p.ownerDocument&&sS(p.ownerDocument.documentElement,p)){if(x!==null&&Mm(p)){if(u=x.start,l=x.end,l===void 0&&(l=u),"selectionStart"in p)p.selectionStart=u,p.selectionEnd=Math.min(l,p.value.length);else if(l=(u=p.ownerDocument||document)&&u.defaultView||window,l.getSelection){l=l.getSelection();var _=p.textContent.length,E=Math.min(x.start,_);x=x.end===void 0?E:Math.min(x.end,_),!l.extend&&E>x&&(_=x,x=E,E=_),_=rS(p,E);var R=rS(p,x);_&&R&&(l.rangeCount!==1||l.anchorNode!==_.node||l.anchorOffset!==_.offset||l.focusNode!==R.node||l.focusOffset!==R.offset)&&(u=u.createRange(),u.setStart(_.node,_.offset),l.removeAllRanges(),E>x?(l.addRange(u),l.extend(R.node,R.offset)):(u.setEnd(R.node,R.offset),l.addRange(u)))}}for(u=[],l=p;l=l.parentNode;)l.nodeType===1&&u.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<u.length;p++)l=u[p],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var k2=a&&"documentMode"in document&&11>=document.documentMode,ga=null,Om=null,xc=null,Pm=!1;function oS(l,u,p){var x=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Pm||ga==null||ga!==re(x)||(x=ga,"selectionStart"in x&&Mm(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),xc&&vc(xc,x)||(xc=x,x=Id(Om,"onSelect"),0<x.length&&(u=new Sm("onSelect","select",null,u,p),l.push({event:u,listeners:x}),u.target=ga)))}function Pd(l,u){var p={};return p[l.toLowerCase()]=u.toLowerCase(),p["Webkit"+l]="webkit"+u,p["Moz"+l]="moz"+u,p}var ya={animationend:Pd("Animation","AnimationEnd"),animationiteration:Pd("Animation","AnimationIteration"),animationstart:Pd("Animation","AnimationStart"),transitionend:Pd("Transition","TransitionEnd")},Dm={},aS={};a&&(aS=document.createElement("div").style,"AnimationEvent"in window||(delete ya.animationend.animation,delete ya.animationiteration.animation,delete ya.animationstart.animation),"TransitionEvent"in window||delete ya.transitionend.transition);function Dd(l){if(Dm[l])return Dm[l];if(!ya[l])return l;var u=ya[l],p;for(p in u)if(u.hasOwnProperty(p)&&p in aS)return Dm[l]=u[p];return l}var lS=Dd("animationend"),cS=Dd("animationiteration"),uS=Dd("animationstart"),dS=Dd("transitionend"),hS=new Map,fS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vi(l,u){hS.set(l,u),i(u,[l])}for(var Rm=0;Rm<fS.length;Rm++){var Im=fS[Rm],E2=Im.toLowerCase(),N2=Im[0].toUpperCase()+Im.slice(1);vi(E2,"on"+N2)}vi(lS,"onAnimationEnd"),vi(cS,"onAnimationIteration"),vi(uS,"onAnimationStart"),vi("dblclick","onDoubleClick"),vi("focusin","onFocus"),vi("focusout","onBlur"),vi(dS,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),A2=new Set("cancel close invalid load scroll toggle".split(" ").concat(wc));function pS(l,u,p){var x=l.type||"unknown-event";l.currentTarget=p,Ej(x,u,void 0,l),l.currentTarget=null}function mS(l,u){u=(u&4)!==0;for(var p=0;p<l.length;p++){var x=l[p],_=x.event;x=x.listeners;e:{var E=void 0;if(u)for(var R=x.length-1;0<=R;R--){var H=x[R],Z=H.instance,le=H.currentTarget;if(H=H.listener,Z!==E&&_.isPropagationStopped())break e;pS(_,H,le),E=Z}else for(R=0;R<x.length;R++){if(H=x[R],Z=H.instance,le=H.currentTarget,H=H.listener,Z!==E&&_.isPropagationStopped())break e;pS(_,H,le),E=Z}}}if(yd)throw l=hm,yd=!1,hm=null,l}function xt(l,u){var p=u[$m];p===void 0&&(p=u[$m]=new Set);var x=l+"__bubble";p.has(x)||(gS(u,l,2,!1),p.add(x))}function jm(l,u,p){var x=0;u&&(x|=4),gS(p,l,x,u)}var Rd="_reactListening"+Math.random().toString(36).slice(2);function bc(l){if(!l[Rd]){l[Rd]=!0,r.forEach(function(p){p!=="selectionchange"&&(A2.has(p)||jm(p,!1,l),jm(p,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[Rd]||(u[Rd]=!0,jm("selectionchange",!1,u))}}function gS(l,u,p,x){switch(Vb(u)){case 1:var _=$j;break;case 4:_=Hj;break;default:_=xm}p=_.bind(null,u,p,l),_=void 0,!dm||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(_=!0),x?_!==void 0?l.addEventListener(u,p,{capture:!0,passive:_}):l.addEventListener(u,p,!0):_!==void 0?l.addEventListener(u,p,{passive:_}):l.addEventListener(u,p,!1)}function Lm(l,u,p,x,_){var E=x;if((u&1)===0&&(u&2)===0&&x!==null)e:for(;;){if(x===null)return;var R=x.tag;if(R===3||R===4){var H=x.stateNode.containerInfo;if(H===_||H.nodeType===8&&H.parentNode===_)break;if(R===4)for(R=x.return;R!==null;){var Z=R.tag;if((Z===3||Z===4)&&(Z=R.stateNode.containerInfo,Z===_||Z.nodeType===8&&Z.parentNode===_))return;R=R.return}for(;H!==null;){if(R=bo(H),R===null)return;if(Z=R.tag,Z===5||Z===6){x=E=R;continue e}H=H.parentNode}}x=x.return}bb(function(){var le=E,we=js(p),Se=[];e:{var ve=hS.get(l);if(ve!==void 0){var Ne=Sm,Me=l;switch(l){case"keypress":if(Nd(p)===0)break e;case"keydown":case"keyup":Ne=i2;break;case"focusin":Me="focus",Ne=Tm;break;case"focusout":Me="blur",Ne=Tm;break;case"beforeblur":case"afterblur":Ne=Tm;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ne=Wb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ne=Gj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ne=l2;break;case lS:case cS:case uS:Ne=Xj;break;case dS:Ne=u2;break;case"scroll":Ne=Uj;break;case"wheel":Ne=h2;break;case"copy":case"cut":case"paste":Ne=Zj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ne=Hb}var De=(u&4)!==0,Vt=!De&&l==="scroll",ie=De?ve!==null?ve+"Capture":null:ve;De=[];for(var ee=le,oe;ee!==null;){oe=ee;var Ce=oe.stateNode;if(oe.tag===5&&Ce!==null&&(oe=Ce,ie!==null&&(Ce=rc(ee,ie),Ce!=null&&De.push(Sc(ee,Ce,oe)))),Vt)break;ee=ee.return}0<De.length&&(ve=new Ne(ve,Me,null,p,we),Se.push({event:ve,listeners:De}))}}if((u&7)===0){e:{if(ve=l==="mouseover"||l==="pointerover",Ne=l==="mouseout"||l==="pointerout",ve&&p!==hi&&(Me=p.relatedTarget||p.fromElement)&&(bo(Me)||Me[Ls]))break e;if((Ne||ve)&&(ve=we.window===we?we:(ve=we.ownerDocument)?ve.defaultView||ve.parentWindow:window,Ne?(Me=p.relatedTarget||p.toElement,Ne=le,Me=Me?bo(Me):null,Me!==null&&(Vt=wo(Me),Me!==Vt||Me.tag!==5&&Me.tag!==6)&&(Me=null)):(Ne=null,Me=le),Ne!==Me)){if(De=Wb,Ce="onMouseLeave",ie="onMouseEnter",ee="mouse",(l==="pointerout"||l==="pointerover")&&(De=Hb,Ce="onPointerLeave",ie="onPointerEnter",ee="pointer"),Vt=Ne==null?ve:wa(Ne),oe=Me==null?ve:wa(Me),ve=new De(Ce,ee+"leave",Ne,p,we),ve.target=Vt,ve.relatedTarget=oe,Ce=null,bo(we)===le&&(De=new De(ie,ee+"enter",Me,p,we),De.target=oe,De.relatedTarget=Vt,Ce=De),Vt=Ce,Ne&&Me)t:{for(De=Ne,ie=Me,ee=0,oe=De;oe;oe=va(oe))ee++;for(oe=0,Ce=ie;Ce;Ce=va(Ce))oe++;for(;0<ee-oe;)De=va(De),ee--;for(;0<oe-ee;)ie=va(ie),oe--;for(;ee--;){if(De===ie||ie!==null&&De===ie.alternate)break t;De=va(De),ie=va(ie)}De=null}else De=null;Ne!==null&&yS(Se,ve,Ne,De,!1),Me!==null&&Vt!==null&&yS(Se,Vt,Me,De,!0)}}e:{if(ve=le?wa(le):window,Ne=ve.nodeName&&ve.nodeName.toLowerCase(),Ne==="select"||Ne==="input"&&ve.type==="file")var Ie=x2;else if(Xb(ve))if(Zb)Ie=C2;else{Ie=b2;var Ve=w2}else(Ne=ve.nodeName)&&Ne.toLowerCase()==="input"&&(ve.type==="checkbox"||ve.type==="radio")&&(Ie=S2);if(Ie&&(Ie=Ie(l,le))){Jb(Se,Ie,p,we);break e}Ve&&Ve(l,ve,le),l==="focusout"&&(Ve=ve._wrapperState)&&Ve.controlled&&ve.type==="number"&&se(ve,"number",ve.value)}switch(Ve=le?wa(le):window,l){case"focusin":(Xb(Ve)||Ve.contentEditable==="true")&&(ga=Ve,Om=le,xc=null);break;case"focusout":xc=Om=ga=null;break;case"mousedown":Pm=!0;break;case"contextmenu":case"mouseup":case"dragend":Pm=!1,oS(Se,p,we);break;case"selectionchange":if(k2)break;case"keydown":case"keyup":oS(Se,p,we)}var Be;if(Em)e:{switch(l){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else ma?Kb(l,p)&&($e="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&($e="onCompositionStart");$e&&(Ub&&p.locale!=="ko"&&(ma||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&ma&&(Be=Bb()):(yi=we,bm="value"in yi?yi.value:yi.textContent,ma=!0)),Ve=Id(le,$e),0<Ve.length&&($e=new $b($e,l,null,p,we),Se.push({event:$e,listeners:Ve}),Be?$e.data=Be:(Be=Yb(p),Be!==null&&($e.data=Be)))),(Be=p2?m2(l,p):g2(l,p))&&(le=Id(le,"onBeforeInput"),0<le.length&&(we=new $b("onBeforeInput","beforeinput",null,p,we),Se.push({event:we,listeners:le}),we.data=Be))}mS(Se,u)})}function Sc(l,u,p){return{instance:l,listener:u,currentTarget:p}}function Id(l,u){for(var p=u+"Capture",x=[];l!==null;){var _=l,E=_.stateNode;_.tag===5&&E!==null&&(_=E,E=rc(l,p),E!=null&&x.unshift(Sc(l,E,_)),E=rc(l,u),E!=null&&x.push(Sc(l,E,_))),l=l.return}return x}function va(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function yS(l,u,p,x,_){for(var E=u._reactName,R=[];p!==null&&p!==x;){var H=p,Z=H.alternate,le=H.stateNode;if(Z!==null&&Z===x)break;H.tag===5&&le!==null&&(H=le,_?(Z=rc(p,E),Z!=null&&R.unshift(Sc(p,Z,H))):_||(Z=rc(p,E),Z!=null&&R.push(Sc(p,Z,H)))),p=p.return}R.length!==0&&l.push({event:u,listeners:R})}var M2=/\r\n?/g,O2=/\u0000|\uFFFD/g;function vS(l){return(typeof l=="string"?l:""+l).replace(M2,`
`).replace(O2,"")}function jd(l,u,p){if(u=vS(u),vS(l)!==u&&p)throw Error(t(425))}function Ld(){}var Fm=null,Vm=null;function Bm(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var zm=typeof setTimeout=="function"?setTimeout:void 0,P2=typeof clearTimeout=="function"?clearTimeout:void 0,xS=typeof Promise=="function"?Promise:void 0,D2=typeof queueMicrotask=="function"?queueMicrotask:typeof xS<"u"?function(l){return xS.resolve(null).then(l).catch(R2)}:zm;function R2(l){setTimeout(function(){throw l})}function Wm(l,u){var p=u,x=0;do{var _=p.nextSibling;if(l.removeChild(p),_&&_.nodeType===8)if(p=_.data,p==="/$"){if(x===0){l.removeChild(_),hc(u);return}x--}else p!=="$"&&p!=="$?"&&p!=="$!"||x++;p=_}while(p);hc(u)}function xi(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return l}function wS(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"){if(u===0)return l;u--}else p==="/$"&&u++}l=l.previousSibling}return null}var xa=Math.random().toString(36).slice(2),ds="__reactFiber$"+xa,Cc="__reactProps$"+xa,Ls="__reactContainer$"+xa,$m="__reactEvents$"+xa,I2="__reactListeners$"+xa,j2="__reactHandles$"+xa;function bo(l){var u=l[ds];if(u)return u;for(var p=l.parentNode;p;){if(u=p[Ls]||p[ds]){if(p=u.alternate,u.child!==null||p!==null&&p.child!==null)for(l=wS(l);l!==null;){if(p=l[ds])return p;l=wS(l)}return u}l=p,p=l.parentNode}return null}function _c(l){return l=l[ds]||l[Ls],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function wa(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(t(33))}function Fd(l){return l[Cc]||null}var Hm=[],ba=-1;function wi(l){return{current:l}}function wt(l){0>ba||(l.current=Hm[ba],Hm[ba]=null,ba--)}function gt(l,u){ba++,Hm[ba]=l.current,l.current=u}var bi={},bn=wi(bi),qn=wi(!1),So=bi;function Sa(l,u){var p=l.type.contextTypes;if(!p)return bi;var x=l.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===u)return x.__reactInternalMemoizedMaskedChildContext;var _={},E;for(E in p)_[E]=u[E];return x&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=u,l.__reactInternalMemoizedMaskedChildContext=_),_}function Gn(l){return l=l.childContextTypes,l!=null}function Vd(){wt(qn),wt(bn)}function bS(l,u,p){if(bn.current!==bi)throw Error(t(168));gt(bn,u),gt(qn,p)}function SS(l,u,p){var x=l.stateNode;if(u=u.childContextTypes,typeof x.getChildContext!="function")return p;x=x.getChildContext();for(var _ in x)if(!(_ in u))throw Error(t(108,ce(l)||"Unknown",_));return W({},p,x)}function Bd(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||bi,So=bn.current,gt(bn,l),gt(qn,qn.current),!0}function CS(l,u,p){var x=l.stateNode;if(!x)throw Error(t(169));p?(l=SS(l,u,So),x.__reactInternalMemoizedMergedChildContext=l,wt(qn),wt(bn),gt(bn,l)):wt(qn),gt(qn,p)}var Fs=null,zd=!1,Um=!1;function _S(l){Fs===null?Fs=[l]:Fs.push(l)}function L2(l){zd=!0,_S(l)}function Si(){if(!Um&&Fs!==null){Um=!0;var l=0,u=lt;try{var p=Fs;for(lt=1;l<p.length;l++){var x=p[l];do x=x(!0);while(x!==null)}Fs=null,zd=!1}catch(_){throw Fs!==null&&(Fs=Fs.slice(l+1)),kb(fm,Si),_}finally{lt=u,Um=!1}}return null}var Ca=[],_a=0,Wd=null,$d=0,wr=[],br=0,Co=null,Vs=1,Bs="";function _o(l,u){Ca[_a++]=$d,Ca[_a++]=Wd,Wd=l,$d=u}function TS(l,u,p){wr[br++]=Vs,wr[br++]=Bs,wr[br++]=Co,Co=l;var x=Vs;l=Bs;var _=32-Fr(x)-1;x&=~(1<<_),p+=1;var E=32-Fr(u)+_;if(30<E){var R=_-_%5;E=(x&(1<<R)-1).toString(32),x>>=R,_-=R,Vs=1<<32-Fr(u)+_|p<<_|x,Bs=E+l}else Vs=1<<E|p<<_|x,Bs=l}function qm(l){l.return!==null&&(_o(l,1),TS(l,1,0))}function Gm(l){for(;l===Wd;)Wd=Ca[--_a],Ca[_a]=null,$d=Ca[--_a],Ca[_a]=null;for(;l===Co;)Co=wr[--br],wr[br]=null,Bs=wr[--br],wr[br]=null,Vs=wr[--br],wr[br]=null}var sr=null,ir=null,kt=!1,Br=null;function kS(l,u){var p=Tr(5,null,null,0);p.elementType="DELETED",p.stateNode=u,p.return=l,u=l.deletions,u===null?(l.deletions=[p],l.flags|=16):u.push(p)}function ES(l,u){switch(l.tag){case 5:var p=l.type;return u=u.nodeType!==1||p.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(l.stateNode=u,sr=l,ir=xi(u.firstChild),!0):!1;case 6:return u=l.pendingProps===""||u.nodeType!==3?null:u,u!==null?(l.stateNode=u,sr=l,ir=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(p=Co!==null?{id:Vs,overflow:Bs}:null,l.memoizedState={dehydrated:u,treeContext:p,retryLane:1073741824},p=Tr(18,null,null,0),p.stateNode=u,p.return=l,l.child=p,sr=l,ir=null,!0):!1;default:return!1}}function Km(l){return(l.mode&1)!==0&&(l.flags&128)===0}function Ym(l){if(kt){var u=ir;if(u){var p=u;if(!ES(l,u)){if(Km(l))throw Error(t(418));u=xi(p.nextSibling);var x=sr;u&&ES(l,u)?kS(x,p):(l.flags=l.flags&-4097|2,kt=!1,sr=l)}}else{if(Km(l))throw Error(t(418));l.flags=l.flags&-4097|2,kt=!1,sr=l}}}function NS(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;sr=l}function Hd(l){if(l!==sr)return!1;if(!kt)return NS(l),kt=!0,!1;var u;if((u=l.tag!==3)&&!(u=l.tag!==5)&&(u=l.type,u=u!=="head"&&u!=="body"&&!Bm(l.type,l.memoizedProps)),u&&(u=ir)){if(Km(l))throw AS(),Error(t(418));for(;u;)kS(l,u),u=xi(u.nextSibling)}if(NS(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(t(317));e:{for(l=l.nextSibling,u=0;l;){if(l.nodeType===8){var p=l.data;if(p==="/$"){if(u===0){ir=xi(l.nextSibling);break e}u--}else p!=="$"&&p!=="$!"&&p!=="$?"||u++}l=l.nextSibling}ir=null}}else ir=sr?xi(l.stateNode.nextSibling):null;return!0}function AS(){for(var l=ir;l;)l=xi(l.nextSibling)}function Ta(){ir=sr=null,kt=!1}function Xm(l){Br===null?Br=[l]:Br.push(l)}var F2=M.ReactCurrentBatchConfig;function Tc(l,u,p){if(l=p.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(t(309));var x=p.stateNode}if(!x)throw Error(t(147,l));var _=x,E=""+l;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===E?u.ref:(u=function(R){var H=_.refs;R===null?delete H[E]:H[E]=R},u._stringRef=E,u)}if(typeof l!="string")throw Error(t(284));if(!p._owner)throw Error(t(290,l))}return l}function Ud(l,u){throw l=Object.prototype.toString.call(u),Error(t(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l))}function MS(l){var u=l._init;return u(l._payload)}function OS(l){function u(ie,ee){if(l){var oe=ie.deletions;oe===null?(ie.deletions=[ee],ie.flags|=16):oe.push(ee)}}function p(ie,ee){if(!l)return null;for(;ee!==null;)u(ie,ee),ee=ee.sibling;return null}function x(ie,ee){for(ie=new Map;ee!==null;)ee.key!==null?ie.set(ee.key,ee):ie.set(ee.index,ee),ee=ee.sibling;return ie}function _(ie,ee){return ie=Mi(ie,ee),ie.index=0,ie.sibling=null,ie}function E(ie,ee,oe){return ie.index=oe,l?(oe=ie.alternate,oe!==null?(oe=oe.index,oe<ee?(ie.flags|=2,ee):oe):(ie.flags|=2,ee)):(ie.flags|=1048576,ee)}function R(ie){return l&&ie.alternate===null&&(ie.flags|=2),ie}function H(ie,ee,oe,Ce){return ee===null||ee.tag!==6?(ee=zg(oe,ie.mode,Ce),ee.return=ie,ee):(ee=_(ee,oe),ee.return=ie,ee)}function Z(ie,ee,oe,Ce){var Ie=oe.type;return Ie===D?we(ie,ee,oe.props.children,Ce,oe.key):ee!==null&&(ee.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===K&&MS(Ie)===ee.type)?(Ce=_(ee,oe.props),Ce.ref=Tc(ie,ee,oe),Ce.return=ie,Ce):(Ce=mh(oe.type,oe.key,oe.props,null,ie.mode,Ce),Ce.ref=Tc(ie,ee,oe),Ce.return=ie,Ce)}function le(ie,ee,oe,Ce){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==oe.containerInfo||ee.stateNode.implementation!==oe.implementation?(ee=Wg(oe,ie.mode,Ce),ee.return=ie,ee):(ee=_(ee,oe.children||[]),ee.return=ie,ee)}function we(ie,ee,oe,Ce,Ie){return ee===null||ee.tag!==7?(ee=Po(oe,ie.mode,Ce,Ie),ee.return=ie,ee):(ee=_(ee,oe),ee.return=ie,ee)}function Se(ie,ee,oe){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=zg(""+ee,ie.mode,oe),ee.return=ie,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case N:return oe=mh(ee.type,ee.key,ee.props,null,ie.mode,oe),oe.ref=Tc(ie,null,ee),oe.return=ie,oe;case O:return ee=Wg(ee,ie.mode,oe),ee.return=ie,ee;case K:var Ce=ee._init;return Se(ie,Ce(ee._payload),oe)}if(ge(ee)||z(ee))return ee=Po(ee,ie.mode,oe,null),ee.return=ie,ee;Ud(ie,ee)}return null}function ve(ie,ee,oe,Ce){var Ie=ee!==null?ee.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number")return Ie!==null?null:H(ie,ee,""+oe,Ce);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case N:return oe.key===Ie?Z(ie,ee,oe,Ce):null;case O:return oe.key===Ie?le(ie,ee,oe,Ce):null;case K:return Ie=oe._init,ve(ie,ee,Ie(oe._payload),Ce)}if(ge(oe)||z(oe))return Ie!==null?null:we(ie,ee,oe,Ce,null);Ud(ie,oe)}return null}function Ne(ie,ee,oe,Ce,Ie){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return ie=ie.get(oe)||null,H(ee,ie,""+Ce,Ie);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case N:return ie=ie.get(Ce.key===null?oe:Ce.key)||null,Z(ee,ie,Ce,Ie);case O:return ie=ie.get(Ce.key===null?oe:Ce.key)||null,le(ee,ie,Ce,Ie);case K:var Ve=Ce._init;return Ne(ie,ee,oe,Ve(Ce._payload),Ie)}if(ge(Ce)||z(Ce))return ie=ie.get(oe)||null,we(ee,ie,Ce,Ie,null);Ud(ee,Ce)}return null}function Me(ie,ee,oe,Ce){for(var Ie=null,Ve=null,Be=ee,$e=ee=0,nn=null;Be!==null&&$e<oe.length;$e++){Be.index>$e?(nn=Be,Be=null):nn=Be.sibling;var ot=ve(ie,Be,oe[$e],Ce);if(ot===null){Be===null&&(Be=nn);break}l&&Be&&ot.alternate===null&&u(ie,Be),ee=E(ot,ee,$e),Ve===null?Ie=ot:Ve.sibling=ot,Ve=ot,Be=nn}if($e===oe.length)return p(ie,Be),kt&&_o(ie,$e),Ie;if(Be===null){for(;$e<oe.length;$e++)Be=Se(ie,oe[$e],Ce),Be!==null&&(ee=E(Be,ee,$e),Ve===null?Ie=Be:Ve.sibling=Be,Ve=Be);return kt&&_o(ie,$e),Ie}for(Be=x(ie,Be);$e<oe.length;$e++)nn=Ne(Be,ie,$e,oe[$e],Ce),nn!==null&&(l&&nn.alternate!==null&&Be.delete(nn.key===null?$e:nn.key),ee=E(nn,ee,$e),Ve===null?Ie=nn:Ve.sibling=nn,Ve=nn);return l&&Be.forEach(function(Oi){return u(ie,Oi)}),kt&&_o(ie,$e),Ie}function De(ie,ee,oe,Ce){var Ie=z(oe);if(typeof Ie!="function")throw Error(t(150));if(oe=Ie.call(oe),oe==null)throw Error(t(151));for(var Ve=Ie=null,Be=ee,$e=ee=0,nn=null,ot=oe.next();Be!==null&&!ot.done;$e++,ot=oe.next()){Be.index>$e?(nn=Be,Be=null):nn=Be.sibling;var Oi=ve(ie,Be,ot.value,Ce);if(Oi===null){Be===null&&(Be=nn);break}l&&Be&&Oi.alternate===null&&u(ie,Be),ee=E(Oi,ee,$e),Ve===null?Ie=Oi:Ve.sibling=Oi,Ve=Oi,Be=nn}if(ot.done)return p(ie,Be),kt&&_o(ie,$e),Ie;if(Be===null){for(;!ot.done;$e++,ot=oe.next())ot=Se(ie,ot.value,Ce),ot!==null&&(ee=E(ot,ee,$e),Ve===null?Ie=ot:Ve.sibling=ot,Ve=ot);return kt&&_o(ie,$e),Ie}for(Be=x(ie,Be);!ot.done;$e++,ot=oe.next())ot=Ne(Be,ie,$e,ot.value,Ce),ot!==null&&(l&&ot.alternate!==null&&Be.delete(ot.key===null?$e:ot.key),ee=E(ot,ee,$e),Ve===null?Ie=ot:Ve.sibling=ot,Ve=ot);return l&&Be.forEach(function(yL){return u(ie,yL)}),kt&&_o(ie,$e),Ie}function Vt(ie,ee,oe,Ce){if(typeof oe=="object"&&oe!==null&&oe.type===D&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case N:e:{for(var Ie=oe.key,Ve=ee;Ve!==null;){if(Ve.key===Ie){if(Ie=oe.type,Ie===D){if(Ve.tag===7){p(ie,Ve.sibling),ee=_(Ve,oe.props.children),ee.return=ie,ie=ee;break e}}else if(Ve.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===K&&MS(Ie)===Ve.type){p(ie,Ve.sibling),ee=_(Ve,oe.props),ee.ref=Tc(ie,Ve,oe),ee.return=ie,ie=ee;break e}p(ie,Ve);break}else u(ie,Ve);Ve=Ve.sibling}oe.type===D?(ee=Po(oe.props.children,ie.mode,Ce,oe.key),ee.return=ie,ie=ee):(Ce=mh(oe.type,oe.key,oe.props,null,ie.mode,Ce),Ce.ref=Tc(ie,ee,oe),Ce.return=ie,ie=Ce)}return R(ie);case O:e:{for(Ve=oe.key;ee!==null;){if(ee.key===Ve)if(ee.tag===4&&ee.stateNode.containerInfo===oe.containerInfo&&ee.stateNode.implementation===oe.implementation){p(ie,ee.sibling),ee=_(ee,oe.children||[]),ee.return=ie,ie=ee;break e}else{p(ie,ee);break}else u(ie,ee);ee=ee.sibling}ee=Wg(oe,ie.mode,Ce),ee.return=ie,ie=ee}return R(ie);case K:return Ve=oe._init,Vt(ie,ee,Ve(oe._payload),Ce)}if(ge(oe))return Me(ie,ee,oe,Ce);if(z(oe))return De(ie,ee,oe,Ce);Ud(ie,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"?(oe=""+oe,ee!==null&&ee.tag===6?(p(ie,ee.sibling),ee=_(ee,oe),ee.return=ie,ie=ee):(p(ie,ee),ee=zg(oe,ie.mode,Ce),ee.return=ie,ie=ee),R(ie)):p(ie,ee)}return Vt}var ka=OS(!0),PS=OS(!1),qd=wi(null),Gd=null,Ea=null,Jm=null;function Zm(){Jm=Ea=Gd=null}function Qm(l){var u=qd.current;wt(qd),l._currentValue=u}function eg(l,u,p){for(;l!==null;){var x=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,x!==null&&(x.childLanes|=u)):x!==null&&(x.childLanes&u)!==u&&(x.childLanes|=u),l===p)break;l=l.return}}function Na(l,u){Gd=l,Jm=Ea=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&u)!==0&&(Kn=!0),l.firstContext=null)}function Sr(l){var u=l._currentValue;if(Jm!==l)if(l={context:l,memoizedValue:u,next:null},Ea===null){if(Gd===null)throw Error(t(308));Ea=l,Gd.dependencies={lanes:0,firstContext:l}}else Ea=Ea.next=l;return u}var To=null;function tg(l){To===null?To=[l]:To.push(l)}function DS(l,u,p,x){var _=u.interleaved;return _===null?(p.next=p,tg(u)):(p.next=_.next,_.next=p),u.interleaved=p,zs(l,x)}function zs(l,u){l.lanes|=u;var p=l.alternate;for(p!==null&&(p.lanes|=u),p=l,l=l.return;l!==null;)l.childLanes|=u,p=l.alternate,p!==null&&(p.childLanes|=u),p=l,l=l.return;return p.tag===3?p.stateNode:null}var Ci=!1;function ng(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function RS(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function Ws(l,u){return{eventTime:l,lane:u,tag:0,payload:null,callback:null,next:null}}function _i(l,u,p){var x=l.updateQueue;if(x===null)return null;if(x=x.shared,(st&2)!==0){var _=x.pending;return _===null?u.next=u:(u.next=_.next,_.next=u),x.pending=u,zs(l,p)}return _=x.interleaved,_===null?(u.next=u,tg(x)):(u.next=_.next,_.next=u),x.interleaved=u,zs(l,p)}function Kd(l,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194240)!==0)){var x=u.lanes;x&=l.pendingLanes,p|=x,u.lanes=p,gm(l,p)}}function IS(l,u){var p=l.updateQueue,x=l.alternate;if(x!==null&&(x=x.updateQueue,p===x)){var _=null,E=null;if(p=p.firstBaseUpdate,p!==null){do{var R={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};E===null?_=E=R:E=E.next=R,p=p.next}while(p!==null);E===null?_=E=u:E=E.next=u}else _=E=u;p={baseState:x.baseState,firstBaseUpdate:_,lastBaseUpdate:E,shared:x.shared,effects:x.effects},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=u:l.next=u,p.lastBaseUpdate=u}function Yd(l,u,p,x){var _=l.updateQueue;Ci=!1;var E=_.firstBaseUpdate,R=_.lastBaseUpdate,H=_.shared.pending;if(H!==null){_.shared.pending=null;var Z=H,le=Z.next;Z.next=null,R===null?E=le:R.next=le,R=Z;var we=l.alternate;we!==null&&(we=we.updateQueue,H=we.lastBaseUpdate,H!==R&&(H===null?we.firstBaseUpdate=le:H.next=le,we.lastBaseUpdate=Z))}if(E!==null){var Se=_.baseState;R=0,we=le=Z=null,H=E;do{var ve=H.lane,Ne=H.eventTime;if((x&ve)===ve){we!==null&&(we=we.next={eventTime:Ne,lane:0,tag:H.tag,payload:H.payload,callback:H.callback,next:null});e:{var Me=l,De=H;switch(ve=u,Ne=p,De.tag){case 1:if(Me=De.payload,typeof Me=="function"){Se=Me.call(Ne,Se,ve);break e}Se=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=De.payload,ve=typeof Me=="function"?Me.call(Ne,Se,ve):Me,ve==null)break e;Se=W({},Se,ve);break e;case 2:Ci=!0}}H.callback!==null&&H.lane!==0&&(l.flags|=64,ve=_.effects,ve===null?_.effects=[H]:ve.push(H))}else Ne={eventTime:Ne,lane:ve,tag:H.tag,payload:H.payload,callback:H.callback,next:null},we===null?(le=we=Ne,Z=Se):we=we.next=Ne,R|=ve;if(H=H.next,H===null){if(H=_.shared.pending,H===null)break;ve=H,H=ve.next,ve.next=null,_.lastBaseUpdate=ve,_.shared.pending=null}}while(!0);if(we===null&&(Z=Se),_.baseState=Z,_.firstBaseUpdate=le,_.lastBaseUpdate=we,u=_.shared.interleaved,u!==null){_=u;do R|=_.lane,_=_.next;while(_!==u)}else E===null&&(_.shared.lanes=0);No|=R,l.lanes=R,l.memoizedState=Se}}function jS(l,u,p){if(l=u.effects,u.effects=null,l!==null)for(u=0;u<l.length;u++){var x=l[u],_=x.callback;if(_!==null){if(x.callback=null,x=p,typeof _!="function")throw Error(t(191,_));_.call(x)}}}var kc={},hs=wi(kc),Ec=wi(kc),Nc=wi(kc);function ko(l){if(l===kc)throw Error(t(174));return l}function rg(l,u){switch(gt(Nc,u),gt(Ec,l),gt(hs,kc),l=u.nodeType,l){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:Tt(null,"");break;default:l=l===8?u.parentNode:u,u=l.namespaceURI||null,l=l.tagName,u=Tt(u,l)}wt(hs),gt(hs,u)}function Aa(){wt(hs),wt(Ec),wt(Nc)}function LS(l){ko(Nc.current);var u=ko(hs.current),p=Tt(u,l.type);u!==p&&(gt(Ec,l),gt(hs,p))}function sg(l){Ec.current===l&&(wt(hs),wt(Ec))}var Nt=wi(0);function Xd(l){for(var u=l;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var ig=[];function og(){for(var l=0;l<ig.length;l++)ig[l]._workInProgressVersionPrimary=null;ig.length=0}var Jd=M.ReactCurrentDispatcher,ag=M.ReactCurrentBatchConfig,Eo=0,At=null,Xt=null,en=null,Zd=!1,Ac=!1,Mc=0,V2=0;function Sn(){throw Error(t(321))}function lg(l,u){if(u===null)return!1;for(var p=0;p<u.length&&p<l.length;p++)if(!Vr(l[p],u[p]))return!1;return!0}function cg(l,u,p,x,_,E){if(Eo=E,At=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Jd.current=l===null||l.memoizedState===null?$2:H2,l=p(x,_),Ac){E=0;do{if(Ac=!1,Mc=0,25<=E)throw Error(t(301));E+=1,en=Xt=null,u.updateQueue=null,Jd.current=U2,l=p(x,_)}while(Ac)}if(Jd.current=th,u=Xt!==null&&Xt.next!==null,Eo=0,en=Xt=At=null,Zd=!1,u)throw Error(t(300));return l}function ug(){var l=Mc!==0;return Mc=0,l}function fs(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?At.memoizedState=en=l:en=en.next=l,en}function Cr(){if(Xt===null){var l=At.alternate;l=l!==null?l.memoizedState:null}else l=Xt.next;var u=en===null?At.memoizedState:en.next;if(u!==null)en=u,Xt=l;else{if(l===null)throw Error(t(310));Xt=l,l={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},en===null?At.memoizedState=en=l:en=en.next=l}return en}function Oc(l,u){return typeof u=="function"?u(l):u}function dg(l){var u=Cr(),p=u.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=l;var x=Xt,_=x.baseQueue,E=p.pending;if(E!==null){if(_!==null){var R=_.next;_.next=E.next,E.next=R}x.baseQueue=_=E,p.pending=null}if(_!==null){E=_.next,x=x.baseState;var H=R=null,Z=null,le=E;do{var we=le.lane;if((Eo&we)===we)Z!==null&&(Z=Z.next={lane:0,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),x=le.hasEagerState?le.eagerState:l(x,le.action);else{var Se={lane:we,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null};Z===null?(H=Z=Se,R=x):Z=Z.next=Se,At.lanes|=we,No|=we}le=le.next}while(le!==null&&le!==E);Z===null?R=x:Z.next=H,Vr(x,u.memoizedState)||(Kn=!0),u.memoizedState=x,u.baseState=R,u.baseQueue=Z,p.lastRenderedState=x}if(l=p.interleaved,l!==null){_=l;do E=_.lane,At.lanes|=E,No|=E,_=_.next;while(_!==l)}else _===null&&(p.lanes=0);return[u.memoizedState,p.dispatch]}function hg(l){var u=Cr(),p=u.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=l;var x=p.dispatch,_=p.pending,E=u.memoizedState;if(_!==null){p.pending=null;var R=_=_.next;do E=l(E,R.action),R=R.next;while(R!==_);Vr(E,u.memoizedState)||(Kn=!0),u.memoizedState=E,u.baseQueue===null&&(u.baseState=E),p.lastRenderedState=E}return[E,x]}function FS(){}function VS(l,u){var p=At,x=Cr(),_=u(),E=!Vr(x.memoizedState,_);if(E&&(x.memoizedState=_,Kn=!0),x=x.queue,fg(WS.bind(null,p,x,l),[l]),x.getSnapshot!==u||E||en!==null&&en.memoizedState.tag&1){if(p.flags|=2048,Pc(9,zS.bind(null,p,x,_,u),void 0,null),tn===null)throw Error(t(349));(Eo&30)!==0||BS(p,u,_)}return _}function BS(l,u,p){l.flags|=16384,l={getSnapshot:u,value:p},u=At.updateQueue,u===null?(u={lastEffect:null,stores:null},At.updateQueue=u,u.stores=[l]):(p=u.stores,p===null?u.stores=[l]:p.push(l))}function zS(l,u,p,x){u.value=p,u.getSnapshot=x,$S(u)&&HS(l)}function WS(l,u,p){return p(function(){$S(u)&&HS(l)})}function $S(l){var u=l.getSnapshot;l=l.value;try{var p=u();return!Vr(l,p)}catch{return!0}}function HS(l){var u=zs(l,1);u!==null&&Hr(u,l,1,-1)}function US(l){var u=fs();return typeof l=="function"&&(l=l()),u.memoizedState=u.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oc,lastRenderedState:l},u.queue=l,l=l.dispatch=W2.bind(null,At,l),[u.memoizedState,l]}function Pc(l,u,p,x){return l={tag:l,create:u,destroy:p,deps:x,next:null},u=At.updateQueue,u===null?(u={lastEffect:null,stores:null},At.updateQueue=u,u.lastEffect=l.next=l):(p=u.lastEffect,p===null?u.lastEffect=l.next=l:(x=p.next,p.next=l,l.next=x,u.lastEffect=l)),l}function qS(){return Cr().memoizedState}function Qd(l,u,p,x){var _=fs();At.flags|=l,_.memoizedState=Pc(1|u,p,void 0,x===void 0?null:x)}function eh(l,u,p,x){var _=Cr();x=x===void 0?null:x;var E=void 0;if(Xt!==null){var R=Xt.memoizedState;if(E=R.destroy,x!==null&&lg(x,R.deps)){_.memoizedState=Pc(u,p,E,x);return}}At.flags|=l,_.memoizedState=Pc(1|u,p,E,x)}function GS(l,u){return Qd(8390656,8,l,u)}function fg(l,u){return eh(2048,8,l,u)}function KS(l,u){return eh(4,2,l,u)}function YS(l,u){return eh(4,4,l,u)}function XS(l,u){if(typeof u=="function")return l=l(),u(l),function(){u(null)};if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function JS(l,u,p){return p=p!=null?p.concat([l]):null,eh(4,4,XS.bind(null,u,l),p)}function pg(){}function ZS(l,u){var p=Cr();u=u===void 0?null:u;var x=p.memoizedState;return x!==null&&u!==null&&lg(u,x[1])?x[0]:(p.memoizedState=[l,u],l)}function QS(l,u){var p=Cr();u=u===void 0?null:u;var x=p.memoizedState;return x!==null&&u!==null&&lg(u,x[1])?x[0]:(l=l(),p.memoizedState=[l,u],l)}function eC(l,u,p){return(Eo&21)===0?(l.baseState&&(l.baseState=!1,Kn=!0),l.memoizedState=p):(Vr(p,u)||(p=Mb(),At.lanes|=p,No|=p,l.baseState=!0),u)}function B2(l,u){var p=lt;lt=p!==0&&4>p?p:4,l(!0);var x=ag.transition;ag.transition={};try{l(!1),u()}finally{lt=p,ag.transition=x}}function tC(){return Cr().memoizedState}function z2(l,u,p){var x=Ni(l);if(p={lane:x,action:p,hasEagerState:!1,eagerState:null,next:null},nC(l))rC(u,p);else if(p=DS(l,u,p,x),p!==null){var _=jn();Hr(p,l,x,_),sC(p,u,x)}}function W2(l,u,p){var x=Ni(l),_={lane:x,action:p,hasEagerState:!1,eagerState:null,next:null};if(nC(l))rC(u,_);else{var E=l.alternate;if(l.lanes===0&&(E===null||E.lanes===0)&&(E=u.lastRenderedReducer,E!==null))try{var R=u.lastRenderedState,H=E(R,p);if(_.hasEagerState=!0,_.eagerState=H,Vr(H,R)){var Z=u.interleaved;Z===null?(_.next=_,tg(u)):(_.next=Z.next,Z.next=_),u.interleaved=_;return}}catch{}finally{}p=DS(l,u,_,x),p!==null&&(_=jn(),Hr(p,l,x,_),sC(p,u,x))}}function nC(l){var u=l.alternate;return l===At||u!==null&&u===At}function rC(l,u){Ac=Zd=!0;var p=l.pending;p===null?u.next=u:(u.next=p.next,p.next=u),l.pending=u}function sC(l,u,p){if((p&4194240)!==0){var x=u.lanes;x&=l.pendingLanes,p|=x,u.lanes=p,gm(l,p)}}var th={readContext:Sr,useCallback:Sn,useContext:Sn,useEffect:Sn,useImperativeHandle:Sn,useInsertionEffect:Sn,useLayoutEffect:Sn,useMemo:Sn,useReducer:Sn,useRef:Sn,useState:Sn,useDebugValue:Sn,useDeferredValue:Sn,useTransition:Sn,useMutableSource:Sn,useSyncExternalStore:Sn,useId:Sn,unstable_isNewReconciler:!1},$2={readContext:Sr,useCallback:function(l,u){return fs().memoizedState=[l,u===void 0?null:u],l},useContext:Sr,useEffect:GS,useImperativeHandle:function(l,u,p){return p=p!=null?p.concat([l]):null,Qd(4194308,4,XS.bind(null,u,l),p)},useLayoutEffect:function(l,u){return Qd(4194308,4,l,u)},useInsertionEffect:function(l,u){return Qd(4,2,l,u)},useMemo:function(l,u){var p=fs();return u=u===void 0?null:u,l=l(),p.memoizedState=[l,u],l},useReducer:function(l,u,p){var x=fs();return u=p!==void 0?p(u):u,x.memoizedState=x.baseState=u,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:u},x.queue=l,l=l.dispatch=z2.bind(null,At,l),[x.memoizedState,l]},useRef:function(l){var u=fs();return l={current:l},u.memoizedState=l},useState:US,useDebugValue:pg,useDeferredValue:function(l){return fs().memoizedState=l},useTransition:function(){var l=US(!1),u=l[0];return l=B2.bind(null,l[1]),fs().memoizedState=l,[u,l]},useMutableSource:function(){},useSyncExternalStore:function(l,u,p){var x=At,_=fs();if(kt){if(p===void 0)throw Error(t(407));p=p()}else{if(p=u(),tn===null)throw Error(t(349));(Eo&30)!==0||BS(x,u,p)}_.memoizedState=p;var E={value:p,getSnapshot:u};return _.queue=E,GS(WS.bind(null,x,E,l),[l]),x.flags|=2048,Pc(9,zS.bind(null,x,E,p,u),void 0,null),p},useId:function(){var l=fs(),u=tn.identifierPrefix;if(kt){var p=Bs,x=Vs;p=(x&~(1<<32-Fr(x)-1)).toString(32)+p,u=":"+u+"R"+p,p=Mc++,0<p&&(u+="H"+p.toString(32)),u+=":"}else p=V2++,u=":"+u+"r"+p.toString(32)+":";return l.memoizedState=u},unstable_isNewReconciler:!1},H2={readContext:Sr,useCallback:ZS,useContext:Sr,useEffect:fg,useImperativeHandle:JS,useInsertionEffect:KS,useLayoutEffect:YS,useMemo:QS,useReducer:dg,useRef:qS,useState:function(){return dg(Oc)},useDebugValue:pg,useDeferredValue:function(l){var u=Cr();return eC(u,Xt.memoizedState,l)},useTransition:function(){var l=dg(Oc)[0],u=Cr().memoizedState;return[l,u]},useMutableSource:FS,useSyncExternalStore:VS,useId:tC,unstable_isNewReconciler:!1},U2={readContext:Sr,useCallback:ZS,useContext:Sr,useEffect:fg,useImperativeHandle:JS,useInsertionEffect:KS,useLayoutEffect:YS,useMemo:QS,useReducer:hg,useRef:qS,useState:function(){return hg(Oc)},useDebugValue:pg,useDeferredValue:function(l){var u=Cr();return Xt===null?u.memoizedState=l:eC(u,Xt.memoizedState,l)},useTransition:function(){var l=hg(Oc)[0],u=Cr().memoizedState;return[l,u]},useMutableSource:FS,useSyncExternalStore:VS,useId:tC,unstable_isNewReconciler:!1};function zr(l,u){if(l&&l.defaultProps){u=W({},u),l=l.defaultProps;for(var p in l)u[p]===void 0&&(u[p]=l[p]);return u}return u}function mg(l,u,p,x){u=l.memoizedState,p=p(x,u),p=p==null?u:W({},u,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var nh={isMounted:function(l){return(l=l._reactInternals)?wo(l)===l:!1},enqueueSetState:function(l,u,p){l=l._reactInternals;var x=jn(),_=Ni(l),E=Ws(x,_);E.payload=u,p!=null&&(E.callback=p),u=_i(l,E,_),u!==null&&(Hr(u,l,_,x),Kd(u,l,_))},enqueueReplaceState:function(l,u,p){l=l._reactInternals;var x=jn(),_=Ni(l),E=Ws(x,_);E.tag=1,E.payload=u,p!=null&&(E.callback=p),u=_i(l,E,_),u!==null&&(Hr(u,l,_,x),Kd(u,l,_))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var p=jn(),x=Ni(l),_=Ws(p,x);_.tag=2,u!=null&&(_.callback=u),u=_i(l,_,x),u!==null&&(Hr(u,l,x,p),Kd(u,l,x))}};function iC(l,u,p,x,_,E,R){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(x,E,R):u.prototype&&u.prototype.isPureReactComponent?!vc(p,x)||!vc(_,E):!0}function oC(l,u,p){var x=!1,_=bi,E=u.contextType;return typeof E=="object"&&E!==null?E=Sr(E):(_=Gn(u)?So:bn.current,x=u.contextTypes,E=(x=x!=null)?Sa(l,_):bi),u=new u(p,E),l.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=nh,l.stateNode=u,u._reactInternals=l,x&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=_,l.__reactInternalMemoizedMaskedChildContext=E),u}function aC(l,u,p,x){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,x),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,x),u.state!==l&&nh.enqueueReplaceState(u,u.state,null)}function gg(l,u,p,x){var _=l.stateNode;_.props=p,_.state=l.memoizedState,_.refs={},ng(l);var E=u.contextType;typeof E=="object"&&E!==null?_.context=Sr(E):(E=Gn(u)?So:bn.current,_.context=Sa(l,E)),_.state=l.memoizedState,E=u.getDerivedStateFromProps,typeof E=="function"&&(mg(l,u,E,p),_.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(u=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),u!==_.state&&nh.enqueueReplaceState(_,_.state,null),Yd(l,p,_,x),_.state=l.memoizedState),typeof _.componentDidMount=="function"&&(l.flags|=4194308)}function Ma(l,u){try{var p="",x=u;do p+=ne(x),x=x.return;while(x);var _=p}catch(E){_=`
Error generating stack: `+E.message+`
`+E.stack}return{value:l,source:u,stack:_,digest:null}}function yg(l,u,p){return{value:l,source:null,stack:p??null,digest:u??null}}function vg(l,u){try{console.error(u.value)}catch(p){setTimeout(function(){throw p})}}var q2=typeof WeakMap=="function"?WeakMap:Map;function lC(l,u,p){p=Ws(-1,p),p.tag=3,p.payload={element:null};var x=u.value;return p.callback=function(){ch||(ch=!0,Dg=x),vg(l,u)},p}function cC(l,u,p){p=Ws(-1,p),p.tag=3;var x=l.type.getDerivedStateFromError;if(typeof x=="function"){var _=u.value;p.payload=function(){return x(_)},p.callback=function(){vg(l,u)}}var E=l.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(p.callback=function(){vg(l,u),typeof x!="function"&&(ki===null?ki=new Set([this]):ki.add(this));var R=u.stack;this.componentDidCatch(u.value,{componentStack:R!==null?R:""})}),p}function uC(l,u,p){var x=l.pingCache;if(x===null){x=l.pingCache=new q2;var _=new Set;x.set(u,_)}else _=x.get(u),_===void 0&&(_=new Set,x.set(u,_));_.has(p)||(_.add(p),l=oL.bind(null,l,u,p),u.then(l,l))}function dC(l){do{var u;if((u=l.tag===13)&&(u=l.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return l;l=l.return}while(l!==null);return null}function hC(l,u,p,x,_){return(l.mode&1)===0?(l===u?l.flags|=65536:(l.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(u=Ws(-1,1),u.tag=2,_i(p,u,1))),p.lanes|=1),l):(l.flags|=65536,l.lanes=_,l)}var G2=M.ReactCurrentOwner,Kn=!1;function In(l,u,p,x){u.child=l===null?PS(u,null,p,x):ka(u,l.child,p,x)}function fC(l,u,p,x,_){p=p.render;var E=u.ref;return Na(u,_),x=cg(l,u,p,x,E,_),p=ug(),l!==null&&!Kn?(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~_,$s(l,u,_)):(kt&&p&&qm(u),u.flags|=1,In(l,u,x,_),u.child)}function pC(l,u,p,x,_){if(l===null){var E=p.type;return typeof E=="function"&&!Bg(E)&&E.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(u.tag=15,u.type=E,mC(l,u,E,x,_)):(l=mh(p.type,null,x,u,u.mode,_),l.ref=u.ref,l.return=u,u.child=l)}if(E=l.child,(l.lanes&_)===0){var R=E.memoizedProps;if(p=p.compare,p=p!==null?p:vc,p(R,x)&&l.ref===u.ref)return $s(l,u,_)}return u.flags|=1,l=Mi(E,x),l.ref=u.ref,l.return=u,u.child=l}function mC(l,u,p,x,_){if(l!==null){var E=l.memoizedProps;if(vc(E,x)&&l.ref===u.ref)if(Kn=!1,u.pendingProps=x=E,(l.lanes&_)!==0)(l.flags&131072)!==0&&(Kn=!0);else return u.lanes=l.lanes,$s(l,u,_)}return xg(l,u,p,x,_)}function gC(l,u,p){var x=u.pendingProps,_=x.children,E=l!==null?l.memoizedState:null;if(x.mode==="hidden")if((u.mode&1)===0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},gt(Pa,or),or|=p;else{if((p&1073741824)===0)return l=E!==null?E.baseLanes|p:p,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:l,cachePool:null,transitions:null},u.updateQueue=null,gt(Pa,or),or|=l,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=E!==null?E.baseLanes:p,gt(Pa,or),or|=x}else E!==null?(x=E.baseLanes|p,u.memoizedState=null):x=p,gt(Pa,or),or|=x;return In(l,u,_,p),u.child}function yC(l,u){var p=u.ref;(l===null&&p!==null||l!==null&&l.ref!==p)&&(u.flags|=512,u.flags|=2097152)}function xg(l,u,p,x,_){var E=Gn(p)?So:bn.current;return E=Sa(u,E),Na(u,_),p=cg(l,u,p,x,E,_),x=ug(),l!==null&&!Kn?(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~_,$s(l,u,_)):(kt&&x&&qm(u),u.flags|=1,In(l,u,p,_),u.child)}function vC(l,u,p,x,_){if(Gn(p)){var E=!0;Bd(u)}else E=!1;if(Na(u,_),u.stateNode===null)sh(l,u),oC(u,p,x),gg(u,p,x,_),x=!0;else if(l===null){var R=u.stateNode,H=u.memoizedProps;R.props=H;var Z=R.context,le=p.contextType;typeof le=="object"&&le!==null?le=Sr(le):(le=Gn(p)?So:bn.current,le=Sa(u,le));var we=p.getDerivedStateFromProps,Se=typeof we=="function"||typeof R.getSnapshotBeforeUpdate=="function";Se||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(H!==x||Z!==le)&&aC(u,R,x,le),Ci=!1;var ve=u.memoizedState;R.state=ve,Yd(u,x,R,_),Z=u.memoizedState,H!==x||ve!==Z||qn.current||Ci?(typeof we=="function"&&(mg(u,p,we,x),Z=u.memoizedState),(H=Ci||iC(u,p,H,x,ve,Z,le))?(Se||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(u.flags|=4194308)):(typeof R.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=x,u.memoizedState=Z),R.props=x,R.state=Z,R.context=le,x=H):(typeof R.componentDidMount=="function"&&(u.flags|=4194308),x=!1)}else{R=u.stateNode,RS(l,u),H=u.memoizedProps,le=u.type===u.elementType?H:zr(u.type,H),R.props=le,Se=u.pendingProps,ve=R.context,Z=p.contextType,typeof Z=="object"&&Z!==null?Z=Sr(Z):(Z=Gn(p)?So:bn.current,Z=Sa(u,Z));var Ne=p.getDerivedStateFromProps;(we=typeof Ne=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(H!==Se||ve!==Z)&&aC(u,R,x,Z),Ci=!1,ve=u.memoizedState,R.state=ve,Yd(u,x,R,_);var Me=u.memoizedState;H!==Se||ve!==Me||qn.current||Ci?(typeof Ne=="function"&&(mg(u,p,Ne,x),Me=u.memoizedState),(le=Ci||iC(u,p,le,x,ve,Me,Z)||!1)?(we||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(x,Me,Z),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(x,Me,Z)),typeof R.componentDidUpdate=="function"&&(u.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof R.componentDidUpdate!="function"||H===l.memoizedProps&&ve===l.memoizedState||(u.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||H===l.memoizedProps&&ve===l.memoizedState||(u.flags|=1024),u.memoizedProps=x,u.memoizedState=Me),R.props=x,R.state=Me,R.context=Z,x=le):(typeof R.componentDidUpdate!="function"||H===l.memoizedProps&&ve===l.memoizedState||(u.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||H===l.memoizedProps&&ve===l.memoizedState||(u.flags|=1024),x=!1)}return wg(l,u,p,x,E,_)}function wg(l,u,p,x,_,E){yC(l,u);var R=(u.flags&128)!==0;if(!x&&!R)return _&&CS(u,p,!1),$s(l,u,E);x=u.stateNode,G2.current=u;var H=R&&typeof p.getDerivedStateFromError!="function"?null:x.render();return u.flags|=1,l!==null&&R?(u.child=ka(u,l.child,null,E),u.child=ka(u,null,H,E)):In(l,u,H,E),u.memoizedState=x.state,_&&CS(u,p,!0),u.child}function xC(l){var u=l.stateNode;u.pendingContext?bS(l,u.pendingContext,u.pendingContext!==u.context):u.context&&bS(l,u.context,!1),rg(l,u.containerInfo)}function wC(l,u,p,x,_){return Ta(),Xm(_),u.flags|=256,In(l,u,p,x),u.child}var bg={dehydrated:null,treeContext:null,retryLane:0};function Sg(l){return{baseLanes:l,cachePool:null,transitions:null}}function bC(l,u,p){var x=u.pendingProps,_=Nt.current,E=!1,R=(u.flags&128)!==0,H;if((H=R)||(H=l!==null&&l.memoizedState===null?!1:(_&2)!==0),H?(E=!0,u.flags&=-129):(l===null||l.memoizedState!==null)&&(_|=1),gt(Nt,_&1),l===null)return Ym(u),l=u.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((u.mode&1)===0?u.lanes=1:l.data==="$!"?u.lanes=8:u.lanes=1073741824,null):(R=x.children,l=x.fallback,E?(x=u.mode,E=u.child,R={mode:"hidden",children:R},(x&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=R):E=gh(R,x,0,null),l=Po(l,x,p,null),E.return=u,l.return=u,E.sibling=l,u.child=E,u.child.memoizedState=Sg(p),u.memoizedState=bg,l):Cg(u,R));if(_=l.memoizedState,_!==null&&(H=_.dehydrated,H!==null))return K2(l,u,R,x,H,_,p);if(E){E=x.fallback,R=u.mode,_=l.child,H=_.sibling;var Z={mode:"hidden",children:x.children};return(R&1)===0&&u.child!==_?(x=u.child,x.childLanes=0,x.pendingProps=Z,u.deletions=null):(x=Mi(_,Z),x.subtreeFlags=_.subtreeFlags&14680064),H!==null?E=Mi(H,E):(E=Po(E,R,p,null),E.flags|=2),E.return=u,x.return=u,x.sibling=E,u.child=x,x=E,E=u.child,R=l.child.memoizedState,R=R===null?Sg(p):{baseLanes:R.baseLanes|p,cachePool:null,transitions:R.transitions},E.memoizedState=R,E.childLanes=l.childLanes&~p,u.memoizedState=bg,x}return E=l.child,l=E.sibling,x=Mi(E,{mode:"visible",children:x.children}),(u.mode&1)===0&&(x.lanes=p),x.return=u,x.sibling=null,l!==null&&(p=u.deletions,p===null?(u.deletions=[l],u.flags|=16):p.push(l)),u.child=x,u.memoizedState=null,x}function Cg(l,u){return u=gh({mode:"visible",children:u},l.mode,0,null),u.return=l,l.child=u}function rh(l,u,p,x){return x!==null&&Xm(x),ka(u,l.child,null,p),l=Cg(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function K2(l,u,p,x,_,E,R){if(p)return u.flags&256?(u.flags&=-257,x=yg(Error(t(422))),rh(l,u,R,x)):u.memoizedState!==null?(u.child=l.child,u.flags|=128,null):(E=x.fallback,_=u.mode,x=gh({mode:"visible",children:x.children},_,0,null),E=Po(E,_,R,null),E.flags|=2,x.return=u,E.return=u,x.sibling=E,u.child=x,(u.mode&1)!==0&&ka(u,l.child,null,R),u.child.memoizedState=Sg(R),u.memoizedState=bg,E);if((u.mode&1)===0)return rh(l,u,R,null);if(_.data==="$!"){if(x=_.nextSibling&&_.nextSibling.dataset,x)var H=x.dgst;return x=H,E=Error(t(419)),x=yg(E,x,void 0),rh(l,u,R,x)}if(H=(R&l.childLanes)!==0,Kn||H){if(x=tn,x!==null){switch(R&-R){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=(_&(x.suspendedLanes|R))!==0?0:_,_!==0&&_!==E.retryLane&&(E.retryLane=_,zs(l,_),Hr(x,l,_,-1))}return Vg(),x=yg(Error(t(421))),rh(l,u,R,x)}return _.data==="$?"?(u.flags|=128,u.child=l.child,u=aL.bind(null,l),_._reactRetry=u,null):(l=E.treeContext,ir=xi(_.nextSibling),sr=u,kt=!0,Br=null,l!==null&&(wr[br++]=Vs,wr[br++]=Bs,wr[br++]=Co,Vs=l.id,Bs=l.overflow,Co=u),u=Cg(u,x.children),u.flags|=4096,u)}function SC(l,u,p){l.lanes|=u;var x=l.alternate;x!==null&&(x.lanes|=u),eg(l.return,u,p)}function _g(l,u,p,x,_){var E=l.memoizedState;E===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:x,tail:p,tailMode:_}:(E.isBackwards=u,E.rendering=null,E.renderingStartTime=0,E.last=x,E.tail=p,E.tailMode=_)}function CC(l,u,p){var x=u.pendingProps,_=x.revealOrder,E=x.tail;if(In(l,u,x.children,p),x=Nt.current,(x&2)!==0)x=x&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&SC(l,p,u);else if(l.tag===19)SC(l,p,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}x&=1}if(gt(Nt,x),(u.mode&1)===0)u.memoizedState=null;else switch(_){case"forwards":for(p=u.child,_=null;p!==null;)l=p.alternate,l!==null&&Xd(l)===null&&(_=p),p=p.sibling;p=_,p===null?(_=u.child,u.child=null):(_=p.sibling,p.sibling=null),_g(u,!1,_,p,E);break;case"backwards":for(p=null,_=u.child,u.child=null;_!==null;){if(l=_.alternate,l!==null&&Xd(l)===null){u.child=_;break}l=_.sibling,_.sibling=p,p=_,_=l}_g(u,!0,p,null,E);break;case"together":_g(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function sh(l,u){(u.mode&1)===0&&l!==null&&(l.alternate=null,u.alternate=null,u.flags|=2)}function $s(l,u,p){if(l!==null&&(u.dependencies=l.dependencies),No|=u.lanes,(p&u.childLanes)===0)return null;if(l!==null&&u.child!==l.child)throw Error(t(153));if(u.child!==null){for(l=u.child,p=Mi(l,l.pendingProps),u.child=p,p.return=u;l.sibling!==null;)l=l.sibling,p=p.sibling=Mi(l,l.pendingProps),p.return=u;p.sibling=null}return u.child}function Y2(l,u,p){switch(u.tag){case 3:xC(u),Ta();break;case 5:LS(u);break;case 1:Gn(u.type)&&Bd(u);break;case 4:rg(u,u.stateNode.containerInfo);break;case 10:var x=u.type._context,_=u.memoizedProps.value;gt(qd,x._currentValue),x._currentValue=_;break;case 13:if(x=u.memoizedState,x!==null)return x.dehydrated!==null?(gt(Nt,Nt.current&1),u.flags|=128,null):(p&u.child.childLanes)!==0?bC(l,u,p):(gt(Nt,Nt.current&1),l=$s(l,u,p),l!==null?l.sibling:null);gt(Nt,Nt.current&1);break;case 19:if(x=(p&u.childLanes)!==0,(l.flags&128)!==0){if(x)return CC(l,u,p);u.flags|=128}if(_=u.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),gt(Nt,Nt.current),x)break;return null;case 22:case 23:return u.lanes=0,gC(l,u,p)}return $s(l,u,p)}var _C,Tg,TC,kC;_C=function(l,u){for(var p=u.child;p!==null;){if(p.tag===5||p.tag===6)l.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===u)break;for(;p.sibling===null;){if(p.return===null||p.return===u)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},Tg=function(){},TC=function(l,u,p,x){var _=l.memoizedProps;if(_!==x){l=u.stateNode,ko(hs.current);var E=null;switch(p){case"input":_=Q(l,_),x=Q(l,x),E=[];break;case"select":_=W({},_,{value:void 0}),x=W({},x,{value:void 0}),E=[];break;case"textarea":_=je(l,_),x=je(l,x),E=[];break;default:typeof _.onClick!="function"&&typeof x.onClick=="function"&&(l.onclick=Ld)}tc(p,x);var R;p=null;for(le in _)if(!x.hasOwnProperty(le)&&_.hasOwnProperty(le)&&_[le]!=null)if(le==="style"){var H=_[le];for(R in H)H.hasOwnProperty(R)&&(p||(p={}),p[R]="")}else le!=="dangerouslySetInnerHTML"&&le!=="children"&&le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&le!=="autoFocus"&&(s.hasOwnProperty(le)?E||(E=[]):(E=E||[]).push(le,null));for(le in x){var Z=x[le];if(H=_!=null?_[le]:void 0,x.hasOwnProperty(le)&&Z!==H&&(Z!=null||H!=null))if(le==="style")if(H){for(R in H)!H.hasOwnProperty(R)||Z&&Z.hasOwnProperty(R)||(p||(p={}),p[R]="");for(R in Z)Z.hasOwnProperty(R)&&H[R]!==Z[R]&&(p||(p={}),p[R]=Z[R])}else p||(E||(E=[]),E.push(le,p)),p=Z;else le==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,H=H?H.__html:void 0,Z!=null&&H!==Z&&(E=E||[]).push(le,Z)):le==="children"?typeof Z!="string"&&typeof Z!="number"||(E=E||[]).push(le,""+Z):le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&(s.hasOwnProperty(le)?(Z!=null&&le==="onScroll"&&xt("scroll",l),E||H===Z||(E=[])):(E=E||[]).push(le,Z))}p&&(E=E||[]).push("style",p);var le=E;(u.updateQueue=le)&&(u.flags|=4)}},kC=function(l,u,p,x){p!==x&&(u.flags|=4)};function Dc(l,u){if(!kt)switch(l.tailMode){case"hidden":u=l.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var x=null;p!==null;)p.alternate!==null&&(x=p),p=p.sibling;x===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:x.sibling=null}}function Cn(l){var u=l.alternate!==null&&l.alternate.child===l.child,p=0,x=0;if(u)for(var _=l.child;_!==null;)p|=_.lanes|_.childLanes,x|=_.subtreeFlags&14680064,x|=_.flags&14680064,_.return=l,_=_.sibling;else for(_=l.child;_!==null;)p|=_.lanes|_.childLanes,x|=_.subtreeFlags,x|=_.flags,_.return=l,_=_.sibling;return l.subtreeFlags|=x,l.childLanes=p,u}function X2(l,u,p){var x=u.pendingProps;switch(Gm(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cn(u),null;case 1:return Gn(u.type)&&Vd(),Cn(u),null;case 3:return x=u.stateNode,Aa(),wt(qn),wt(bn),og(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(l===null||l.child===null)&&(Hd(u)?u.flags|=4:l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Br!==null&&(jg(Br),Br=null))),Tg(l,u),Cn(u),null;case 5:sg(u);var _=ko(Nc.current);if(p=u.type,l!==null&&u.stateNode!=null)TC(l,u,p,x,_),l.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!x){if(u.stateNode===null)throw Error(t(166));return Cn(u),null}if(l=ko(hs.current),Hd(u)){x=u.stateNode,p=u.type;var E=u.memoizedProps;switch(x[ds]=u,x[Cc]=E,l=(u.mode&1)!==0,p){case"dialog":xt("cancel",x),xt("close",x);break;case"iframe":case"object":case"embed":xt("load",x);break;case"video":case"audio":for(_=0;_<wc.length;_++)xt(wc[_],x);break;case"source":xt("error",x);break;case"img":case"image":case"link":xt("error",x),xt("load",x);break;case"details":xt("toggle",x);break;case"input":X(x,E),xt("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!E.multiple},xt("invalid",x);break;case"textarea":Je(x,E),xt("invalid",x)}tc(p,E),_=null;for(var R in E)if(E.hasOwnProperty(R)){var H=E[R];R==="children"?typeof H=="string"?x.textContent!==H&&(E.suppressHydrationWarning!==!0&&jd(x.textContent,H,l),_=["children",H]):typeof H=="number"&&x.textContent!==""+H&&(E.suppressHydrationWarning!==!0&&jd(x.textContent,H,l),_=["children",""+H]):s.hasOwnProperty(R)&&H!=null&&R==="onScroll"&&xt("scroll",x)}switch(p){case"input":pe(x),_e(x,E,!0);break;case"textarea":pe(x),Qt(x);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(x.onclick=Ld)}x=_,u.updateQueue=x,x!==null&&(u.flags|=4)}else{R=_.nodeType===9?_:_.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=Lr(p)),l==="http://www.w3.org/1999/xhtml"?p==="script"?(l=R.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof x.is=="string"?l=R.createElement(p,{is:x.is}):(l=R.createElement(p),p==="select"&&(R=l,x.multiple?R.multiple=!0:x.size&&(R.size=x.size))):l=R.createElementNS(l,p),l[ds]=u,l[Cc]=x,_C(l,u,!1,!1),u.stateNode=l;e:{switch(R=ha(p,x),p){case"dialog":xt("cancel",l),xt("close",l),_=x;break;case"iframe":case"object":case"embed":xt("load",l),_=x;break;case"video":case"audio":for(_=0;_<wc.length;_++)xt(wc[_],l);_=x;break;case"source":xt("error",l),_=x;break;case"img":case"image":case"link":xt("error",l),xt("load",l),_=x;break;case"details":xt("toggle",l),_=x;break;case"input":X(l,x),_=Q(l,x),xt("invalid",l);break;case"option":_=x;break;case"select":l._wrapperState={wasMultiple:!!x.multiple},_=W({},x,{value:void 0}),xt("invalid",l);break;case"textarea":Je(l,x),_=je(l,x),xt("invalid",l);break;default:_=x}tc(p,_),H=_;for(E in H)if(H.hasOwnProperty(E)){var Z=H[E];E==="style"?Lt(l,Z):E==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,Z!=null&&da(l,Z)):E==="children"?typeof Z=="string"?(p!=="textarea"||Z!=="")&&di(l,Z):typeof Z=="number"&&di(l,""+Z):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(s.hasOwnProperty(E)?Z!=null&&E==="onScroll"&&xt("scroll",l):Z!=null&&k(l,E,Z,R))}switch(p){case"input":pe(l),_e(l,x,!1);break;case"textarea":pe(l),Qt(l);break;case"option":x.value!=null&&l.setAttribute("value",""+ae(x.value));break;case"select":l.multiple=!!x.multiple,E=x.value,E!=null?he(l,!!x.multiple,E,!1):x.defaultValue!=null&&he(l,!!x.multiple,x.defaultValue,!0);break;default:typeof _.onClick=="function"&&(l.onclick=Ld)}switch(p){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return Cn(u),null;case 6:if(l&&u.stateNode!=null)kC(l,u,l.memoizedProps,x);else{if(typeof x!="string"&&u.stateNode===null)throw Error(t(166));if(p=ko(Nc.current),ko(hs.current),Hd(u)){if(x=u.stateNode,p=u.memoizedProps,x[ds]=u,(E=x.nodeValue!==p)&&(l=sr,l!==null))switch(l.tag){case 3:jd(x.nodeValue,p,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&jd(x.nodeValue,p,(l.mode&1)!==0)}E&&(u.flags|=4)}else x=(p.nodeType===9?p:p.ownerDocument).createTextNode(x),x[ds]=u,u.stateNode=x}return Cn(u),null;case 13:if(wt(Nt),x=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(kt&&ir!==null&&(u.mode&1)!==0&&(u.flags&128)===0)AS(),Ta(),u.flags|=98560,E=!1;else if(E=Hd(u),x!==null&&x.dehydrated!==null){if(l===null){if(!E)throw Error(t(318));if(E=u.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(t(317));E[ds]=u}else Ta(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Cn(u),E=!1}else Br!==null&&(jg(Br),Br=null),E=!0;if(!E)return u.flags&65536?u:null}return(u.flags&128)!==0?(u.lanes=p,u):(x=x!==null,x!==(l!==null&&l.memoizedState!==null)&&x&&(u.child.flags|=8192,(u.mode&1)!==0&&(l===null||(Nt.current&1)!==0?Jt===0&&(Jt=3):Vg())),u.updateQueue!==null&&(u.flags|=4),Cn(u),null);case 4:return Aa(),Tg(l,u),l===null&&bc(u.stateNode.containerInfo),Cn(u),null;case 10:return Qm(u.type._context),Cn(u),null;case 17:return Gn(u.type)&&Vd(),Cn(u),null;case 19:if(wt(Nt),E=u.memoizedState,E===null)return Cn(u),null;if(x=(u.flags&128)!==0,R=E.rendering,R===null)if(x)Dc(E,!1);else{if(Jt!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(R=Xd(l),R!==null){for(u.flags|=128,Dc(E,!1),x=R.updateQueue,x!==null&&(u.updateQueue=x,u.flags|=4),u.subtreeFlags=0,x=p,p=u.child;p!==null;)E=p,l=x,E.flags&=14680066,R=E.alternate,R===null?(E.childLanes=0,E.lanes=l,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=R.childLanes,E.lanes=R.lanes,E.child=R.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=R.memoizedProps,E.memoizedState=R.memoizedState,E.updateQueue=R.updateQueue,E.type=R.type,l=R.dependencies,E.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),p=p.sibling;return gt(Nt,Nt.current&1|2),u.child}l=l.sibling}E.tail!==null&&Ft()>Da&&(u.flags|=128,x=!0,Dc(E,!1),u.lanes=4194304)}else{if(!x)if(l=Xd(R),l!==null){if(u.flags|=128,x=!0,p=l.updateQueue,p!==null&&(u.updateQueue=p,u.flags|=4),Dc(E,!0),E.tail===null&&E.tailMode==="hidden"&&!R.alternate&&!kt)return Cn(u),null}else 2*Ft()-E.renderingStartTime>Da&&p!==1073741824&&(u.flags|=128,x=!0,Dc(E,!1),u.lanes=4194304);E.isBackwards?(R.sibling=u.child,u.child=R):(p=E.last,p!==null?p.sibling=R:u.child=R,E.last=R)}return E.tail!==null?(u=E.tail,E.rendering=u,E.tail=u.sibling,E.renderingStartTime=Ft(),u.sibling=null,p=Nt.current,gt(Nt,x?p&1|2:p&1),u):(Cn(u),null);case 22:case 23:return Fg(),x=u.memoizedState!==null,l!==null&&l.memoizedState!==null!==x&&(u.flags|=8192),x&&(u.mode&1)!==0?(or&1073741824)!==0&&(Cn(u),u.subtreeFlags&6&&(u.flags|=8192)):Cn(u),null;case 24:return null;case 25:return null}throw Error(t(156,u.tag))}function J2(l,u){switch(Gm(u),u.tag){case 1:return Gn(u.type)&&Vd(),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return Aa(),wt(qn),wt(bn),og(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 5:return sg(u),null;case 13:if(wt(Nt),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(t(340));Ta()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return wt(Nt),null;case 4:return Aa(),null;case 10:return Qm(u.type._context),null;case 22:case 23:return Fg(),null;case 24:return null;default:return null}}var ih=!1,_n=!1,Z2=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function Oa(l,u){var p=l.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(x){Pt(l,u,x)}else p.current=null}function kg(l,u,p){try{p()}catch(x){Pt(l,u,x)}}var EC=!1;function Q2(l,u){if(Fm=Td,l=iS(),Mm(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var x=p.getSelection&&p.getSelection();if(x&&x.rangeCount!==0){p=x.anchorNode;var _=x.anchorOffset,E=x.focusNode;x=x.focusOffset;try{p.nodeType,E.nodeType}catch{p=null;break e}var R=0,H=-1,Z=-1,le=0,we=0,Se=l,ve=null;t:for(;;){for(var Ne;Se!==p||_!==0&&Se.nodeType!==3||(H=R+_),Se!==E||x!==0&&Se.nodeType!==3||(Z=R+x),Se.nodeType===3&&(R+=Se.nodeValue.length),(Ne=Se.firstChild)!==null;)ve=Se,Se=Ne;for(;;){if(Se===l)break t;if(ve===p&&++le===_&&(H=R),ve===E&&++we===x&&(Z=R),(Ne=Se.nextSibling)!==null)break;Se=ve,ve=Se.parentNode}Se=Ne}p=H===-1||Z===-1?null:{start:H,end:Z}}else p=null}p=p||{start:0,end:0}}else p=null;for(Vm={focusedElem:l,selectionRange:p},Td=!1,Ae=u;Ae!==null;)if(u=Ae,l=u.child,(u.subtreeFlags&1028)!==0&&l!==null)l.return=u,Ae=l;else for(;Ae!==null;){u=Ae;try{var Me=u.alternate;if((u.flags&1024)!==0)switch(u.tag){case 0:case 11:case 15:break;case 1:if(Me!==null){var De=Me.memoizedProps,Vt=Me.memoizedState,ie=u.stateNode,ee=ie.getSnapshotBeforeUpdate(u.elementType===u.type?De:zr(u.type,De),Vt);ie.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:var oe=u.stateNode.containerInfo;oe.nodeType===1?oe.textContent="":oe.nodeType===9&&oe.documentElement&&oe.removeChild(oe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Ce){Pt(u,u.return,Ce)}if(l=u.sibling,l!==null){l.return=u.return,Ae=l;break}Ae=u.return}return Me=EC,EC=!1,Me}function Rc(l,u,p){var x=u.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var _=x=x.next;do{if((_.tag&l)===l){var E=_.destroy;_.destroy=void 0,E!==void 0&&kg(u,p,E)}_=_.next}while(_!==x)}}function oh(l,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var p=u=u.next;do{if((p.tag&l)===l){var x=p.create;p.destroy=x()}p=p.next}while(p!==u)}}function Eg(l){var u=l.ref;if(u!==null){var p=l.stateNode;switch(l.tag){case 5:l=p;break;default:l=p}typeof u=="function"?u(l):u.current=l}}function NC(l){var u=l.alternate;u!==null&&(l.alternate=null,NC(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&(delete u[ds],delete u[Cc],delete u[$m],delete u[I2],delete u[j2])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function AC(l){return l.tag===5||l.tag===3||l.tag===4}function MC(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||AC(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Ng(l,u,p){var x=l.tag;if(x===5||x===6)l=l.stateNode,u?p.nodeType===8?p.parentNode.insertBefore(l,u):p.insertBefore(l,u):(p.nodeType===8?(u=p.parentNode,u.insertBefore(l,p)):(u=p,u.appendChild(l)),p=p._reactRootContainer,p!=null||u.onclick!==null||(u.onclick=Ld));else if(x!==4&&(l=l.child,l!==null))for(Ng(l,u,p),l=l.sibling;l!==null;)Ng(l,u,p),l=l.sibling}function Ag(l,u,p){var x=l.tag;if(x===5||x===6)l=l.stateNode,u?p.insertBefore(l,u):p.appendChild(l);else if(x!==4&&(l=l.child,l!==null))for(Ag(l,u,p),l=l.sibling;l!==null;)Ag(l,u,p),l=l.sibling}var hn=null,Wr=!1;function Ti(l,u,p){for(p=p.child;p!==null;)OC(l,u,p),p=p.sibling}function OC(l,u,p){if(us&&typeof us.onCommitFiberUnmount=="function")try{us.onCommitFiberUnmount(xd,p)}catch{}switch(p.tag){case 5:_n||Oa(p,u);case 6:var x=hn,_=Wr;hn=null,Ti(l,u,p),hn=x,Wr=_,hn!==null&&(Wr?(l=hn,p=p.stateNode,l.nodeType===8?l.parentNode.removeChild(p):l.removeChild(p)):hn.removeChild(p.stateNode));break;case 18:hn!==null&&(Wr?(l=hn,p=p.stateNode,l.nodeType===8?Wm(l.parentNode,p):l.nodeType===1&&Wm(l,p),hc(l)):Wm(hn,p.stateNode));break;case 4:x=hn,_=Wr,hn=p.stateNode.containerInfo,Wr=!0,Ti(l,u,p),hn=x,Wr=_;break;case 0:case 11:case 14:case 15:if(!_n&&(x=p.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){_=x=x.next;do{var E=_,R=E.destroy;E=E.tag,R!==void 0&&((E&2)!==0||(E&4)!==0)&&kg(p,u,R),_=_.next}while(_!==x)}Ti(l,u,p);break;case 1:if(!_n&&(Oa(p,u),x=p.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=p.memoizedProps,x.state=p.memoizedState,x.componentWillUnmount()}catch(H){Pt(p,u,H)}Ti(l,u,p);break;case 21:Ti(l,u,p);break;case 22:p.mode&1?(_n=(x=_n)||p.memoizedState!==null,Ti(l,u,p),_n=x):Ti(l,u,p);break;default:Ti(l,u,p)}}function PC(l){var u=l.updateQueue;if(u!==null){l.updateQueue=null;var p=l.stateNode;p===null&&(p=l.stateNode=new Z2),u.forEach(function(x){var _=lL.bind(null,l,x);p.has(x)||(p.add(x),x.then(_,_))})}}function $r(l,u){var p=u.deletions;if(p!==null)for(var x=0;x<p.length;x++){var _=p[x];try{var E=l,R=u,H=R;e:for(;H!==null;){switch(H.tag){case 5:hn=H.stateNode,Wr=!1;break e;case 3:hn=H.stateNode.containerInfo,Wr=!0;break e;case 4:hn=H.stateNode.containerInfo,Wr=!0;break e}H=H.return}if(hn===null)throw Error(t(160));OC(E,R,_),hn=null,Wr=!1;var Z=_.alternate;Z!==null&&(Z.return=null),_.return=null}catch(le){Pt(_,u,le)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)DC(u,l),u=u.sibling}function DC(l,u){var p=l.alternate,x=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if($r(u,l),ps(l),x&4){try{Rc(3,l,l.return),oh(3,l)}catch(De){Pt(l,l.return,De)}try{Rc(5,l,l.return)}catch(De){Pt(l,l.return,De)}}break;case 1:$r(u,l),ps(l),x&512&&p!==null&&Oa(p,p.return);break;case 5:if($r(u,l),ps(l),x&512&&p!==null&&Oa(p,p.return),l.flags&32){var _=l.stateNode;try{di(_,"")}catch(De){Pt(l,l.return,De)}}if(x&4&&(_=l.stateNode,_!=null)){var E=l.memoizedProps,R=p!==null?p.memoizedProps:E,H=l.type,Z=l.updateQueue;if(l.updateQueue=null,Z!==null)try{H==="input"&&E.type==="radio"&&E.name!=null&&Y(_,E),ha(H,R);var le=ha(H,E);for(R=0;R<Z.length;R+=2){var we=Z[R],Se=Z[R+1];we==="style"?Lt(_,Se):we==="dangerouslySetInnerHTML"?da(_,Se):we==="children"?di(_,Se):k(_,we,Se,le)}switch(H){case"input":fe(_,E);break;case"textarea":mt(_,E);break;case"select":var ve=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!E.multiple;var Ne=E.value;Ne!=null?he(_,!!E.multiple,Ne,!1):ve!==!!E.multiple&&(E.defaultValue!=null?he(_,!!E.multiple,E.defaultValue,!0):he(_,!!E.multiple,E.multiple?[]:"",!1))}_[Cc]=E}catch(De){Pt(l,l.return,De)}}break;case 6:if($r(u,l),ps(l),x&4){if(l.stateNode===null)throw Error(t(162));_=l.stateNode,E=l.memoizedProps;try{_.nodeValue=E}catch(De){Pt(l,l.return,De)}}break;case 3:if($r(u,l),ps(l),x&4&&p!==null&&p.memoizedState.isDehydrated)try{hc(u.containerInfo)}catch(De){Pt(l,l.return,De)}break;case 4:$r(u,l),ps(l);break;case 13:$r(u,l),ps(l),_=l.child,_.flags&8192&&(E=_.memoizedState!==null,_.stateNode.isHidden=E,!E||_.alternate!==null&&_.alternate.memoizedState!==null||(Pg=Ft())),x&4&&PC(l);break;case 22:if(we=p!==null&&p.memoizedState!==null,l.mode&1?(_n=(le=_n)||we,$r(u,l),_n=le):$r(u,l),ps(l),x&8192){if(le=l.memoizedState!==null,(l.stateNode.isHidden=le)&&!we&&(l.mode&1)!==0)for(Ae=l,we=l.child;we!==null;){for(Se=Ae=we;Ae!==null;){switch(ve=Ae,Ne=ve.child,ve.tag){case 0:case 11:case 14:case 15:Rc(4,ve,ve.return);break;case 1:Oa(ve,ve.return);var Me=ve.stateNode;if(typeof Me.componentWillUnmount=="function"){x=ve,p=ve.return;try{u=x,Me.props=u.memoizedProps,Me.state=u.memoizedState,Me.componentWillUnmount()}catch(De){Pt(x,p,De)}}break;case 5:Oa(ve,ve.return);break;case 22:if(ve.memoizedState!==null){jC(Se);continue}}Ne!==null?(Ne.return=ve,Ae=Ne):jC(Se)}we=we.sibling}e:for(we=null,Se=l;;){if(Se.tag===5){if(we===null){we=Se;try{_=Se.stateNode,le?(E=_.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(H=Se.stateNode,Z=Se.memoizedProps.style,R=Z!=null&&Z.hasOwnProperty("display")?Z.display:null,H.style.display=vr("display",R))}catch(De){Pt(l,l.return,De)}}}else if(Se.tag===6){if(we===null)try{Se.stateNode.nodeValue=le?"":Se.memoizedProps}catch(De){Pt(l,l.return,De)}}else if((Se.tag!==22&&Se.tag!==23||Se.memoizedState===null||Se===l)&&Se.child!==null){Se.child.return=Se,Se=Se.child;continue}if(Se===l)break e;for(;Se.sibling===null;){if(Se.return===null||Se.return===l)break e;we===Se&&(we=null),Se=Se.return}we===Se&&(we=null),Se.sibling.return=Se.return,Se=Se.sibling}}break;case 19:$r(u,l),ps(l),x&4&&PC(l);break;case 21:break;default:$r(u,l),ps(l)}}function ps(l){var u=l.flags;if(u&2){try{e:{for(var p=l.return;p!==null;){if(AC(p)){var x=p;break e}p=p.return}throw Error(t(160))}switch(x.tag){case 5:var _=x.stateNode;x.flags&32&&(di(_,""),x.flags&=-33);var E=MC(l);Ag(l,E,_);break;case 3:case 4:var R=x.stateNode.containerInfo,H=MC(l);Ng(l,H,R);break;default:throw Error(t(161))}}catch(Z){Pt(l,l.return,Z)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function eL(l,u,p){Ae=l,RC(l)}function RC(l,u,p){for(var x=(l.mode&1)!==0;Ae!==null;){var _=Ae,E=_.child;if(_.tag===22&&x){var R=_.memoizedState!==null||ih;if(!R){var H=_.alternate,Z=H!==null&&H.memoizedState!==null||_n;H=ih;var le=_n;if(ih=R,(_n=Z)&&!le)for(Ae=_;Ae!==null;)R=Ae,Z=R.child,R.tag===22&&R.memoizedState!==null?LC(_):Z!==null?(Z.return=R,Ae=Z):LC(_);for(;E!==null;)Ae=E,RC(E),E=E.sibling;Ae=_,ih=H,_n=le}IC(l)}else(_.subtreeFlags&8772)!==0&&E!==null?(E.return=_,Ae=E):IC(l)}}function IC(l){for(;Ae!==null;){var u=Ae;if((u.flags&8772)!==0){var p=u.alternate;try{if((u.flags&8772)!==0)switch(u.tag){case 0:case 11:case 15:_n||oh(5,u);break;case 1:var x=u.stateNode;if(u.flags&4&&!_n)if(p===null)x.componentDidMount();else{var _=u.elementType===u.type?p.memoizedProps:zr(u.type,p.memoizedProps);x.componentDidUpdate(_,p.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var E=u.updateQueue;E!==null&&jS(u,E,x);break;case 3:var R=u.updateQueue;if(R!==null){if(p=null,u.child!==null)switch(u.child.tag){case 5:p=u.child.stateNode;break;case 1:p=u.child.stateNode}jS(u,R,p)}break;case 5:var H=u.stateNode;if(p===null&&u.flags&4){p=H;var Z=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":Z.autoFocus&&p.focus();break;case"img":Z.src&&(p.src=Z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var le=u.alternate;if(le!==null){var we=le.memoizedState;if(we!==null){var Se=we.dehydrated;Se!==null&&hc(Se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}_n||u.flags&512&&Eg(u)}catch(ve){Pt(u,u.return,ve)}}if(u===l){Ae=null;break}if(p=u.sibling,p!==null){p.return=u.return,Ae=p;break}Ae=u.return}}function jC(l){for(;Ae!==null;){var u=Ae;if(u===l){Ae=null;break}var p=u.sibling;if(p!==null){p.return=u.return,Ae=p;break}Ae=u.return}}function LC(l){for(;Ae!==null;){var u=Ae;try{switch(u.tag){case 0:case 11:case 15:var p=u.return;try{oh(4,u)}catch(Z){Pt(u,p,Z)}break;case 1:var x=u.stateNode;if(typeof x.componentDidMount=="function"){var _=u.return;try{x.componentDidMount()}catch(Z){Pt(u,_,Z)}}var E=u.return;try{Eg(u)}catch(Z){Pt(u,E,Z)}break;case 5:var R=u.return;try{Eg(u)}catch(Z){Pt(u,R,Z)}}}catch(Z){Pt(u,u.return,Z)}if(u===l){Ae=null;break}var H=u.sibling;if(H!==null){H.return=u.return,Ae=H;break}Ae=u.return}}var tL=Math.ceil,ah=M.ReactCurrentDispatcher,Mg=M.ReactCurrentOwner,_r=M.ReactCurrentBatchConfig,st=0,tn=null,Wt=null,fn=0,or=0,Pa=wi(0),Jt=0,Ic=null,No=0,lh=0,Og=0,jc=null,Yn=null,Pg=0,Da=1/0,Hs=null,ch=!1,Dg=null,ki=null,uh=!1,Ei=null,dh=0,Lc=0,Rg=null,hh=-1,fh=0;function jn(){return(st&6)!==0?Ft():hh!==-1?hh:hh=Ft()}function Ni(l){return(l.mode&1)===0?1:(st&2)!==0&&fn!==0?fn&-fn:F2.transition!==null?(fh===0&&(fh=Mb()),fh):(l=lt,l!==0||(l=window.event,l=l===void 0?16:Vb(l.type)),l)}function Hr(l,u,p,x){if(50<Lc)throw Lc=0,Rg=null,Error(t(185));ac(l,p,x),((st&2)===0||l!==tn)&&(l===tn&&((st&2)===0&&(lh|=p),Jt===4&&Ai(l,fn)),Xn(l,x),p===1&&st===0&&(u.mode&1)===0&&(Da=Ft()+500,zd&&Si()))}function Xn(l,u){var p=l.callbackNode;Fj(l,u);var x=Sd(l,l===tn?fn:0);if(x===0)p!==null&&Eb(p),l.callbackNode=null,l.callbackPriority=0;else if(u=x&-x,l.callbackPriority!==u){if(p!=null&&Eb(p),u===1)l.tag===0?L2(VC.bind(null,l)):_S(VC.bind(null,l)),D2(function(){(st&6)===0&&Si()}),p=null;else{switch(Ob(x)){case 1:p=fm;break;case 4:p=Nb;break;case 16:p=vd;break;case 536870912:p=Ab;break;default:p=vd}p=GC(p,FC.bind(null,l))}l.callbackPriority=u,l.callbackNode=p}}function FC(l,u){if(hh=-1,fh=0,(st&6)!==0)throw Error(t(327));var p=l.callbackNode;if(Ra()&&l.callbackNode!==p)return null;var x=Sd(l,l===tn?fn:0);if(x===0)return null;if((x&30)!==0||(x&l.expiredLanes)!==0||u)u=ph(l,x);else{u=x;var _=st;st|=2;var E=zC();(tn!==l||fn!==u)&&(Hs=null,Da=Ft()+500,Mo(l,u));do try{sL();break}catch(H){BC(l,H)}while(!0);Zm(),ah.current=E,st=_,Wt!==null?u=0:(tn=null,fn=0,u=Jt)}if(u!==0){if(u===2&&(_=pm(l),_!==0&&(x=_,u=Ig(l,_))),u===1)throw p=Ic,Mo(l,0),Ai(l,x),Xn(l,Ft()),p;if(u===6)Ai(l,x);else{if(_=l.current.alternate,(x&30)===0&&!nL(_)&&(u=ph(l,x),u===2&&(E=pm(l),E!==0&&(x=E,u=Ig(l,E))),u===1))throw p=Ic,Mo(l,0),Ai(l,x),Xn(l,Ft()),p;switch(l.finishedWork=_,l.finishedLanes=x,u){case 0:case 1:throw Error(t(345));case 2:Oo(l,Yn,Hs);break;case 3:if(Ai(l,x),(x&130023424)===x&&(u=Pg+500-Ft(),10<u)){if(Sd(l,0)!==0)break;if(_=l.suspendedLanes,(_&x)!==x){jn(),l.pingedLanes|=l.suspendedLanes&_;break}l.timeoutHandle=zm(Oo.bind(null,l,Yn,Hs),u);break}Oo(l,Yn,Hs);break;case 4:if(Ai(l,x),(x&4194240)===x)break;for(u=l.eventTimes,_=-1;0<x;){var R=31-Fr(x);E=1<<R,R=u[R],R>_&&(_=R),x&=~E}if(x=_,x=Ft()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*tL(x/1960))-x,10<x){l.timeoutHandle=zm(Oo.bind(null,l,Yn,Hs),x);break}Oo(l,Yn,Hs);break;case 5:Oo(l,Yn,Hs);break;default:throw Error(t(329))}}}return Xn(l,Ft()),l.callbackNode===p?FC.bind(null,l):null}function Ig(l,u){var p=jc;return l.current.memoizedState.isDehydrated&&(Mo(l,u).flags|=256),l=ph(l,u),l!==2&&(u=Yn,Yn=p,u!==null&&jg(u)),l}function jg(l){Yn===null?Yn=l:Yn.push.apply(Yn,l)}function nL(l){for(var u=l;;){if(u.flags&16384){var p=u.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var x=0;x<p.length;x++){var _=p[x],E=_.getSnapshot;_=_.value;try{if(!Vr(E(),_))return!1}catch{return!1}}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Ai(l,u){for(u&=~Og,u&=~lh,l.suspendedLanes|=u,l.pingedLanes&=~u,l=l.expirationTimes;0<u;){var p=31-Fr(u),x=1<<p;l[p]=-1,u&=~x}}function VC(l){if((st&6)!==0)throw Error(t(327));Ra();var u=Sd(l,0);if((u&1)===0)return Xn(l,Ft()),null;var p=ph(l,u);if(l.tag!==0&&p===2){var x=pm(l);x!==0&&(u=x,p=Ig(l,x))}if(p===1)throw p=Ic,Mo(l,0),Ai(l,u),Xn(l,Ft()),p;if(p===6)throw Error(t(345));return l.finishedWork=l.current.alternate,l.finishedLanes=u,Oo(l,Yn,Hs),Xn(l,Ft()),null}function Lg(l,u){var p=st;st|=1;try{return l(u)}finally{st=p,st===0&&(Da=Ft()+500,zd&&Si())}}function Ao(l){Ei!==null&&Ei.tag===0&&(st&6)===0&&Ra();var u=st;st|=1;var p=_r.transition,x=lt;try{if(_r.transition=null,lt=1,l)return l()}finally{lt=x,_r.transition=p,st=u,(st&6)===0&&Si()}}function Fg(){or=Pa.current,wt(Pa)}function Mo(l,u){l.finishedWork=null,l.finishedLanes=0;var p=l.timeoutHandle;if(p!==-1&&(l.timeoutHandle=-1,P2(p)),Wt!==null)for(p=Wt.return;p!==null;){var x=p;switch(Gm(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&Vd();break;case 3:Aa(),wt(qn),wt(bn),og();break;case 5:sg(x);break;case 4:Aa();break;case 13:wt(Nt);break;case 19:wt(Nt);break;case 10:Qm(x.type._context);break;case 22:case 23:Fg()}p=p.return}if(tn=l,Wt=l=Mi(l.current,null),fn=or=u,Jt=0,Ic=null,Og=lh=No=0,Yn=jc=null,To!==null){for(u=0;u<To.length;u++)if(p=To[u],x=p.interleaved,x!==null){p.interleaved=null;var _=x.next,E=p.pending;if(E!==null){var R=E.next;E.next=_,x.next=R}p.pending=x}To=null}return l}function BC(l,u){do{var p=Wt;try{if(Zm(),Jd.current=th,Zd){for(var x=At.memoizedState;x!==null;){var _=x.queue;_!==null&&(_.pending=null),x=x.next}Zd=!1}if(Eo=0,en=Xt=At=null,Ac=!1,Mc=0,Mg.current=null,p===null||p.return===null){Jt=1,Ic=u,Wt=null;break}e:{var E=l,R=p.return,H=p,Z=u;if(u=fn,H.flags|=32768,Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var le=Z,we=H,Se=we.tag;if((we.mode&1)===0&&(Se===0||Se===11||Se===15)){var ve=we.alternate;ve?(we.updateQueue=ve.updateQueue,we.memoizedState=ve.memoizedState,we.lanes=ve.lanes):(we.updateQueue=null,we.memoizedState=null)}var Ne=dC(R);if(Ne!==null){Ne.flags&=-257,hC(Ne,R,H,E,u),Ne.mode&1&&uC(E,le,u),u=Ne,Z=le;var Me=u.updateQueue;if(Me===null){var De=new Set;De.add(Z),u.updateQueue=De}else Me.add(Z);break e}else{if((u&1)===0){uC(E,le,u),Vg();break e}Z=Error(t(426))}}else if(kt&&H.mode&1){var Vt=dC(R);if(Vt!==null){(Vt.flags&65536)===0&&(Vt.flags|=256),hC(Vt,R,H,E,u),Xm(Ma(Z,H));break e}}E=Z=Ma(Z,H),Jt!==4&&(Jt=2),jc===null?jc=[E]:jc.push(E),E=R;do{switch(E.tag){case 3:E.flags|=65536,u&=-u,E.lanes|=u;var ie=lC(E,Z,u);IS(E,ie);break e;case 1:H=Z;var ee=E.type,oe=E.stateNode;if((E.flags&128)===0&&(typeof ee.getDerivedStateFromError=="function"||oe!==null&&typeof oe.componentDidCatch=="function"&&(ki===null||!ki.has(oe)))){E.flags|=65536,u&=-u,E.lanes|=u;var Ce=cC(E,H,u);IS(E,Ce);break e}}E=E.return}while(E!==null)}$C(p)}catch(Ie){u=Ie,Wt===p&&p!==null&&(Wt=p=p.return);continue}break}while(!0)}function zC(){var l=ah.current;return ah.current=th,l===null?th:l}function Vg(){(Jt===0||Jt===3||Jt===2)&&(Jt=4),tn===null||(No&268435455)===0&&(lh&268435455)===0||Ai(tn,fn)}function ph(l,u){var p=st;st|=2;var x=zC();(tn!==l||fn!==u)&&(Hs=null,Mo(l,u));do try{rL();break}catch(_){BC(l,_)}while(!0);if(Zm(),st=p,ah.current=x,Wt!==null)throw Error(t(261));return tn=null,fn=0,Jt}function rL(){for(;Wt!==null;)WC(Wt)}function sL(){for(;Wt!==null&&!Aj();)WC(Wt)}function WC(l){var u=qC(l.alternate,l,or);l.memoizedProps=l.pendingProps,u===null?$C(l):Wt=u,Mg.current=null}function $C(l){var u=l;do{var p=u.alternate;if(l=u.return,(u.flags&32768)===0){if(p=X2(p,u,or),p!==null){Wt=p;return}}else{if(p=J2(p,u),p!==null){p.flags&=32767,Wt=p;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{Jt=6,Wt=null;return}}if(u=u.sibling,u!==null){Wt=u;return}Wt=u=l}while(u!==null);Jt===0&&(Jt=5)}function Oo(l,u,p){var x=lt,_=_r.transition;try{_r.transition=null,lt=1,iL(l,u,p,x)}finally{_r.transition=_,lt=x}return null}function iL(l,u,p,x){do Ra();while(Ei!==null);if((st&6)!==0)throw Error(t(327));p=l.finishedWork;var _=l.finishedLanes;if(p===null)return null;if(l.finishedWork=null,l.finishedLanes=0,p===l.current)throw Error(t(177));l.callbackNode=null,l.callbackPriority=0;var E=p.lanes|p.childLanes;if(Vj(l,E),l===tn&&(Wt=tn=null,fn=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||uh||(uh=!0,GC(vd,function(){return Ra(),null})),E=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||E){E=_r.transition,_r.transition=null;var R=lt;lt=1;var H=st;st|=4,Mg.current=null,Q2(l,p),DC(p,l),T2(Vm),Td=!!Fm,Vm=Fm=null,l.current=p,eL(p),Mj(),st=H,lt=R,_r.transition=E}else l.current=p;if(uh&&(uh=!1,Ei=l,dh=_),E=l.pendingLanes,E===0&&(ki=null),Dj(p.stateNode),Xn(l,Ft()),u!==null)for(x=l.onRecoverableError,p=0;p<u.length;p++)_=u[p],x(_.value,{componentStack:_.stack,digest:_.digest});if(ch)throw ch=!1,l=Dg,Dg=null,l;return(dh&1)!==0&&l.tag!==0&&Ra(),E=l.pendingLanes,(E&1)!==0?l===Rg?Lc++:(Lc=0,Rg=l):Lc=0,Si(),null}function Ra(){if(Ei!==null){var l=Ob(dh),u=_r.transition,p=lt;try{if(_r.transition=null,lt=16>l?16:l,Ei===null)var x=!1;else{if(l=Ei,Ei=null,dh=0,(st&6)!==0)throw Error(t(331));var _=st;for(st|=4,Ae=l.current;Ae!==null;){var E=Ae,R=E.child;if((Ae.flags&16)!==0){var H=E.deletions;if(H!==null){for(var Z=0;Z<H.length;Z++){var le=H[Z];for(Ae=le;Ae!==null;){var we=Ae;switch(we.tag){case 0:case 11:case 15:Rc(8,we,E)}var Se=we.child;if(Se!==null)Se.return=we,Ae=Se;else for(;Ae!==null;){we=Ae;var ve=we.sibling,Ne=we.return;if(NC(we),we===le){Ae=null;break}if(ve!==null){ve.return=Ne,Ae=ve;break}Ae=Ne}}}var Me=E.alternate;if(Me!==null){var De=Me.child;if(De!==null){Me.child=null;do{var Vt=De.sibling;De.sibling=null,De=Vt}while(De!==null)}}Ae=E}}if((E.subtreeFlags&2064)!==0&&R!==null)R.return=E,Ae=R;else e:for(;Ae!==null;){if(E=Ae,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:Rc(9,E,E.return)}var ie=E.sibling;if(ie!==null){ie.return=E.return,Ae=ie;break e}Ae=E.return}}var ee=l.current;for(Ae=ee;Ae!==null;){R=Ae;var oe=R.child;if((R.subtreeFlags&2064)!==0&&oe!==null)oe.return=R,Ae=oe;else e:for(R=ee;Ae!==null;){if(H=Ae,(H.flags&2048)!==0)try{switch(H.tag){case 0:case 11:case 15:oh(9,H)}}catch(Ie){Pt(H,H.return,Ie)}if(H===R){Ae=null;break e}var Ce=H.sibling;if(Ce!==null){Ce.return=H.return,Ae=Ce;break e}Ae=H.return}}if(st=_,Si(),us&&typeof us.onPostCommitFiberRoot=="function")try{us.onPostCommitFiberRoot(xd,l)}catch{}x=!0}return x}finally{lt=p,_r.transition=u}}return!1}function HC(l,u,p){u=Ma(p,u),u=lC(l,u,1),l=_i(l,u,1),u=jn(),l!==null&&(ac(l,1,u),Xn(l,u))}function Pt(l,u,p){if(l.tag===3)HC(l,l,p);else for(;u!==null;){if(u.tag===3){HC(u,l,p);break}else if(u.tag===1){var x=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(ki===null||!ki.has(x))){l=Ma(p,l),l=cC(u,l,1),u=_i(u,l,1),l=jn(),u!==null&&(ac(u,1,l),Xn(u,l));break}}u=u.return}}function oL(l,u,p){var x=l.pingCache;x!==null&&x.delete(u),u=jn(),l.pingedLanes|=l.suspendedLanes&p,tn===l&&(fn&p)===p&&(Jt===4||Jt===3&&(fn&130023424)===fn&&500>Ft()-Pg?Mo(l,0):Og|=p),Xn(l,u)}function UC(l,u){u===0&&((l.mode&1)===0?u=1:(u=bd,bd<<=1,(bd&130023424)===0&&(bd=4194304)));var p=jn();l=zs(l,u),l!==null&&(ac(l,u,p),Xn(l,p))}function aL(l){var u=l.memoizedState,p=0;u!==null&&(p=u.retryLane),UC(l,p)}function lL(l,u){var p=0;switch(l.tag){case 13:var x=l.stateNode,_=l.memoizedState;_!==null&&(p=_.retryLane);break;case 19:x=l.stateNode;break;default:throw Error(t(314))}x!==null&&x.delete(u),UC(l,p)}var qC;qC=function(l,u,p){if(l!==null)if(l.memoizedProps!==u.pendingProps||qn.current)Kn=!0;else{if((l.lanes&p)===0&&(u.flags&128)===0)return Kn=!1,Y2(l,u,p);Kn=(l.flags&131072)!==0}else Kn=!1,kt&&(u.flags&1048576)!==0&&TS(u,$d,u.index);switch(u.lanes=0,u.tag){case 2:var x=u.type;sh(l,u),l=u.pendingProps;var _=Sa(u,bn.current);Na(u,p),_=cg(null,u,x,l,_,p);var E=ug();return u.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,Gn(x)?(E=!0,Bd(u)):E=!1,u.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,ng(u),_.updater=nh,u.stateNode=_,_._reactInternals=u,gg(u,x,l,p),u=wg(null,u,x,!0,E,p)):(u.tag=0,kt&&E&&qm(u),In(null,u,_,p),u=u.child),u;case 16:x=u.elementType;e:{switch(sh(l,u),l=u.pendingProps,_=x._init,x=_(x._payload),u.type=x,_=u.tag=uL(x),l=zr(x,l),_){case 0:u=xg(null,u,x,l,p);break e;case 1:u=vC(null,u,x,l,p);break e;case 11:u=fC(null,u,x,l,p);break e;case 14:u=pC(null,u,x,zr(x.type,l),p);break e}throw Error(t(306,x,""))}return u;case 0:return x=u.type,_=u.pendingProps,_=u.elementType===x?_:zr(x,_),xg(l,u,x,_,p);case 1:return x=u.type,_=u.pendingProps,_=u.elementType===x?_:zr(x,_),vC(l,u,x,_,p);case 3:e:{if(xC(u),l===null)throw Error(t(387));x=u.pendingProps,E=u.memoizedState,_=E.element,RS(l,u),Yd(u,x,null,p);var R=u.memoizedState;if(x=R.element,E.isDehydrated)if(E={element:x,isDehydrated:!1,cache:R.cache,pendingSuspenseBoundaries:R.pendingSuspenseBoundaries,transitions:R.transitions},u.updateQueue.baseState=E,u.memoizedState=E,u.flags&256){_=Ma(Error(t(423)),u),u=wC(l,u,x,p,_);break e}else if(x!==_){_=Ma(Error(t(424)),u),u=wC(l,u,x,p,_);break e}else for(ir=xi(u.stateNode.containerInfo.firstChild),sr=u,kt=!0,Br=null,p=PS(u,null,x,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Ta(),x===_){u=$s(l,u,p);break e}In(l,u,x,p)}u=u.child}return u;case 5:return LS(u),l===null&&Ym(u),x=u.type,_=u.pendingProps,E=l!==null?l.memoizedProps:null,R=_.children,Bm(x,_)?R=null:E!==null&&Bm(x,E)&&(u.flags|=32),yC(l,u),In(l,u,R,p),u.child;case 6:return l===null&&Ym(u),null;case 13:return bC(l,u,p);case 4:return rg(u,u.stateNode.containerInfo),x=u.pendingProps,l===null?u.child=ka(u,null,x,p):In(l,u,x,p),u.child;case 11:return x=u.type,_=u.pendingProps,_=u.elementType===x?_:zr(x,_),fC(l,u,x,_,p);case 7:return In(l,u,u.pendingProps,p),u.child;case 8:return In(l,u,u.pendingProps.children,p),u.child;case 12:return In(l,u,u.pendingProps.children,p),u.child;case 10:e:{if(x=u.type._context,_=u.pendingProps,E=u.memoizedProps,R=_.value,gt(qd,x._currentValue),x._currentValue=R,E!==null)if(Vr(E.value,R)){if(E.children===_.children&&!qn.current){u=$s(l,u,p);break e}}else for(E=u.child,E!==null&&(E.return=u);E!==null;){var H=E.dependencies;if(H!==null){R=E.child;for(var Z=H.firstContext;Z!==null;){if(Z.context===x){if(E.tag===1){Z=Ws(-1,p&-p),Z.tag=2;var le=E.updateQueue;if(le!==null){le=le.shared;var we=le.pending;we===null?Z.next=Z:(Z.next=we.next,we.next=Z),le.pending=Z}}E.lanes|=p,Z=E.alternate,Z!==null&&(Z.lanes|=p),eg(E.return,p,u),H.lanes|=p;break}Z=Z.next}}else if(E.tag===10)R=E.type===u.type?null:E.child;else if(E.tag===18){if(R=E.return,R===null)throw Error(t(341));R.lanes|=p,H=R.alternate,H!==null&&(H.lanes|=p),eg(R,p,u),R=E.sibling}else R=E.child;if(R!==null)R.return=E;else for(R=E;R!==null;){if(R===u){R=null;break}if(E=R.sibling,E!==null){E.return=R.return,R=E;break}R=R.return}E=R}In(l,u,_.children,p),u=u.child}return u;case 9:return _=u.type,x=u.pendingProps.children,Na(u,p),_=Sr(_),x=x(_),u.flags|=1,In(l,u,x,p),u.child;case 14:return x=u.type,_=zr(x,u.pendingProps),_=zr(x.type,_),pC(l,u,x,_,p);case 15:return mC(l,u,u.type,u.pendingProps,p);case 17:return x=u.type,_=u.pendingProps,_=u.elementType===x?_:zr(x,_),sh(l,u),u.tag=1,Gn(x)?(l=!0,Bd(u)):l=!1,Na(u,p),oC(u,x,_),gg(u,x,_,p),wg(null,u,x,!0,l,p);case 19:return CC(l,u,p);case 22:return gC(l,u,p)}throw Error(t(156,u.tag))};function GC(l,u){return kb(l,u)}function cL(l,u,p,x){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tr(l,u,p,x){return new cL(l,u,p,x)}function Bg(l){return l=l.prototype,!(!l||!l.isReactComponent)}function uL(l){if(typeof l=="function")return Bg(l)?1:0;if(l!=null){if(l=l.$$typeof,l===F)return 11;if(l===q)return 14}return 2}function Mi(l,u){var p=l.alternate;return p===null?(p=Tr(l.tag,u,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=u,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&14680064,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,u=l.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p}function mh(l,u,p,x,_,E){var R=2;if(x=l,typeof l=="function")Bg(l)&&(R=1);else if(typeof l=="string")R=5;else e:switch(l){case D:return Po(p.children,_,E,u);case I:R=8,_|=8;break;case L:return l=Tr(12,p,u,_|2),l.elementType=L,l.lanes=E,l;case U:return l=Tr(13,p,u,_),l.elementType=U,l.lanes=E,l;case B:return l=Tr(19,p,u,_),l.elementType=B,l.lanes=E,l;case G:return gh(p,_,E,u);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case A:R=10;break e;case V:R=9;break e;case F:R=11;break e;case q:R=14;break e;case K:R=16,x=null;break e}throw Error(t(130,l==null?l:typeof l,""))}return u=Tr(R,p,u,_),u.elementType=l,u.type=x,u.lanes=E,u}function Po(l,u,p,x){return l=Tr(7,l,x,u),l.lanes=p,l}function gh(l,u,p,x){return l=Tr(22,l,x,u),l.elementType=G,l.lanes=p,l.stateNode={isHidden:!1},l}function zg(l,u,p){return l=Tr(6,l,null,u),l.lanes=p,l}function Wg(l,u,p){return u=Tr(4,l.children!==null?l.children:[],l.key,u),u.lanes=p,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}function dL(l,u,p,x,_){this.tag=u,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mm(0),this.expirationTimes=mm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mm(0),this.identifierPrefix=x,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function $g(l,u,p,x,_,E,R,H,Z){return l=new dL(l,u,p,H,Z),u===1?(u=1,E===!0&&(u|=8)):u=0,E=Tr(3,null,null,u),l.current=E,E.stateNode=l,E.memoizedState={element:x,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},ng(E),l}function hL(l,u,p){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:x==null?null:""+x,children:l,containerInfo:u,implementation:p}}function KC(l){if(!l)return bi;l=l._reactInternals;e:{if(wo(l)!==l||l.tag!==1)throw Error(t(170));var u=l;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(Gn(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(t(171))}if(l.tag===1){var p=l.type;if(Gn(p))return SS(l,p,u)}return u}function YC(l,u,p,x,_,E,R,H,Z){return l=$g(p,x,!0,l,_,E,R,H,Z),l.context=KC(null),p=l.current,x=jn(),_=Ni(p),E=Ws(x,_),E.callback=u??null,_i(p,E,_),l.current.lanes=_,ac(l,_,x),Xn(l,x),l}function yh(l,u,p,x){var _=u.current,E=jn(),R=Ni(_);return p=KC(p),u.context===null?u.context=p:u.pendingContext=p,u=Ws(E,R),u.payload={element:l},x=x===void 0?null:x,x!==null&&(u.callback=x),l=_i(_,u,R),l!==null&&(Hr(l,_,R,E),Kd(l,_,R)),R}function vh(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function XC(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<u?p:u}}function Hg(l,u){XC(l,u),(l=l.alternate)&&XC(l,u)}function fL(){return null}var JC=typeof reportError=="function"?reportError:function(l){console.error(l)};function Ug(l){this._internalRoot=l}xh.prototype.render=Ug.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(t(409));yh(l,u,null,null)},xh.prototype.unmount=Ug.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;Ao(function(){yh(null,l,null,null)}),u[Ls]=null}};function xh(l){this._internalRoot=l}xh.prototype.unstable_scheduleHydration=function(l){if(l){var u=Rb();l={blockedOn:null,target:l,priority:u};for(var p=0;p<gi.length&&u!==0&&u<gi[p].priority;p++);gi.splice(p,0,l),p===0&&Lb(l)}};function qg(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function wh(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function ZC(){}function pL(l,u,p,x,_){if(_){if(typeof x=="function"){var E=x;x=function(){var le=vh(R);E.call(le)}}var R=YC(u,x,l,0,null,!1,!1,"",ZC);return l._reactRootContainer=R,l[Ls]=R.current,bc(l.nodeType===8?l.parentNode:l),Ao(),R}for(;_=l.lastChild;)l.removeChild(_);if(typeof x=="function"){var H=x;x=function(){var le=vh(Z);H.call(le)}}var Z=$g(l,0,!1,null,null,!1,!1,"",ZC);return l._reactRootContainer=Z,l[Ls]=Z.current,bc(l.nodeType===8?l.parentNode:l),Ao(function(){yh(u,Z,p,x)}),Z}function bh(l,u,p,x,_){var E=p._reactRootContainer;if(E){var R=E;if(typeof _=="function"){var H=_;_=function(){var Z=vh(R);H.call(Z)}}yh(u,R,l,_)}else R=pL(p,u,l,_,x);return vh(R)}Pb=function(l){switch(l.tag){case 3:var u=l.stateNode;if(u.current.memoizedState.isDehydrated){var p=oc(u.pendingLanes);p!==0&&(gm(u,p|1),Xn(u,Ft()),(st&6)===0&&(Da=Ft()+500,Si()))}break;case 13:Ao(function(){var x=zs(l,1);if(x!==null){var _=jn();Hr(x,l,1,_)}}),Hg(l,1)}},ym=function(l){if(l.tag===13){var u=zs(l,134217728);if(u!==null){var p=jn();Hr(u,l,134217728,p)}Hg(l,134217728)}},Db=function(l){if(l.tag===13){var u=Ni(l),p=zs(l,u);if(p!==null){var x=jn();Hr(p,l,u,x)}Hg(l,u)}},Rb=function(){return lt},Ib=function(l,u){var p=lt;try{return lt=l,u()}finally{lt=p}},cs=function(l,u,p){switch(u){case"input":if(fe(l,p),u=p.name,p.type==="radio"&&u!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<p.length;u++){var x=p[u];if(x!==l&&x.form===l.form){var _=Fd(x);if(!_)throw Error(t(90));ye(x),fe(x,_)}}}break;case"textarea":mt(l,p);break;case"select":u=p.value,u!=null&&he(l,!!p.multiple,u,!1)}},xb=Lg,wb=Ao;var mL={usingClientEntryPoint:!1,Events:[_c,wa,Fd,nc,vb,Lg]},Fc={findFiberByHostInstance:bo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gL={bundleType:Fc.bundleType,version:Fc.version,rendererPackageName:Fc.rendererPackageName,rendererConfig:Fc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=_b(l),l===null?null:l.stateNode},findFiberByHostInstance:Fc.findFiberByHostInstance||fL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sh.isDisabled&&Sh.supportsFiber)try{xd=Sh.inject(gL),us=Sh}catch{}}return Jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mL,Jn.createPortal=function(l,u){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qg(u))throw Error(t(200));return hL(l,u,null,p)},Jn.createRoot=function(l,u){if(!qg(l))throw Error(t(299));var p=!1,x="",_=JC;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(x=u.identifierPrefix),u.onRecoverableError!==void 0&&(_=u.onRecoverableError)),u=$g(l,1,!1,null,null,p,!1,x,_),l[Ls]=u.current,bc(l.nodeType===8?l.parentNode:l),new Ug(u)},Jn.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(t(188)):(l=Object.keys(l).join(","),Error(t(268,l)));return l=_b(u),l=l===null?null:l.stateNode,l},Jn.flushSync=function(l){return Ao(l)},Jn.hydrate=function(l,u,p){if(!wh(u))throw Error(t(200));return bh(null,l,u,!0,p)},Jn.hydrateRoot=function(l,u,p){if(!qg(l))throw Error(t(405));var x=p!=null&&p.hydratedSources||null,_=!1,E="",R=JC;if(p!=null&&(p.unstable_strictMode===!0&&(_=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onRecoverableError!==void 0&&(R=p.onRecoverableError)),u=YC(u,null,l,1,p??null,_,!1,E,R),l[Ls]=u.current,bc(l),x)for(l=0;l<x.length;l++)p=x[l],_=p._getVersion,_=_(p._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[p,_]:u.mutableSourceEagerHydrationData.push(p,_);return new xh(u)},Jn.render=function(l,u,p){if(!wh(u))throw Error(t(200));return bh(null,l,u,!1,p)},Jn.unmountComponentAtNode=function(l){if(!wh(l))throw Error(t(40));return l._reactRootContainer?(Ao(function(){bh(null,null,l,!1,function(){l._reactRootContainer=null,l[Ls]=null})}),!0):!1},Jn.unstable_batchedUpdates=Lg,Jn.unstable_renderSubtreeIntoContainer=function(l,u,p,x){if(!wh(p))throw Error(t(200));if(l==null||l._reactInternals===void 0)throw Error(t(38));return bh(l,u,p,!1,x)},Jn.version="18.3.1-next-f1338f8080-20240426",Jn}var o_;function vE(){if(o_)return Xg.exports;o_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Xg.exports=kL(),Xg.exports}var a_;function EL(){if(a_)return Ch;a_=1;var n=vE();return Ch.createRoot=n.createRoot,Ch.hydrateRoot=n.hydrateRoot,Ch}var xE=EL();const wE=b.createContext(null);function ep(){const n=b.useContext(wE);if(!n)throw new Error("useAppContext must be used within AppProvider");return n}function l_(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function tp(...n){return e=>{let t=!1;const r=n.map(s=>{const i=l_(s,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():l_(n[s],null)}}}}function Ye(...n){return b.useCallback(tp(...n),n)}var eo=b.forwardRef((n,e)=>{const{children:t,...r}=n,s=b.Children.toArray(t),i=s.find(NL);if(i){const o=i.props.children,a=s.map(c=>c===i?b.Children.count(o)>1?b.Children.only(null):b.isValidElement(o)?o.props.children:null:c);return g.jsx(cv,{...r,ref:e,children:b.isValidElement(o)?b.cloneElement(o,void 0,a):null})}return g.jsx(cv,{...r,ref:e,children:t})});eo.displayName="Slot";var cv=b.forwardRef((n,e)=>{const{children:t,...r}=n;if(b.isValidElement(t)){const s=ML(t),i=AL(r,t.props);return t.type!==b.Fragment&&(i.ref=e?tp(e,s):s),b.cloneElement(t,i)}return b.Children.count(t)>1?b.Children.only(null):null});cv.displayName="SlotClone";var bE=({children:n})=>g.jsx(g.Fragment,{children:n});function NL(n){return b.isValidElement(n)&&n.type===bE}function AL(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...a)=>{i(...a),s(...a)}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function ML(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function SE(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=SE(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function CE(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=SE(n))&&(r&&(r+=" "),r+=e);return r}const c_=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,u_=CE,_E=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return u_(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(d=>{const h=t==null?void 0:t[d],f=i==null?void 0:i[d];if(h===null)return null;const m=c_(h)||c_(f);return s[d][m]}),a=t&&Object.entries(t).reduce((d,h)=>{let[f,m]=h;return m===void 0||(d[f]=m),d},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,h)=>{let{class:f,className:m,...y}=h;return Object.entries(y).every(v=>{let[w,S]=v;return Array.isArray(S)?S.includes({...i,...a}[w]):{...i,...a}[w]===S})?[...d,f,m]:d},[]);return u_(n,o,c,t==null?void 0:t.class,t==null?void 0:t.className)};function pn(n){this.content=n}pn.prototype={constructor:pn,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,s=r.find(n),i=r.content.slice();return s==-1?i.push(t||n,e):(i[s+1]=e,t&&(i[s]=t)),new pn(i)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new pn(t)},addToStart:function(n,e){return new pn([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new pn(t)},addBefore:function(n,e,t){var r=this.remove(e),s=r.content.slice(),i=r.find(n);return s.splice(i==-1?s.length:i,0,e,t),new pn(s)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=pn.from(n),n.size?new pn(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=pn.from(n),n.size?new pn(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=pn.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};pn.from=function(n){if(n instanceof pn)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new pn(e)};function TE(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let s=n.child(r),i=e.child(r);if(s==i){t+=s.nodeSize;continue}if(!s.sameMarkup(i))return t;if(s.isText&&s.text!=i.text){for(let o=0;s.text[o]==i.text[o];o++)t++;return t}if(s.content.size||i.content.size){let o=TE(s.content,i.content,t+1);if(o!=null)return o}t+=s.nodeSize}}function kE(n,e,t,r){for(let s=n.childCount,i=e.childCount;;){if(s==0||i==0)return s==i?null:{a:t,b:r};let o=n.child(--s),a=e.child(--i),c=o.nodeSize;if(o==a){t-=c,r-=c;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let d=0,h=Math.min(o.text.length,a.text.length);for(;d<h&&o.text[o.text.length-d-1]==a.text[a.text.length-d-1];)d++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let d=kE(o.content,a.content,t-1,r-1);if(d)return d}t-=c,r-=c}}class be{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,s=0,i){for(let o=0,a=0;a<t;o++){let c=this.content[o],d=a+c.nodeSize;if(d>e&&r(c,s+a,i||null,o)!==!1&&c.content.size){let h=a+1;c.nodesBetween(Math.max(0,e-h),Math.min(c.content.size,t-h),r,s+h)}a=d}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,s){let i="",o=!0;return this.nodesBetween(e,t,(a,c)=>{let d=a.isText?a.text.slice(Math.max(e,c)-c,t-c):a.isLeaf?s?typeof s=="function"?s(a):s:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&d||a.isTextblock)&&r&&(o?o=!1:i+=r),i+=d},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,s=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(r)&&(s[s.length-1]=t.withText(t.text+r.text),i=1);i<e.content.length;i++)s.push(e.content[i]);return new be(s,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],s=0;if(t>e)for(let i=0,o=0;o<t;i++){let a=this.content[i],c=o+a.nodeSize;c>e&&((o<e||c>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),s+=a.nodeSize),o=c}return new be(r,s)}cutByIndex(e,t){return e==t?be.empty:e==0&&t==this.content.length?this:new be(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let s=this.content.slice(),i=this.size+t.nodeSize-r.nodeSize;return s[e]=t,new be(s,i)}addToStart(e){return new be([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new be(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let s=this.content[t];e(s,r,t),r+=s.nodeSize}}findDiffStart(e,t=0){return TE(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return kE(this,e,t,r)}findIndex(e,t=-1){if(e==0)return _h(0,e);if(e==this.size)return _h(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,s=0;;r++){let i=this.child(r),o=s+i.nodeSize;if(o>=e)return o==e||t>0?_h(r+1,o):_h(r,s);s=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return be.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new be(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return be.empty;let t,r=0;for(let s=0;s<e.length;s++){let i=e[s];r+=i.nodeSize,s&&i.isText&&e[s-1].sameMarkup(i)?(t||(t=e.slice(0,s)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new be(t||e,r)}static from(e){if(!e)return be.empty;if(e instanceof be)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new be([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}be.empty=new be([],0);const Qg={index:0,offset:0};function _h(n,e){return Qg.index=n,Qg.offset=e,Qg}function uf(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!uf(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!uf(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let ft=class uv{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let s=0;s<e.length;s++){let i=e[s];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,s));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,s)),t.push(this),r=!0),t&&t.push(i)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&uf(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let s=r.create(t.attrs);return r.checkAttrs(s.attrs),s}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return uv.none;if(e instanceof uv)return[e];let t=e.slice();return t.sort((r,s)=>r.type.rank-s.type.rank),t}};ft.none=[];class df extends Error{}class Ee{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=NE(this.content,e+this.openStart,t);return r&&new Ee(r,this.openStart,this.openEnd)}removeBetween(e,t){return new Ee(EE(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Ee.empty;let r=t.openStart||0,s=t.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Ee(be.fromJSON(e,t.content),r,s)}static maxOpen(e,t=!0){let r=0,s=0;for(let i=e.firstChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=e.lastChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.lastChild)s++;return new Ee(e,r,s)}}Ee.empty=new Ee(be.empty,0,0);function EE(n,e,t){let{index:r,offset:s}=n.findIndex(e),i=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(s==e||i.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,i.copy(EE(i.content,e-s-1,t-s-1)))}function NE(n,e,t,r){let{index:s,offset:i}=n.findIndex(e),o=n.maybeChild(s);if(i==e||o.isText)return n.cut(0,e).append(t).append(n.cut(e));let a=NE(o.content,e-i-1,t);return a&&n.replaceChild(s,o.copy(a))}function OL(n,e,t){if(t.openStart>n.depth)throw new df("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new df("Inconsistent open depths");return AE(n,e,t,0)}function AE(n,e,t,r){let s=n.index(r),i=n.node(r);if(s==e.index(r)&&r<n.depth-t.openStart){let o=AE(n,e,t,r+1);return i.copy(i.content.replaceChild(s,o))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let o=n.parent,a=o.content;return Wo(o,a.cut(0,n.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=PL(t,n);return Wo(i,OE(n,o,a,e,r))}else return Wo(i,hf(n,e,r))}function ME(n,e){if(!e.type.compatibleContent(n.type))throw new df("Cannot join "+e.type.name+" onto "+n.type.name)}function dv(n,e,t){let r=n.node(t);return ME(r,e.node(t)),r}function zo(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function nu(n,e,t,r){let s=(e||n).node(t),i=0,o=e?e.index(t):s.childCount;n&&(i=n.index(t),n.depth>t?i++:n.textOffset&&(zo(n.nodeAfter,r),i++));for(let a=i;a<o;a++)zo(s.child(a),r);e&&e.depth==t&&e.textOffset&&zo(e.nodeBefore,r)}function Wo(n,e){return n.type.checkContent(e),n.copy(e)}function OE(n,e,t,r,s){let i=n.depth>s&&dv(n,e,s+1),o=r.depth>s&&dv(t,r,s+1),a=[];return nu(null,n,s,a),i&&o&&e.index(s)==t.index(s)?(ME(i,o),zo(Wo(i,OE(n,e,t,r,s+1)),a)):(i&&zo(Wo(i,hf(n,e,s+1)),a),nu(e,t,s,a),o&&zo(Wo(o,hf(t,r,s+1)),a)),nu(r,null,s,a),new be(a)}function hf(n,e,t){let r=[];if(nu(null,n,t,r),n.depth>t){let s=dv(n,e,t+1);zo(Wo(s,hf(n,e,t+1)),r)}return nu(e,null,t,r),new be(r)}function PL(n,e){let t=e.depth-n.openStart,s=e.node(t).copy(n.content);for(let i=t-1;i>=0;i--)s=e.node(i).copy(be.from(s));return{start:s.resolveNoCache(n.openStart+t),end:s.resolveNoCache(s.content.size-n.openEnd-t)}}class uu{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=e.child(t);return r?e.child(t).cut(r):s}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],s=t==0?0:this.path[t*3-1]+1;for(let i=0;i<e;i++)s+=r.child(i).nodeSize;return s}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return ft.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),s=e.maybeChild(t);if(!r){let a=r;r=s,s=a}let i=r.marks;for(var o=0;o<i.length;o++)i[o].type.spec.inclusive===!1&&(!s||!i[o].isInSet(s.marks))&&(i=i[o--].removeFromSet(i));return i}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,s=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!s||!r[i].isInSet(s.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new ff(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],s=0,i=t;for(let o=e;;){let{index:a,offset:c}=o.content.findIndex(i),d=i-c;if(r.push(o,a,s+c),!d||(o=o.child(a),o.isText))break;i=d-1,s+=c+1}return new uu(t,r,i)}static resolveCached(e,t){let r=d_.get(e);if(r)for(let i=0;i<r.elts.length;i++){let o=r.elts[i];if(o.pos==t)return o}else d_.set(e,r=new DL);let s=r.elts[r.i]=uu.resolve(e,t);return r.i=(r.i+1)%RL,s}}class DL{constructor(){this.elts=[],this.i=0}}const RL=12,d_=new WeakMap;class ff{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const IL=Object.create(null);let Ki=class hv{constructor(e,t,r,s=ft.none){this.type=e,this.attrs=t,this.marks=s,this.content=r||be.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,s=0){this.content.nodesBetween(e,t,r,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,s){return this.content.textBetween(e,t,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&uf(this.attrs,t||e.defaultAttrs||IL)&&ft.sameSet(this.marks,r||ft.none)}copy(e=null){return e==this.content?this:new hv(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new hv(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return Ee.empty;let s=this.resolve(e),i=this.resolve(t),o=r?0:s.sharedDepth(t),a=s.start(o),d=s.node(o).content.cut(s.pos-a,i.pos-a);return new Ee(d,s.depth-o,i.depth-o)}replace(e,t,r){return OL(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:s}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(s==e||t.isText)return t;e-=s+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let s=this.content.child(t-1);return{node:s,index:t-1,offset:r-s.nodeSize}}resolve(e){return uu.resolveCached(this,e)}resolveNoCache(e){return uu.resolve(this,e)}rangeHasMark(e,t,r){let s=!1;return t>e&&this.nodesBetween(e,t,i=>(r.isInSet(i.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),PE(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=be.empty,s=0,i=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,s,i),a=o&&o.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let c=s;c<i;c++)if(!this.type.allowsMarks(r.child(c).marks))return!1;return!0}canReplaceWith(e,t,r,s){if(s&&!this.type.allowsMarks(s))return!1;let i=this.contentMatchAt(e).matchType(r),o=i&&i.matchFragment(this.content,t);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=ft.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!ft.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let s=be.fromJSON(e,t.content),i=e.nodeType(t.type).create(t.attrs,s,r);return i.type.checkAttrs(i.attrs),i}};Ki.prototype.text=void 0;class pf extends Ki{constructor(e,t,r,s){if(super(e,t,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):PE(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new pf(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new pf(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function PE(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Ko{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new jL(e,t);if(r.next==null)return Ko.empty;let s=DE(r);r.next&&r.err("Unexpected trailing text");let i=$L(WL(s));return HL(i,r),i}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let s=this;for(let i=t;s&&i<r;i++)s=s.matchType(e.child(i).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let s=[this];function i(o,a){let c=o.matchFragment(e,r);if(c&&(!t||c.validEnd))return be.from(a.map(d=>d.createAndFill()));for(let d=0;d<o.next.length;d++){let{type:h,next:f}=o.next[d];if(!(h.isText||h.hasRequiredAttrs())&&s.indexOf(f)==-1){s.push(f);let m=i(f,a.concat(h));if(m)return m}}return null}return i(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),i=s.match;if(i.matchType(e)){let o=[];for(let a=s;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<i.next.length;o++){let{type:a,next:c}=i.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in t)&&(!s.type||c.validEnd)&&(r.push({match:a.contentMatch,type:a,via:s}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let s=0;s<r.next.length;s++)e.indexOf(r.next[s].next)==-1&&t(r.next[s].next)}return t(this),e.map((r,s)=>{let i=s+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)i+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return i}).join(`
`)}}Ko.empty=new Ko(!0);class jL{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function DE(n){let e=[];do e.push(LL(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function LL(n){let e=[];do e.push(FL(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function FL(n){let e=zL(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=VL(n,e);else break;return e}function h_(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function VL(n,e){let t=h_(n),r=t;return n.eat(",")&&(n.next!="}"?r=h_(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function BL(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let s=[];for(let i in t){let o=t[i];o.isInGroup(e)&&s.push(o)}return s.length==0&&n.err("No node type or group '"+e+"' found"),s}function zL(n){if(n.eat("(")){let e=DE(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=BL(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function WL(n){let e=[[]];return s(i(n,0),t()),e;function t(){return e.push([])-1}function r(o,a,c){let d={term:c,to:a};return e[o].push(d),d}function s(o,a){o.forEach(c=>c.to=a)}function i(o,a){if(o.type=="choice")return o.exprs.reduce((c,d)=>c.concat(i(d,a)),[]);if(o.type=="seq")for(let c=0;;c++){let d=i(o.exprs[c],a);if(c==o.exprs.length-1)return d;s(d,a=t())}else if(o.type=="star"){let c=t();return r(a,c),s(i(o.expr,c),c),[r(c)]}else if(o.type=="plus"){let c=t();return s(i(o.expr,a),c),s(i(o.expr,c),c),[r(c)]}else{if(o.type=="opt")return[r(a)].concat(i(o.expr,a));if(o.type=="range"){let c=a;for(let d=0;d<o.min;d++){let h=t();s(i(o.expr,c),h),c=h}if(o.max==-1)s(i(o.expr,c),c);else for(let d=o.min;d<o.max;d++){let h=t();r(c,h),s(i(o.expr,c),h),c=h}return[r(c)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function RE(n,e){return e-n}function f_(n,e){let t=[];return r(e),t.sort(RE);function r(s){let i=n[s];if(i.length==1&&!i[0].term)return r(i[0].to);t.push(s);for(let o=0;o<i.length;o++){let{term:a,to:c}=i[o];!a&&t.indexOf(c)==-1&&r(c)}}}function $L(n){let e=Object.create(null);return t(f_(n,0));function t(r){let s=[];r.forEach(o=>{n[o].forEach(({term:a,to:c})=>{if(!a)return;let d;for(let h=0;h<s.length;h++)s[h][0]==a&&(d=s[h][1]);f_(n,c).forEach(h=>{d||s.push([a,d=[]]),d.indexOf(h)==-1&&d.push(h)})})});let i=e[r.join(",")]=new Ko(r.indexOf(n.length-1)>-1);for(let o=0;o<s.length;o++){let a=s[o][1].sort(RE);i.next.push({type:s[o][0],next:e[a.join(",")]||t(a)})}return i}}function HL(n,e){for(let t=0,r=[n];t<r.length;t++){let s=r[t],i=!s.validEnd,o=[];for(let a=0;a<s.next.length;a++){let{type:c,next:d}=s.next[a];o.push(c.name),i&&!(c.isText||c.hasRequiredAttrs())&&(i=!1),r.indexOf(d)==-1&&r.push(d)}i&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function IE(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function jE(n,e){let t=Object.create(null);for(let r in n){let s=e&&e[r];if(s===void 0){let i=n[r];if(i.hasDefault)s=i.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=s}return t}function LE(n,e,t,r){for(let s in e)if(!(s in n))throw new RangeError(`Unsupported attribute ${s} for ${t} of type ${s}`);for(let s in n){let i=n[s];i.validate&&i.validate(e[s])}}function FE(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new qL(n,r,e[r]);return t}let p_=class VE{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=FE(e,r.attrs),this.defaultAttrs=IE(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ko.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:jE(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ki(this,this.computeAttrs(e),be.from(t),ft.setFrom(r))}createChecked(e=null,t,r){return t=be.from(t),this.checkContent(t),new Ki(this,this.computeAttrs(e),t,ft.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=be.from(t),t.size){let o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t)}let s=this.contentMatch.matchFragment(t),i=s&&s.fillBefore(be.empty,!0);return i?new Ki(this,e,t.append(i),ft.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){LE(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:ft.none:e}static compile(e,t){let r=Object.create(null);e.forEach((i,o)=>r[i]=new VE(i,t,o));let s=t.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function UL(n,e,t){let r=t.split("|");return s=>{let i=s===null?"null":typeof s;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${i}`)}}class qL{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?UL(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class np{constructor(e,t,r,s){this.name=e,this.rank=t,this.schema=r,this.spec=s,this.attrs=FE(e,s.attrs),this.excluded=null;let i=IE(this.attrs);this.instance=i?new ft(this,i):null}create(e=null){return!e&&this.instance?this.instance:new ft(this,jE(this.attrs,e))}static compile(e,t){let r=Object.create(null),s=0;return e.forEach((i,o)=>r[i]=new np(i,s++,t,o)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){LE(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class BE{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let s in e)t[s]=e[s];t.nodes=pn.from(e.nodes),t.marks=pn.from(e.marks||{}),this.nodes=p_.compile(this.spec.nodes,this),this.marks=np.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let i=this.nodes[s],o=i.spec.content||"",a=i.spec.marks;if(i.contentMatch=r[o]||(r[o]=Ko.parse(o,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=a=="_"?null:a?m_(this,a.split(" ")):a==""||!i.inlineContent?[]:null}for(let s in this.marks){let i=this.marks[s],o=i.spec.excludes;i.excluded=o==null?[i]:o==""?[]:m_(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof p_){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,s)}text(e,t){let r=this.nodes.text;return new pf(r,r.defaultAttrs,e,ft.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return Ki.fromJSON(this,e)}markFromJSON(e){return ft.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function m_(n,e){let t=[];for(let r=0;r<e.length;r++){let s=e[r],i=n.marks[s],o=i;if(i)t.push(i);else for(let a in n.marks){let c=n.marks[a];(s=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(s)>-1)&&t.push(o=c)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function GL(n){return n.tag!=null}function KL(n){return n.style!=null}class Yi{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(s=>{if(GL(s))this.tags.push(s);else if(KL(s)){let i=/[^=]*/.exec(s.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let i=e.nodes[s.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new y_(this,t,!1);return r.addAll(e,ft.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new y_(this,t,!0);return r.addAll(e,ft.none,t.from,t.to),Ee.maxOpen(r.finish())}matchTag(e,t,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let i=this.tags[s];if(JL(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||t.matchesContext(i.context))){if(i.getAttrs){let o=i.getAttrs(e);if(o===!1)continue;i.attrs=o||void 0}return i}}}matchStyle(e,t,r,s){for(let i=s?this.styles.indexOf(s)+1:0;i<this.styles.length;i++){let o=this.styles[i],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let c=o.getAttrs(t);if(c===!1)continue;o.attrs=c||void 0}return o}}}static schemaRules(e){let t=[];function r(s){let i=s.priority==null?50:s.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<i)break}t.splice(o,0,s)}for(let s in e.marks){let i=e.marks[s].spec.parseDOM;i&&i.forEach(o=>{r(o=v_(o)),o.mark||o.ignore||o.clearMark||(o.mark=s)})}for(let s in e.nodes){let i=e.nodes[s].spec.parseDOM;i&&i.forEach(o=>{r(o=v_(o)),o.node||o.ignore||o.mark||(o.node=s)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Yi(e,Yi.schemaRules(e)))}}const zE={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},YL={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},WE={ol:!0,ul:!0},du=1,fv=2,Gh=4;function g_(n,e,t){return e!=null?(e?du:0)|(e==="full"?fv:0):n&&n.whitespace=="pre"?du|fv:t&-5}class Th{constructor(e,t,r,s,i,o){this.type=e,this.attrs=t,this.marks=r,this.solid=s,this.options=o,this.content=[],this.activeMarks=ft.none,this.match=i||(o&Gh?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(be.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(e.type))?(this.match=r,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&du)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-s[0].length))}}let t=be.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(be.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!zE.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class y_{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=t.topNode,i,o=g_(null,t.preserveWhitespace,0)|(r?Gh:0);s?i=new Th(s.type,s.attrs,ft.none,!0,t.topMatch||s.type.contentMatch,o):r?i=new Th(null,null,ft.none,!0,null,o):i=new Th(e.schema.topNodeType,null,ft.none,!0,null,o),this.nodes=[i],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,s=this.top,i=s.options&fv?"full":this.localPreserveWS||(s.options&du)>0;if(i==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i)i!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=s.content[s.content.length-1],a=e.previousSibling;(!o||a&&a.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let s=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;WE.hasOwnProperty(o)&&this.parser.normalizeLists&&XL(e);let c=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(c?c.ignore:YL.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,t);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(e=c.skip);let d,h=this.needsBlock;if(zE.hasOwnProperty(o))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),d=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let f=c&&c.skip?t:this.readStyles(e,t);f&&this.addAll(e,f),d&&this.sync(i),this.needsBlock=h}else{let d=this.readStyles(e,t);d&&this.addElementByRule(e,c,d,c.consuming===!1?a:void 0)}this.localPreserveWS=s}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let i=this.parser.matchedStyles[s],o=r.getPropertyValue(i);if(o)for(let a=void 0;;){let c=this.parser.matchStyle(i,o,this,a);if(!c)break;if(c.ignore)return null;if(c.clearMark?t=t.filter(d=>!c.clearMark(d)):t=t.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)a=c;else break}}return t}addElementByRule(e,t,r,s){let i,o;if(t.node)if(o=this.parser.schema.nodes[t.node],o.isLeaf)this.insertNode(o.create(t.attrs),r)||this.leafFallback(e,r);else{let c=this.enter(o,t.attrs||null,r,t.preserveWhitespace);c&&(i=!0,r=c)}else{let c=this.parser.schema.marks[t.mark];r=r.concat(c.create(t.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(s)this.addElement(e,r,s);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c,r));else{let c=e;typeof t.contentElement=="string"?c=e.querySelector(t.contentElement):typeof t.contentElement=="function"?c=t.contentElement(e):t.contentElement&&(c=t.contentElement),this.findAround(e,c,!0),this.addAll(c,r),this.findAround(e,c,!1)}i&&this.sync(a)&&this.open--}addAll(e,t,r,s){let i=r||0;for(let o=r?e.childNodes[r]:e.firstChild,a=s==null?null:e.childNodes[s];o!=a;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o,t);this.findAtPoint(e,i)}findPlace(e,t){let r,s;for(let i=this.open;i>=0;i--){let o=this.nodes[i],a=o.findWrapping(e);if(a&&(!r||r.length>a.length)&&(r=a,s=o,!a.length)||o.solid)break}if(!r)return null;this.sync(s);for(let i=0;i<r.length;i++)t=this.enterInner(r[i],null,t,!1);return t}insertNode(e,t){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(t=this.enterInner(s,null,t))}let r=this.findPlace(e,t);if(r){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let i=ft.none;for(let o of r.concat(e.marks))(s.type?s.type.allowsMarkType(o.type):x_(o.type,e.type))&&(i=o.addToSet(i));return s.content.push(e.mark(i)),!0}return!1}enter(e,t,r,s){let i=this.findPlace(e.create(t),r);return i&&(i=this.enterInner(e,t,r,!0,s)),i}enterInner(e,t,r,s=!1,i){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=g_(e,i,o.options);o.options&Gh&&o.content.length==0&&(a|=Gh);let c=ft.none;return r=r.filter(d=>(o.type?o.type.allowsMarkType(d.type):x_(d.type,e))?(c=d.addToSet(c),!1):!0),this.nodes.push(new Th(e,t,c,s,null,a)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=du)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let s=r.length-1;s>=0;s--)e+=r[s].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&t.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(s?0:1),o=(a,c)=>{for(;a>=0;a--){let d=t[a];if(d==""){if(a==t.length-1||a==0)continue;for(;c>=i;c--)if(o(a-1,c))return!0;return!1}else{let h=c>0||c==0&&s?this.nodes[c].type:r&&c>=i?r.node(c-i).type:null;if(!h||h.name!=d&&!h.isInGroup(d))return!1;c--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function XL(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&WE.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function JL(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function v_(n){let e={};for(let t in n)e[t]=n[t];return e}function x_(n,e){let t=e.schema.nodes;for(let r in t){let s=t[r];if(!s.allowsMarkType(n))continue;let i=[],o=a=>{i.push(a);for(let c=0;c<a.edgeCount;c++){let{type:d,next:h}=a.edge(c);if(d==e||i.indexOf(h)<0&&o(h))return!0}};if(o(s.contentMatch))return!0}}class ra{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=ey(t).createDocumentFragment());let s=r,i=[];return e.forEach(o=>{if(i.length||o.marks.length){let a=0,c=0;for(;a<i.length&&c<o.marks.length;){let d=o.marks[c];if(!this.marks[d.type.name]){c++;continue}if(!d.eq(i[a][0])||d.type.spec.spanning===!1)break;a++,c++}for(;a<i.length;)s=i.pop()[1];for(;c<o.marks.length;){let d=o.marks[c++],h=this.serializeMark(d,o.isInline,t);h&&(i.push([d,s]),s.appendChild(h.dom),s=h.contentDOM||h.dom)}}s.appendChild(this.serializeNodeInner(o,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:s}=Kh(ey(t),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,s)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let s=e.marks.length-1;s>=0;s--){let i=this.serializeMark(e.marks[s],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,t,r={}){let s=this.marks[e.type.name];return s&&Kh(ey(r),s(e,t),null,e.attrs)}static renderSpec(e,t,r=null,s){return Kh(e,t,r,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new ra(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=w_(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return w_(e.marks)}}function w_(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function ey(n){return n.document||window.document}const b_=new WeakMap;function ZL(n){let e=b_.get(n);return e===void 0&&b_.set(n,e=QL(n)),e}function QL(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let s=0;s<r.length;s++)t(r[s]);else for(let s in r)t(r[s])}return t(n),e}function Kh(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],i;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=ZL(r))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=s.indexOf(" ");o>0&&(t=s.slice(0,o),s=s.slice(o+1));let a,c=t?n.createElementNS(t,s):n.createElement(s),d=e[1],h=1;if(d&&typeof d=="object"&&d.nodeType==null&&!Array.isArray(d)){h=2;for(let f in d)if(d[f]!=null){let m=f.indexOf(" ");m>0?c.setAttributeNS(f.slice(0,m),f.slice(m+1),d[f]):c.setAttribute(f,d[f])}}for(let f=h;f<e.length;f++){let m=e[f];if(m===0){if(f<e.length-1||f>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:y,contentDOM:v}=Kh(n,m,t,r);if(c.appendChild(y),v){if(a)throw new RangeError("Multiple content holes");a=v}}}return{dom:c,contentDOM:a}}const $E=65535,HE=Math.pow(2,16);function eF(n,e){return n+e*HE}function S_(n){return n&$E}function tF(n){return(n-(n&$E))/HE}const UE=1,qE=2,Yh=4,GE=8;class pv{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&GE)>0}get deletedBefore(){return(this.delInfo&(UE|Yh))>0}get deletedAfter(){return(this.delInfo&(qE|Yh))>0}get deletedAcross(){return(this.delInfo&Yh)>0}}class ur{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&ur.empty)return ur.empty}recover(e){let t=0,r=S_(e);if(!this.inverted)for(let s=0;s<r;s++)t+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+t+tF(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let s=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let c=this.ranges[a]-(this.inverted?s:0);if(c>e)break;let d=this.ranges[a+i],h=this.ranges[a+o],f=c+d;if(e<=f){let m=d?e==c?-1:e==f?1:t:t,y=c+s+(m<0?0:h);if(r)return y;let v=e==(t<0?c:f)?null:eF(a/3,e-c),w=e==c?qE:e==f?UE:Yh;return(t<0?e!=c:e!=f)&&(w|=GE),new pv(y,w,v)}s+=h-d}return r?e+s:new pv(e+s,0,null)}touches(e,t){let r=0,s=S_(t),i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let c=this.ranges[a]-(this.inverted?r:0);if(c>e)break;let d=this.ranges[a+i],h=c+d;if(e<=h&&a==s*3)return!0;r+=this.ranges[a+o]-d}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,i=0;s<this.ranges.length;s+=3){let o=this.ranges[s],a=o-(this.inverted?i:0),c=o+(this.inverted?0:i),d=this.ranges[s+t],h=this.ranges[s+r];e(a,a+d,c,c+h),i+=h-d}}invert(){return new ur(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?ur.empty:new ur(e<0?[0,-e,0]:[0,0,e])}}ur.empty=new ur([]);class tl{constructor(e=[],t,r=0,s=e.length){this.maps=e,this.mirror=t,this.from=r,this.to=s}slice(e=0,t=this.maps.length){return new tl(this.maps,this.mirror,e,t)}copy(){return new tl(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,r=this.maps.length;t<e.maps.length;t++){let s=e.getMirror(t);this.appendMap(e.maps[t],s!=null&&s<t?r+s:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this.maps.length+e.maps.length;t>=0;t--){let s=e.getMirror(t);this.appendMap(e.maps[t].invert(),s!=null&&s>t?r-s-1:void 0)}}invert(){let e=new tl;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let s=0;for(let i=this.from;i<this.to;i++){let o=this.maps[i],a=o.mapResult(e,t);if(a.recover!=null){let c=this.getMirror(i);if(c!=null&&c>i&&c<this.to){i=c,e=this.maps[c].recover(a.recover);continue}}s|=a.delInfo,e=a.pos}return r?e:new pv(e,s,null)}}const ty=Object.create(null);class Pn{getMap(){return ur.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=ty[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in ty)throw new RangeError("Duplicate use of step JSON ID "+e);return ty[e]=t,t.prototype.jsonID=e,t}}class Gt{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Gt(e,null)}static fail(e){return new Gt(null,e)}static fromReplace(e,t,r,s){try{return Gt.ok(e.replace(t,r,s))}catch(i){if(i instanceof df)return Gt.fail(i.message);throw i}}}function R0(n,e,t){let r=[];for(let s=0;s<n.childCount;s++){let i=n.child(s);i.content.size&&(i=i.copy(R0(i.content,e,i))),i.isInline&&(i=e(i,t,s)),r.push(i)}return be.fromArray(r)}class Ui extends Pn{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),s=r.node(r.sharedDepth(this.to)),i=new Ee(R0(t.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),s),t.openStart,t.openEnd);return Gt.fromReplace(e,this.from,this.to,i)}invert(){return new gs(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Ui(t.pos,r.pos,this.mark)}merge(e){return e instanceof Ui&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ui(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ui(t.from,t.to,e.markFromJSON(t.mark))}}Pn.jsonID("addMark",Ui);class gs extends Pn{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new Ee(R0(t.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),t.openStart,t.openEnd);return Gt.fromReplace(e,this.from,this.to,r)}invert(){return new Ui(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new gs(t.pos,r.pos,this.mark)}merge(e){return e instanceof gs&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new gs(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new gs(t.from,t.to,e.markFromJSON(t.mark))}}Pn.jsonID("removeMark",gs);class qi extends Pn{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Gt.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Gt.fromReplace(e,this.pos,this.pos+1,new Ee(be.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let s=0;s<t.marks.length;s++)if(!t.marks[s].isInSet(r))return new qi(this.pos,t.marks[s]);return new qi(this.pos,this.mark)}}return new dl(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new qi(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new qi(t.pos,e.markFromJSON(t.mark))}}Pn.jsonID("addNodeMark",qi);class dl extends Pn{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Gt.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Gt.fromReplace(e,this.pos,this.pos+1,new Ee(be.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new qi(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new dl(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new dl(t.pos,e.markFromJSON(t.mark))}}Pn.jsonID("removeNodeMark",dl);class rn extends Pn{constructor(e,t,r,s=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=s}apply(e){return this.structure&&mv(e,this.from,this.to)?Gt.fail("Structure replace would overwrite content"):Gt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new ur([this.from,this.to-this.from,this.slice.size])}invert(e){return new rn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new rn(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof rn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?Ee.empty:new Ee(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new rn(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?Ee.empty:new Ee(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new rn(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new rn(t.from,t.to,Ee.fromJSON(e,t.slice),!!t.structure)}}Pn.jsonID("replace",rn);class sn extends Pn{constructor(e,t,r,s,i,o,a=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=s,this.slice=i,this.insert=o,this.structure=a}apply(e){if(this.structure&&(mv(e,this.from,this.gapFrom)||mv(e,this.gapTo,this.to)))return Gt.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Gt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?Gt.fromReplace(e,this.from,this.to,r):Gt.fail("Content does not fit in gap")}getMap(){return new ur([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new sn(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),s=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||s<t.pos||i>r.pos?null:new sn(t.pos,r.pos,s,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new sn(t.from,t.to,t.gapFrom,t.gapTo,Ee.fromJSON(e,t.slice),t.insert,!!t.structure)}}Pn.jsonID("replaceAround",sn);function mv(n,e,t){let r=n.resolve(e),s=t-e,i=r.depth;for(;s>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,s--;if(s>0){let o=r.node(i).maybeChild(r.indexAfter(i));for(;s>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,s--}}return!1}function nF(n,e,t,r){let s=[],i=[],o,a;n.doc.nodesBetween(e,t,(c,d,h)=>{if(!c.isInline)return;let f=c.marks;if(!r.isInSet(f)&&h.type.allowsMarkType(r.type)){let m=Math.max(d,e),y=Math.min(d+c.nodeSize,t),v=r.addToSet(f);for(let w=0;w<f.length;w++)f[w].isInSet(v)||(o&&o.to==m&&o.mark.eq(f[w])?o.to=y:s.push(o=new gs(m,y,f[w])));a&&a.to==m?a.to=y:i.push(a=new Ui(m,y,r))}}),s.forEach(c=>n.step(c)),i.forEach(c=>n.step(c))}function rF(n,e,t,r){let s=[],i=0;n.doc.nodesBetween(e,t,(o,a)=>{if(!o.isInline)return;i++;let c=null;if(r instanceof np){let d=o.marks,h;for(;h=r.isInSet(d);)(c||(c=[])).push(h),d=h.removeFromSet(d)}else r?r.isInSet(o.marks)&&(c=[r]):c=o.marks;if(c&&c.length){let d=Math.min(a+o.nodeSize,t);for(let h=0;h<c.length;h++){let f=c[h],m;for(let y=0;y<s.length;y++){let v=s[y];v.step==i-1&&f.eq(s[y].style)&&(m=v)}m?(m.to=d,m.step=i):s.push({style:f,from:Math.max(a,e),to:d,step:i})}}}),s.forEach(o=>n.step(new gs(o.from,o.to,o.style)))}function I0(n,e,t,r=t.contentMatch,s=!0){let i=n.doc.nodeAt(e),o=[],a=e+1;for(let c=0;c<i.childCount;c++){let d=i.child(c),h=a+d.nodeSize,f=r.matchType(d.type);if(!f)o.push(new rn(a,h,Ee.empty));else{r=f;for(let m=0;m<d.marks.length;m++)t.allowsMarkType(d.marks[m].type)||n.step(new gs(a,h,d.marks[m]));if(s&&d.isText&&t.whitespace!="pre"){let m,y=/\r?\n|\r/g,v;for(;m=y.exec(d.text);)v||(v=new Ee(be.from(t.schema.text(" ",t.allowedMarks(d.marks))),0,0)),o.push(new rn(a+m.index,a+m.index+m[0].length,v))}}a=h}if(!r.validEnd){let c=r.fillBefore(be.empty,!0);n.replace(a,a,new Ee(c,0,0))}for(let c=o.length-1;c>=0;c--)n.step(o[c])}function sF(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function jl(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let s=n.$from.node(r),i=n.$from.index(r),o=n.$to.indexAfter(r);if(r<n.depth&&s.canReplace(i,o,t))return r;if(r==0||s.type.spec.isolating||!sF(s,i,o))break}return null}function iF(n,e,t){let{$from:r,$to:s,depth:i}=e,o=r.before(i+1),a=s.after(i+1),c=o,d=a,h=be.empty,f=0;for(let v=i,w=!1;v>t;v--)w||r.index(v)>0?(w=!0,h=be.from(r.node(v).copy(h)),f++):c--;let m=be.empty,y=0;for(let v=i,w=!1;v>t;v--)w||s.after(v+1)<s.end(v)?(w=!0,m=be.from(s.node(v).copy(m)),y++):d++;n.step(new sn(c,d,o,a,new Ee(h.append(m),f,y),h.size-f,!0))}function j0(n,e,t=null,r=n){let s=oF(n,e),i=s&&aF(r,e);return i?s.map(C_).concat({type:e,attrs:t}).concat(i.map(C_)):null}function C_(n){return{type:n,attrs:null}}function oF(n,e){let{parent:t,startIndex:r,endIndex:s}=n,i=t.contentMatchAt(r).findWrapping(e);if(!i)return null;let o=i.length?i[0]:e;return t.canReplaceWith(r,s,o)?i:null}function aF(n,e){let{parent:t,startIndex:r,endIndex:s}=n,i=t.child(r),o=e.contentMatch.findWrapping(i.type);if(!o)return null;let c=(o.length?o[o.length-1]:e).contentMatch;for(let d=r;c&&d<s;d++)c=c.matchType(t.child(d).type);return!c||!c.validEnd?null:o}function lF(n,e,t){let r=be.empty;for(let o=t.length-1;o>=0;o--){if(r.size){let a=t[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=be.from(t[o].type.create(t[o].attrs,r))}let s=e.start,i=e.end;n.step(new sn(s,i,s,i,new Ee(r,0,0),t.length,!0))}function cF(n,e,t,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=n.steps.length;n.doc.nodesBetween(e,t,(o,a)=>{let c=typeof s=="function"?s(o):s;if(o.isTextblock&&!o.hasMarkup(r,c)&&uF(n.doc,n.mapping.slice(i).map(a),r)){let d=null;if(r.schema.linebreakReplacement){let y=r.whitespace=="pre",v=!!r.contentMatch.matchType(r.schema.linebreakReplacement);y&&!v?d=!1:!y&&v&&(d=!0)}d===!1&&YE(n,o,a,i),I0(n,n.mapping.slice(i).map(a,1),r,void 0,d===null);let h=n.mapping.slice(i),f=h.map(a,1),m=h.map(a+o.nodeSize,1);return n.step(new sn(f,m,f+1,m-1,new Ee(be.from(r.create(c,null,o.marks)),0,0),1,!0)),d===!0&&KE(n,o,a,i),!1}})}function KE(n,e,t,r){e.forEach((s,i)=>{if(s.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(s.text);){let c=n.mapping.slice(r).map(t+1+i+o.index);n.replaceWith(c,c+1,e.type.schema.linebreakReplacement.create())}}})}function YE(n,e,t,r){e.forEach((s,i)=>{if(s.type==s.type.schema.linebreakReplacement){let o=n.mapping.slice(r).map(t+1+i);n.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function uF(n,e,t){let r=n.resolve(e),s=r.index();return r.parent.canReplaceWith(s,s+1,t)}function dF(n,e,t,r,s){let i=n.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");t||(t=i.type);let o=t.create(r,null,s||i.marks);if(i.isLeaf)return n.replaceWith(e,e+i.nodeSize,o);if(!t.validContent(i.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new sn(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new Ee(be.from(o),0,0),1,!0))}function Xs(n,e,t=1,r){let s=n.resolve(e),i=s.depth-t,o=r&&r[r.length-1]||s.parent;if(i<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!o.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let d=s.depth-1,h=t-2;d>i;d--,h--){let f=s.node(d),m=s.index(d);if(f.type.spec.isolating)return!1;let y=f.content.cutByIndex(m,f.childCount),v=r&&r[h+1];v&&(y=y.replaceChild(0,v.type.create(v.attrs)));let w=r&&r[h]||f;if(!f.canReplace(m+1,f.childCount)||!w.type.validContent(y))return!1}let a=s.indexAfter(i),c=r&&r[0];return s.node(i).canReplaceWith(a,a,c?c.type:s.node(i+1).type)}function hF(n,e,t=1,r){let s=n.doc.resolve(e),i=be.empty,o=be.empty;for(let a=s.depth,c=s.depth-t,d=t-1;a>c;a--,d--){i=be.from(s.node(a).copy(i));let h=r&&r[d];o=be.from(h?h.type.create(h.attrs,o):s.node(a).copy(o))}n.step(new rn(e,e,new Ee(i.append(o),t,t),!0))}function co(n,e){let t=n.resolve(e),r=t.index();return XE(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function fF(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let s=0;s<e.childCount;s++){let i=e.child(s),o=i.type==r?n.type.schema.nodes.text:i.type;if(t=t.matchType(o),!t||!n.type.allowsMarks(i.marks))return!1}return t.validEnd}function XE(n,e){return!!(n&&e&&!n.isLeaf&&fF(n,e))}function rp(n,e,t=-1){let r=n.resolve(e);for(let s=r.depth;;s--){let i,o,a=r.index(s);if(s==r.depth?(i=r.nodeBefore,o=r.nodeAfter):t>0?(i=r.node(s+1),a++,o=r.node(s).maybeChild(a)):(i=r.node(s).maybeChild(a-1),o=r.node(s+1)),i&&!i.isTextblock&&XE(i,o)&&r.node(s).canReplace(a,a+1))return e;if(s==0)break;e=t<0?r.before(s):r.after(s)}}function pF(n,e,t){let r=null,{linebreakReplacement:s}=n.doc.type.schema,i=n.doc.resolve(e-t),o=i.node().type;if(s&&o.inlineContent){let h=o.whitespace=="pre",f=!!o.contentMatch.matchType(s);h&&!f?r=!1:!h&&f&&(r=!0)}let a=n.steps.length;if(r===!1){let h=n.doc.resolve(e+t);YE(n,h.node(),h.before(),a)}o.inlineContent&&I0(n,e+t-1,o,i.node().contentMatchAt(i.index()),r==null);let c=n.mapping.slice(a),d=c.map(e-t);if(n.step(new rn(d,c.map(e+t,-1),Ee.empty,!0)),r===!0){let h=n.doc.resolve(d);KE(n,h.node(),h.before(),n.steps.length)}return n}function mF(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let i=r.index(s);if(r.node(s).canReplaceWith(i,i,t))return r.before(s+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let i=r.indexAfter(s);if(r.node(s).canReplaceWith(i,i,t))return r.after(s+1);if(i<r.node(s).childCount)return null}return null}function JE(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let s=t.content;for(let i=0;i<t.openStart;i++)s=s.firstChild.content;for(let i=1;i<=(t.openStart==0&&t.size?2:1);i++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,c=r.index(o)+(a>0?1:0),d=r.node(o),h=!1;if(i==1)h=d.canReplace(c,c,s);else{let f=d.contentMatchAt(c).findWrapping(s.firstChild.type);h=f&&d.canReplaceWith(c,c,f[0])}if(h)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function sp(n,e,t=e,r=Ee.empty){if(e==t&&!r.size)return null;let s=n.resolve(e),i=n.resolve(t);return ZE(s,i,r)?new rn(e,t,r):new gF(s,i,r).fit()}function ZE(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class gF{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=be.empty;for(let s=0;s<=e.depth;s++){let i=e.node(s);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=be.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(e<0?this.$to:r.doc.resolve(e));if(!s)return null;let i=this.placed,o=r.depth,a=s.depth;for(;o&&a&&i.childCount==1;)i=i.firstChild.content,o--,a--;let c=new Ee(i,o,a);return e>-1?new sn(r.pos,e,this.$to.pos,this.$to.end(),c,t):c.size||r.pos!=this.$to.pos?new rn(r.pos,s.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<e;r++){let i=t.firstChild;if(t.childCount>1&&(s=0),i.type.spec.isolating&&s<=r){e=r;break}t=i.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let s,i=null;r?(i=ny(this.unplaced.content,r-1).firstChild,s=i.content):s=this.unplaced.content;let o=s.firstChild;for(let a=this.depth;a>=0;a--){let{type:c,match:d}=this.frontier[a],h,f=null;if(t==1&&(o?d.matchType(o.type)||(f=d.fillBefore(be.from(o),!1)):i&&c.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:a,parent:i,inject:f};if(t==2&&o&&(h=d.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:i,wrap:h};if(i&&d.matchType(i.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,s=ny(e,t);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new Ee(e,t+1,Math.max(r,s.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,s=ny(e,t);if(s.childCount<=1&&t>0){let i=e.size-t<=t+s.size;this.unplaced=new Ee(qc(e,t-1,1),t-1,i?t-1:r)}else this.unplaced=new Ee(qc(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:s,wrap:i}){for(;this.depth>t;)this.closeFrontierNode();if(i)for(let w=0;w<i.length;w++)this.openFrontierNode(i[w]);let o=this.unplaced,a=r?r.content:o.content,c=o.openStart-e,d=0,h=[],{match:f,type:m}=this.frontier[t];if(s){for(let w=0;w<s.childCount;w++)h.push(s.child(w));f=f.matchFragment(s)}let y=a.size+e-(o.content.size-o.openEnd);for(;d<a.childCount;){let w=a.child(d),S=f.matchType(w.type);if(!S)break;d++,(d>1||c==0||w.content.size)&&(f=S,h.push(QE(w.mark(m.allowedMarks(w.marks)),d==1?c:0,d==a.childCount?y:-1)))}let v=d==a.childCount;v||(y=-1),this.placed=Gc(this.placed,t,be.from(h)),this.frontier[t].match=f,v&&y<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let w=0,S=a;w<y;w++){let C=S.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),S=C.content}this.unplaced=v?e==0?Ee.empty:new Ee(qc(o.content,e-1,1),e-1,y<0?o.openEnd:e-1):new Ee(qc(o.content,e,d),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!ry(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:s}=this.frontier[t],i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=ry(e,t,s,r,i);if(o){for(let a=t-1;a>=0;a--){let{match:c,type:d}=this.frontier[a],h=ry(e,a,d,c,!0);if(!h||h.childCount)continue e}return{depth:t,fit:o,move:i?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Gc(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let s=e.node(r),i=s.type.contentMatch.fillBefore(s.content,!0,e.index(r));this.openFrontierNode(s.type,s.attrs,i)}return e}openFrontierNode(e,t=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=Gc(this.placed,this.depth,be.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(be.empty,!0);t.childCount&&(this.placed=Gc(this.placed,this.frontier.length,t))}}function qc(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(qc(n.firstChild.content,e-1,t)))}function Gc(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(Gc(n.lastChild.content,e-1,t)))}function ny(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function QE(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,QE(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(be.empty,!0)))),n.copy(r)}function ry(n,e,t,r,s){let i=n.node(e),o=s?n.indexAfter(e):n.index(e);if(o==i.childCount&&!t.compatibleContent(i.type))return null;let a=r.fillBefore(i.content,!0,o);return a&&!yF(t,i.content,o)?a:null}function yF(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function vF(n){return n.spec.defining||n.spec.definingForContent}function xF(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let s=n.doc.resolve(e),i=n.doc.resolve(t);if(ZE(s,i,r))return n.step(new rn(e,t,r));let o=tN(s,n.doc.resolve(t));o[o.length-1]==0&&o.pop();let a=-(s.depth+1);o.unshift(a);for(let m=s.depth,y=s.pos-1;m>0;m--,y--){let v=s.node(m).type.spec;if(v.defining||v.definingAsContext||v.isolating)break;o.indexOf(m)>-1?a=m:s.before(m)==y&&o.splice(1,0,-m)}let c=o.indexOf(a),d=[],h=r.openStart;for(let m=r.content,y=0;;y++){let v=m.firstChild;if(d.push(v),y==r.openStart)break;m=v.content}for(let m=h-1;m>=0;m--){let y=d[m],v=vF(y.type);if(v&&!y.sameMarkup(s.node(Math.abs(a)-1)))h=m;else if(v||!y.type.isTextblock)break}for(let m=r.openStart;m>=0;m--){let y=(m+h+1)%(r.openStart+1),v=d[y];if(v)for(let w=0;w<o.length;w++){let S=o[(w+c)%o.length],C=!0;S<0&&(C=!1,S=-S);let T=s.node(S-1),k=s.index(S-1);if(T.canReplaceWith(k,k,v.type,v.marks))return n.replace(s.before(S),C?i.after(S):t,new Ee(eN(r.content,0,r.openStart,y),y,r.openEnd))}}let f=n.steps.length;for(let m=o.length-1;m>=0&&(n.replace(e,t,r),!(n.steps.length>f));m--){let y=o[m];y<0||(e=s.before(y),t=i.after(y))}}function eN(n,e,t,r,s){if(e<t){let i=n.firstChild;n=n.replaceChild(0,i.copy(eN(i.content,e+1,t,r,i)))}if(e>r){let i=s.contentMatchAt(0),o=i.fillBefore(n).append(n);n=o.append(i.matchFragment(o).fillBefore(be.empty,!0))}return n}function wF(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let s=mF(n.doc,e,r.type);s!=null&&(e=t=s)}n.replaceRange(e,t,new Ee(be.from(r),0,0))}function bF(n,e,t){let r=n.doc.resolve(e),s=n.doc.resolve(t),i=tN(r,s);for(let o=0;o<i.length;o++){let a=i[o],c=o==i.length-1;if(c&&a==0||r.node(a).type.contentMatch.validEnd)return n.delete(r.start(a),s.end(a));if(a>0&&(c||r.node(a-1).canReplace(r.index(a-1),s.indexAfter(a-1))))return n.delete(r.before(a),s.after(a))}for(let o=1;o<=r.depth&&o<=s.depth;o++)if(e-r.start(o)==r.depth-o&&t>r.end(o)&&s.end(o)-t!=s.depth-o&&r.start(o-1)==s.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),s.index(o-1)))return n.delete(r.before(o),t);n.delete(e,t)}function tN(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let s=r;s>=0;s--){let i=n.start(s);if(i<n.pos-(n.depth-s)||e.end(s)>e.pos+(e.depth-s)||n.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(i==e.start(s)||s==n.depth&&s==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==i-1)&&t.push(s)}return t}class nl extends Pn{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return Gt.fail("No node at attribute step's position");let r=Object.create(null);for(let i in t.attrs)r[i]=t.attrs[i];r[this.attr]=this.value;let s=t.type.create(r,null,t.marks);return Gt.fromReplace(e,this.pos,this.pos+1,new Ee(be.from(s),0,t.isLeaf?0:1))}getMap(){return ur.empty}invert(e){return new nl(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new nl(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new nl(t.pos,t.attr,t.value)}}Pn.jsonID("attr",nl);class hu extends Pn{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let s in e.attrs)t[s]=e.attrs[s];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return Gt.ok(r)}getMap(){return ur.empty}invert(e){return new hu(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new hu(t.attr,t.value)}}Pn.jsonID("docAttr",hu);let hl=class extends Error{};hl=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};hl.prototype=Object.create(Error.prototype);hl.prototype.constructor=hl;hl.prototype.name="TransformError";class SF{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new tl}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new hl(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=Ee.empty){let s=sp(this.doc,e,t,r);return s&&this.step(s),this}replaceWith(e,t,r){return this.replace(e,t,new Ee(be.from(r),0,0))}delete(e,t){return this.replace(e,t,Ee.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return xF(this,e,t,r),this}replaceRangeWith(e,t,r){return wF(this,e,t,r),this}deleteRange(e,t){return bF(this,e,t),this}lift(e,t){return iF(this,e,t),this}join(e,t=1){return pF(this,e,t),this}wrap(e,t){return lF(this,e,t),this}setBlockType(e,t=e,r,s=null){return cF(this,e,t,r,s),this}setNodeMarkup(e,t,r=null,s){return dF(this,e,t,r,s),this}setNodeAttribute(e,t,r){return this.step(new nl(e,t,r)),this}setDocAttribute(e,t){return this.step(new hu(e,t)),this}addNodeMark(e,t){return this.step(new qi(e,t)),this}removeNodeMark(e,t){if(!(t instanceof ft)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t=t.isInSet(r.marks),!t)return this}return this.step(new dl(e,t)),this}split(e,t=1,r){return hF(this,e,t,r),this}addMark(e,t,r){return nF(this,e,t,r),this}removeMark(e,t,r){return rF(this,e,t,r),this}clearIncompatible(e,t,r){return I0(this,e,t,r),this}}const sy=Object.create(null);class Ke{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new CF(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=Ee.empty){let r=t.content.lastChild,s=null;for(let a=0;a<t.openEnd;a++)s=r,r=r.lastChild;let i=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:c,$to:d}=o[a],h=e.mapping.slice(i);e.replaceRange(h.map(c.pos),h.map(d.pos),a?Ee.empty:t),a==0&&k_(e,i,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,s=this.ranges;for(let i=0;i<s.length;i++){let{$from:o,$to:a}=s[i],c=e.mapping.slice(r),d=c.map(o.pos),h=c.map(a.pos);i?e.deleteRange(d,h):(e.replaceRangeWith(d,h,t),k_(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let s=e.parent.inlineContent?new He(e):Ba(e.node(0),e.parent,e.pos,e.index(),t,r);if(s)return s;for(let i=e.depth-1;i>=0;i--){let o=t<0?Ba(e.node(0),e.node(i),e.before(i+1),e.index(i),t,r):Ba(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,t,r);if(o)return o}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new hr(e.node(0))}static atStart(e){return Ba(e,e,0,0,1)||new hr(e)}static atEnd(e){return Ba(e,e,e.content.size,e.childCount,-1)||new hr(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=sy[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in sy)throw new RangeError("Duplicate use of selection JSON ID "+e);return sy[e]=t,t.prototype.jsonID=e,t}getBookmark(){return He.between(this.$anchor,this.$head).getBookmark()}}Ke.prototype.visible=!0;class CF{constructor(e,t){this.$from=e,this.$to=t}}let __=!1;function T_(n){!__&&!n.parent.inlineContent&&(__=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class He extends Ke{constructor(e,t=e){T_(e),T_(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return Ke.near(r);let s=e.resolve(t.map(this.anchor));return new He(s.parent.inlineContent?s:r,r)}replace(e,t=Ee.empty){if(super.replace(e,t),t==Ee.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof He&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new ip(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new He(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let s=e.resolve(t);return new this(s,r==t?s:e.resolve(r))}static between(e,t,r){let s=e.pos-t.pos;if((!r||s)&&(r=s>=0?1:-1),!t.parent.inlineContent){let i=Ke.findFrom(t,r,!0)||Ke.findFrom(t,-r,!0);if(i)t=i.$head;else return Ke.near(t,r)}return e.parent.inlineContent||(s==0?e=t:(e=(Ke.findFrom(e,-r,!0)||Ke.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=s<0&&(e=t))),new He(e,t)}}Ke.jsonID("text",He);class ip{constructor(e,t){this.anchor=e,this.head=t}map(e){return new ip(e.map(this.anchor),e.map(this.head))}resolve(e){return He.between(e.resolve(this.anchor),e.resolve(this.head))}}class Fe extends Ke{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:s}=t.mapResult(this.anchor),i=e.resolve(s);return r?Ke.near(i):new Fe(i)}content(){return new Ee(be.from(this.node),0,0)}eq(e){return e instanceof Fe&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new L0(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Fe(e.resolve(t.anchor))}static create(e,t){return new Fe(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Fe.prototype.visible=!1;Ke.jsonID("node",Fe);class L0{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new ip(r,r):new L0(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&Fe.isSelectable(r)?new Fe(t):Ke.near(t)}}class hr extends Ke{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=Ee.empty){if(t==Ee.empty){e.delete(0,e.doc.content.size);let r=Ke.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new hr(e)}map(e){return new hr(e)}eq(e){return e instanceof hr}getBookmark(){return _F}}Ke.jsonID("all",hr);const _F={map(){return this},resolve(n){return new hr(n)}};function Ba(n,e,t,r,s,i=!1){if(e.inlineContent)return He.create(n,t);for(let o=r-(s>0?0:1);s>0?o<e.childCount:o>=0;o+=s){let a=e.child(o);if(a.isAtom){if(!i&&Fe.isSelectable(a))return Fe.create(n,t-(s<0?a.nodeSize:0))}else{let c=Ba(n,a,t+s,s<0?a.childCount:0,s,i);if(c)return c}t+=a.nodeSize*s}return null}function k_(n,e,t){let r=n.steps.length-1;if(r<e)return;let s=n.steps[r];if(!(s instanceof rn||s instanceof sn))return;let i=n.mapping.maps[r],o;i.forEach((a,c,d,h)=>{o==null&&(o=h)}),n.setSelection(Ke.near(n.doc.resolve(o),t))}const E_=1,N_=2,A_=4;class TF extends SF{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|E_)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&E_)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=N_,this}ensureMarks(e){return ft.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&N_)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ft.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let s=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let i=this.storedMarks;if(!i){let o=this.doc.resolve(t);i=r==t?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,s.text(e,i)),this.selection.empty||this.setSelection(Ke.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=A_,this}get scrolledIntoView(){return(this.updated&A_)>0}}function M_(n,e){return!e||!n?n:n.bind(e)}class Kc{constructor(e,t,r){this.name=e,this.init=M_(t.init,r),this.apply=M_(t.apply,r)}}const kF=[new Kc("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new Kc("selection",{init(n,e){return n.selection||Ke.atStart(e.doc)},apply(n){return n.selection}}),new Kc("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new Kc("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class iy{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=kF.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Kc(r.key,r.spec.state,r))})}}class $a{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),s=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let c=s?s[o].n:0,d=s?s[o].state:this,h=c<t.length&&a.spec.appendTransaction.call(a,c?t.slice(c):t,d,r);if(h&&r.filterTransaction(h,o)){if(h.setMeta("appendedTransaction",e),!s){s=[];for(let f=0;f<this.config.plugins.length;f++)s.push(f<o?{state:r,n:t.length}:{state:this,n:0})}t.push(h),r=r.applyInner(h),i=!0}s&&(s[o]={state:r,n:t.length})}}if(!i)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new $a(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let i=r[s];t[i.name]=i.apply(e,this[i.name],this,t)}return t}get tr(){return new TF(this)}static create(e){let t=new iy(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new $a(t);for(let s=0;s<t.fields.length;s++)r[t.fields[s].name]=t.fields[s].init(e,r);return r}reconfigure(e){let t=new iy(this.schema,e.plugins),r=t.fields,s=new $a(t);for(let i=0;i<r.length;i++){let o=r[i].name;s[o]=this.hasOwnProperty(o)?this[o]:r[i].init(e,s)}return s}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[r],i=s.spec.state;i&&i.toJSON&&(t[r]=i.toJSON.call(s,this[s.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new iy(e.schema,e.plugins),i=new $a(s);return s.fields.forEach(o=>{if(o.name=="doc")i.doc=Ki.fromJSON(e.schema,t.doc);else if(o.name=="selection")i.selection=Ke.fromJSON(i.doc,t.selection);else if(o.name=="storedMarks")t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let c=r[a],d=c.spec.state;if(c.key==o.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(t,a)){i[o.name]=d.fromJSON.call(c,e,t[a],i);return}}i[o.name]=o.init(e,i)}}),i}}function nN(n,e,t){for(let r in n){let s=n[r];s instanceof Function?s=s.bind(e):r=="handleDOMEvents"&&(s=nN(s,e,{})),t[r]=s}return t}class $n{constructor(e){this.spec=e,this.props={},e.props&&nN(e.props,this,this.props),this.key=e.key?e.key.key:rN("plugin")}getState(e){return e[this.key]}}const oy=Object.create(null);function rN(n){return n in oy?n+"$"+ ++oy[n]:(oy[n]=0,n+"$")}class ns{constructor(e="key"){this.key=rN(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const gn=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},fu=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let gv=null;const Gs=function(n,e,t){let r=gv||(gv=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},EF=function(){gv=null},Yo=function(n,e,t,r){return t&&(O_(n,e,t,r,-1)||O_(n,e,t,r,1))},NF=/^(img|br|input|textarea|hr)$/i;function O_(n,e,t,r,s){for(;;){if(n==t&&e==r)return!0;if(e==(s<0?0:Ar(n))){let i=n.parentNode;if(!i||i.nodeType!=1||Fu(n)||NF.test(n.nodeName)||n.contentEditable=="false")return!1;e=gn(n)+(s<0?0:1),n=i}else if(n.nodeType==1){if(n=n.childNodes[e+(s<0?-1:0)],n.contentEditable=="false")return!1;e=s<0?Ar(n):0}else return!1}}function Ar(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function AF(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=Ar(n)}else if(n.parentNode&&!Fu(n))e=gn(n),n=n.parentNode;else return null}}function MF(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Fu(n))e=gn(n)+1,n=n.parentNode;else return null}}function OF(n,e,t){for(let r=e==0,s=e==Ar(n);r||s;){if(n==t)return!0;let i=gn(n);if(n=n.parentNode,!n)return!1;r=r&&i==0,s=s&&i==Ar(n)}}function Fu(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const op=function(n){return n.focusNode&&Yo(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Io(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function PF(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function DF(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(Ar(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(Ar(r.startContainer),r.startOffset)}}}const bs=typeof navigator<"u"?navigator:null,P_=typeof document<"u"?document:null,uo=bs&&bs.userAgent||"",yv=/Edge\/(\d+)/.exec(uo),sN=/MSIE \d/.exec(uo),vv=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(uo),er=!!(sN||vv||yv),Xi=sN?document.documentMode:vv?+vv[1]:yv?+yv[1]:0,Zr=!er&&/gecko\/(\d+)/i.test(uo);Zr&&+(/Firefox\/(\d+)/.exec(uo)||[0,0])[1];const xv=!er&&/Chrome\/(\d+)/.exec(uo),Nn=!!xv,iN=xv?+xv[1]:0,Bn=!er&&!!bs&&/Apple Computer/.test(bs.vendor),fl=Bn&&(/Mobile\/\w+/.test(uo)||!!bs&&bs.maxTouchPoints>2),Nr=fl||(bs?/Mac/.test(bs.platform):!1),RF=bs?/Win/.test(bs.platform):!1,Ys=/Android \d/.test(uo),Vu=!!P_&&"webkitFontSmoothing"in P_.documentElement.style,IF=Vu?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function jF(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Us(n,e){return typeof n=="number"?n:n[e]}function LF(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function D_(n,e,t){let r=n.someProp("scrollThreshold")||0,s=n.someProp("scrollMargin")||5,i=n.dom.ownerDocument;for(let o=t||n.dom;o;o=fu(o)){if(o.nodeType!=1)continue;let a=o,c=a==i.body,d=c?jF(i):LF(a),h=0,f=0;if(e.top<d.top+Us(r,"top")?f=-(d.top-e.top+Us(s,"top")):e.bottom>d.bottom-Us(r,"bottom")&&(f=e.bottom-e.top>d.bottom-d.top?e.top+Us(s,"top")-d.top:e.bottom-d.bottom+Us(s,"bottom")),e.left<d.left+Us(r,"left")?h=-(d.left-e.left+Us(s,"left")):e.right>d.right-Us(r,"right")&&(h=e.right-d.right+Us(s,"right")),h||f)if(c)i.defaultView.scrollBy(h,f);else{let m=a.scrollLeft,y=a.scrollTop;f&&(a.scrollTop+=f),h&&(a.scrollLeft+=h);let v=a.scrollLeft-m,w=a.scrollTop-y;e={left:e.left-v,top:e.top-w,right:e.right-v,bottom:e.bottom-w}}if(c||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function FF(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,s;for(let i=(e.left+e.right)/2,o=t+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=n.root.elementFromPoint(i,o);if(!a||a==n.dom||!n.dom.contains(a))continue;let c=a.getBoundingClientRect();if(c.top>=t-20){r=a,s=c.top;break}}return{refDOM:r,refTop:s,stack:oN(n.dom)}}function oN(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=fu(r));return e}function VF({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;aN(t,r==0?0:r-e)}function aN(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:s,left:i}=n[t];r.scrollTop!=s+e&&(r.scrollTop=s+e),r.scrollLeft!=i&&(r.scrollLeft=i)}}let Ia=null;function BF(n){if(n.setActive)return n.setActive();if(Ia)return n.focus(Ia);let e=oN(n);n.focus(Ia==null?{get preventScroll(){return Ia={preventScroll:!0},!0}}:void 0),Ia||(Ia=!1,aN(e,0))}function lN(n,e){let t,r=2e8,s,i=0,o=e.top,a=e.top,c,d;for(let h=n.firstChild,f=0;h;h=h.nextSibling,f++){let m;if(h.nodeType==1)m=h.getClientRects();else if(h.nodeType==3)m=Gs(h).getClientRects();else continue;for(let y=0;y<m.length;y++){let v=m[y];if(v.top<=o&&v.bottom>=a){o=Math.max(v.bottom,o),a=Math.min(v.top,a);let w=v.left>e.left?v.left-e.left:v.right<e.left?e.left-v.right:0;if(w<r){t=h,r=w,s=w&&t.nodeType==3?{left:v.right<e.left?v.right:v.left,top:e.top}:e,h.nodeType==1&&w&&(i=f+(e.left>=(v.left+v.right)/2?1:0));continue}}else v.top>e.top&&!c&&v.left<=e.left&&v.right>=e.left&&(c=h,d={left:Math.max(v.left,Math.min(v.right,e.left)),top:v.top});!t&&(e.left>=v.right&&e.top>=v.top||e.left>=v.left&&e.top>=v.bottom)&&(i=f+1)}}return!t&&c&&(t=c,s=d,r=0),t&&t.nodeType==3?zF(t,s):!t||r&&t.nodeType==1?{node:n,offset:i}:lN(t,s)}function zF(n,e){let t=n.nodeValue.length,r=document.createRange();for(let s=0;s<t;s++){r.setEnd(n,s+1),r.setStart(n,s);let i=ji(r,1);if(i.top!=i.bottom&&F0(e,i))return{node:n,offset:s+(e.left>=(i.left+i.right)/2?1:0)}}return{node:n,offset:0}}function F0(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function WF(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function $F(n,e,t){let{node:r,offset:s}=lN(e,t),i=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();i=o.left!=o.right&&t.left>(o.left+o.right)/2?1:-1}return n.docView.posFromDOM(r,s,i)}function HF(n,e,t,r){let s=-1;for(let i=e,o=!1;i!=n.dom;){let a=n.docView.nearestDesc(i,!0),c;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((c=a.dom.getBoundingClientRect()).width||c.height)&&(a.node.isBlock&&a.parent&&(!o&&c.left>r.left||c.top>r.top?s=a.posBefore:(!o&&c.right<r.left||c.bottom<r.top)&&(s=a.posAfter),o=!0),!a.contentDOM&&s<0&&!a.node.isText))return(a.node.isBlock?r.top<(c.top+c.bottom)/2:r.left<(c.left+c.right)/2)?a.posBefore:a.posAfter;i=a.dom.parentNode}return s>-1?s:n.docView.posFromDOM(e,t,-1)}function cN(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),i=s;;){let o=n.childNodes[i];if(o.nodeType==1){let a=o.getClientRects();for(let c=0;c<a.length;c++){let d=a[c];if(F0(e,d))return cN(o,e,d)}}if((i=(i+1)%r)==s)break}return n}function UF(n,e){let t=n.dom.ownerDocument,r,s=0,i=DF(t,e.left,e.top);i&&({node:r,offset:s}=i);let o=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),a;if(!o||!n.dom.contains(o.nodeType!=1?o.parentNode:o)){let d=n.dom.getBoundingClientRect();if(!F0(e,d)||(o=cN(n.dom,e,d),!o))return null}if(Bn)for(let d=o;r&&d;d=fu(d))d.draggable&&(r=void 0);if(o=WF(o,e),r){if(Zr&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let h=r.childNodes[s],f;h.nodeName=="IMG"&&(f=h.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&s++}let d;Vu&&s&&r.nodeType==1&&(d=r.childNodes[s-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=e.top&&s--,r==n.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=n.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(a=HF(n,r,s,e))}a==null&&(a=$F(n,o,e));let c=n.docView.nearestDesc(o,!0);return{pos:a,inside:c?c.posAtStart-c.border:-1}}function R_(n){return n.top<n.bottom||n.left<n.right}function ji(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(R_(r))return r}return Array.prototype.find.call(t,R_)||n.getBoundingClientRect()}const qF=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function uN(n,e,t){let{node:r,offset:s,atom:i}=n.docView.domFromPos(e,t<0?-1:1),o=Vu||Zr;if(r.nodeType==3)if(o&&(qF.test(r.nodeValue)||(t<0?!s:s==r.nodeValue.length))){let c=ji(Gs(r,s,s),t);if(Zr&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let d=ji(Gs(r,s-1,s-1),-1);if(d.top==c.top){let h=ji(Gs(r,s,s+1),-1);if(h.top!=c.top)return Bc(h,h.left<d.left)}}return c}else{let c=s,d=s,h=t<0?1:-1;return t<0&&!s?(d++,h=-1):t>=0&&s==r.nodeValue.length?(c--,h=1):t<0?c--:d++,Bc(ji(Gs(r,c,d),h),h<0)}if(!n.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&s&&(t<0||s==Ar(r))){let c=r.childNodes[s-1];if(c.nodeType==1)return ay(c.getBoundingClientRect(),!1)}if(i==null&&s<Ar(r)){let c=r.childNodes[s];if(c.nodeType==1)return ay(c.getBoundingClientRect(),!0)}return ay(r.getBoundingClientRect(),t>=0)}if(i==null&&s&&(t<0||s==Ar(r))){let c=r.childNodes[s-1],d=c.nodeType==3?Gs(c,Ar(c)-(o?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(d)return Bc(ji(d,1),!1)}if(i==null&&s<Ar(r)){let c=r.childNodes[s];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let d=c?c.nodeType==3?Gs(c,0,o?0:1):c.nodeType==1?c:null:null;if(d)return Bc(ji(d,-1),!0)}return Bc(ji(r.nodeType==3?Gs(r):r,-t),t>=0)}function Bc(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function ay(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function dN(n,e,t){let r=n.state,s=n.root.activeElement;r!=e&&n.updateState(e),s!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),s!=n.dom&&s&&s.focus()}}function GF(n,e,t){let r=e.selection,s=t=="up"?r.$from:r.$to;return dN(n,e,()=>{let{node:i}=n.docView.domFromPos(s.pos,t=="up"?-1:1);for(;;){let a=n.docView.nearestDesc(i,!0);if(!a)break;if(a.node.isBlock){i=a.contentDOM||a.dom;break}i=a.dom.parentNode}let o=uN(n,s.pos,1);for(let a=i.firstChild;a;a=a.nextSibling){let c;if(a.nodeType==1)c=a.getClientRects();else if(a.nodeType==3)c=Gs(a,0,a.nodeValue.length).getClientRects();else continue;for(let d=0;d<c.length;d++){let h=c[d];if(h.bottom>h.top+1&&(t=="up"?o.top-h.top>(h.bottom-o.top)*2:h.bottom-o.bottom>(o.bottom-h.top)*2))return!1}}return!0})}const KF=/[\u0590-\u08ac]/;function YF(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,i=!s,o=s==r.parent.content.size,a=n.domSelection();return a?!KF.test(r.parent.textContent)||!a.modify?t=="left"||t=="backward"?i:o:dN(n,e,()=>{let{focusNode:c,focusOffset:d,anchorNode:h,anchorOffset:f}=n.domSelectionRange(),m=a.caretBidiLevel;a.modify("move",t,"character");let y=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:v,focusOffset:w}=n.domSelectionRange(),S=v&&!y.contains(v.nodeType==1?v:v.parentNode)||c==v&&d==w;try{a.collapse(h,f),c&&(c!=h||d!=f)&&a.extend&&a.extend(c,d)}catch{}return m!=null&&(a.caretBidiLevel=m),S}):r.pos==r.start()||r.pos==r.end()}let I_=null,j_=null,L_=!1;function XF(n,e,t){return I_==e&&j_==t?L_:(I_=e,j_=t,L_=t=="up"||t=="down"?GF(n,e,t):YF(n,e,t))}const Or=0,F_=1,Lo=2,Ss=3;class Bu{constructor(e,t,r,s){this.parent=e,this.children=t,this.dom=r,this.contentDOM=s,this.dirty=Or,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let s=this.children[t];if(s==e)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let i,o;if(e==this.contentDOM)i=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(o)+o.size:this.posAtStart}else{let i,o;if(e==this.contentDOM)i=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(o):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=t>gn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!1;break}if(i.previousSibling)break}if(s==null&&t==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!0;break}if(i.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,s=e;s;s=s.parentNode){let i=this.getDesc(s),o;if(i&&(!t||i.node))if(r&&(o=i.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return i}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let s=e;s;s=s.parentNode){let i=this.getDesc(s);if(i)return i.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let s=this.children[t],i=r+s.size;if(r==e&&i!=r){for(;!s.border&&s.children.length;)for(let o=0;o<s.children.length;o++){let a=s.children[o];if(a.size){s=a;break}}return s}if(e<i)return s.descAt(e-r-s.border);r=i}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,s=0;for(let i=0;r<this.children.length;r++){let o=this.children[r],a=i+o.size;if(a>e||o instanceof fN){s=e-i;break}i=a}if(s)return this.children[r].domFromPos(s-this.children[r].border,t);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof hN&&i.side>=0;r--);if(t<=0){let i,o=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,o=!1);return i&&t&&o&&!i.border&&!i.domAtom?i.domFromPos(i.size,t):{node:this.contentDOM,offset:i?gn(i.dom)+1:0}}else{let i,o=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,o=!1);return i&&o&&!i.border&&!i.domAtom?i.domFromPos(0,t):{node:this.contentDOM,offset:i?gn(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,i=-1;for(let o=r,a=0;;a++){let c=this.children[a],d=o+c.size;if(s==-1&&e<=d){let h=o+c.border;if(e>=h&&t<=d-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,t,h);e=o;for(let f=a;f>0;f--){let m=this.children[f-1];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(1)){s=gn(m.dom)+1;break}e-=m.size}s==-1&&(s=0)}if(s>-1&&(d>t||a==this.children.length-1)){t=d;for(let h=a+1;h<this.children.length;h++){let f=this.children[h];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){i=gn(f.dom);break}t+=f.size}i==-1&&(i=this.contentDOM.childNodes.length);break}o=d}return{node:this.contentDOM,from:e,to:t,fromOffset:s,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,s=!1){let i=Math.min(e,t),o=Math.max(e,t);for(let y=0,v=0;y<this.children.length;y++){let w=this.children[y],S=v+w.size;if(i>v&&o<S)return w.setSelection(e-v-w.border,t-v-w.border,r,s);v=S}let a=this.domFromPos(e,e?-1:1),c=t==e?a:this.domFromPos(t,t?-1:1),d=r.root.getSelection(),h=r.domSelectionRange(),f=!1;if((Zr||Bn)&&e==t){let{node:y,offset:v}=a;if(y.nodeType==3){if(f=!!(v&&y.nodeValue[v-1]==`
`),f&&v==y.nodeValue.length)for(let w=y,S;w;w=w.parentNode){if(S=w.nextSibling){S.nodeName=="BR"&&(a=c={node:S.parentNode,offset:gn(S)+1});break}let C=w.pmViewDesc;if(C&&C.node&&C.node.isBlock)break}}else{let w=y.childNodes[v-1];f=w&&(w.nodeName=="BR"||w.contentEditable=="false")}}if(Zr&&h.focusNode&&h.focusNode!=c.node&&h.focusNode.nodeType==1){let y=h.focusNode.childNodes[h.focusOffset];y&&y.contentEditable=="false"&&(s=!0)}if(!(s||f&&Bn)&&Yo(a.node,a.offset,h.anchorNode,h.anchorOffset)&&Yo(c.node,c.offset,h.focusNode,h.focusOffset))return;let m=!1;if((d.extend||e==t)&&!f){d.collapse(a.node,a.offset);try{e!=t&&d.extend(c.node,c.offset),m=!0}catch{}}if(!m){if(e>t){let v=a;a=c,c=v}let y=document.createRange();y.setEnd(c.node,c.offset),y.setStart(a.node,a.offset),d.removeAllRanges(),d.addRange(y)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,s=0;s<this.children.length;s++){let i=this.children[s],o=r+i.size;if(r==o?e<=o&&t>=r:e<o&&t>r){let a=r+i.border,c=o-i.border;if(e>=a&&t<=c){this.dirty=e==r||t==o?Lo:F_,e==a&&t==c&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=Ss:i.markDirty(e-a,t-a);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?Lo:Ss}r=o}this.dirty=Lo}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?Lo:F_;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class hN extends Bu{constructor(e,t,r,s){let i,o=t.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!i)return s;if(i.parent)return i.parent.posBeforeChild(i)})),!t.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,i=this}matchesWidget(e){return this.dirty==Or&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class JF extends Bu{constructor(e,t,r,s){super(e,[],t,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Xo extends Bu{constructor(e,t,r,s,i){super(e,[],r,s),this.mark=t,this.spec=i}static create(e,t,r,s){let i=s.nodeViews[t.type.name],o=i&&i(t,s,r);return(!o||!o.dom)&&(o=ra.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new Xo(e,t,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Ss||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Ss&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Or){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Or}}slice(e,t,r){let s=Xo.create(this.parent,this.mark,!0,r),i=this.children,o=this.size;t<o&&(i=bv(i,t,o,r)),e>0&&(i=bv(i,0,e,r));for(let a=0;a<i.length;a++)i[a].parent=s;return s.children=i,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Ji extends Bu{constructor(e,t,r,s,i,o,a,c,d){super(e,[],i,o),this.node=t,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=a}static create(e,t,r,s,i,o){let a=i.nodeViews[t.type.name],c,d=a&&a(t,i,()=>{if(!c)return o;if(c.parent)return c.parent.posBeforeChild(c)},r,s),h=d&&d.dom,f=d&&d.contentDOM;if(t.isText){if(!h)h=document.createTextNode(t.text);else if(h.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else h||({dom:h,contentDOM:f}=ra.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!f&&!t.isText&&h.nodeName!="BR"&&(h.hasAttribute("contenteditable")||(h.contentEditable="false"),t.type.spec.draggable&&(h.draggable=!0));let m=h;return h=gN(h,r,t),d?c=new ZF(e,t,r,s,h,f||null,m,d,i,o+1):t.isText?new ap(e,t,r,s,h,m,i):new Ji(e,t,r,s,h,f||null,m,i,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>be.empty)}return e}matchesNode(e,t,r){return this.dirty==Or&&e.eq(this.node)&&mf(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,s=t,i=e.composing?this.localCompositionInfo(e,t):null,o=i&&i.pos>-1?i:null,a=i&&i.pos<0,c=new eV(this,o&&o.node,e);rV(this.node,this.innerDeco,(d,h,f)=>{d.spec.marks?c.syncToMarks(d.spec.marks,r,e):d.type.side>=0&&!f&&c.syncToMarks(h==this.node.childCount?ft.none:this.node.child(h).marks,r,e),c.placeWidget(d,e,s)},(d,h,f,m)=>{c.syncToMarks(d.marks,r,e);let y;c.findNodeMatch(d,h,f,m)||a&&e.state.selection.from>s&&e.state.selection.to<s+d.nodeSize&&(y=c.findIndexWithChild(i.node))>-1&&c.updateNodeAt(d,h,f,y,e)||c.updateNextNode(d,h,f,e,m,s)||c.addNode(d,h,f,e,s),s+=d.nodeSize}),c.syncToMarks([],r,e),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==Lo)&&(o&&this.protectLocalComposition(e,o),pN(this.contentDOM,this.children,e),fl&&sV(this.dom))}localCompositionInfo(e,t){let{from:r,to:s}=e.state.selection;if(!(e.state.selection instanceof He)||r<t||s>t+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let o=i.nodeValue,a=iV(this.node.content,o,r-t,s-t);return a<0?null:{node:i,pos:a,text:o}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:s}){if(this.getDesc(t))return;let i=t;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new JF(this,i,t,s);e.input.compositionNodes.push(o),this.children=bv(this.children,r,r+s.length,e,o)}update(e,t,r,s){return this.dirty==Ss||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,s),!0)}updateInner(e,t,r,s){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=Or}updateOuterDeco(e){if(mf(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=mN(this.dom,this.nodeDOM,wv(this.outerDeco,this.node,t),wv(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function V_(n,e,t,r,s){gN(r,e,n);let i=new Ji(void 0,n,e,t,r,r,r,s,0);return i.contentDOM&&i.updateChildren(s,0),i}class ap extends Ji{constructor(e,t,r,s,i,o,a){super(e,t,r,s,i,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,s){return this.dirty==Ss||this.dirty!=Or&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Or||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=Or,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let s=this.node.cut(e,t),i=document.createTextNode(s.text);return new ap(this.parent,s,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Ss)}get domAtom(){return!1}isText(e){return this.node.text==e}}class fN extends Bu{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Or&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class ZF extends Ji{constructor(e,t,r,s,i,o,a,c,d,h){super(e,t,r,s,i,o,a,d,h),this.spec=c}update(e,t,r,s){if(this.dirty==Ss)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,t,r);return i&&this.updateInner(e,t,r,s),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,s){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function pN(n,e,t){let r=n.firstChild,s=!1;for(let i=0;i<e.length;i++){let o=e[i],a=o.dom;if(a.parentNode==n){for(;a!=r;)r=B_(r),s=!0;r=r.nextSibling}else s=!0,n.insertBefore(a,r);if(o instanceof Xo){let c=r?r.previousSibling:n.lastChild;pN(o.contentDOM,o.children,t),r=c?c.nextSibling:n.firstChild}}for(;r;)r=B_(r),s=!0;s&&t.trackWrites==n&&(t.trackWrites=null)}const ru=function(n){n&&(this.nodeName=n)};ru.prototype=Object.create(null);const Fo=[new ru];function wv(n,e,t){if(n.length==0)return Fo;let r=t?Fo[0]:new ru,s=[r];for(let i=0;i<n.length;i++){let o=n[i].type.attrs;if(o){o.nodeName&&s.push(r=new ru(o.nodeName));for(let a in o){let c=o[a];c!=null&&(t&&s.length==1&&s.push(r=new ru(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+c:a=="style"?r.style=(r.style?r.style+";":"")+c:a!="nodeName"&&(r[a]=c))}}}return s}function mN(n,e,t,r){if(t==Fo&&r==Fo)return e;let s=e;for(let i=0;i<r.length;i++){let o=r[i],a=t[i];if(i){let c;a&&a.nodeName==o.nodeName&&s!=n&&(c=s.parentNode)&&c.nodeName.toLowerCase()==o.nodeName||(c=document.createElement(o.nodeName),c.pmIsDeco=!0,c.appendChild(s),a=Fo[0]),s=c}QF(s,a||Fo[0],o)}return s}function QF(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],s=t.class?t.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)s.indexOf(r[i])==-1&&n.classList.remove(r[i]);for(let i=0;i<s.length;i++)r.indexOf(s[i])==-1&&n.classList.add(s[i]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(e.style);)n.style.removeProperty(s[1])}t.style&&(n.style.cssText+=t.style)}}function gN(n,e,t){return mN(n,n,Fo,wv(e,t,n.nodeType!=1))}function mf(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function B_(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class eV{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=tV(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let s=0,i=this.stack.length>>1,o=Math.min(i,e.length);for(;s<o&&(s==i-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<i;)this.destroyRest(),this.top.dirty=Or,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){let d=this.top.children[c];if(d.matchesMark(e[i])&&!this.isLocked(d.dom)){a=c;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let c=Xo.create(this.top,e[i],t,r);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,i++}}findNodeMatch(e,t,r,s){let i=-1,o;if(s>=this.preMatch.index&&(o=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,r))i=this.top.children.indexOf(o,this.index);else for(let a=this.index,c=Math.min(this.top.children.length,a+5);a<c;a++){let d=this.top.children[a];if(d.matchesNode(e,t,r)&&!this.preMatch.matched.has(d)){i=a;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,t,r,s,i){let o=this.top.children[s];return o.dirty==Ss&&o.dom==o.contentDOM&&(o.dirty=Lo),o.update(e,t,r,i)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}e=t}}updateNextNode(e,t,r,s,i,o){for(let a=this.index;a<this.top.children.length;a++){let c=this.top.children[a];if(c instanceof Ji){let d=this.preMatch.matched.get(c);if(d!=null&&d!=i)return!1;let h=c.dom,f,m=this.isLocked(h)&&!(e.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==e.text&&c.dirty!=Ss&&mf(t,c.outerDeco));if(!m&&c.update(e,t,r,s))return this.destroyBetween(this.index,a),c.dom!=h&&(this.changed=!0),this.index++,!0;if(!m&&(f=this.recreateWrapper(c,e,t,r,s,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Lo,f.updateChildren(s,o+1),f.dirty=Or),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,s,i,o){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!mf(r,e.outerDeco)||!s.eq(e.innerDeco))return null;let a=Ji.create(this.top,t,r,s,i,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let c of a.children)c.parent=a}return e.destroy(),a}addNode(e,t,r,s,i){let o=Ji.create(this.top,e,t,r,s,i);o.contentDOM&&o.updateChildren(s,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,t,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let i=new hN(this.top,e,t,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Xo;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof ap)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Bn||Nn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new fN(this.top,[],r,null);t!=this.top?t.children.push(s):t.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function tV(n,e){let t=e,r=t.children.length,s=n.childCount,i=new Map,o=[];e:for(;s>0;){let a;for(;;)if(r){let d=t.children[r-1];if(d instanceof Xo)t=d,r=d.children.length;else{a=d,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let c=a.node;if(c){if(c!=n.child(s-1))break;--s,i.set(a,s),o.push(a)}}return{index:s,matched:i,matches:o.reverse()}}function nV(n,e){return n.type.side-e.type.side}function rV(n,e,t,r){let s=e.locals(n),i=0;if(s.length==0){for(let d=0;d<n.childCount;d++){let h=n.child(d);r(h,s,e.forChild(i,h),d),i+=h.nodeSize}return}let o=0,a=[],c=null;for(let d=0;;){let h,f;for(;o<s.length&&s[o].to==i;){let S=s[o++];S.widget&&(h?(f||(f=[h])).push(S):h=S)}if(h)if(f){f.sort(nV);for(let S=0;S<f.length;S++)t(f[S],d,!!c)}else t(h,d,!!c);let m,y;if(c)y=-1,m=c,c=null;else if(d<n.childCount)y=d,m=n.child(d++);else break;for(let S=0;S<a.length;S++)a[S].to<=i&&a.splice(S--,1);for(;o<s.length&&s[o].from<=i&&s[o].to>i;)a.push(s[o++]);let v=i+m.nodeSize;if(m.isText){let S=v;o<s.length&&s[o].from<S&&(S=s[o].from);for(let C=0;C<a.length;C++)a[C].to<S&&(S=a[C].to);S<v&&(c=m.cut(S-i),m=m.cut(0,S-i),v=S,y=-1)}else for(;o<s.length&&s[o].to<v;)o++;let w=m.isInline&&!m.isLeaf?a.filter(S=>!S.inline):a.slice();r(m,w,e.forChild(i,m),y),i=v}}function sV(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function iV(n,e,t,r){for(let s=0,i=0;s<n.childCount&&i<=r;){let o=n.child(s++),a=i;if(i+=o.nodeSize,!o.isText)continue;let c=o.text;for(;s<n.childCount;){let d=n.child(s++);if(i+=d.nodeSize,!d.isText)break;c+=d.text}if(i>=t){if(i>=r&&c.slice(r-e.length-a,r-a)==e)return r-e.length;let d=a<r?c.lastIndexOf(e,r-a-1):-1;if(d>=0&&d+e.length+a>=t)return a+d;if(t==r&&c.length>=r+e.length-a&&c.slice(r-a,r-a+e.length)==e)return r}}return-1}function bv(n,e,t,r,s){let i=[];for(let o=0,a=0;o<n.length;o++){let c=n[o],d=a,h=a+=c.size;d>=t||h<=e?i.push(c):(d<e&&i.push(c.slice(0,e-d,r)),s&&(i.push(s),s=void 0),h>t&&i.push(c.slice(t-d,c.size,r)))}return i}function V0(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let s=n.docView.nearestDesc(t.focusNode),i=s&&s.size==0,o=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(o<0)return null;let a=r.resolve(o),c,d;if(op(t)){for(c=o;s&&!s.node;)s=s.parent;let f=s.node;if(s&&f.isAtom&&Fe.isSelectable(f)&&s.parent&&!(f.isInline&&OF(t.focusNode,t.focusOffset,s.dom))){let m=s.posBefore;d=new Fe(o==m?a:r.resolve(m))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let f=o,m=o;for(let y=0;y<t.rangeCount;y++){let v=t.getRangeAt(y);f=Math.min(f,n.docView.posFromDOM(v.startContainer,v.startOffset,1)),m=Math.max(m,n.docView.posFromDOM(v.endContainer,v.endOffset,-1))}if(f<0)return null;[c,o]=m==n.state.selection.anchor?[m,f]:[f,m],a=r.resolve(o)}else c=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(c<0)return null}let h=r.resolve(c);if(!d){let f=e=="pointer"||n.state.selection.head<a.pos&&!i?1:-1;d=B0(n,h,a,f)}return d}function yN(n){return n.editable?n.hasFocus():xN(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Js(n,e=!1){let t=n.state.selection;if(vN(n,t),!!yN(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Nn){let r=n.domSelectionRange(),s=n.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&Yo(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)aV(n);else{let{anchor:r,head:s}=t,i,o;z_&&!(t instanceof He)&&(t.$from.parent.inlineContent||(i=W_(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(o=W_(n,t.to))),n.docView.setSelection(r,s,n,e),z_&&(i&&$_(i),o&&$_(o)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&oV(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const z_=Bn||Nn&&iN<63;function W_(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),s=r<t.childNodes.length?t.childNodes[r]:null,i=r?t.childNodes[r-1]:null;if(Bn&&s&&s.contentEditable=="false")return ly(s);if((!s||s.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(s)return ly(s);if(i)return ly(i)}}function ly(n){return n.contentEditable="true",Bn&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function $_(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function oV(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,s=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=s)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!yN(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function aV(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,s=r.nodeName=="IMG";s?t.setStart(r.parentNode,gn(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!s&&!n.state.selection.visible&&er&&Xi<=11&&(r.disabled=!0,r.disabled=!1)}function vN(n,e){if(e instanceof Fe){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(H_(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else H_(n)}function H_(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function B0(n,e,t,r){return n.someProp("createSelectionBetween",s=>s(n,e,t))||He.between(e,t,r)}function U_(n){return n.editable&&!n.hasFocus()?!1:xN(n)}function xN(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function lV(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Yo(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Sv(n,e){let{$anchor:t,$head:r}=n.selection,s=e>0?t.max(r):t.min(r),i=s.parent.inlineContent?s.depth?n.doc.resolve(e>0?s.after():s.before()):null:s;return i&&Ke.findFrom(i,e)}function zi(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function q_(n,e,t){let r=n.state.selection;if(r instanceof He)if(t.indexOf("s")>-1){let{$head:s}=r,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let o=n.state.doc.resolve(s.pos+i.nodeSize*(e<0?-1:1));return zi(n,new He(r.$anchor,o))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let s=Sv(n.state,e);return s&&s instanceof Fe?zi(n,s):!1}else if(!(Nr&&t.indexOf("m")>-1)){let s=r.$head,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,o;if(!i||i.isText)return!1;let a=e<0?s.pos-i.nodeSize:s.pos;return i.isAtom||(o=n.docView.descAt(a))&&!o.contentDOM?Fe.isSelectable(i)?zi(n,new Fe(e<0?n.state.doc.resolve(s.pos-i.nodeSize):s)):Vu?zi(n,new He(n.state.doc.resolve(e<0?a:a+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Fe&&r.node.isInline)return zi(n,new He(e>0?r.$to:r.$from));{let s=Sv(n.state,e);return s?zi(n,s):!1}}}function gf(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function su(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function ja(n,e){return e<0?cV(n):uV(n)}function cV(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let s,i,o=!1;for(Zr&&t.nodeType==1&&r<gf(t)&&su(t.childNodes[r],-1)&&(o=!0);;)if(r>0){if(t.nodeType!=1)break;{let a=t.childNodes[r-1];if(su(a,-1))s=t,i=--r;else if(a.nodeType==3)t=a,r=t.nodeValue.length;else break}}else{if(wN(t))break;{let a=t.previousSibling;for(;a&&su(a,-1);)s=t.parentNode,i=gn(a),a=a.previousSibling;if(a)t=a,r=gf(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}o?Cv(n,t,r):s&&Cv(n,s,i)}function uV(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let s=gf(t),i,o;for(;;)if(r<s){if(t.nodeType!=1)break;let a=t.childNodes[r];if(su(a,1))i=t,o=++r;else break}else{if(wN(t))break;{let a=t.nextSibling;for(;a&&su(a,1);)i=a.parentNode,o=gn(a)+1,a=a.nextSibling;if(a)t=a,r=0,s=gf(t);else{if(t=t.parentNode,t==n.dom)break;r=s=0}}}i&&Cv(n,i,o)}function wN(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function dV(n,e){for(;n&&e==n.childNodes.length&&!Fu(n);)e=gn(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function hV(n,e){for(;n&&!e&&!Fu(n);)e=gn(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function Cv(n,e,t){if(e.nodeType!=3){let i,o;(o=dV(e,t))?(e=o,t=0):(i=hV(e,t))&&(e=i,t=i.nodeValue.length)}let r=n.domSelection();if(!r)return;if(op(r)){let i=document.createRange();i.setEnd(e,t),i.setStart(e,t),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:s}=n;setTimeout(()=>{n.state==s&&Js(n)},50)}function G_(n,e){let t=n.state.doc.resolve(e);if(!(Nn||RF)&&t.parent.inlineContent){let s=n.coordsAtPos(e);if(e>t.start()){let i=n.coordsAtPos(e-1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left<s.left?"ltr":"rtl"}if(e<t.end()){let i=n.coordsAtPos(e+1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left>s.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function K_(n,e,t){let r=n.state.selection;if(r instanceof He&&!r.empty||t.indexOf("s")>-1||Nr&&t.indexOf("m")>-1)return!1;let{$from:s,$to:i}=r;if(!s.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let o=Sv(n.state,e);if(o&&o instanceof Fe)return zi(n,o)}if(!s.parent.inlineContent){let o=e<0?s:i,a=r instanceof hr?Ke.near(o,e):Ke.findFrom(o,e);return a?zi(n,a):!1}return!1}function Y_(n,e){if(!(n.state.selection instanceof He))return!0;let{$head:t,$anchor:r,empty:s}=n.state.selection;if(!t.sameParent(r))return!0;if(!s)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(i&&!i.isText){let o=n.state.tr;return e<0?o.delete(t.pos-i.nodeSize,t.pos):o.delete(t.pos,t.pos+i.nodeSize),n.dispatch(o),!0}return!1}function X_(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function fV(n){if(!Bn||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;X_(n,r,"true"),setTimeout(()=>X_(n,r,"false"),20)}return!1}function pV(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function mV(n,e){let t=e.keyCode,r=pV(e);if(t==8||Nr&&t==72&&r=="c")return Y_(n,-1)||ja(n,-1);if(t==46&&!e.shiftKey||Nr&&t==68&&r=="c")return Y_(n,1)||ja(n,1);if(t==13||t==27)return!0;if(t==37||Nr&&t==66&&r=="c"){let s=t==37?G_(n,n.state.selection.from)=="ltr"?-1:1:-1;return q_(n,s,r)||ja(n,s)}else if(t==39||Nr&&t==70&&r=="c"){let s=t==39?G_(n,n.state.selection.from)=="ltr"?1:-1:1;return q_(n,s,r)||ja(n,s)}else{if(t==38||Nr&&t==80&&r=="c")return K_(n,-1,r)||ja(n,-1);if(t==40||Nr&&t==78&&r=="c")return fV(n)||K_(n,1,r)||ja(n,1);if(r==(Nr?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function z0(n,e){n.someProp("transformCopied",y=>{e=y(e,n)});let t=[],{content:r,openStart:s,openEnd:i}=e;for(;s>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,i--;let y=r.firstChild;t.push(y.type.name,y.attrs!=y.type.defaultAttrs?y.attrs:null),r=y.content}let o=n.someProp("clipboardSerializer")||ra.fromSchema(n.state.schema),a=kN(),c=a.createElement("div");c.appendChild(o.serializeFragment(r,{document:a}));let d=c.firstChild,h,f=0;for(;d&&d.nodeType==1&&(h=TN[d.nodeName.toLowerCase()]);){for(let y=h.length-1;y>=0;y--){let v=a.createElement(h[y]);for(;c.firstChild;)v.appendChild(c.firstChild);c.appendChild(v),f++}d=c.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${s} ${i}${f?` -${f}`:""} ${JSON.stringify(t)}`);let m=n.someProp("clipboardTextSerializer",y=>y(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:c,text:m,slice:e}}function bN(n,e,t,r,s){let i=s.parent.type.spec.code,o,a;if(!t&&!e)return null;let c=e&&(r||i||!t);if(c){if(n.someProp("transformPastedText",m=>{e=m(e,i||r,n)}),i)return e?new Ee(be.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Ee.empty;let f=n.someProp("clipboardTextParser",m=>m(e,s,r,n));if(f)a=f;else{let m=s.marks(),{schema:y}=n.state,v=ra.fromSchema(y);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(w=>{let S=o.appendChild(document.createElement("p"));w&&S.appendChild(v.serializeNode(y.text(w,m)))})}}else n.someProp("transformPastedHTML",f=>{t=f(t,n)}),o=xV(t),Vu&&wV(o);let d=o&&o.querySelector("[data-pm-slice]"),h=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let f=+h[3];f>0;f--){let m=o.firstChild;for(;m&&m.nodeType!=1;)m=m.nextSibling;if(!m)break;o=m}if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||Yi.fromSchema(n.state.schema)).parseSlice(o,{preserveWhitespace:!!(c||h),context:s,ruleFromNode(m){return m.nodeName=="BR"&&!m.nextSibling&&m.parentNode&&!gV.test(m.parentNode.nodeName)?{ignore:!0}:null}})),h)a=bV(J_(a,+h[1],+h[2]),h[4]);else if(a=Ee.maxOpen(yV(a.content,s),!0),a.openStart||a.openEnd){let f=0,m=0;for(let y=a.content.firstChild;f<a.openStart&&!y.type.spec.isolating;f++,y=y.firstChild);for(let y=a.content.lastChild;m<a.openEnd&&!y.type.spec.isolating;m++,y=y.lastChild);a=J_(a,f,m)}return n.someProp("transformPasted",f=>{a=f(a,n)}),a}const gV=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function yV(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let s=e.node(t).contentMatchAt(e.index(t)),i,o=[];if(n.forEach(a=>{if(!o)return;let c=s.findWrapping(a.type),d;if(!c)return o=null;if(d=o.length&&i.length&&CN(c,i,a,o[o.length-1],0))o[o.length-1]=d;else{o.length&&(o[o.length-1]=_N(o[o.length-1],i.length));let h=SN(a,c);o.push(h),s=s.matchType(h.type),i=c}}),o)return be.from(o)}return n}function SN(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,be.from(n));return n}function CN(n,e,t,r,s){if(s<n.length&&s<e.length&&n[s]==e[s]){let i=CN(n,e,t,r.lastChild,s+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(s==n.length-1?t.type:n[s+1]))return r.copy(r.content.append(be.from(SN(t,n,s+1))))}}function _N(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,_N(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(be.empty,!0);return n.copy(t.append(r))}function _v(n,e,t,r,s,i){let o=e<0?n.firstChild:n.lastChild,a=o.content;return n.childCount>1&&(i=0),s<r-1&&(a=_v(a,e,t,r,s+1,i)),s>=t&&(a=e<0?o.contentMatchAt(0).fillBefore(a,i<=s).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(be.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,o.copy(a))}function J_(n,e,t){return e<n.openStart&&(n=new Ee(_v(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new Ee(_v(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const TN={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Z_=null;function kN(){return Z_||(Z_=document.implementation.createHTMLDocument("title"))}let cy=null;function vV(n){let e=window.trustedTypes;return e?(cy||(cy=e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),cy.createHTML(n)):n}function xV(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=kN().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),s;if((s=r&&TN[r[1].toLowerCase()])&&(n=s.map(i=>"<"+i+">").join("")+n+s.map(i=>"</"+i+">").reverse().join("")),t.innerHTML=vV(n),s)for(let i=0;i<s.length;i++)t=t.querySelector(s[i])||t;return t}function wV(n){let e=n.querySelectorAll(Nn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function bV(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:s,openStart:i,openEnd:o}=n;for(let a=r.length-2;a>=0;a-=2){let c=t.nodes[r[a]];if(!c||c.hasRequiredAttrs())break;s=be.from(c.create(r[a+1],s)),i++,o++}return new Ee(s,i,o)}const zn={},Wn={},SV={touchstart:!0,touchmove:!0};class CV{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function _V(n){for(let e in zn){let t=zn[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{kV(n,r)&&!W0(n,r)&&(n.editable||!(r.type in Wn))&&t(n,r)},SV[e]?{passive:!0}:void 0)}Bn&&n.dom.addEventListener("input",()=>null),Tv(n)}function Gi(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function TV(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Tv(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>W0(n,r))})}function W0(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function kV(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function EV(n,e){!W0(n,e)&&zn[e.type]&&(n.editable||!(e.type in Wn))&&zn[e.type](n,e)}Wn.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!NN(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(Ys&&Nn&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),fl&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",s=>s(n,Io(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||mV(n,t)?t.preventDefault():Gi(n,"key")};Wn.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Wn.keypress=(n,e)=>{let t=e;if(NN(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Nr&&t.metaKey)return;if(n.someProp("handleKeyPress",s=>s(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof He)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(t.charCode);!/[\r\n]/.test(s)&&!n.someProp("handleTextInput",i=>i(n,r.$from.pos,r.$to.pos,s))&&n.dispatch(n.state.tr.insertText(s).scrollIntoView()),t.preventDefault()}};function lp(n){return{left:n.clientX,top:n.clientY}}function NV(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function $0(n,e,t,r,s){if(r==-1)return!1;let i=n.state.doc.resolve(r);for(let o=i.depth+1;o>0;o--)if(n.someProp(e,a=>o>i.depth?a(n,t,i.nodeAfter,i.before(o),s,!0):a(n,t,i.node(o),i.before(o),s,!1)))return!0;return!1}function rl(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function AV(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&Fe.isSelectable(r)?(rl(n,new Fe(t)),!0):!1}function MV(n,e){if(e==-1)return!1;let t=n.state.selection,r,s;t instanceof Fe&&(r=t.node);let i=n.state.doc.resolve(e);for(let o=i.depth+1;o>0;o--){let a=o>i.depth?i.nodeAfter:i.node(o);if(Fe.isSelectable(a)){r&&t.$from.depth>0&&o>=t.$from.depth&&i.before(t.$from.depth+1)==t.$from.pos?s=i.before(t.$from.depth):s=i.before(o);break}}return s!=null?(rl(n,Fe.create(n.state.doc,s)),!0):!1}function OV(n,e,t,r,s){return $0(n,"handleClickOn",e,t,r)||n.someProp("handleClick",i=>i(n,e,r))||(s?MV(n,t):AV(n,t))}function PV(n,e,t,r){return $0(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",s=>s(n,e,r))}function DV(n,e,t,r){return $0(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",s=>s(n,e,r))||RV(n,t,r)}function RV(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(rl(n,He.create(r,0,r.content.size)),!0):!1;let s=r.resolve(e);for(let i=s.depth+1;i>0;i--){let o=i>s.depth?s.nodeAfter:s.node(i),a=s.before(i);if(o.inlineContent)rl(n,He.create(r,a+1,a+1+o.content.size));else if(Fe.isSelectable(o))rl(n,Fe.create(r,a));else continue;return!0}}function H0(n){return yf(n)}const EN=Nr?"metaKey":"ctrlKey";zn.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=H0(n),s=Date.now(),i="singleClick";s-n.input.lastClick.time<500&&NV(t,n.input.lastClick)&&!t[EN]&&(n.input.lastClick.type=="singleClick"?i="doubleClick":n.input.lastClick.type=="doubleClick"&&(i="tripleClick")),n.input.lastClick={time:s,x:t.clientX,y:t.clientY,type:i};let o=n.posAtCoords(lp(t));o&&(i=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new IV(n,o,t,!!r)):(i=="doubleClick"?PV:DV)(n,o.pos,o.inside,t)?t.preventDefault():Gi(n,"pointer"))};class IV{constructor(e,t,r,s){this.view=e,this.pos=t,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[EN],this.allowDefault=r.shiftKey;let i,o;if(t.inside>-1)i=e.state.doc.nodeAt(t.inside),o=t.inside;else{let h=e.state.doc.resolve(t.pos);i=h.parent,o=h.depth?h.before():0}const a=s?null:r.target,c=a?e.docView.nearestDesc(a,!0):null;this.target=c&&c.dom.nodeType==1?c.dom:null;let{selection:d}=e.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||d instanceof Fe&&d.from<=o&&d.to>o)&&(this.mightDrag={node:i,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Zr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Gi(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Js(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(lp(e))),this.updateAllowDefault(e),this.allowDefault||!t?Gi(this.view,"pointer"):OV(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Bn&&this.mightDrag&&!this.mightDrag.node.isAtom||Nn&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(rl(this.view,Ke.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Gi(this.view,"pointer")}move(e){this.updateAllowDefault(e),Gi(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}zn.touchstart=n=>{n.input.lastTouch=Date.now(),H0(n),Gi(n,"pointer")};zn.touchmove=n=>{n.input.lastTouch=Date.now(),Gi(n,"pointer")};zn.contextmenu=n=>H0(n);function NN(n,e){return n.composing?!0:Bn&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const jV=Ys?5e3:-1;Wn.compositionstart=Wn.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof He&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),yf(n,!0),n.markCursor=null;else if(yf(n,!e.selection.empty),Zr&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let s=r.focusNode,i=r.focusOffset;s&&s.nodeType==1&&i!=0;){let o=i<0?s.lastChild:s.childNodes[i-1];if(!o)break;if(o.nodeType==3){let a=n.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else s=o,i=-1}}n.input.composing=!0}AN(n,jV)};Wn.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,AN(n,20))};function AN(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>yf(n),e))}function MN(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=FV());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function LV(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=AF(e.focusNode,e.focusOffset),r=MF(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let s=r.pmViewDesc,i=n.domObserver.lastChangedTextNode;if(t==i||r==i)return i;if(!s||!s.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let o=t.pmViewDesc;if(!(!o||!o.isText(t.nodeValue)))return r}}return t||r}function FV(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function yf(n,e=!1){if(!(Ys&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),MN(n),e||n.docView&&n.docView.dirty){let t=V0(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!n.state.selection.empty?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function VV(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const pu=er&&Xi<15||fl&&IF<604;zn.copy=Wn.cut=(n,e)=>{let t=e,r=n.state.selection,s=t.type=="cut";if(r.empty)return;let i=pu?null:t.clipboardData,o=r.content(),{dom:a,text:c}=z0(n,o);i?(t.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",c)):VV(n,a),s&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function BV(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function zV(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?mu(n,r.value,null,s,e):mu(n,r.textContent,r.innerHTML,s,e)},50)}function mu(n,e,t,r,s){let i=bN(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",c=>c(n,s,i||Ee.empty)))return!0;if(!i)return!1;let o=BV(i),a=o?n.state.tr.replaceSelectionWith(o,r):n.state.tr.replaceSelection(i);return n.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function ON(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Wn.paste=(n,e)=>{let t=e;if(n.composing&&!Ys)return;let r=pu?null:t.clipboardData,s=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&mu(n,ON(r),r.getData("text/html"),s,t)?t.preventDefault():zV(n,t)};class PN{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const DN=Nr?"altKey":"ctrlKey";zn.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let s=n.state.selection,i=s.empty?null:n.posAtCoords(lp(t)),o;if(!(i&&i.pos>=s.from&&i.pos<=(s instanceof Fe?s.to-1:s.to))){if(r&&r.mightDrag)o=Fe.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let f=n.docView.nearestDesc(t.target,!0);f&&f.node.type.spec.draggable&&f!=n.docView&&(o=Fe.create(n.state.doc,f.posBefore))}}let a=(o||n.state.selection).content(),{dom:c,text:d,slice:h}=z0(n,a);(!t.dataTransfer.files.length||!Nn||iN>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(pu?"Text":"text/html",c.innerHTML),t.dataTransfer.effectAllowed="copyMove",pu||t.dataTransfer.setData("text/plain",d),n.dragging=new PN(h,!t[DN],o)};zn.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Wn.dragover=Wn.dragenter=(n,e)=>e.preventDefault();Wn.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let s=n.posAtCoords(lp(t));if(!s)return;let i=n.state.doc.resolve(s.pos),o=r&&r.slice;o?n.someProp("transformPasted",v=>{o=v(o,n)}):o=bN(n,ON(t.dataTransfer),pu?null:t.dataTransfer.getData("text/html"),!1,i);let a=!!(r&&!t[DN]);if(n.someProp("handleDrop",v=>v(n,t,o||Ee.empty,a))){t.preventDefault();return}if(!o)return;t.preventDefault();let c=o?JE(n.state.doc,i.pos,o):i.pos;c==null&&(c=i.pos);let d=n.state.tr;if(a){let{node:v}=r;v?v.replace(d):d.deleteSelection()}let h=d.mapping.map(c),f=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,m=d.doc;if(f?d.replaceRangeWith(h,h,o.content.firstChild):d.replaceRange(h,h,o),d.doc.eq(m))return;let y=d.doc.resolve(h);if(f&&Fe.isSelectable(o.content.firstChild)&&y.nodeAfter&&y.nodeAfter.sameMarkup(o.content.firstChild))d.setSelection(new Fe(y));else{let v=d.mapping.map(c);d.mapping.maps[d.mapping.maps.length-1].forEach((w,S,C,T)=>v=T),d.setSelection(B0(n,y,d.doc.resolve(v)))}n.focus(),n.dispatch(d.setMeta("uiEvent","drop"))};zn.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Js(n)},20))};zn.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};zn.beforeinput=(n,e)=>{if(Nn&&Ys&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",i=>i(n,Io(8,"Backspace")))))return;let{$cursor:s}=n.state.selection;s&&s.pos>0&&n.dispatch(n.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let n in Wn)zn[n]=Wn[n];function gu(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class vf{constructor(e,t){this.toDOM=e,this.spec=t||$o,this.side=this.spec.side||0}map(e,t,r,s){let{pos:i,deleted:o}=e.mapResult(t.from+s,this.side<0?-1:1);return o?null:new dr(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof vf&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&gu(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Zi{constructor(e,t){this.attrs=e,this.spec=t||$o}map(e,t,r,s){let i=e.map(t.from+s,this.spec.inclusiveStart?-1:1)-r,o=e.map(t.to+s,this.spec.inclusiveEnd?1:-1)-r;return i>=o?null:new dr(i,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Zi&&gu(this.attrs,e.attrs)&&gu(this.spec,e.spec)}static is(e){return e.type instanceof Zi}destroy(){}}class U0{constructor(e,t){this.attrs=e,this.spec=t||$o}map(e,t,r,s){let i=e.mapResult(t.from+s,1);if(i.deleted)return null;let o=e.mapResult(t.to+s,-1);return o.deleted||o.pos<=i.pos?null:new dr(i.pos-r,o.pos-r,this)}valid(e,t){let{index:r,offset:s}=e.content.findIndex(t.from),i;return s==t.from&&!(i=e.child(r)).isText&&s+i.nodeSize==t.to}eq(e){return this==e||e instanceof U0&&gu(this.attrs,e.attrs)&&gu(this.spec,e.spec)}destroy(){}}class dr{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new dr(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new dr(e,e,new vf(t,r))}static inline(e,t,r,s){return new dr(e,t,new Zi(r,s))}static node(e,t,r,s){return new dr(e,t,new U0(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof Zi}get widget(){return this.type instanceof vf}}const za=[],$o={};class Ht{constructor(e,t){this.local=e.length?e:za,this.children=t.length?t:za}static create(e,t){return t.length?xf(t,e,0,$o):kn}find(e,t,r){let s=[];return this.findInner(e??0,t??1e9,s,0,r),s}findInner(e,t,r,s,i){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=t&&a.to>=e&&(!i||i(a.spec))&&r.push(a.copy(a.from+s,a.to+s))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,t-a,r,s+a,i)}}map(e,t,r){return this==kn||e.maps.length==0?this:this.mapInner(e,t,0,0,r||$o)}mapInner(e,t,r,s,i){let o;for(let a=0;a<this.local.length;a++){let c=this.local[a].map(e,r,s);c&&c.type.valid(t,c)?(o||(o=[])).push(c):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?WV(this.children,o||[],e,t,r,s,i):o?new Ht(o.sort(Ho),za):kn}add(e,t){return t.length?this==kn?Ht.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let s,i=0;e.forEach((a,c)=>{let d=c+r,h;if(h=IN(t,a,d)){for(s||(s=this.children.slice());i<s.length&&s[i]<c;)i+=3;s[i]==c?s[i+2]=s[i+2].addInner(a,h,d+1):s.splice(i,0,c,c+a.nodeSize,xf(h,a,d+1,$o)),i+=3}});let o=RN(i?jN(t):t,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Ht(o.length?this.local.concat(o).sort(Ho):this.local,s||this.children)}remove(e){return e.length==0||this==kn?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,s=this.local;for(let i=0;i<r.length;i+=3){let o,a=r[i]+t,c=r[i+1]+t;for(let h=0,f;h<e.length;h++)(f=e[h])&&f.from>a&&f.to<c&&(e[h]=null,(o||(o=[])).push(f));if(!o)continue;r==this.children&&(r=this.children.slice());let d=r[i+2].removeInner(o,a+1);d!=kn?r[i+2]=d:(r.splice(i,3),i-=3)}if(s.length){for(let i=0,o;i<e.length;i++)if(o=e[i])for(let a=0;a<s.length;a++)s[a].eq(o,t)&&(s==this.local&&(s=this.local.slice()),s.splice(a--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new Ht(s,r):kn}forChild(e,t){if(this==kn)return this;if(t.isLeaf)return Ht.empty;let r,s;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let i=e+1,o=i+t.content.size;for(let a=0;a<this.local.length;a++){let c=this.local[a];if(c.from<o&&c.to>i&&c.type instanceof Zi){let d=Math.max(i,c.from)-i,h=Math.min(o,c.to)-i;d<h&&(s||(s=[])).push(c.copy(d,h))}}if(s){let a=new Ht(s.sort(Ho),za);return r?new Hi([a,r]):a}return r||kn}eq(e){if(this==e)return!0;if(!(e instanceof Ht)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return q0(this.localsInner(e))}localsInner(e){if(this==kn)return za;if(e.inlineContent||!this.local.some(Zi.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Zi||t.push(this.local[r]);return t}forEachSet(e){e(this)}}Ht.empty=new Ht([],[]);Ht.removeOverlap=q0;const kn=Ht.empty;class Hi{constructor(e){this.members=e}map(e,t){const r=this.members.map(s=>s.map(e,t,$o));return Hi.from(r)}forChild(e,t){if(t.isLeaf)return Ht.empty;let r=[];for(let s=0;s<this.members.length;s++){let i=this.members[s].forChild(e,t);i!=kn&&(i instanceof Hi?r=r.concat(i.members):r.push(i))}return Hi.from(r)}eq(e){if(!(e instanceof Hi)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let s=0;s<this.members.length;s++){let i=this.members[s].localsInner(e);if(i.length)if(!t)t=i;else{r&&(t=t.slice(),r=!1);for(let o=0;o<i.length;o++)t.push(i[o])}}return t?q0(r?t:t.sort(Ho)):za}static from(e){switch(e.length){case 0:return kn;case 1:return e[0];default:return new Hi(e.every(t=>t instanceof Ht)?e:e.reduce((t,r)=>t.concat(r instanceof Ht?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function WV(n,e,t,r,s,i,o){let a=n.slice();for(let d=0,h=i;d<t.maps.length;d++){let f=0;t.maps[d].forEach((m,y,v,w)=>{let S=w-v-(y-m);for(let C=0;C<a.length;C+=3){let T=a[C+1];if(T<0||m>T+h-f)continue;let k=a[C]+h-f;y>=k?a[C+1]=m<=k?-2:-1:m>=h&&S&&(a[C]+=S,a[C+1]+=S)}f+=S}),h=t.maps[d].map(h,-1)}let c=!1;for(let d=0;d<a.length;d+=3)if(a[d+1]<0){if(a[d+1]==-2){c=!0,a[d+1]=-1;continue}let h=t.map(n[d]+i),f=h-s;if(f<0||f>=r.content.size){c=!0;continue}let m=t.map(n[d+1]+i,-1),y=m-s,{index:v,offset:w}=r.content.findIndex(f),S=r.maybeChild(v);if(S&&w==f&&w+S.nodeSize==y){let C=a[d+2].mapInner(t,S,h+1,n[d]+i+1,o);C!=kn?(a[d]=f,a[d+1]=y,a[d+2]=C):(a[d+1]=-2,c=!0)}else c=!0}if(c){let d=$V(a,n,e,t,s,i,o),h=xf(d,r,0,o);e=h.local;for(let f=0;f<a.length;f+=3)a[f+1]<0&&(a.splice(f,3),f-=3);for(let f=0,m=0;f<h.children.length;f+=3){let y=h.children[f];for(;m<a.length&&a[m]<y;)m+=3;a.splice(m,0,h.children[f],h.children[f+1],h.children[f+2])}}return new Ht(e.sort(Ho),a)}function RN(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let s=n[r];t.push(new dr(s.from+e,s.to+e,s.type))}return t}function $V(n,e,t,r,s,i,o){function a(c,d){for(let h=0;h<c.local.length;h++){let f=c.local[h].map(r,s,d);f?t.push(f):o.onRemove&&o.onRemove(c.local[h].spec)}for(let h=0;h<c.children.length;h+=3)a(c.children[h+2],c.children[h]+d+1)}for(let c=0;c<n.length;c+=3)n[c+1]==-1&&a(n[c+2],e[c]+i+1);return t}function IN(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,s=null;for(let i=0,o;i<n.length;i++)(o=n[i])&&o.from>t&&o.to<r&&((s||(s=[])).push(o),n[i]=null);return s}function jN(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function xf(n,e,t,r){let s=[],i=!1;e.forEach((a,c)=>{let d=IN(n,a,c+t);if(d){i=!0;let h=xf(d,a,t+c+1,r);h!=kn&&s.push(c,c+a.nodeSize,h)}});let o=RN(i?jN(n):n,-t).sort(Ho);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||s.length?new Ht(o,s):kn}function Ho(n,e){return n.from-e.from||n.to-e.to}function q0(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let s=t+1;s<e.length;s++){let i=e[s];if(i.from==r.from){i.to!=r.to&&(e==n&&(e=n.slice()),e[s]=i.copy(i.from,r.to),Q_(e,s+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,i.from),Q_(e,s,r.copy(i.from,r.to)));break}}}return e}function Q_(n,e,t){for(;e<n.length&&Ho(t,n[e])>0;)e++;n.splice(e,0,t)}function uy(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=kn&&e.push(r)}),n.cursorWrapper&&e.push(Ht.create(n.state.doc,[n.cursorWrapper.deco])),Hi.from(e)}const HV={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},UV=er&&Xi<=11;class qV{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class GV{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new qV,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);er&&Xi<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),UV&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,HV)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(U_(this.view)){if(this.suppressingSelectionUpdates)return Js(this.view);if(er&&Xi<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Yo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let i=e.focusNode;i;i=fu(i))t.add(i);for(let i=e.anchorNode;i;i=fu(i))if(t.has(i)){r=i;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&U_(e)&&!this.ignoreSelectionChange(r),i=-1,o=-1,a=!1,c=[];if(e.editable)for(let h=0;h<t.length;h++){let f=this.registerMutation(t[h],c);f&&(i=i<0?f.from:Math.min(f.from,i),o=o<0?f.to:Math.max(f.to,o),f.typeOver&&(a=!0))}if(Zr&&c.length){let h=c.filter(f=>f.nodeName=="BR");if(h.length==2){let[f,m]=h;f.parentNode&&f.parentNode.parentNode==m.parentNode?m.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let m of h){let y=m.parentNode;y&&y.nodeName=="LI"&&(!f||XV(e,f)!=y)&&m.remove()}}}let d=null;i<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&op(r)&&(d=V0(e))&&d.eq(Ke.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Js(e),this.currentSelection.set(r)):(i>-1||s)&&(i>-1&&(e.docView.markDirty(i,o),KV(e)),this.handleDOMChange(i,o,a,c),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Js(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let h=0;h<e.addedNodes.length;h++){let f=e.addedNodes[h];t.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let s=e.previousSibling,i=e.nextSibling;if(er&&Xi<=11&&e.addedNodes.length)for(let h=0;h<e.addedNodes.length;h++){let{previousSibling:f,nextSibling:m}=e.addedNodes[h];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f),(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(i=m)}let o=s&&s.parentNode==e.target?gn(s)+1:0,a=r.localPosFromDOM(e.target,o,-1),c=i&&i.parentNode==e.target?gn(i):e.target.childNodes.length,d=r.localPosFromDOM(e.target,c,1);return{from:a,to:d}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let e1=new WeakMap,t1=!1;function KV(n){if(!e1.has(n)&&(e1.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Zr,t1)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),t1=!0}}function n1(n,e){let t=e.startContainer,r=e.startOffset,s=e.endContainer,i=e.endOffset,o=n.domAtPos(n.state.selection.anchor);return Yo(o.node,o.offset,s,i)&&([t,r,s,i]=[s,i,t,r]),{anchorNode:t,anchorOffset:r,focusNode:s,focusOffset:i}}function YV(n,e){if(e.getComposedRanges){let s=e.getComposedRanges(n.root)[0];if(s)return n1(n,s)}let t;function r(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?n1(n,t):null}function XV(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function JV(n,e,t){let{node:r,fromOffset:s,toOffset:i,from:o,to:a}=n.docView.parseRange(e,t),c=n.domSelectionRange(),d,h=c.anchorNode;if(h&&n.dom.contains(h.nodeType==1?h:h.parentNode)&&(d=[{node:h,offset:c.anchorOffset}],op(c)||d.push({node:c.focusNode,offset:c.focusOffset})),Nn&&n.input.lastKeyCode===8)for(let S=i;S>s;S--){let C=r.childNodes[S-1],T=C.pmViewDesc;if(C.nodeName=="BR"&&!T){i=S;break}if(!T||T.size)break}let f=n.state.doc,m=n.someProp("domParser")||Yi.fromSchema(n.state.schema),y=f.resolve(o),v=null,w=m.parse(r,{topNode:y.parent,topMatch:y.parent.contentMatchAt(y.index()),topOpen:!0,from:s,to:i,preserveWhitespace:y.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:ZV,context:y});if(d&&d[0].pos!=null){let S=d[0].pos,C=d[1]&&d[1].pos;C==null&&(C=S),v={anchor:S+o,head:C+o}}return{doc:w,sel:v,from:o,to:a}}function ZV(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Bn&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Bn&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const QV=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function eB(n,e,t,r,s){let i=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let L=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,A=V0(n,L);if(A&&!n.state.selection.eq(A)){if(Nn&&Ys&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",F=>F(n,Io(13,"Enter"))))return;let V=n.state.tr.setSelection(A);L=="pointer"?V.setMeta("pointer",!0):L=="key"&&V.scrollIntoView(),i&&V.setMeta("composition",i),n.dispatch(V)}return}let o=n.state.doc.resolve(e),a=o.sharedDepth(t);e=o.before(a+1),t=n.state.doc.resolve(t).after(a+1);let c=n.state.selection,d=JV(n,e,t),h=n.state.doc,f=h.slice(d.from,d.to),m,y;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(m=n.state.selection.to,y="end"):(m=n.state.selection.from,y="start"),n.input.lastKeyCode=null;let v=rB(f.content,d.doc.content,d.from,m,y);if(v&&n.input.domChangeCount++,(fl&&n.input.lastIOSEnter>Date.now()-225||Ys)&&s.some(L=>L.nodeType==1&&!QV.test(L.nodeName))&&(!v||v.endA>=v.endB)&&n.someProp("handleKeyDown",L=>L(n,Io(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!v)if(r&&c instanceof He&&!c.empty&&c.$head.sameParent(c.$anchor)&&!n.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))v={start:c.from,endA:c.to,endB:c.to};else{if(d.sel){let L=r1(n,n.state.doc,d.sel);if(L&&!L.eq(n.state.selection)){let A=n.state.tr.setSelection(L);i&&A.setMeta("composition",i),n.dispatch(A)}}return}n.state.selection.from<n.state.selection.to&&v.start==v.endB&&n.state.selection instanceof He&&(v.start>n.state.selection.from&&v.start<=n.state.selection.from+2&&n.state.selection.from>=d.from?v.start=n.state.selection.from:v.endA<n.state.selection.to&&v.endA>=n.state.selection.to-2&&n.state.selection.to<=d.to&&(v.endB+=n.state.selection.to-v.endA,v.endA=n.state.selection.to)),er&&Xi<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>d.from&&d.doc.textBetween(v.start-d.from-1,v.start-d.from+1)==" "&&(v.start--,v.endA--,v.endB--);let w=d.doc.resolveNoCache(v.start-d.from),S=d.doc.resolveNoCache(v.endB-d.from),C=h.resolve(v.start),T=w.sameParent(S)&&w.parent.inlineContent&&C.end()>=v.endA,k;if((fl&&n.input.lastIOSEnter>Date.now()-225&&(!T||s.some(L=>L.nodeName=="DIV"||L.nodeName=="P"))||!T&&w.pos<d.doc.content.size&&!w.sameParent(S)&&(k=Ke.findFrom(d.doc.resolve(w.pos+1),1,!0))&&k.head==S.pos)&&n.someProp("handleKeyDown",L=>L(n,Io(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>v.start&&nB(h,v.start,v.endA,w,S)&&n.someProp("handleKeyDown",L=>L(n,Io(8,"Backspace")))){Ys&&Nn&&n.domObserver.suppressSelectionUpdates();return}Nn&&v.endB==v.start&&(n.input.lastChromeDelete=Date.now()),Ys&&!T&&w.start()!=S.start()&&S.parentOffset==0&&w.depth==S.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==v.endA&&(v.endB-=2,S=d.doc.resolveNoCache(v.endB-d.from),setTimeout(()=>{n.someProp("handleKeyDown",function(L){return L(n,Io(13,"Enter"))})},20));let M=v.start,N=v.endA,O,D,I;if(T){if(w.pos==S.pos)er&&Xi<=11&&w.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Js(n),20)),O=n.state.tr.delete(M,N),D=h.resolve(v.start).marksAcross(h.resolve(v.endA));else if(v.endA==v.endB&&(I=tB(w.parent.content.cut(w.parentOffset,S.parentOffset),C.parent.content.cut(C.parentOffset,v.endA-C.start()))))O=n.state.tr,I.type=="add"?O.addMark(M,N,I.mark):O.removeMark(M,N,I.mark);else if(w.parent.child(w.index()).isText&&w.index()==S.index()-(S.textOffset?0:1)){let L=w.parent.textBetween(w.parentOffset,S.parentOffset);if(n.someProp("handleTextInput",A=>A(n,M,N,L)))return;O=n.state.tr.insertText(L,M,N)}}if(O||(O=n.state.tr.replace(M,N,d.doc.slice(v.start-d.from,v.endB-d.from))),d.sel){let L=r1(n,O.doc,d.sel);L&&!(Nn&&n.composing&&L.empty&&(v.start!=v.endB||n.input.lastChromeDelete<Date.now()-100)&&(L.head==M||L.head==O.mapping.map(N)-1)||er&&L.empty&&L.head==M)&&O.setSelection(L)}D&&O.ensureMarks(D),i&&O.setMeta("composition",i),n.dispatch(O.scrollIntoView())}function r1(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:B0(n,e.resolve(t.anchor),e.resolve(t.head))}function tB(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,s=t,i=r,o,a,c;for(let h=0;h<r.length;h++)s=r[h].removeFromSet(s);for(let h=0;h<t.length;h++)i=t[h].removeFromSet(i);if(s.length==1&&i.length==0)a=s[0],o="add",c=h=>h.mark(a.addToSet(h.marks));else if(s.length==0&&i.length==1)a=i[0],o="remove",c=h=>h.mark(a.removeFromSet(h.marks));else return null;let d=[];for(let h=0;h<e.childCount;h++)d.push(c(e.child(h)));if(be.from(d).eq(n))return{mark:a,type:o}}function nB(n,e,t,r,s){if(t-e<=s.pos-r.pos||dy(r,!0,!1)<s.pos)return!1;let i=n.resolve(e);if(!r.parent.isTextblock){let a=i.nodeAfter;return a!=null&&t==e+a.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let o=n.resolve(dy(i,!0,!0));return!o.parent.isTextblock||o.pos>t||dy(o,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function dy(n,e,t){let r=n.depth,s=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,s++,e=!1;if(t){let i=n.node(r).maybeChild(n.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,s++}return s}function rB(n,e,t,r,s){let i=n.findDiffStart(e,t);if(i==null)return null;let{a:o,b:a}=n.findDiffEnd(e,t+n.size,t+e.size);if(s=="end"){let c=Math.max(0,i-Math.min(o,a));r-=o+c-i}if(o<i&&n.size<e.size){let c=r<=i&&r>=o?i-r:0;i-=c,i&&i<e.size&&s1(e.textBetween(i-1,i+1))&&(i+=c?1:-1),a=i+(a-o),o=i}else if(a<i){let c=r<=i&&r>=a?i-r:0;i-=c,i&&i<n.size&&s1(n.textBetween(i-1,i+1))&&(i+=c?1:-1),o=i+(o-a),a=i}return{start:i,endA:o,endB:a}}function s1(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class sB{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new CV,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(c1),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=a1(this),o1(this),this.nodeViews=l1(this),this.docView=V_(this.state.doc,i1(this),uy(this),this.dom,this),this.domObserver=new GV(this,(r,s,i,o)=>eB(this,r,s,i,o)),this.domObserver.start(),_V(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Tv(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(c1),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let s=this.state,i=!1,o=!1;e.storedMarks&&this.composing&&(MN(this),o=!0),this.state=e;let a=s.plugins!=e.plugins||this._props.plugins!=t.plugins;if(a||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let y=l1(this);oB(y,this.nodeViews)&&(this.nodeViews=y,i=!0)}(a||t.handleDOMEvents!=this._props.handleDOMEvents)&&Tv(this),this.editable=a1(this),o1(this);let c=uy(this),d=i1(this),h=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",f=i||!this.docView.matchesNode(e.doc,d,c);(f||!e.selection.eq(s.selection))&&(o=!0);let m=h=="preserve"&&o&&this.dom.style.overflowAnchor==null&&FF(this);if(o){this.domObserver.stop();let y=f&&(er||Nn)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&iB(s.selection,e.selection);if(f){let v=Nn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=LV(this)),(i||!this.docView.update(e.doc,d,c,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=V_(e.doc,d,c,this.dom,this)),v&&!this.trackWrites&&(y=!0)}y||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&lV(this))?Js(this,y):(vN(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),h=="reset"?this.dom.scrollTop=0:h=="to selection"?this.scrollToSelection():m&&VF(m)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof Fe){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&D_(this,t.getBoundingClientRect(),e)}else D_(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let i=r.from+(this.state.doc.content.size-t.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(s=i)}this.dragging=new PN(e.slice,e.move,s<0?void 0:Fe.create(this.state.doc,s))}someProp(e,t){let r=this._props&&this._props[e],s;if(r!=null&&(s=t?t(r):r))return s;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(s=t?t(a):a))return s}let i=this.state.plugins;if(i)for(let o=0;o<i.length;o++){let a=i[o].props[e];if(a!=null&&(s=t?t(a):a))return s}}hasFocus(){if(er){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&BF(this.dom),Js(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return UF(this,e)}coordsAtPos(e,t=1){return uN(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let s=this.docView.posFromDOM(e,t,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,t){return XF(this,t||this.state,e)}pasteHTML(e,t){return mu(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return mu(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return z0(this,e)}destroy(){this.docView&&(TV(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],uy(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,EF())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return EV(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?Bn&&this.root.nodeType===11&&PF(this.dom.ownerDocument)==this.dom&&YV(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function i1(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[dr.node(0,n.state.doc.content.size,e)]}function o1(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:dr.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function a1(n){return!n.someProp("editable",e=>e(n.state)===!1)}function iB(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function l1(n){let e=Object.create(null);function t(r){for(let s in r)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=r[s])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function oB(n,e){let t=0,r=0;for(let s in n){if(n[s]!=e[s])return!0;t++}for(let s in e)r++;return t!=r}function c1(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var to={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},wf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},aB=typeof navigator<"u"&&/Mac/.test(navigator.platform),lB=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var yn=0;yn<10;yn++)to[48+yn]=to[96+yn]=String(yn);for(var yn=1;yn<=24;yn++)to[yn+111]="F"+yn;for(var yn=65;yn<=90;yn++)to[yn]=String.fromCharCode(yn+32),wf[yn]=String.fromCharCode(yn);for(var hy in to)wf.hasOwnProperty(hy)||(wf[hy]=to[hy]);function cB(n){var e=aB&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||lB&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?wf:to)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const uB=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function dB(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,s,i,o;for(let a=0;a<e.length-1;a++){let c=e[a];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))i=!0;else if(/^mod$/i.test(c))uB?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(t="Alt-"+t),s&&(t="Ctrl-"+t),o&&(t="Meta-"+t),i&&(t="Shift-"+t),t}function hB(n){let e=Object.create(null);for(let t in n)e[dB(t)]=n[t];return e}function fy(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function fB(n){return new $n({props:{handleKeyDown:LN(n)}})}function LN(n){let e=hB(n);return function(t,r){let s=cB(r),i,o=e[fy(s,r)];if(o&&o(t.state,t.dispatch,t))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let a=e[fy(s,r,!1)];if(a&&a(t.state,t.dispatch,t))return!0}if((r.shiftKey||r.altKey||r.metaKey||s.charCodeAt(0)>127)&&(i=to[r.keyCode])&&i!=s){let a=e[fy(i,r)];if(a&&a(t.state,t.dispatch,t))return!0}}return!1}}const G0=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function FN(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const VN=(n,e,t)=>{let r=FN(n,t);if(!r)return!1;let s=K0(r);if(!s){let o=r.blockRange(),a=o&&jl(o);return a==null?!1:(e&&e(n.tr.lift(o,a).scrollIntoView()),!0)}let i=s.nodeBefore;if(KN(n,s,e,-1))return!0;if(r.parent.content.size==0&&(pl(i,"end")||Fe.isSelectable(i)))for(let o=r.depth;;o--){let a=sp(n.doc,r.before(o),r.after(o),Ee.empty);if(a&&a.slice.size<a.to-a.from){if(e){let c=n.tr.step(a);c.setSelection(pl(i,"end")?Ke.findFrom(c.doc.resolve(c.mapping.map(s.pos,-1)),-1):Fe.create(c.doc,s.pos-i.nodeSize)),e(c.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return i.isAtom&&s.depth==r.depth-1?(e&&e(n.tr.delete(s.pos-i.nodeSize,s.pos).scrollIntoView()),!0):!1},pB=(n,e,t)=>{let r=FN(n,t);if(!r)return!1;let s=K0(r);return s?BN(n,s,e):!1},mB=(n,e,t)=>{let r=WN(n,t);if(!r)return!1;let s=Y0(r);return s?BN(n,s,e):!1};function BN(n,e,t){let r=e.nodeBefore,s=r,i=e.pos-1;for(;!s.isTextblock;i--){if(s.type.spec.isolating)return!1;let h=s.lastChild;if(!h)return!1;s=h}let o=e.nodeAfter,a=o,c=e.pos+1;for(;!a.isTextblock;c++){if(a.type.spec.isolating)return!1;let h=a.firstChild;if(!h)return!1;a=h}let d=sp(n.doc,i,c,Ee.empty);if(!d||d.from!=i||d instanceof rn&&d.slice.size>=c-i)return!1;if(t){let h=n.tr.step(d);h.setSelection(He.create(h.doc,i)),t(h.scrollIntoView())}return!0}function pl(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const zN=(n,e,t)=>{let{$head:r,empty:s}=n.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;i=K0(r)}let o=i&&i.nodeBefore;return!o||!Fe.isSelectable(o)?!1:(e&&e(n.tr.setSelection(Fe.create(n.doc,i.pos-o.nodeSize)).scrollIntoView()),!0)};function K0(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function WN(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const $N=(n,e,t)=>{let r=WN(n,t);if(!r)return!1;let s=Y0(r);if(!s)return!1;let i=s.nodeAfter;if(KN(n,s,e,1))return!0;if(r.parent.content.size==0&&(pl(i,"start")||Fe.isSelectable(i))){let o=sp(n.doc,r.before(),r.after(),Ee.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=n.tr.step(o);a.setSelection(pl(i,"start")?Ke.findFrom(a.doc.resolve(a.mapping.map(s.pos)),1):Fe.create(a.doc,a.mapping.map(s.pos))),e(a.scrollIntoView())}return!0}}return i.isAtom&&s.depth==r.depth-1?(e&&e(n.tr.delete(s.pos,s.pos+i.nodeSize).scrollIntoView()),!0):!1},HN=(n,e,t)=>{let{$head:r,empty:s}=n.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;i=Y0(r)}let o=i&&i.nodeAfter;return!o||!Fe.isSelectable(o)?!1:(e&&e(n.tr.setSelection(Fe.create(n.doc,i.pos)).scrollIntoView()),!0)};function Y0(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const gB=(n,e)=>{let t=n.selection,r=t instanceof Fe,s;if(r){if(t.node.isTextblock||!co(n.doc,t.from))return!1;s=t.from}else if(s=rp(n.doc,t.from,-1),s==null)return!1;if(e){let i=n.tr.join(s);r&&i.setSelection(Fe.create(i.doc,s-n.doc.resolve(s).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},yB=(n,e)=>{let t=n.selection,r;if(t instanceof Fe){if(t.node.isTextblock||!co(n.doc,t.to))return!1;r=t.to}else if(r=rp(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},vB=(n,e)=>{let{$from:t,$to:r}=n.selection,s=t.blockRange(r),i=s&&jl(s);return i==null?!1:(e&&e(n.tr.lift(s,i).scrollIntoView()),!0)},UN=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function X0(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const xB=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let s=t.node(-1),i=t.indexAfter(-1),o=X0(s.contentMatchAt(i));if(!o||!s.canReplaceWith(i,i,o))return!1;if(e){let a=t.after(),c=n.tr.replaceWith(a,a,o.createAndFill());c.setSelection(Ke.near(c.doc.resolve(a),1)),e(c.scrollIntoView())}return!0},qN=(n,e)=>{let t=n.selection,{$from:r,$to:s}=t;if(t instanceof hr||r.parent.inlineContent||s.parent.inlineContent)return!1;let i=X0(s.parent.contentMatchAt(s.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let o=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,a=n.tr.insert(o,i.createAndFill());a.setSelection(He.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},GN=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let i=t.before();if(Xs(n.doc,i))return e&&e(n.tr.split(i).scrollIntoView()),!0}let r=t.blockRange(),s=r&&jl(r);return s==null?!1:(e&&e(n.tr.lift(r,s).scrollIntoView()),!0)};function wB(n){return(e,t)=>{let{$from:r,$to:s}=e.selection;if(e.selection instanceof Fe&&e.selection.node.isBlock)return!r.parentOffset||!Xs(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let i=[],o,a,c=!1,d=!1;for(let y=r.depth;;y--)if(r.node(y).isBlock){c=r.end(y)==r.pos+(r.depth-y),d=r.start(y)==r.pos-(r.depth-y),a=X0(r.node(y-1).contentMatchAt(r.indexAfter(y-1))),i.unshift(c&&a?{type:a}:null),o=y;break}else{if(y==1)return!1;i.unshift(null)}let h=e.tr;(e.selection instanceof He||e.selection instanceof hr)&&h.deleteSelection();let f=h.mapping.map(r.pos),m=Xs(h.doc,f,i.length,i);if(m||(i[0]=a?{type:a}:null,m=Xs(h.doc,f,i.length,i)),h.split(f,i.length,i),!c&&d&&r.node(o).type!=a){let y=h.mapping.map(r.before(o)),v=h.doc.resolve(y);a&&r.node(o-1).canReplaceWith(v.index(),v.index()+1,a)&&h.setNodeMarkup(h.mapping.map(r.before(o)),a)}return t&&t(h.scrollIntoView()),!0}}const bB=wB(),SB=(n,e)=>{let{$from:t,to:r}=n.selection,s,i=t.sharedDepth(r);return i==0?!1:(s=t.before(i),e&&e(n.tr.setSelection(Fe.create(n.doc,s))),!0)};function CB(n,e,t){let r=e.nodeBefore,s=e.nodeAfter,i=e.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&e.parent.canReplace(i-1,i)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(s.isTextblock||co(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function KN(n,e,t,r){let s=e.nodeBefore,i=e.nodeAfter,o,a,c=s.type.spec.isolating||i.type.spec.isolating;if(!c&&CB(n,e,t))return!0;let d=!c&&e.parent.canReplace(e.index(),e.index()+1);if(d&&(o=(a=s.contentMatchAt(s.childCount)).findWrapping(i.type))&&a.matchType(o[0]||i.type).validEnd){if(t){let y=e.pos+i.nodeSize,v=be.empty;for(let C=o.length-1;C>=0;C--)v=be.from(o[C].create(null,v));v=be.from(s.copy(v));let w=n.tr.step(new sn(e.pos-1,y,e.pos,y,new Ee(v,1,0),o.length,!0)),S=w.doc.resolve(y+2*o.length);S.nodeAfter&&S.nodeAfter.type==s.type&&co(w.doc,S.pos)&&w.join(S.pos),t(w.scrollIntoView())}return!0}let h=i.type.spec.isolating||r>0&&c?null:Ke.findFrom(e,1),f=h&&h.$from.blockRange(h.$to),m=f&&jl(f);if(m!=null&&m>=e.depth)return t&&t(n.tr.lift(f,m).scrollIntoView()),!0;if(d&&pl(i,"start",!0)&&pl(s,"end")){let y=s,v=[];for(;v.push(y),!y.isTextblock;)y=y.lastChild;let w=i,S=1;for(;!w.isTextblock;w=w.firstChild)S++;if(y.canReplace(y.childCount,y.childCount,w.content)){if(t){let C=be.empty;for(let k=v.length-1;k>=0;k--)C=be.from(v[k].copy(C));let T=n.tr.step(new sn(e.pos-v.length,e.pos+i.nodeSize,e.pos+S,e.pos+i.nodeSize-S,new Ee(C,v.length,0),0,!0));t(T.scrollIntoView())}return!0}}return!1}function YN(n){return function(e,t){let r=e.selection,s=n<0?r.$from:r.$to,i=s.depth;for(;s.node(i).isInline;){if(!i)return!1;i--}return s.node(i).isTextblock?(t&&t(e.tr.setSelection(He.create(e.doc,n<0?s.start(i):s.end(i)))),!0):!1}}const _B=YN(-1),TB=YN(1);function kB(n,e=null){return function(t,r){let{$from:s,$to:i}=t.selection,o=s.blockRange(i),a=o&&j0(o,n,e);return a?(r&&r(t.tr.wrap(o,a).scrollIntoView()),!0):!1}}function u1(n,e=null){return function(t,r){let s=!1;for(let i=0;i<t.selection.ranges.length&&!s;i++){let{$from:{pos:o},$to:{pos:a}}=t.selection.ranges[i];t.doc.nodesBetween(o,a,(c,d)=>{if(s)return!1;if(!(!c.isTextblock||c.hasMarkup(n,e)))if(c.type==n)s=!0;else{let h=t.doc.resolve(d),f=h.index();s=h.parent.canReplaceWith(f,f+1,n)}})}if(!s)return!1;if(r){let i=t.tr;for(let o=0;o<t.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:c}}=t.selection.ranges[o];i.setBlockType(a,c,n,e)}r(i.scrollIntoView())}return!0}}function J0(...n){return function(e,t,r){for(let s=0;s<n.length;s++)if(n[s](e,t,r))return!0;return!1}}J0(G0,VN,zN);J0(G0,$N,HN);J0(UN,qN,GN,bB);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function EB(n,e=null){return function(t,r){let{$from:s,$to:i}=t.selection,o=s.blockRange(i);if(!o)return!1;let a=r?t.tr:null;return NB(a,o,n,e)?(r&&r(a.scrollIntoView()),!0):!1}}function NB(n,e,t,r=null){let s=!1,i=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let c=o.resolve(e.start-2);i=new ff(c,c,e.depth),e.endIndex<e.parent.childCount&&(e=new ff(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let a=j0(i,t,r,e);return a?(n&&AB(n,e,a,s,t),!0):!1}function AB(n,e,t,r,s){let i=be.empty;for(let h=t.length-1;h>=0;h--)i=be.from(t[h].type.create(t[h].attrs,i));n.step(new sn(e.start-(r?2:0),e.end,e.start,e.end,new Ee(i,0,0),t.length,!0));let o=0;for(let h=0;h<t.length;h++)t[h].type==s&&(o=h+1);let a=t.length-o,c=e.start+t.length-(r?2:0),d=e.parent;for(let h=e.startIndex,f=e.endIndex,m=!0;h<f;h++,m=!1)!m&&Xs(n.doc,c,a)&&(n.split(c,a),c+=2*a),c+=d.child(h).nodeSize;return n}function MB(n){return function(e,t){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,o=>o.childCount>0&&o.firstChild.type==n);return i?t?r.node(i.depth-1).type==n?OB(e,t,n,i):PB(e,t,i):!0:!1}}function OB(n,e,t,r){let s=n.tr,i=r.end,o=r.$to.end(r.depth);i<o&&(s.step(new sn(i-1,o,i,o,new Ee(be.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new ff(s.doc.resolve(r.$from.pos),s.doc.resolve(o),r.depth));const a=jl(r);if(a==null)return!1;s.lift(r,a);let c=s.mapping.map(i,-1)-1;return co(s.doc,c)&&s.join(c),e(s.scrollIntoView()),!0}function PB(n,e,t){let r=n.tr,s=t.parent;for(let y=t.end,v=t.endIndex-1,w=t.startIndex;v>w;v--)y-=s.child(v).nodeSize,r.delete(y-1,y+1);let i=r.doc.resolve(t.start),o=i.nodeAfter;if(r.mapping.map(t.end)!=t.start+i.nodeAfter.nodeSize)return!1;let a=t.startIndex==0,c=t.endIndex==s.childCount,d=i.node(-1),h=i.index(-1);if(!d.canReplace(h+(a?0:1),h+1,o.content.append(c?be.empty:be.from(s))))return!1;let f=i.pos,m=f+o.nodeSize;return r.step(new sn(f-(a?1:0),m+(c?1:0),f+1,m-1,new Ee((a?be.empty:be.from(s.copy(be.empty))).append(c?be.empty:be.from(s.copy(be.empty))),a?0:1,c?0:1),a?0:1)),e(r.scrollIntoView()),!0}function DB(n){return function(e,t){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,d=>d.childCount>0&&d.firstChild.type==n);if(!i)return!1;let o=i.startIndex;if(o==0)return!1;let a=i.parent,c=a.child(o-1);if(c.type!=n)return!1;if(t){let d=c.lastChild&&c.lastChild.type==a.type,h=be.from(d?n.create():null),f=new Ee(be.from(n.create(null,be.from(a.type.create(null,h)))),d?3:1,0),m=i.start,y=i.end;t(e.tr.step(new sn(m-(d?3:1),y,m,y,f,1,!0)).scrollIntoView())}return!0}}function cp(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:s}=t,{storedMarks:i}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return s},get tr(){return r=t.selection,s=t.doc,i=t.storedMarks,t}}}class up{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:s}=t,{tr:i}=r,o=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([a,c])=>[a,(...h)=>{const f=c(...h)(o);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(i),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:s,state:i}=this,{view:o}=s,a=[],c=!!e,d=e||i.tr,h=()=>(!c&&t&&!d.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(d),a.every(m=>m===!0)),f={...Object.fromEntries(Object.entries(r).map(([m,y])=>[m,(...w)=>{const S=this.buildProps(d,t),C=y(...w)(S);return a.push(C),f}])),run:h};return f}createCan(e){const{rawCommands:t,state:r}=this,s=!1,i=e||r.tr,o=this.buildProps(i,s);return{...Object.fromEntries(Object.entries(t).map(([c,d])=>[c,(...h)=>d(...h)({...o,dispatch:void 0})])),chain:()=>this.createChain(i,s)}}buildProps(e,t=!0){const{rawCommands:r,editor:s,state:i}=this,{view:o}=s,a={tr:e,editor:s,view:o,state:cp({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([c,d])=>[c,(...h)=>d(...h)(a)]))}};return a}}class RB{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(s=>s.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(s=>s!==t):delete this.callbacks[e]),this}once(e,t){const r=(...s)=>{this.off(e,r),t.apply(this,s)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function Oe(n,e,t){return n.config[e]===void 0&&n.parent?Oe(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Oe(n.parent,e,t):null}):n.config[e]}function dp(n){const e=n.filter(s=>s.type==="extension"),t=n.filter(s=>s.type==="node"),r=n.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function XN(n){const e=[],{nodeExtensions:t,markExtensions:r}=dp(n),s=[...t,...r],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:s},c=Oe(o,"addGlobalAttributes",a);if(!c)return;c().forEach(h=>{h.types.forEach(f=>{Object.entries(h.attributes).forEach(([m,y])=>{e.push({type:f,name:m,attribute:{...i,...y}})})})})}),s.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},c=Oe(o,"addAttributes",a);if(!c)return;const d=c();Object.entries(d).forEach(([h,f])=>{const m={...i,...f};typeof(m==null?void 0:m.default)=="function"&&(m.default=m.default()),m!=null&&m.isRequired&&(m==null?void 0:m.default)===void 0&&delete m.default,e.push({type:o.name,name:h,attribute:m})})}),e}function ln(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function cn(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([s,i])=>{if(!r[s]){r[s]=i;return}if(s==="class"){const a=i?String(i).split(" "):[],c=r[s]?r[s].split(" "):[],d=a.filter(h=>!c.includes(h));r[s]=[...c,...d].join(" ")}else if(s==="style"){const a=i?i.split(";").map(h=>h.trim()).filter(Boolean):[],c=r[s]?r[s].split(";").map(h=>h.trim()).filter(Boolean):[],d=new Map;c.forEach(h=>{const[f,m]=h.split(":").map(y=>y.trim());d.set(f,m)}),a.forEach(h=>{const[f,m]=h.split(":").map(y=>y.trim());d.set(f,m)}),r[s]=Array.from(d.entries()).map(([h,f])=>`${h}: ${f}`).join("; ")}else r[s]=i}),r},{})}function kv(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>cn(t,r),{})}function JN(n){return typeof n=="function"}function et(n,e=void 0,...t){return JN(n)?e?n.bind(e)(...t):n(...t):n}function IB(n={}){return Object.keys(n).length===0&&n.constructor===Object}function jB(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function d1(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const s=e.reduce((i,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(t):jB(t.getAttribute(o.name));return a==null?i:{...i,[o.name]:a}},{});return{...r,...s}}}}function h1(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&IB(t)?!1:t!=null))}function LB(n,e){var t;const r=XN(n),{nodeExtensions:s,markExtensions:i}=dp(n),o=(t=s.find(d=>Oe(d,"topNode")))===null||t===void 0?void 0:t.name,a=Object.fromEntries(s.map(d=>{const h=r.filter(C=>C.type===d.name),f={name:d.name,options:d.options,storage:d.storage,editor:e},m=n.reduce((C,T)=>{const k=Oe(T,"extendNodeSchema",f);return{...C,...k?k(d):{}}},{}),y=h1({...m,content:et(Oe(d,"content",f)),marks:et(Oe(d,"marks",f)),group:et(Oe(d,"group",f)),inline:et(Oe(d,"inline",f)),atom:et(Oe(d,"atom",f)),selectable:et(Oe(d,"selectable",f)),draggable:et(Oe(d,"draggable",f)),code:et(Oe(d,"code",f)),whitespace:et(Oe(d,"whitespace",f)),linebreakReplacement:et(Oe(d,"linebreakReplacement",f)),defining:et(Oe(d,"defining",f)),isolating:et(Oe(d,"isolating",f)),attrs:Object.fromEntries(h.map(C=>{var T;return[C.name,{default:(T=C==null?void 0:C.attribute)===null||T===void 0?void 0:T.default}]}))}),v=et(Oe(d,"parseHTML",f));v&&(y.parseDOM=v.map(C=>d1(C,h)));const w=Oe(d,"renderHTML",f);w&&(y.toDOM=C=>w({node:C,HTMLAttributes:kv(C,h)}));const S=Oe(d,"renderText",f);return S&&(y.toText=S),[d.name,y]})),c=Object.fromEntries(i.map(d=>{const h=r.filter(S=>S.type===d.name),f={name:d.name,options:d.options,storage:d.storage,editor:e},m=n.reduce((S,C)=>{const T=Oe(C,"extendMarkSchema",f);return{...S,...T?T(d):{}}},{}),y=h1({...m,inclusive:et(Oe(d,"inclusive",f)),excludes:et(Oe(d,"excludes",f)),group:et(Oe(d,"group",f)),spanning:et(Oe(d,"spanning",f)),code:et(Oe(d,"code",f)),attrs:Object.fromEntries(h.map(S=>{var C;return[S.name,{default:(C=S==null?void 0:S.attribute)===null||C===void 0?void 0:C.default}]}))}),v=et(Oe(d,"parseHTML",f));v&&(y.parseDOM=v.map(S=>d1(S,h)));const w=Oe(d,"renderHTML",f);return w&&(y.toDOM=S=>w({mark:S,HTMLAttributes:kv(S,h)})),[d.name,y]}));return new BE({topNode:o,nodes:a,marks:c})}function py(n,e){return e.nodes[n]||e.marks[n]||null}function f1(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function Z0(n,e){const t=ra.fromSchema(e).serializeFragment(n),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(t),s.innerHTML}const FB=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(s,i,o,a)=>{var c,d;const h=((d=(c=s.type.spec).toText)===null||d===void 0?void 0:d.call(c,{node:s,pos:i,parent:o,index:a}))||s.textContent||"%leaf%";t+=s.isAtom&&!s.isText?h:h.slice(0,Math.max(0,r-i))}),t};function Q0(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class hp{constructor(e){this.find=e.find,this.handler=e.handler}}const VB=(n,e)=>{if(Q0(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function kh(n){var e;const{editor:t,from:r,to:s,text:i,rules:o,plugin:a}=n,{view:c}=t;if(c.composing)return!1;const d=c.state.doc.resolve(r);if(d.parent.type.spec.code||!((e=d.nodeBefore||d.nodeAfter)===null||e===void 0)&&e.marks.find(m=>m.type.spec.code))return!1;let h=!1;const f=FB(d)+i;return o.forEach(m=>{if(h)return;const y=VB(f,m.find);if(!y)return;const v=c.state.tr,w=cp({state:c.state,transaction:v}),S={from:r-(y[0].length-i.length),to:s},{commands:C,chain:T,can:k}=new up({editor:t,state:w});m.handler({state:w,range:S,match:y,commands:C,chain:T,can:k})===null||!v.steps.length||(v.setMeta(a,{transform:v,from:r,to:s,text:i}),c.dispatch(v),h=!0)}),h}function BB(n){const{editor:e,rules:t}=n,r=new $n({state:{init(){return null},apply(s,i,o){const a=s.getMeta(r);if(a)return a;const c=s.getMeta("applyInputRules");return!!c&&setTimeout(()=>{let{text:h}=c;typeof h=="string"?h=h:h=Z0(be.from(h),o.schema);const{from:f}=c,m=f+h.length;kh({editor:e,from:f,to:m,text:h,rules:t,plugin:r})}),s.selectionSet||s.docChanged?null:i}},props:{handleTextInput(s,i,o,a){return kh({editor:e,from:i,to:o,text:a,rules:t,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:i}=s.state.selection;i&&kh({editor:e,from:i.pos,to:i.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(s,i){if(i.key!=="Enter")return!1;const{$cursor:o}=s.state.selection;return o?kh({editor:e,from:o.pos,to:o.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function zB(n){return Object.prototype.toString.call(n).slice(8,-1)}function Eh(n){return zB(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function fp(n,e){const t={...n};return Eh(n)&&Eh(e)&&Object.keys(e).forEach(r=>{Eh(e[r])&&Eh(n[r])?t[r]=fp(n[r],e[r]):t[r]=e[r]}),t}class ni{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=et(Oe(this,"addOptions",{name:this.name}))),this.storage=et(Oe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new ni(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>fp(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new ni(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=et(Oe(t,"addOptions",{name:t.name})),t.storage=et(Oe(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const o=s.marks();if(!!!o.find(d=>(d==null?void 0:d.type.name)===t.name))return!1;const c=o.find(d=>(d==null?void 0:d.type.name)===t.name);return c&&r.removeStoredMark(c),r.insertText(" ",s.pos),e.view.dispatch(r),!0}return!1}}function WB(n){return typeof n=="number"}class $B{constructor(e){this.find=e.find,this.handler=e.handler}}const HB=(n,e,t)=>{if(Q0(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(s=>{const i=[s.text];return i.index=s.index,i.input=n,i.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(s.replaceWith)),i}):[]};function UB(n){const{editor:e,state:t,from:r,to:s,rule:i,pasteEvent:o,dropEvent:a}=n,{commands:c,chain:d,can:h}=new up({editor:e,state:t}),f=[];return t.doc.nodesBetween(r,s,(y,v)=>{if(!y.isTextblock||y.type.spec.code)return;const w=Math.max(r,v),S=Math.min(s,v+y.content.size),C=y.textBetween(w-v,S-v,void 0,"");HB(C,i.find,o).forEach(k=>{if(k.index===void 0)return;const M=w+k.index+1,N=M+k[0].length,O={from:t.tr.mapping.map(M),to:t.tr.mapping.map(N)},D=i.handler({state:t,range:O,match:k,commands:c,chain:d,can:h,pasteEvent:o,dropEvent:a});f.push(D)})}),f.every(y=>y!==null)}let Nh=null;const qB=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function GB(n){const{editor:e,rules:t}=n;let r=null,s=!1,i=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const c=({state:h,from:f,to:m,rule:y,pasteEvt:v})=>{const w=h.tr,S=cp({state:h,transaction:w});if(!(!UB({editor:e,state:S,from:Math.max(f-1,0),to:m.b-1,rule:y,pasteEvent:v,dropEvent:a})||!w.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,w}};return t.map(h=>new $n({view(f){const m=v=>{var w;r=!((w=f.dom.parentElement)===null||w===void 0)&&w.contains(v.target)?f.dom.parentElement:null,r&&(Nh=e)},y=()=>{Nh&&(Nh=null)};return window.addEventListener("dragstart",m),window.addEventListener("dragend",y),{destroy(){window.removeEventListener("dragstart",m),window.removeEventListener("dragend",y)}}},props:{handleDOMEvents:{drop:(f,m)=>{if(i=r===f.dom.parentElement,a=m,!i){const y=Nh;y&&setTimeout(()=>{const v=y.state.selection;v&&y.commands.deleteRange({from:v.from,to:v.to})},10)}return!1},paste:(f,m)=>{var y;const v=(y=m.clipboardData)===null||y===void 0?void 0:y.getData("text/html");return o=m,s=!!(v!=null&&v.includes("data-pm-slice")),!1}}},appendTransaction:(f,m,y)=>{const v=f[0],w=v.getMeta("uiEvent")==="paste"&&!s,S=v.getMeta("uiEvent")==="drop"&&!i,C=v.getMeta("applyPasteRules"),T=!!C;if(!w&&!S&&!T)return;if(T){let{text:N}=C;typeof N=="string"?N=N:N=Z0(be.from(N),y.schema);const{from:O}=C,D=O+N.length,I=qB(N);return c({rule:h,state:y,from:O,to:{b:D},pasteEvt:I})}const k=m.doc.content.findDiffStart(y.doc.content),M=m.doc.content.findDiffEnd(y.doc.content);if(!(!WB(k)||!M||k===M.b))return c({rule:h,state:y,from:k,to:M,pasteEvt:o})}}))}function KB(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}class Ha{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Ha.resolve(e),this.schema=LB(this.extensions,t),this.setupExtensions()}static resolve(e){const t=Ha.sort(Ha.flatten(e)),r=KB(t.map(s=>s.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(s=>`'${s}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},s=Oe(t,"addExtensions",r);return s?[t,...this.flatten(s())]:t}).flat(10)}static sort(e){return e.sort((r,s)=>{const i=Oe(r,"priority")||100,o=Oe(s,"priority")||100;return i>o?-1:i<o?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:py(t.name,this.schema)},s=Oe(t,"addCommands",r);return s?{...e,...s()}:e},{})}get plugins(){const{editor:e}=this,t=Ha.sort([...this.extensions].reverse()),r=[],s=[],i=t.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:py(o.name,this.schema)},c=[],d=Oe(o,"addKeyboardShortcuts",a);let h={};if(o.type==="mark"&&Oe(o,"exitable",a)&&(h.ArrowRight=()=>ni.handleExit({editor:e,mark:o})),d){const w=Object.fromEntries(Object.entries(d()).map(([S,C])=>[S,()=>C({editor:e})]));h={...h,...w}}const f=fB(h);c.push(f);const m=Oe(o,"addInputRules",a);f1(o,e.options.enableInputRules)&&m&&r.push(...m());const y=Oe(o,"addPasteRules",a);f1(o,e.options.enablePasteRules)&&y&&s.push(...y());const v=Oe(o,"addProseMirrorPlugins",a);if(v){const w=v();c.push(...w)}return c}).flat();return[BB({editor:e,rules:r}),...GB({editor:e,rules:s}),...i]}get attributes(){return XN(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=dp(this.extensions);return Object.fromEntries(t.filter(r=>!!Oe(r,"addNodeView")).map(r=>{const s=this.attributes.filter(c=>c.type===r.name),i={name:r.name,options:r.options,storage:r.storage,editor:e,type:ln(r.name,this.schema)},o=Oe(r,"addNodeView",i);if(!o)return[];const a=(c,d,h,f,m)=>{const y=kv(c,s);return o()({node:c,view:d,getPos:h,decorations:f,innerDecorations:m,editor:e,extension:r,HTMLAttributes:y})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:py(e.name,this.schema)};e.type==="mark"&&(!((t=et(Oe(e,"keepOnSplit",r)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const s=Oe(e,"onBeforeCreate",r),i=Oe(e,"onCreate",r),o=Oe(e,"onUpdate",r),a=Oe(e,"onSelectionUpdate",r),c=Oe(e,"onTransaction",r),d=Oe(e,"onFocus",r),h=Oe(e,"onBlur",r),f=Oe(e,"onDestroy",r);s&&this.editor.on("beforeCreate",s),i&&this.editor.on("create",i),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),c&&this.editor.on("transaction",c),d&&this.editor.on("focus",d),h&&this.editor.on("blur",h),f&&this.editor.on("destroy",f)})}}class xn{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=et(Oe(this,"addOptions",{name:this.name}))),this.storage=et(Oe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new xn(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>fp(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new xn({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=et(Oe(t,"addOptions",{name:t.name})),t.storage=et(Oe(t,"addStorage",{name:t.name,options:t.options})),t}}function ZN(n,e,t){const{from:r,to:s}=e,{blockSeparator:i=`

`,textSerializers:o={}}=t||{};let a="";return n.nodesBetween(r,s,(c,d,h,f)=>{var m;c.isBlock&&d>r&&(a+=i);const y=o==null?void 0:o[c.type.name];if(y)return h&&(a+=y({node:c,pos:d,parent:h,index:f,range:e})),!1;c.isText&&(a+=(m=c==null?void 0:c.text)===null||m===void 0?void 0:m.slice(Math.max(r,d)-d,s-d))}),a}function QN(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const YB=xn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new $n({key:new ns("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:s}=e,{ranges:i}=s,o=Math.min(...i.map(h=>h.$from.pos)),a=Math.max(...i.map(h=>h.$to.pos)),c=QN(t);return ZN(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),XB=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),JB=(n=!1)=>({commands:e})=>e.setContent("",n),ZB=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:s}=r;return t&&s.forEach(({$from:i,$to:o})=>{n.doc.nodesBetween(i.pos,o.pos,(a,c)=>{if(a.type.isText)return;const{doc:d,mapping:h}=e,f=d.resolve(h.map(c)),m=d.resolve(h.map(c+a.nodeSize)),y=f.blockRange(m);if(!y)return;const v=jl(y);if(a.type.isTextblock){const{defaultType:w}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(y.start,w)}(v||v===0)&&e.lift(y,v)})}),!0},QB=n=>e=>n(e),e3=()=>({state:n,dispatch:e})=>qN(n,e),t3=(n,e)=>({editor:t,tr:r})=>{const{state:s}=t,i=s.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,i.content),r.setSelection(new He(r.doc.resolve(o-1))),!0},n3=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const s=n.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===r.type){if(e){const a=s.before(i),c=s.after(i);n.delete(a,c).scrollIntoView()}return!0}return!1},r3=n=>({tr:e,state:t,dispatch:r})=>{const s=ln(n,t.schema),i=e.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===s){if(r){const c=i.before(o),d=i.after(o);e.delete(c,d).scrollIntoView()}return!0}return!1},s3=n=>({tr:e,dispatch:t})=>{const{from:r,to:s}=n;return t&&e.delete(r,s),!0},i3=()=>({state:n,dispatch:e})=>G0(n,e),o3=()=>({commands:n})=>n.keyboardShortcut("Enter"),a3=()=>({state:n,dispatch:e})=>xB(n,e);function bf(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>t.strict?e[s]===n[s]:Q0(e[s])?e[s].test(n[s]):e[s]===n[s]):!0}function eA(n,e,t={}){return n.find(r=>r.type===e&&bf(Object.fromEntries(Object.keys(t).map(s=>[s,r.attrs[s]])),t))}function p1(n,e,t={}){return!!eA(n,e,t)}function ex(n,e,t){var r;if(!n||!e)return;let s=n.parent.childAfter(n.parentOffset);if((!s.node||!s.node.marks.some(h=>h.type===e))&&(s=n.parent.childBefore(n.parentOffset)),!s.node||!s.node.marks.some(h=>h.type===e)||(t=t||((r=s.node.marks[0])===null||r===void 0?void 0:r.attrs),!eA([...s.node.marks],e,t)))return;let o=s.index,a=n.start()+s.offset,c=o+1,d=a+s.node.nodeSize;for(;o>0&&p1([...n.parent.child(o-1).marks],e,t);)o-=1,a-=n.parent.child(o).nodeSize;for(;c<n.parent.childCount&&p1([...n.parent.child(c).marks],e,t);)d+=n.parent.child(c).nodeSize,c+=1;return{from:a,to:d}}function ho(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const l3=(n,e={})=>({tr:t,state:r,dispatch:s})=>{const i=ho(n,r.schema),{doc:o,selection:a}=t,{$from:c,from:d,to:h}=a;if(s){const f=ex(c,i,e);if(f&&f.from<=d&&f.to>=h){const m=He.create(o,f.from,f.to);t.setSelection(m)}}return!0},c3=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function tA(n){return n instanceof He}function Vo(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function nA(n,e=null){if(!e)return null;const t=Ke.atStart(n),r=Ke.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const s=t.from,i=r.to;return e==="all"?He.create(n,Vo(0,s,i),Vo(n.content.size,s,i)):He.create(n,Vo(e,s,i),Vo(e,s,i))}function u3(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function tx(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const d3=(n=null,e={})=>({editor:t,view:r,tr:s,dispatch:i})=>{e={scrollIntoView:!0,...e};const o=()=>{(tx()||u3())&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(i&&n===null&&!tA(t.state.selection))return o(),!0;const a=nA(s.doc,n)||t.state.selection,c=t.state.selection.eq(a);return i&&(c||s.setSelection(a),c&&s.storedMarks&&s.setStoredMarks(s.storedMarks),o()),!0},h3=(n,e)=>t=>n.every((r,s)=>e(r,{...t,index:s})),f3=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),rA=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&rA(r)}return n};function Ah(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return rA(t)}function Sf(n,e,t){if(n instanceof Ki||n instanceof be)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,s=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return be.fromArray(n.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(n);return t.errorOnInvalidContent&&o.check(),o}catch(i){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",i),Sf("",e,t)}if(s){if(t.errorOnInvalidContent){let o=!1,a="";const c=new BE({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:d=>(o=!0,a=typeof d=="string"?d:d.outerHTML,null)}]}})});if(t.slice?Yi.fromSchema(c).parseSlice(Ah(n),t.parseOptions):Yi.fromSchema(c).parse(Ah(n),t.parseOptions),t.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const i=Yi.fromSchema(e);return t.slice?i.parseSlice(Ah(n),t.parseOptions).content:i.parse(Ah(n),t.parseOptions)}return Sf("",e,t)}function p3(n,e,t){const r=n.steps.length-1;if(r<e)return;const s=n.steps[r];if(!(s instanceof rn||s instanceof sn))return;const i=n.mapping.maps[r];let o=0;i.forEach((a,c,d,h)=>{o===0&&(o=h)}),n.setSelection(Ke.near(n.doc.resolve(o),t))}const m3=n=>!("type"in n),g3=(n,e,t)=>({tr:r,dispatch:s,editor:i})=>{var o;if(s){t={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let a;try{a=Sf(e,i.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions},errorOnInvalidContent:(o=t.errorOnInvalidContent)!==null&&o!==void 0?o:i.options.enableContentCheck})}catch(v){return i.emit("contentError",{editor:i,error:v,disableCollaboration:()=>{i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}}),!1}let{from:c,to:d}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},h=!0,f=!0;if((m3(a)?a:[a]).forEach(v=>{v.check(),h=h?v.isText&&v.marks.length===0:!1,f=f?v.isBlock:!1}),c===d&&f){const{parent:v}=r.doc.resolve(c);v.isTextblock&&!v.type.spec.code&&!v.childCount&&(c-=1,d+=1)}let y;if(h){if(Array.isArray(e))y=e.map(v=>v.text||"").join("");else if(e instanceof be){let v="";e.forEach(w=>{w.text&&(v+=w.text)}),y=v}else typeof e=="object"&&e&&e.text?y=e.text:y=e;r.insertText(y,c,d)}else y=a,r.replaceWith(c,d,y);t.updateSelection&&p3(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:c,text:y}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:c,text:y})}return!0},y3=()=>({state:n,dispatch:e})=>gB(n,e),v3=()=>({state:n,dispatch:e})=>yB(n,e),x3=()=>({state:n,dispatch:e})=>VN(n,e),w3=()=>({state:n,dispatch:e})=>$N(n,e),b3=()=>({state:n,dispatch:e,tr:t})=>{try{const r=rp(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},S3=()=>({state:n,dispatch:e,tr:t})=>{try{const r=rp(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},C3=()=>({state:n,dispatch:e})=>pB(n,e),_3=()=>({state:n,dispatch:e})=>mB(n,e);function sA(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function T3(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,s,i,o;for(let a=0;a<e.length-1;a+=1){const c=e[a];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))i=!0;else if(/^mod$/i.test(c))tx()||sA()?o=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return r&&(t=`Alt-${t}`),s&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),i&&(t=`Shift-${t}`),t}const k3=n=>({editor:e,view:t,tr:r,dispatch:s})=>{const i=T3(n).split(/-(?!$)/),o=i.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{t.someProp("handleKeyDown",d=>d(t,a))});return c==null||c.steps.forEach(d=>{const h=d.map(r.mapping);h&&s&&r.maybeStep(h)}),!0};function yu(n,e,t={}){const{from:r,to:s,empty:i}=n.selection,o=e?ln(e,n.schema):null,a=[];n.doc.nodesBetween(r,s,(f,m)=>{if(f.isText)return;const y=Math.max(r,m),v=Math.min(s,m+f.nodeSize);a.push({node:f,from:y,to:v})});const c=s-r,d=a.filter(f=>o?o.name===f.node.type.name:!0).filter(f=>bf(f.node.attrs,t,{strict:!1}));return i?!!d.length:d.reduce((f,m)=>f+m.to-m.from,0)>=c}const E3=(n,e={})=>({state:t,dispatch:r})=>{const s=ln(n,t.schema);return yu(t,s,e)?vB(t,r):!1},N3=()=>({state:n,dispatch:e})=>GN(n,e),A3=n=>({state:e,dispatch:t})=>{const r=ln(n,e.schema);return MB(r)(e,t)},M3=()=>({state:n,dispatch:e})=>UN(n,e);function pp(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function m1(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,s)=>(t.includes(s)||(r[s]=n[s]),r),{})}const O3=(n,e)=>({tr:t,state:r,dispatch:s})=>{let i=null,o=null;const a=pp(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(i=ln(n,r.schema)),a==="mark"&&(o=ho(n,r.schema)),s&&t.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(d,h)=>{i&&i===d.type&&t.setNodeMarkup(h,void 0,m1(d.attrs,e)),o&&d.marks.length&&d.marks.forEach(f=>{o===f.type&&t.addMark(h,h+d.nodeSize,o.create(m1(f.attrs,e)))})})}),!0):!1},P3=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),D3=()=>({tr:n,dispatch:e})=>{if(e){const t=new hr(n.doc);n.setSelection(t)}return!0},R3=()=>({state:n,dispatch:e})=>zN(n,e),I3=()=>({state:n,dispatch:e})=>HN(n,e),j3=()=>({state:n,dispatch:e})=>SB(n,e),L3=()=>({state:n,dispatch:e})=>TB(n,e),F3=()=>({state:n,dispatch:e})=>_B(n,e);function Ev(n,e,t={},r={}){return Sf(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}const V3=(n,e=!1,t={},r={})=>({editor:s,tr:i,dispatch:o,commands:a})=>{var c,d;const{doc:h}=i;if(t.preserveWhitespace!=="full"){const f=Ev(n,s.schema,t,{errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:s.options.enableContentCheck});return o&&i.replaceWith(0,h.content.size,f).setMeta("preventUpdate",!e),!0}return o&&i.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:h.content.size},n,{parseOptions:t,errorOnInvalidContent:(d=r.errorOnInvalidContent)!==null&&d!==void 0?d:s.options.enableContentCheck})};function iA(n,e){const t=ho(e,n.schema),{from:r,to:s,empty:i}=n.selection,o=[];i?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,s,c=>{o.push(...c.marks)});const a=o.find(c=>c.type.name===t.name);return a?{...a.attrs}:{}}function B3(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function z3(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function nx(n){return e=>z3(e.$from,n)}function W3(n,e){const t={from:0,to:n.content.size};return ZN(n,t,e)}function $3(n,e){const t=ln(e,n.schema),{from:r,to:s}=n.selection,i=[];n.doc.nodesBetween(r,s,a=>{i.push(a)});const o=i.reverse().find(a=>a.type.name===t.name);return o?{...o.attrs}:{}}function H3(n,e){const t=pp(typeof e=="string"?e:e.name,n.schema);return t==="node"?$3(n,e):t==="mark"?iA(n,e):{}}function oA(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(s=>{const i=t.resolve(n),o=ex(i,s.type);o&&r.push({mark:s,...o})}):t.nodesBetween(n,e,(s,i)=>{!s||(s==null?void 0:s.nodeSize)===void 0||r.push(...s.marks.map(o=>({from:i,to:i+s.nodeSize,mark:o})))}),r}function Xh(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const s=n.find(i=>i.type===e&&i.name===r);return s?s.attribute.keepOnSplit:!1}))}function Nv(n,e,t={}){const{empty:r,ranges:s}=n.selection,i=e?ho(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(f=>i?i.name===f.type.name:!0).find(f=>bf(f.attrs,t,{strict:!1}));let o=0;const a=[];if(s.forEach(({$from:f,$to:m})=>{const y=f.pos,v=m.pos;n.doc.nodesBetween(y,v,(w,S)=>{if(!w.isText&&!w.marks.length)return;const C=Math.max(y,S),T=Math.min(v,S+w.nodeSize),k=T-C;o+=k,a.push(...w.marks.map(M=>({mark:M,from:C,to:T})))})}),o===0)return!1;const c=a.filter(f=>i?i.name===f.mark.type.name:!0).filter(f=>bf(f.mark.attrs,t,{strict:!1})).reduce((f,m)=>f+m.to-m.from,0),d=a.filter(f=>i?f.mark.type!==i&&f.mark.type.excludes(i):!0).reduce((f,m)=>f+m.to-m.from,0);return(c>0?c+d:c)>=o}function U3(n,e,t={}){if(!e)return yu(n,null,t)||Nv(n,null,t);const r=pp(e,n.schema);return r==="node"?yu(n,e,t):r==="mark"?Nv(n,e,t):!1}function g1(n,e){const{nodeExtensions:t}=dp(e),r=t.find(o=>o.name===n);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},i=et(Oe(r,"group",s));return typeof i!="string"?!1:i.split(" ").includes("list")}function rx(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!==null&&r!==void 0?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let s=!0;return n.content.forEach(i=>{s!==!1&&(rx(i,{ignoreWhitespace:t,checkChildren:e})||(s=!1))}),s}return!1}function q3(n){return n instanceof Fe}function G3(n,e,t){var r;const{selection:s}=e;let i=null;if(tA(s)&&(i=s.$cursor),i){const a=(r=n.storedMarks)!==null&&r!==void 0?r:i.marks();return!!t.isInSet(a)||!a.some(c=>c.type.excludes(t))}const{ranges:o}=s;return o.some(({$from:a,$to:c})=>{let d=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,c.pos,(h,f,m)=>{if(d)return!1;if(h.isInline){const y=!m||m.type.allowsMarkType(t),v=!!t.isInSet(h.marks)||!h.marks.some(w=>w.type.excludes(t));d=y&&v}return!d}),d})}const K3=(n,e={})=>({tr:t,state:r,dispatch:s})=>{const{selection:i}=t,{empty:o,ranges:a}=i,c=ho(n,r.schema);if(s)if(o){const d=iA(r,c);t.addStoredMark(c.create({...d,...e}))}else a.forEach(d=>{const h=d.$from.pos,f=d.$to.pos;r.doc.nodesBetween(h,f,(m,y)=>{const v=Math.max(y,h),w=Math.min(y+m.nodeSize,f);m.marks.find(C=>C.type===c)?m.marks.forEach(C=>{c===C.type&&t.addMark(v,w,c.create({...C.attrs,...e}))}):t.addMark(v,w,c.create(e))})});return G3(r,t,c)},Y3=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),X3=(n,e={})=>({state:t,dispatch:r,chain:s})=>{const i=ln(n,t.schema);let o;return t.selection.$anchor.sameParent(t.selection.$head)&&(o=t.selection.$anchor.parent.attrs),i.isTextblock?s().command(({commands:a})=>u1(i,{...o,...e})(t)?!0:a.clearNodes()).command(({state:a})=>u1(i,{...o,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},J3=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,s=Vo(n,0,r.content.size),i=Fe.create(r,s);e.setSelection(i)}return!0},Z3=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:s,to:i}=typeof n=="number"?{from:n,to:n}:n,o=He.atStart(r).from,a=He.atEnd(r).to,c=Vo(s,o,a),d=Vo(i,o,a),h=He.create(r,c,d);e.setSelection(h)}return!0},Q3=n=>({state:e,dispatch:t})=>{const r=ln(n,e.schema);return DB(r)(e,t)};function y1(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(s=>e==null?void 0:e.includes(s.type.name));n.tr.ensureMarks(r)}}const ez=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:s})=>{const{selection:i,doc:o}=e,{$from:a,$to:c}=i,d=s.extensionManager.attributes,h=Xh(d,a.node().type.name,a.node().attrs);if(i instanceof Fe&&i.node.isBlock)return!a.parentOffset||!Xs(o,a.pos)?!1:(r&&(n&&y1(t,s.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const f=c.parentOffset===c.parent.content.size,m=a.depth===0?void 0:B3(a.node(-1).contentMatchAt(a.indexAfter(-1)));let y=f&&m?[{type:m,attrs:h}]:void 0,v=Xs(e.doc,e.mapping.map(a.pos),1,y);if(!y&&!v&&Xs(e.doc,e.mapping.map(a.pos),1,m?[{type:m}]:void 0)&&(v=!0,y=m?[{type:m,attrs:h}]:void 0),r){if(v&&(i instanceof He&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,y),m&&!f&&!a.parentOffset&&a.parent.type!==m)){const w=e.mapping.map(a.before()),S=e.doc.resolve(w);a.node(-1).canReplaceWith(S.index(),S.index()+1,m)&&e.setNodeMarkup(e.mapping.map(a.before()),m)}n&&y1(t,s.extensionManager.splittableMarks),e.scrollIntoView()}return v},tz=(n,e={})=>({tr:t,state:r,dispatch:s,editor:i})=>{var o;const a=ln(n,r.schema),{$from:c,$to:d}=r.selection,h=r.selection.node;if(h&&h.isBlock||c.depth<2||!c.sameParent(d))return!1;const f=c.node(-1);if(f.type!==a)return!1;const m=i.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==a||c.index(-2)!==c.node(-2).childCount-1)return!1;if(s){let C=be.empty;const T=c.index(-1)?1:c.index(-2)?2:3;for(let I=c.depth-T;I>=c.depth-3;I-=1)C=be.from(c.node(I).copy(C));const k=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,M={...Xh(m,c.node().type.name,c.node().attrs),...e},N=((o=a.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(M))||void 0;C=C.append(be.from(a.createAndFill(null,N)||void 0));const O=c.before(c.depth-(T-1));t.replace(O,c.after(-k),new Ee(C,4-T,0));let D=-1;t.doc.nodesBetween(O,t.doc.content.size,(I,L)=>{if(D>-1)return!1;I.isTextblock&&I.content.size===0&&(D=L+1)}),D>-1&&t.setSelection(He.near(t.doc.resolve(D))),t.scrollIntoView()}return!0}const y=d.pos===c.end()?f.contentMatchAt(0).defaultType:null,v={...Xh(m,f.type.name,f.attrs),...e},w={...Xh(m,c.node().type.name,c.node().attrs),...e};t.delete(c.pos,d.pos);const S=y?[{type:a,attrs:v},{type:y,attrs:w}]:[{type:a,attrs:v}];if(!Xs(t.doc,c.pos,2))return!1;if(s){const{selection:C,storedMarks:T}=r,{splittableMarks:k}=i.extensionManager,M=T||C.$to.parentOffset&&C.$from.marks();if(t.split(c.pos,2,S).scrollIntoView(),!M||!s)return!0;const N=M.filter(O=>k.includes(O.type.name));t.ensureMarks(N)}return!0},my=(n,e)=>{const t=nx(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const s=n.doc.nodeAt(r);return t.node.type===(s==null?void 0:s.type)&&co(n.doc,t.pos)&&n.join(t.pos),!0},gy=(n,e)=>{const t=nx(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const s=n.doc.nodeAt(r);return t.node.type===(s==null?void 0:s.type)&&co(n.doc,r)&&n.join(r),!0},nz=(n,e,t,r={})=>({editor:s,tr:i,state:o,dispatch:a,chain:c,commands:d,can:h})=>{const{extensions:f,splittableMarks:m}=s.extensionManager,y=ln(n,o.schema),v=ln(e,o.schema),{selection:w,storedMarks:S}=o,{$from:C,$to:T}=w,k=C.blockRange(T),M=S||w.$to.parentOffset&&w.$from.marks();if(!k)return!1;const N=nx(O=>g1(O.type.name,f))(w);if(k.depth>=1&&N&&k.depth-N.depth<=1){if(N.node.type===y)return d.liftListItem(v);if(g1(N.node.type.name,f)&&y.validContent(N.node.content)&&a)return c().command(()=>(i.setNodeMarkup(N.pos,y),!0)).command(()=>my(i,y)).command(()=>gy(i,y)).run()}return!t||!M||!a?c().command(()=>h().wrapInList(y,r)?!0:d.clearNodes()).wrapInList(y,r).command(()=>my(i,y)).command(()=>gy(i,y)).run():c().command(()=>{const O=h().wrapInList(y,r),D=M.filter(I=>m.includes(I.type.name));return i.ensureMarks(D),O?!0:d.clearNodes()}).wrapInList(y,r).command(()=>my(i,y)).command(()=>gy(i,y)).run()},rz=(n,e={},t={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:i=!1}=t,o=ho(n,r.schema);return Nv(r,o,e)?s.unsetMark(o,{extendEmptyMarkRange:i}):s.setMark(o,e)},sz=(n,e,t={})=>({state:r,commands:s})=>{const i=ln(n,r.schema),o=ln(e,r.schema),a=yu(r,i,t);let c;return r.selection.$anchor.sameParent(r.selection.$head)&&(c=r.selection.$anchor.parent.attrs),a?s.setNode(o,c):s.setNode(i,{...c,...t})},iz=(n,e={})=>({state:t,commands:r})=>{const s=ln(n,t.schema);return yu(t,s,e)?r.lift(s):r.wrapIn(s,e)},oz=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const s=t[r];let i;if(s.spec.isInputRules&&(i=s.getState(n))){if(e){const o=n.tr,a=i.transform;for(let c=a.steps.length-1;c>=0;c-=1)o.step(a.steps[c].invert(a.docs[c]));if(i.text){const c=o.doc.resolve(i.from).marks();o.replaceWith(i.from,i.to,n.schema.text(i.text,c))}else o.delete(i.from,i.to)}return!0}}return!1},az=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:s}=t;return r||e&&s.forEach(i=>{n.removeMark(i.$from.pos,i.$to.pos)}),!0},lz=(n,e={})=>({tr:t,state:r,dispatch:s})=>{var i;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,c=ho(n,r.schema),{$from:d,empty:h,ranges:f}=a;if(!s)return!0;if(h&&o){let{from:m,to:y}=a;const v=(i=d.marks().find(S=>S.type===c))===null||i===void 0?void 0:i.attrs,w=ex(d,c,v);w&&(m=w.from,y=w.to),t.removeMark(m,y,c)}else f.forEach(m=>{t.removeMark(m.$from.pos,m.$to.pos,c)});return t.removeStoredMark(c),!0},cz=(n,e={})=>({tr:t,state:r,dispatch:s})=>{let i=null,o=null;const a=pp(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(i=ln(n,r.schema)),a==="mark"&&(o=ho(n,r.schema)),s&&t.selection.ranges.forEach(c=>{const d=c.$from.pos,h=c.$to.pos;let f,m,y,v;t.selection.empty?r.doc.nodesBetween(d,h,(w,S)=>{i&&i===w.type&&(y=Math.max(S,d),v=Math.min(S+w.nodeSize,h),f=S,m=w)}):r.doc.nodesBetween(d,h,(w,S)=>{S<d&&i&&i===w.type&&(y=Math.max(S,d),v=Math.min(S+w.nodeSize,h),f=S,m=w),S>=d&&S<=h&&(i&&i===w.type&&t.setNodeMarkup(S,void 0,{...w.attrs,...e}),o&&w.marks.length&&w.marks.forEach(C=>{if(o===C.type){const T=Math.max(S,d),k=Math.min(S+w.nodeSize,h);t.addMark(T,k,o.create({...C.attrs,...e}))}}))}),m&&(f!==void 0&&t.setNodeMarkup(f,void 0,{...m.attrs,...e}),o&&m.marks.length&&m.marks.forEach(w=>{o===w.type&&t.addMark(y,v,o.create({...w.attrs,...e}))}))}),!0):!1},uz=(n,e={})=>({state:t,dispatch:r})=>{const s=ln(n,t.schema);return kB(s,e)(t,r)},dz=(n,e={})=>({state:t,dispatch:r})=>{const s=ln(n,t.schema);return EB(s,e)(t,r)};var hz=Object.freeze({__proto__:null,blur:XB,clearContent:JB,clearNodes:ZB,command:QB,createParagraphNear:e3,cut:t3,deleteCurrentNode:n3,deleteNode:r3,deleteRange:s3,deleteSelection:i3,enter:o3,exitCode:a3,extendMarkRange:l3,first:c3,focus:d3,forEach:h3,insertContent:f3,insertContentAt:g3,joinBackward:x3,joinDown:v3,joinForward:w3,joinItemBackward:b3,joinItemForward:S3,joinTextblockBackward:C3,joinTextblockForward:_3,joinUp:y3,keyboardShortcut:k3,lift:E3,liftEmptyBlock:N3,liftListItem:A3,newlineInCode:M3,resetAttributes:O3,scrollIntoView:P3,selectAll:D3,selectNodeBackward:R3,selectNodeForward:I3,selectParentNode:j3,selectTextblockEnd:L3,selectTextblockStart:F3,setContent:V3,setMark:K3,setMeta:Y3,setNode:X3,setNodeSelection:J3,setTextSelection:Z3,sinkListItem:Q3,splitBlock:ez,splitListItem:tz,toggleList:nz,toggleMark:rz,toggleNode:sz,toggleWrap:iz,undoInputRule:oz,unsetAllMarks:az,unsetMark:lz,updateAttributes:cz,wrapIn:uz,wrapInList:dz});const fz=xn.create({name:"commands",addCommands(){return{...hz}}}),pz=xn.create({name:"drop",addProseMirrorPlugins(){return[new $n({key:new ns("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),mz=xn.create({name:"editable",addProseMirrorPlugins(){return[new $n({key:new ns("editable"),props:{editable:()=>this.editor.options.editable}})]}}),gz=xn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new $n({key:new ns("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),yz=xn.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:c,doc:d}=a,{empty:h,$anchor:f}=c,{pos:m,parent:y}=f,v=f.parent.isTextblock&&m>0?a.doc.resolve(m-1):f,w=v.parent.type.spec.isolating,S=f.pos-f.parentOffset,C=w&&v.parent.childCount===1?S===f.pos:Ke.atStart(d).from===m;return!h||!y.type.isTextblock||y.textContent.length||!C||C&&f.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},i={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return tx()||sA()?i:s},addProseMirrorPlugins(){return[new $n({key:new ns("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(w=>w.getMeta("composition")))return;const r=n.some(w=>w.docChanged)&&!e.doc.eq(t.doc),s=n.some(w=>w.getMeta("preventClearDocument"));if(!r||s)return;const{empty:i,from:o,to:a}=e.selection,c=Ke.atStart(e.doc).from,d=Ke.atEnd(e.doc).to;if(i||!(o===c&&a===d)||!rx(t.doc))return;const m=t.tr,y=cp({state:t,transaction:m}),{commands:v}=new up({editor:this.editor,state:y});if(v.clearNodes(),!!m.steps.length)return m}})]}}),vz=xn.create({name:"paste",addProseMirrorPlugins(){return[new $n({key:new ns("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),xz=xn.create({name:"tabindex",addProseMirrorPlugins(){return[new $n({key:new ns("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class jo{get name(){return this.node.type.name}constructor(e,t,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=s}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new jo(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new jo(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new jo(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const s=t.isBlock&&!t.isTextblock,i=t.isAtom&&!t.isText,o=this.pos+r+(i?0:1),a=this.resolvedPos.doc.resolve(o);if(!s&&a.depth<=this.depth)return;const c=new jo(a,this.editor,s,s?t:null);s&&(c.actualDepth=this.depth+1),e.push(new jo(a,this.editor,s,s?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===e)if(Object.keys(t).length>0){const i=s.node.attrs,o=Object.keys(t);for(let a=0;a<o.length;a+=1){const c=o[a];if(i[c]!==t[c])break}}else r=s;s=s.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const i=Object.keys(t);return this.children.forEach(o=>{r&&s.length>0||(o.node.type.name===e&&i.every(c=>t[c]===o.node.attrs[c])&&s.push(o),!(r&&s.length>0)&&(s=s.concat(o.querySelectorAll(e,t,r))))}),s}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const wz=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function bz(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(s),s}class Sz extends RB{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:r,moved:s})=>this.options.onDrop(t,r,s)),this.on("paste",({event:t,slice:r})=>this.options.onPaste(t,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=bz(wz,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=JN(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(i=>{const o=typeof i=="string"?`${i}$`:i.key;r=t.filter(a=>!a.key.startsWith(o))}),t.length===r.length)return;const s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}createExtensionManager(){var e,t;const s=[...this.options.enableCoreExtensions?[mz,YB.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),fz,gz,yz,xz,pz,vz].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new Ha(s,this)}createCommandManager(){this.commandManager=new up({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=Ev(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(o){if(!(o instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(o.message))throw o;this.emit("contentError",{editor:this,error:o,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),t=Ev(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=nA(t,this.options.autofocus);this.view=new sB(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:$a.create({doc:t,selection:r||void 0})});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const s=e.getMeta("focus"),i=e.getMeta("blur");s&&this.emit("focus",{editor:this,event:s.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return H3(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,s=typeof e=="string"?t:e;return U3(this.state,r,s)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Z0(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return W3(this.state.doc,{blockSeparator:t,textSerializers:{...QN(this.schema),...r}})}get isEmpty(){return rx(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new jo(t,this)}get $doc(){return this.$pos(0)}}function ml(n){return new hp({find:n.find,handler:({state:e,range:t,match:r})=>{const s=et(n.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:i}=e,o=r[r.length-1],a=r[0];if(o){const c=a.search(/\S/),d=t.from+a.indexOf(o),h=d+o.length;if(oA(t.from,t.to,e.doc).filter(y=>y.mark.type.excluded.find(w=>w===n.type&&w!==y.mark.type)).filter(y=>y.to>d).length)return null;h<t.to&&i.delete(h,t.to),d>t.from&&i.delete(t.from+c,d);const m=t.from+c+o.length;i.addMark(t.from+c,m,n.type.create(s||{})),i.removeStoredMark(n.type)}}})}function Cz(n){return new hp({find:n.find,handler:({state:e,range:t,match:r})=>{const s=et(n.getAttributes,void 0,r)||{},{tr:i}=e,o=t.from;let a=t.to;const c=n.type.create(s);if(r[1]){const d=r[0].lastIndexOf(r[1]);let h=o+d;h>a?h=a:a=h+r[1].length;const f=r[0][r[0].length-1];i.insertText(f,o+r[0].length-1),i.replaceWith(h,a,c)}else if(r[0]){const d=n.type.isInline?o:o-1;i.insert(d,n.type.create(s)).delete(i.mapping.map(o),i.mapping.map(a))}i.scrollIntoView()}})}function Av(n){return new hp({find:n.find,handler:({state:e,range:t,match:r})=>{const s=e.doc.resolve(t.from),i=et(n.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,i)}})}function gl(n){return new hp({find:n.find,handler:({state:e,range:t,match:r,chain:s})=>{const i=et(n.getAttributes,void 0,r)||{},o=e.tr.delete(t.from,t.to),c=o.doc.resolve(t.from).blockRange(),d=c&&j0(c,n.type,i);if(!d)return null;if(o.wrap(c,d),n.keepMarks&&n.editor){const{selection:f,storedMarks:m}=e,{splittableMarks:y}=n.editor.extensionManager,v=m||f.$to.parentOffset&&f.$from.marks();if(v){const w=v.filter(S=>y.includes(S.type.name));o.ensureMarks(w)}}if(n.keepAttributes){const f=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(f,i).run()}const h=o.doc.resolve(t.from-1).nodeBefore;h&&h.type===n.type&&co(o.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,h))&&o.join(t.from-1)}})}let yr=class Mv{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=et(Oe(this,"addOptions",{name:this.name}))),this.storage=et(Oe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Mv(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>fp(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Mv(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=et(Oe(t,"addOptions",{name:t.name})),t.storage=et(Oe(t,"addStorage",{name:t.name,options:t.options})),t}};function yl(n){return new $B({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:s})=>{const i=et(n.getAttributes,void 0,r,s);if(i===!1||i===null)return null;const{tr:o}=e,a=r[r.length-1],c=r[0];let d=t.to;if(a){const h=c.search(/\S/),f=t.from+c.indexOf(a),m=f+a.length;if(oA(t.from,t.to,e.doc).filter(v=>v.mark.type.excluded.find(S=>S===n.type&&S!==v.mark.type)).filter(v=>v.to>f).length)return null;m<t.to&&o.delete(m,t.to),f>t.from&&o.delete(t.from+h,f),d=t.from+h+a.length,o.addMark(t.from+h,d,n.type.create(i||{})),o.removeStoredMark(n.type)}}})}function _z(n){return n.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}var zu=vE();const aA=D0(zu);function Tz(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var lA={exports:{}},yy={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v1;function kz(){if(v1)return yy;v1=1;var n=Ct;function e(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,s=n.useEffect,i=n.useLayoutEffect,o=n.useDebugValue;function a(f,m){var y=m(),v=r({inst:{value:y,getSnapshot:m}}),w=v[0].inst,S=v[1];return i(function(){w.value=y,w.getSnapshot=m,c(w)&&S({inst:w})},[f,y,m]),s(function(){return c(w)&&S({inst:w}),f(function(){c(w)&&S({inst:w})})},[f]),o(y),y}function c(f){var m=f.getSnapshot;f=f.value;try{var y=m();return!t(f,y)}catch{return!0}}function d(f,m){return m()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:a;return yy.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:h,yy}lA.exports=kz();var sx=lA.exports;const Ez=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},Nz=({contentComponent:n})=>{const e=sx.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return Ct.createElement(Ct.Fragment,null,Object.values(e))};function Az(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,r){e={...e,[t]:aA.createPortal(r.reactElement,r.element,t)},n.forEach(s=>s())},removeRenderer(t){const r={...e};delete r[t],e=r,n.forEach(s=>s())}}}class Mz extends Ct.Component{constructor(e){var t;super(e),this.editorContentRef=Ct.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((t=e.editor)===null||t===void 0)&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=Az(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...r}=this.props;return Ct.createElement(Ct.Fragment,null,Ct.createElement("div",{ref:Ez(t,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&Ct.createElement(Nz,{contentComponent:e.contentComponent}))}}const Oz=b.forwardRef((n,e)=>{const t=Ct.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return Ct.createElement(Mz,{key:t,innerRef:e,...n})}),Pz=Ct.memo(Oz);var Dz=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,s,i;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(s=r;s--!==0;)if(!n(e[s],t[s]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(s of e.entries())if(!t.has(s[0]))return!1;for(s of e.entries())if(!n(s[1],t.get(s[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(s of e.entries())if(!t.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(s=r;s--!==0;)if(e[s]!==t[s])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[s]))return!1;for(s=r;s--!==0;){var o=i[s];if(!(o==="_owner"&&e.$$typeof)&&!n(e[o],t[o]))return!1}return!0}return e!==e&&t!==t},Rz=Tz(Dz),cA={exports:{}},vy={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x1;function Iz(){if(x1)return vy;x1=1;var n=Ct,e=sx;function t(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,i=n.useRef,o=n.useEffect,a=n.useMemo,c=n.useDebugValue;return vy.useSyncExternalStoreWithSelector=function(d,h,f,m,y){var v=i(null);if(v.current===null){var w={hasValue:!1,value:null};v.current=w}else w=v.current;v=a(function(){function C(O){if(!T){if(T=!0,k=O,O=m(O),y!==void 0&&w.hasValue){var D=w.value;if(y(D,O))return M=D}return M=O}if(D=M,r(k,O))return D;var I=m(O);return y!==void 0&&y(D,I)?D:(k=O,M=I)}var T=!1,k,M,N=f===void 0?null:f;return[function(){return C(h())},N===null?void 0:function(){return C(N())}]},[h,f,m,y]);var S=s(d,v[0],v[1]);return o(function(){w.hasValue=!0,w.value=S},[S]),c(S),S},vy}cA.exports=Iz();var jz=cA.exports;const Lz=typeof window<"u"?b.useLayoutEffect:b.useEffect;class Fz{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(s=>s())},r=this.editor;return r.on("transaction",t),()=>{r.off("transaction",t)}}}}function Vz(n){var e;const[t]=b.useState(()=>new Fz(n.editor)),r=jz.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!==null&&e!==void 0?e:Rz);return Lz(()=>t.watch(n.editor),[n.editor,t]),b.useDebugValue(r),r}const Bz=!1,Ov=typeof window>"u",zz=Ov||!!(typeof window<"u"&&window.next);class ix{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Ov||zz?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var s,i;return(i=(s=this.options.current).onBeforeCreate)===null||i===void 0?void 0:i.call(s,...r)},onBlur:(...r)=>{var s,i;return(i=(s=this.options.current).onBlur)===null||i===void 0?void 0:i.call(s,...r)},onCreate:(...r)=>{var s,i;return(i=(s=this.options.current).onCreate)===null||i===void 0?void 0:i.call(s,...r)},onDestroy:(...r)=>{var s,i;return(i=(s=this.options.current).onDestroy)===null||i===void 0?void 0:i.call(s,...r)},onFocus:(...r)=>{var s,i;return(i=(s=this.options.current).onFocus)===null||i===void 0?void 0:i.call(s,...r)},onSelectionUpdate:(...r)=>{var s,i;return(i=(s=this.options.current).onSelectionUpdate)===null||i===void 0?void 0:i.call(s,...r)},onTransaction:(...r)=>{var s,i;return(i=(s=this.options.current).onTransaction)===null||i===void 0?void 0:i.call(s,...r)},onUpdate:(...r)=>{var s,i;return(i=(s=this.options.current).onUpdate)===null||i===void 0?void 0:i.call(s,...r)},onContentError:(...r)=>{var s,i;return(i=(s=this.options.current).onContentError)===null||i===void 0?void 0:i.call(s,...r)},onDrop:(...r)=>{var s,i;return(i=(s=this.options.current).onDrop)===null||i===void 0?void 0:i.call(s,...r)},onPaste:(...r)=>{var s,i;return(i=(s=this.options.current).onPaste)===null||i===void 0?void 0:i.call(s,...r)}};return new Sz(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((s,i)=>{var o;return s===((o=t.extensions)===null||o===void 0?void 0:o[i])}):e[r]===t[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?ix.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,s)=>r===e[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function Wz(n={},e=[]){const t=b.useRef(n);t.current=n;const[r]=b.useState(()=>new ix(t)),s=sx.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return b.useDebugValue(s),b.useEffect(r.onRender(e)),Vz({editor:s,selector:({transactionNumber:i})=>n.shouldRerenderOnTransaction===!1?null:n.immediatelyRender&&i===0?0:i+1}),s}const $z=b.createContext({editor:null});$z.Consumer;const Hz=b.createContext({onDragStart:void 0}),Uz=()=>b.useContext(Hz);Ct.forwardRef((n,e)=>{const{onDragStart:t}=Uz(),r=n.as||"div";return Ct.createElement(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});const qz=/^\s*>\s$/,Gz=yr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",cn(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[gl({find:qz,type:this.type})]}}),Kz=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Yz=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Xz=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Jz=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Zz=ni.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",cn(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ml({find:Kz,type:this.type}),ml({find:Xz,type:this.type})]},addPasteRules(){return[yl({find:Yz,type:this.type}),yl({find:Jz,type:this.type})]}}),Qz="listItem",w1="textStyle",b1=/^\s*([-+*])\s$/,eW=yr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",cn(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Qz,this.editor.getAttributes(w1)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=gl({find:b1,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=gl({find:b1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(w1),editor:this.editor})),[n]}}),tW=/(^|[^`])`([^`]+)`(?!`)/,nW=/(^|[^`])`([^`]+)`(?!`)/g,rW=ni.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",cn(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ml({find:tW,type:this.type})]},addPasteRules(){return[yl({find:nW,type:this.type})]}}),sW=/^```([a-z]+)?[\s\n]$/,iW=/^~~~([a-z]+)?[\s\n]$/,oW=yr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,i=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(t)).map(o=>o.replace(t,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",cn(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:s}=t;if(!s||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!i||!o?!1:n.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:s,empty:i}=t;if(!i||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const a=s.after();return a===void 0?!1:r.nodeAt(a)?n.commands.command(({tr:d})=>(d.setSelection(Ke.near(r.resolve(a))),!0)):n.commands.exitCode()}}},addInputRules(){return[Av({find:sW,type:this.type,getAttributes:n=>({language:n[1]})}),Av({find:iW,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new $n({key:new ns("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,i=s==null?void 0:s.mode;if(!t||!i)return!1;const{tr:o,schema:a}=n.state,c=a.text(t.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:i},c)),o.selection.$from.parent.type!==this.type&&o.setSelection(He.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),n.dispatch(o),!0}}})]}}),aW=yr.create({name:"doc",topNode:!0,content:"block+"});function lW(n={}){return new $n({view(e){return new cW(e,n)}})}class cW{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let i=o=>{this[s](o)};return e.dom.addEventListener(s,i),{name:s,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r;if(t){let a=e.nodeBefore,c=e.nodeAfter;if(a||c){let d=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(d){let h=d.getBoundingClientRect(),f=a?h.bottom:h.top;a&&c&&(f=(f+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:h.left,right:h.right,top:f-this.width/2,bottom:f+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let s=this.editorView.dom.offsetParent;this.element||(this.element=s.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let i,o;if(!s||s==document.body&&getComputedStyle(s).position=="static")i=-pageXOffset,o=-pageYOffset;else{let a=s.getBoundingClientRect();i=a.left-s.scrollLeft,o=a.top-s.scrollTop}this.element.style.left=r.left-i+"px",this.element.style.top=r.top-o+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),s=r&&r.type.spec.disableDropCursor,i=typeof s=="function"?s(this.editorView,t,e):s;if(t&&!i){let o=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=JE(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const uW=xn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[lW(this.options)]}});class Rt extends Ke{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return Rt.valid(r)?new Rt(r):Ke.near(r)}content(){return Ee.empty}eq(e){return e instanceof Rt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Rt(e.resolve(t.pos))}getBookmark(){return new ox(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!dW(e)||!hW(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let s=t.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&Rt.valid(e))return e;let s=e.pos,i=null;for(let o=e.depth;;o--){let a=e.node(o);if(t>0?e.indexAfter(o)<a.childCount:e.index(o)>0){i=a.child(t>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;s+=t;let c=e.doc.resolve(s);if(Rt.valid(c))return c}for(;;){let o=t>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!Fe.isSelectable(i)){e=e.doc.resolve(s+i.nodeSize*t),r=!1;continue e}break}i=o,s+=t;let a=e.doc.resolve(s);if(Rt.valid(a))return a}return null}}}Rt.prototype.visible=!1;Rt.findFrom=Rt.findGapCursorFrom;Ke.jsonID("gapcursor",Rt);class ox{constructor(e){this.pos=e}map(e){return new ox(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Rt.valid(t)?new Rt(t):Ke.near(t)}}function dW(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(t-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function hW(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(t);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function fW(){return new $n({props:{decorations:yW,createSelectionBetween(n,e,t){return e.pos==t.pos&&Rt.valid(t)?new Rt(t):null},handleClick:mW,handleKeyDown:pW,handleDOMEvents:{beforeinput:gW}}})}const pW=LN({ArrowLeft:Mh("horiz",-1),ArrowRight:Mh("horiz",1),ArrowUp:Mh("vert",-1),ArrowDown:Mh("vert",1)});function Mh(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,s,i){let o=r.selection,a=e>0?o.$to:o.$from,c=o.empty;if(o instanceof He){if(!i.endOfTextblock(t)||a.depth==0)return!1;c=!1,a=r.doc.resolve(e>0?a.after():a.before())}let d=Rt.findGapCursorFrom(a,e,c);return d?(s&&s(r.tr.setSelection(new Rt(d))),!0):!1}}function mW(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!Rt.valid(r))return!1;let s=n.posAtCoords({left:t.clientX,top:t.clientY});return s&&s.inside>-1&&Fe.isSelectable(n.state.doc.nodeAt(s.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Rt(r))),!0)}function gW(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Rt))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let s=be.empty;for(let o=r.length-1;o>=0;o--)s=be.from(r[o].createAndFill(null,s));let i=n.state.tr.replace(t.pos,t.pos,new Ee(s,0,0));return i.setSelection(He.near(i.doc.resolve(t.pos+1))),n.dispatch(i),!1}function yW(n){if(!(n.selection instanceof Rt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ht.create(n.doc,[dr.widget(n.selection.head,e,{key:"gapcursor"})])}const vW=xn.create({name:"gapCursor",addProseMirrorPlugins(){return[fW()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=et(Oe(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),xW=yr.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",cn(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:s,storedMarks:i}=t;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,c=i||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:d,dispatch:h})=>{if(h&&c&&o){const f=c.filter(m=>a.includes(m.type.name));d.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),wW=yr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,cn(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Av({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var Cf=200,on=function(){};on.prototype.append=function(e){return e.length?(e=on.from(e),!this.length&&e||e.length<Cf&&this.leafAppend(e)||this.length<Cf&&e.leafPrepend(this)||this.appendInner(e)):this};on.prototype.prepend=function(e){return e.length?on.from(e).append(this):this};on.prototype.appendInner=function(e){return new bW(this,e)};on.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?on.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};on.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};on.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};on.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(i,o){return s.push(e(i,o))},t,r),s};on.from=function(e){return e instanceof on?e:e&&e.length?new uA(e):on.empty};var uA=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,i){return s==0&&i==this.length?this:new e(this.values.slice(s,i))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,i,o,a){for(var c=i;c<o;c++)if(s(this.values[c],a+c)===!1)return!1},e.prototype.forEachInvertedInner=function(s,i,o,a){for(var c=i-1;c>=o;c--)if(s(this.values[c],a+c)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=Cf)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=Cf)return new e(s.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(on);on.empty=new uA([]);var bW=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,s,i,o){var a=this.left.length;if(s<a&&this.left.forEachInner(r,s,Math.min(i,a),o)===!1||i>a&&this.right.forEachInner(r,Math.max(s-a,0),Math.min(this.length,i)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,i,o){var a=this.left.length;if(s>a&&this.right.forEachInvertedInner(r,s-a,Math.max(i,a)-a,o+a)===!1||i<a&&this.left.forEachInvertedInner(r,Math.min(s,a),i,o)===!1)return!1},e.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var i=this.left.length;return s<=i?this.left.slice(r,s):r>=i?this.right.slice(r-i,s-i):this.left.slice(r,i).append(this.right.slice(0,s-i))},e.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new e(s,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(on);const SW=500;class Kr{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,i;t&&(s=this.remapping(r,this.items.length),i=s.maps.length);let o=e.tr,a,c,d=[],h=[];return this.items.forEach((f,m)=>{if(!f.step){s||(s=this.remapping(r,m+1),i=s.maps.length),i--,h.push(f);return}if(s){h.push(new Pi(f.map));let y=f.step.map(s.slice(i)),v;y&&o.maybeStep(y).doc&&(v=o.mapping.maps[o.mapping.maps.length-1],d.push(new Pi(v,void 0,void 0,d.length+h.length))),i--,v&&s.appendMap(v,i)}else o.maybeStep(f.step);if(f.selection)return a=s?f.selection.map(s.slice(i)):f.selection,c=new Kr(this.items.slice(0,r).append(h.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:o,selection:a}}addTransform(e,t,r,s){let i=[],o=this.eventCount,a=this.items,c=!s&&a.length?a.get(a.length-1):null;for(let h=0;h<e.steps.length;h++){let f=e.steps[h].invert(e.docs[h]),m=new Pi(e.mapping.maps[h],f,t),y;(y=c&&c.merge(m))&&(m=y,h?i.pop():a=a.slice(0,a.length-1)),i.push(m),t&&(o++,t=void 0),s||(c=m)}let d=o-r.depth;return d>_W&&(a=CW(a,d),o-=d),new Kr(a.append(i),o)}remapping(e,t){let r=new tl;return this.items.forEach((s,i)=>{let o=s.mirrorOffset!=null&&i-s.mirrorOffset>=e?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,o)},e,t),r}addMaps(e){return this.eventCount==0?this:new Kr(this.items.append(e.map(t=>new Pi(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-t),i=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(m=>{m.selection&&a--},s);let c=t;this.items.forEach(m=>{let y=i.getMirror(--c);if(y==null)return;o=Math.min(o,y);let v=i.maps[y];if(m.step){let w=e.steps[y].invert(e.docs[y]),S=m.selection&&m.selection.map(i.slice(c+1,y));S&&a++,r.push(new Pi(v,w,S))}else r.push(new Pi(v))},s);let d=[];for(let m=t;m<o;m++)d.push(new Pi(i.maps[m]));let h=this.items.slice(0,s).append(d).append(r),f=new Kr(h,a);return f.emptyItemCount()>SW&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,s=[],i=0;return this.items.forEach((o,a)=>{if(a>=e)s.push(o),o.selection&&i++;else if(o.step){let c=o.step.map(t.slice(r)),d=c&&c.getMap();if(r--,d&&t.appendMap(d,r),c){let h=o.selection&&o.selection.map(t.slice(r));h&&i++;let f=new Pi(d.invert(),c,h),m,y=s.length-1;(m=s.length&&s[y].merge(f))?s[y]=m:s.push(f)}}else o.map&&r--},this.items.length,0),new Kr(on.from(s.reverse()),i)}}Kr.empty=new Kr(on.empty,0);function CW(n,e){let t;return n.forEach((r,s)=>{if(r.selection&&e--==0)return t=s,!1}),n.slice(t)}let Pi=class dA{constructor(e,t,r,s){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new dA(t.getMap().invert(),t,this.selection)}}};class Wi{constructor(e,t,r,s,i){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=s,this.prevComposition=i}}const _W=20;function TW(n,e,t,r){let s=t.getMeta(Uo),i;if(s)return s.historyState;t.getMeta(NW)&&(n=new Wi(n.done,n.undone,null,0,-1));let o=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(o&&o.getMeta(Uo))return o.getMeta(Uo).redo?new Wi(n.done.addTransform(t,void 0,r,Jh(e)),n.undone,S1(t.mapping.maps),n.prevTime,n.prevComposition):new Wi(n.done,n.undone.addTransform(t,void 0,r,Jh(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=t.getMeta("composition"),c=n.prevTime==0||!o&&n.prevComposition!=a&&(n.prevTime<(t.time||0)-r.newGroupDelay||!kW(t,n.prevRanges)),d=o?xy(n.prevRanges,t.mapping):S1(t.mapping.maps);return new Wi(n.done.addTransform(t,c?e.selection.getBookmark():void 0,r,Jh(e)),Kr.empty,d,t.time,a??n.prevComposition)}else return(i=t.getMeta("rebased"))?new Wi(n.done.rebased(t,i),n.undone.rebased(t,i),xy(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new Wi(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),xy(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function kW(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,s)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&s>=e[i]&&(t=!0)}),t}function S1(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,s,i,o)=>e.push(i,o));return e}function xy(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let s=e.map(n[r],1),i=e.map(n[r+1],-1);s<=i&&t.push(s,i)}return t}function EW(n,e,t){let r=Jh(e),s=Uo.get(e).spec.config,i=(t?n.undone:n.done).popEvent(e,r);if(!i)return null;let o=i.selection.resolve(i.transform.doc),a=(t?n.done:n.undone).addTransform(i.transform,e.selection.getBookmark(),s,r),c=new Wi(t?a:i.remaining,t?i.remaining:a,null,0,-1);return i.transform.setSelection(o).setMeta(Uo,{redo:t,historyState:c})}let wy=!1,C1=null;function Jh(n){let e=n.plugins;if(C1!=e){wy=!1,C1=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){wy=!0;break}}return wy}const Uo=new ns("history"),NW=new ns("closeHistory");function AW(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new $n({key:Uo,state:{init(){return new Wi(Kr.empty,Kr.empty,null,0,-1)},apply(e,t,r){return TW(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,s=r=="historyUndo"?fA:r=="historyRedo"?pA:null;return s?(t.preventDefault(),s(e.state,e.dispatch)):!1}}}})}function hA(n,e){return(t,r)=>{let s=Uo.getState(t);if(!s||(n?s.undone:s.done).eventCount==0)return!1;if(r){let i=EW(s,t,n);i&&r(e?i.scrollIntoView():i)}return!0}}const fA=hA(!1,!0),pA=hA(!0,!0),MW=xn.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>fA(n,e),redo:()=>({state:n,dispatch:e})=>pA(n,e)}},addProseMirrorPlugins(){return[AW(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),OW=yr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",cn(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{selection:t}=e,{$from:r,$to:s}=t,i=n();return r.parentOffset===0?i.insertContentAt({from:Math.max(r.pos-1,0),to:s.pos},{type:this.name}):q3(t)?i.insertContentAt(s.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:o,dispatch:a})=>{var c;if(a){const{$to:d}=o.selection,h=d.end();if(d.nodeAfter)d.nodeAfter.isTextblock?o.setSelection(He.create(o.doc,d.pos+1)):d.nodeAfter.isBlock?o.setSelection(Fe.create(o.doc,d.pos)):o.setSelection(He.create(o.doc,d.pos));else{const f=(c=d.parent.type.contentMatch.defaultType)===null||c===void 0?void 0:c.create();f&&(o.insert(h,f),o.setSelection(He.create(o.doc,h+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Cz({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),PW=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,DW=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,RW=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,IW=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,jW=ni.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",cn(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ml({find:PW,type:this.type}),ml({find:RW,type:this.type})]},addPasteRules(){return[yl({find:DW,type:this.type}),yl({find:IW,type:this.type})]}}),LW=yr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",cn(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),FW="listItem",_1="textStyle",T1=/^(\d+)\.\s$/,VW=yr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",cn(this.options.HTMLAttributes,t),0]:["ol",cn(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(FW,this.editor.getAttributes(_1)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=gl({find:T1,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=gl({find:T1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(_1)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),BW=yr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",cn(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),zW=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,WW=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,$W=ni.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",cn(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ml({find:zW,type:this.type})]},addPasteRules(){return[yl({find:WW,type:this.type})]}}),HW=yr.create({name:"text",group:"inline"}),UW=xn.create({name:"starterKit",addExtensions(){var n,e,t,r,s,i,o,a,c,d,h,f,m,y,v,w,S,C;const T=[];return this.options.bold!==!1&&T.push(Zz.configure((n=this.options)===null||n===void 0?void 0:n.bold)),this.options.blockquote!==!1&&T.push(Gz.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&T.push(eW.configure((t=this.options)===null||t===void 0?void 0:t.bulletList)),this.options.code!==!1&&T.push(rW.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&T.push(oW.configure((s=this.options)===null||s===void 0?void 0:s.codeBlock)),this.options.document!==!1&&T.push(aW.configure((i=this.options)===null||i===void 0?void 0:i.document)),this.options.dropcursor!==!1&&T.push(uW.configure((o=this.options)===null||o===void 0?void 0:o.dropcursor)),this.options.gapcursor!==!1&&T.push(vW.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&T.push(xW.configure((c=this.options)===null||c===void 0?void 0:c.hardBreak)),this.options.heading!==!1&&T.push(wW.configure((d=this.options)===null||d===void 0?void 0:d.heading)),this.options.history!==!1&&T.push(MW.configure((h=this.options)===null||h===void 0?void 0:h.history)),this.options.horizontalRule!==!1&&T.push(OW.configure((f=this.options)===null||f===void 0?void 0:f.horizontalRule)),this.options.italic!==!1&&T.push(jW.configure((m=this.options)===null||m===void 0?void 0:m.italic)),this.options.listItem!==!1&&T.push(LW.configure((y=this.options)===null||y===void 0?void 0:y.listItem)),this.options.orderedList!==!1&&T.push(VW.configure((v=this.options)===null||v===void 0?void 0:v.orderedList)),this.options.paragraph!==!1&&T.push(BW.configure((w=this.options)===null||w===void 0?void 0:w.paragraph)),this.options.strike!==!1&&T.push($W.configure((S=this.options)===null||S===void 0?void 0:S.strike)),this.options.text!==!1&&T.push(HW.configure((C=this.options)===null||C===void 0?void 0:C.text)),T}}),qW=ni.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",cn(this.options.HTMLAttributes,n),0]},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),GW=xn.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:n=>{const e=n.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:n=>n.textAlign?{style:`text-align: ${n.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:n=>({commands:e})=>this.options.alignments.includes(n)?this.options.types.map(t=>e.updateAttributes(t,{textAlign:n})).every(t=>t):!1,unsetTextAlign:()=>({commands:n})=>this.options.types.map(e=>n.resetAttributes(e,"textAlign")).every(e=>e)}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),KW=yr.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:n}){return["ul",cn(this.options.HTMLAttributes,n,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:n})=>n.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}}),YW=/^\s*(\[([( |x])?\])\s$/,XW=yr.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList"}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:n=>{const e=n.getAttribute("data-checked");return e===""||e==="true"},renderHTML:n=>({"data-checked":n.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:n,HTMLAttributes:e}){return["li",cn(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:n.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const n={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...n,Tab:()=>this.editor.commands.sinkListItem(this.name)}:n},addNodeView(){return({node:n,HTMLAttributes:e,getPos:t,editor:r})=>{const s=document.createElement("li"),i=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),c=document.createElement("div");return i.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",d=>d.preventDefault()),a.addEventListener("change",d=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:h}=d.target;r.isEditable&&typeof t=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:f})=>{const m=t();if(typeof m!="number")return!1;const y=f.doc.nodeAt(m);return f.setNodeMarkup(m,void 0,{...y==null?void 0:y.attrs,checked:h}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(n,h)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([d,h])=>{s.setAttribute(d,h)}),s.dataset.checked=n.attrs.checked,a.checked=n.attrs.checked,i.append(a,o),s.append(i,c),Object.entries(e).forEach(([d,h])=>{s.setAttribute(d,h)}),{dom:s,contentDOM:c,update:d=>d.type!==this.type?!1:(s.dataset.checked=d.attrs.checked,a.checked=d.attrs.checked,!0)}}},addInputRules(){return[gl({find:YW,type:this.type,getAttributes:n=>({checked:n[n.length-1]==="x"})})]}}),JW=({appId:n})=>{const e=Yte(n),t=am(n),r={...e.position};r.x+e.size.width>window.innerWidth&&(r.x=Math.max(0,window.innerWidth-e.size.width));const[s,i]=b.useState(r),[o,a]=b.useState(e.size),[c,d]=b.useState(!1),[h,f]=b.useState({x:0,y:0}),[m,y]=b.useState(""),[v,w]=b.useState({x:0,y:0,width:0,height:0,left:0,top:0}),S=window.innerWidth<768,{play:C}=pt(ut.WINDOW_MOVE_MOVING),{play:T}=pt(ut.WINDOW_MOVE_STOP),{play:k}=pt(ut.WINDOW_RESIZE_RESIZING),{play:M}=pt(ut.WINDOW_RESIZE_STOP),N=b.useRef(null),O=b.useRef(null),D=b.useCallback(A=>{const F=window.innerHeight-30,U=A?typeof A=="string"?parseInt(A):A:F,B=Math.min(F,U);a(q=>({...q,height:B})),i(q=>({...q,y:30}))},[]),I=b.useCallback(A=>{const V=A.currentTarget.getBoundingClientRect(),F="touches"in A?A.touches[0].clientX:A.clientX,U="touches"in A?A.touches[0].clientY:A.clientY;f({x:F-V.left,y:U-V.top}),d(!0)},[]),L=b.useCallback((A,V)=>{var K,G;if(S&&!V.match(/^[ns]$/))return;A.stopPropagation(),A.preventDefault();const U=((G=(K=A.currentTarget.parentElement)==null?void 0:K.parentElement)==null?void 0:G.parentElement).getBoundingClientRect(),B="touches"in A?A.touches[0].clientX:A.clientX,q="touches"in A?A.touches[0].clientY:A.clientY;w({x:B,y:q,width:U.width,height:U.height,left:s.x,top:s.y}),y(V)},[s,S]);return b.useEffect(()=>{const A=F=>{var U,B;if(c){const q="touches"in F?F.touches[0].clientX:F.clientX,K="touches"in F?F.touches[0].clientY:F.clientY,G=q-h.x,$=K-h.y,z=30;if(N.current||(C(),N.current=setInterval(C,300)),S)i({x:0,y:Math.max(z,$)});else{const W=window.innerWidth-o.width,P=window.innerHeight-o.height,j=Math.min(Math.max(0,G),W),J=Math.min(Math.max(z,$),P);i({x:j,y:J})}}if(m&&(m.match(/^[ns]$/)||!S)){F.preventDefault();const q="touches"in F?F.touches[0].clientX:F.clientX,K="touches"in F?F.touches[0].clientY:F.clientY,G=q-v.x,$=K-v.y,z=((U=t.minSize)==null?void 0:U.width)||260,W=((B=t.minSize)==null?void 0:B.height)||200,P=window.innerWidth,j=window.innerHeight,J=30;let te=v.width,ne=v.height,ue=v.left,ce=v.top;if(!S){if(m.includes("e")){const ae=P-v.left;te=Math.min(Math.max(v.width+G,z),ae)}else if(m.includes("w")){const ae=v.width+v.left,xe=Math.min(Math.max(v.width-G,z),ae);xe!==v.width&&(ue=Math.max(0,v.left+(v.width-xe)),te=xe)}}if(m.includes("s")){const ae=j-v.top;ne=Math.min(Math.max(v.height+$,W),ae)}else if(m.includes("n")&&!S){const ae=v.height+(v.top-J),xe=Math.min(Math.max(v.height-$,W),ae);xe!==v.height&&(ce=Math.max(J,Math.min(v.top+(v.height-xe),j-W)),ne=xe)}S&&(te=window.innerWidth,ue=0),a({width:te,height:ne}),i({x:ue,y:Math.max(J,ce)}),!O.current&&(Math.abs(G)>2||Math.abs($)>2)&&(k(),O.current=setInterval(k,300))}},V=()=>{c&&(d(!1),uE(n,{position:s,size:o}),N.current&&(clearInterval(N.current),N.current=null,T())),m&&(y(""),uE(n,{position:s,size:o}),O.current&&(clearInterval(O.current),O.current=null,M()))};return(c||m)&&(document.addEventListener("mousemove",A),document.addEventListener("mouseup",V),document.addEventListener("touchmove",A),document.addEventListener("touchend",V)),()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",V),document.removeEventListener("touchmove",A),document.removeEventListener("touchend",V),N.current&&clearInterval(N.current),O.current&&clearInterval(O.current)}},[c,h,m,v,s,o,n,S,T,M,t]),{windowPosition:s,windowSize:o,isDragging:c,resizeType:m,handleMouseDown:I,handleResizeStart:L,setWindowSize:a,setWindowPosition:i,maximizeWindowHeight:D}},ax="-",ZW=n=>{const e=e$(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:o=>{const a=o.split(ax);return a[0]===""&&a.length!==1&&a.shift(),mA(a,e)||QW(o)},getConflictingClassGroupIds:(o,a)=>{const c=t[o]||[];return a&&r[o]?[...c,...r[o]]:c}}},mA=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?mA(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=n.join(ax);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},k1=/^\[(.+)\]$/,QW=n=>{if(k1.test(n)){const e=k1.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},e$=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return n$(Object.entries(n.classGroups),t).forEach(([i,o])=>{Pv(o,r,i,e)}),r},Pv=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const i=s===""?e:E1(e,s);i.classGroupId=t;return}if(typeof s=="function"){if(t$(s)){Pv(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([i,o])=>{Pv(o,E1(e,i),t,r)})})},E1=(n,e)=>{let t=n;return e.split(ax).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},t$=n=>n.isThemeGetter,n$=(n,e)=>e?n.map(([t,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[t,s]}):n,r$=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(i,o)=>{t.set(i,o),e++,e>n&&(e=0,r=t,t=new Map)};return{get(i){let o=t.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){t.has(i)?t.set(i,o):s(i,o)}}},gA="!",s$=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,s=e[0],i=e.length,o=a=>{const c=[];let d=0,h=0,f;for(let S=0;S<a.length;S++){let C=a[S];if(d===0){if(C===s&&(r||a.slice(S,S+i)===e)){c.push(a.slice(h,S)),h=S+i;continue}if(C==="/"){f=S;continue}}C==="["?d++:C==="]"&&d--}const m=c.length===0?a:a.substring(h),y=m.startsWith(gA),v=y?m.substring(1):m,w=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:y,baseClassName:v,maybePostfixModifierPosition:w}};return t?a=>t({className:a,parseClassName:o}):o},i$=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},o$=n=>({cache:r$(n.cacheSize),parseClassName:s$(n),...ZW(n)}),a$=/\s+/,l$=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=n.trim().split(a$);let a="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:y}=t(d);let v=!!y,w=r(v?m.substring(0,y):m);if(!w){if(!v){a=d+(a.length>0?" "+a:a);continue}if(w=r(m),!w){a=d+(a.length>0?" "+a:a);continue}v=!1}const S=i$(h).join(":"),C=f?S+gA:S,T=C+w;if(i.includes(T))continue;i.push(T);const k=s(w,v);for(let M=0;M<k.length;++M){const N=k[M];i.push(C+N)}a=d+(a.length>0?" "+a:a)}return a};function c$(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=yA(e))&&(r&&(r+=" "),r+=t);return r}const yA=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=yA(n[r]))&&(t&&(t+=" "),t+=e);return t};function u$(n,...e){let t,r,s,i=o;function o(c){const d=e.reduce((h,f)=>f(h),n());return t=o$(d),r=t.cache.get,s=t.cache.set,i=a,a(c)}function a(c){const d=r(c);if(d)return d;const h=l$(c,t);return s(c,h),h}return function(){return i(c$.apply(null,arguments))}}const bt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},vA=/^\[(?:([a-z-]+):)?(.+)\]$/i,d$=/^\d+\/\d+$/,h$=new Set(["px","full","screen"]),f$=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,p$=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,m$=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,g$=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,y$=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,qs=n=>sl(n)||h$.has(n)||d$.test(n),Di=n=>Ll(n,"length",T$),sl=n=>!!n&&!Number.isNaN(Number(n)),by=n=>Ll(n,"number",sl),zc=n=>!!n&&Number.isInteger(Number(n)),v$=n=>n.endsWith("%")&&sl(n.slice(0,-1)),Ge=n=>vA.test(n),Ri=n=>f$.test(n),x$=new Set(["length","size","percentage"]),w$=n=>Ll(n,x$,xA),b$=n=>Ll(n,"position",xA),S$=new Set(["image","url"]),C$=n=>Ll(n,S$,E$),_$=n=>Ll(n,"",k$),Wc=()=>!0,Ll=(n,e,t)=>{const r=vA.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},T$=n=>p$.test(n)&&!m$.test(n),xA=()=>!1,k$=n=>g$.test(n),E$=n=>y$.test(n),N$=()=>{const n=bt("colors"),e=bt("spacing"),t=bt("blur"),r=bt("brightness"),s=bt("borderColor"),i=bt("borderRadius"),o=bt("borderSpacing"),a=bt("borderWidth"),c=bt("contrast"),d=bt("grayscale"),h=bt("hueRotate"),f=bt("invert"),m=bt("gap"),y=bt("gradientColorStops"),v=bt("gradientColorStopPositions"),w=bt("inset"),S=bt("margin"),C=bt("opacity"),T=bt("padding"),k=bt("saturate"),M=bt("scale"),N=bt("sepia"),O=bt("skew"),D=bt("space"),I=bt("translate"),L=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],V=()=>["auto",Ge,e],F=()=>[Ge,e],U=()=>["",qs,Di],B=()=>["auto",sl,Ge],q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],K=()=>["solid","dashed","dotted","double","none"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>["start","end","center","between","around","evenly","stretch"],z=()=>["","0",Ge],W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],P=()=>[sl,Ge];return{cacheSize:500,separator:":",theme:{colors:[Wc],spacing:[qs,Di],blur:["none","",Ri,Ge],brightness:P(),borderColor:[n],borderRadius:["none","","full",Ri,Ge],borderSpacing:F(),borderWidth:U(),contrast:P(),grayscale:z(),hueRotate:P(),invert:z(),gap:F(),gradientColorStops:[n],gradientColorStopPositions:[v$,Di],inset:V(),margin:V(),opacity:P(),padding:F(),saturate:P(),scale:P(),sepia:z(),skew:P(),space:F(),translate:F()},classGroups:{aspect:[{aspect:["auto","square","video",Ge]}],container:["container"],columns:[{columns:[Ri]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...q(),Ge]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",zc,Ge]}],basis:[{basis:V()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ge]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",zc,Ge]}],"grid-cols":[{"grid-cols":[Wc]}],"col-start-end":[{col:["auto",{span:["full",zc,Ge]},Ge]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[Wc]}],"row-start-end":[{row:["auto",{span:[zc,Ge]},Ge]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ge]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ge]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...$()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...$(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...$(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[T]}],px:[{px:[T]}],py:[{py:[T]}],ps:[{ps:[T]}],pe:[{pe:[T]}],pt:[{pt:[T]}],pr:[{pr:[T]}],pb:[{pb:[T]}],pl:[{pl:[T]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[D]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[D]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ge,e]}],"min-w":[{"min-w":[Ge,e,"min","max","fit"]}],"max-w":[{"max-w":[Ge,e,"none","full","min","max","fit","prose",{screen:[Ri]},Ri]}],h:[{h:[Ge,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ge,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ge,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ge,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ri,Di]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",by]}],"font-family":[{font:[Wc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ge]}],"line-clamp":[{"line-clamp":["none",sl,by]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",qs,Ge]}],"list-image":[{"list-image":["none",Ge]}],"list-style-type":[{list:["none","disc","decimal",Ge]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[C]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[C]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",qs,Di]}],"underline-offset":[{"underline-offset":["auto",qs,Ge]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ge]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ge]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[C]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...q(),b$]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",w$]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},C$]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[C]}],"border-style":[{border:[...K(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[C]}],"divide-style":[{divide:K()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...K()]}],"outline-offset":[{"outline-offset":[qs,Ge]}],"outline-w":[{outline:[qs,Di]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[C]}],"ring-offset-w":[{"ring-offset":[qs,Di]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Ri,_$]}],"shadow-color":[{shadow:[Wc]}],opacity:[{opacity:[C]}],"mix-blend":[{"mix-blend":[...G(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":G()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ri,Ge]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[k]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[C]}],"backdrop-saturate":[{"backdrop-saturate":[k]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ge]}],duration:[{duration:P()}],ease:[{ease:["linear","in","out","in-out",Ge]}],delay:[{delay:P()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ge]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[M]}],"scale-x":[{"scale-x":[M]}],"scale-y":[{"scale-y":[M]}],rotate:[{rotate:[zc,Ge]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ge]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ge]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ge]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[qs,Di,by]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},A$=u$(N$);function Pe(...n){return A$(CE(n))}function M$({threshold:n=100,onSwipeLeft:e,onSwipeRight:t,currentAppId:r,isActive:s}){const[i,o]=b.useState(null),[a,c]=b.useState(null),[d,h]=b.useState(!1),[f,m]=b.useState(null);return b.useEffect(()=>{o(null),c(null),h(!1),m(null)},[r]),{handleTouchStart:S=>{s&&(o(S.touches[0].clientX),h(!0),m(null))},handleTouchMove:S=>{if(!s||i===null)return;const C=S.touches[0].clientX;c(C);const T=i-C;Math.abs(T)>20?m(T>0?"left":"right"):m(null)},handleTouchEnd:()=>{if(!s||i===null||a===null){h(!1);return}const S=i-a;Math.abs(S)>n&&(S>0?e==null||e(r):t==null||t(r)),o(null),c(null),h(!1),m(null)},isSwiping:d,swipeDirection:f}}function O$(n=768){const[e,t]=b.useState(()=>typeof window<"u"&&window.innerWidth<n);return b.useEffect(()=>{const r=()=>{t(window.innerWidth<n)};return r(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}},[n]),e}function ai({children:n,title:e,onClose:t,isForeground:r=!0,isShaking:s=!1,appId:i,windowConstraints:o={}}){var fe,_e,se,ge;const a=am(i),d={...{minWidth:(fe=a.minSize)==null?void 0:fe.width,minHeight:(_e=a.minSize)==null?void 0:_e.height,maxWidth:(se=a.maxSize)==null?void 0:se.width,maxHeight:(ge=a.maxSize)==null?void 0:ge.height,defaultSize:a.defaultSize},...o},[h,f]=b.useState(!0),[m,y]=b.useState(!0),[v,w]=b.useState(!0),{bringToForeground:S,navigateToNextApp:C,navigateToPreviousApp:T}=ep(),{play:k}=pt(ut.WINDOW_OPEN),{play:M}=pt(ut.WINDOW_CLOSE),[N,O]=b.useState(!1),[D,I]=b.useState(!1),L=O$(),A=b.useRef(0),V=b.useRef(null),F=b.useRef(!1),U=b.useRef(0),B=b.useRef({width:0,height:0}),{handleTouchStart:q,handleTouchMove:K,handleTouchEnd:G,isSwiping:$,swipeDirection:z}=M$({currentAppId:i,isActive:L&&r,onSwipeLeft:he=>C(he),onSwipeRight:he=>T(he),threshold:100});b.useEffect(()=>{k();const he=setTimeout(()=>w(!1),200);return()=>clearTimeout(he)},[]);const W=b.useCallback(he=>{he.target===he.currentTarget&&!h&&he.propertyName==="opacity"&&(y(!1),t==null||t())},[h,t]),P=()=>{M(),f(!1)},{windowPosition:j,windowSize:J,isDragging:te,resizeType:ne,handleMouseDown:ue,handleResizeStart:ce,maximizeWindowHeight:ae,setWindowSize:xe,setWindowPosition:ke}=JW({appId:i});b.useEffect(()=>{const je=window.innerHeight-30;O(Math.abs(J.height-je)<5)},[J.height]);const pe=he=>{ue(he),r||S(i)},ye=(he,je)=>{ce(he,je),r||S(i)},re=he=>{he.stopPropagation(),!D&&(N?(O(!1),xe(je=>({...je,height:d.defaultSize.height}))):(O(!0),ae(d.maxHeight)))},Q=he=>{he.stopPropagation();const je=Date.now();if(je-U.current<300)return;U.current=je;const Je=!D;if(I(Je),Je){B.current={width:J.width,height:J.height};const mt=30,Qt=window.innerHeight-mt,Lr=d.maxHeight?typeof d.maxHeight=="string"?parseInt(d.maxHeight):d.maxHeight:Qt,Tt=Math.min(Qt,Lr);let Yt=window.innerWidth;if(window.innerWidth>=768){const da=d.maxWidth?typeof d.maxWidth=="string"?parseInt(d.maxWidth):d.maxWidth:window.innerWidth;Yt=Math.min(window.innerWidth,da)}xe({width:Yt,height:Tt}),ke({x:window.innerWidth>=768?(window.innerWidth-Yt)/2:0,y:mt})}else{const mt=d.defaultSize;xe({width:mt.width,height:mt.height}),window.innerWidth>=768&&ke({x:Math.max(0,(window.innerWidth-mt.width)/2),y:Math.max(30,(window.innerHeight-mt.height)/2)})}},X=b.useCallback(he=>{he.preventDefault();const je=Date.now();if(F.current||je-U.current<300)return;const Je=je-A.current;V.current&&(clearTimeout(V.current),V.current=null),Je<300&&Je>0?(he.stopPropagation(),F.current=!0,Q(he),A.current=0,setTimeout(()=>{F.current=!1},300)):(V.current=setTimeout(()=>{A.current=0},300),A.current=je)},[Q]);if(b.useEffect(()=>()=>{V.current&&clearTimeout(V.current)},[]),!m)return null;const Y=()=>!L||!$||!z?{}:{transform:`translateX(${z==="left"?-10:10}px)`,transition:"transform 0.1s ease"};return g.jsx("div",{className:Pe("absolute p-2 md:p-0 w-full h-full md:mt-0 select-none","transition-all duration-200 ease-in-out",v&&"animate-in fade-in-0 zoom-in-95 duration-200",s&&"animate-shake"),onTransitionEnd:W,style:{left:j.x,top:Math.max(0,j.y),width:window.innerWidth>=768?J.width:"100%",height:Math.max(J.height,d.minHeight||0),minWidth:window.innerWidth>=768?d.minWidth:"100%",minHeight:d.minHeight,maxWidth:d.maxWidth||void 0,maxHeight:d.maxHeight||void 0,transition:te||ne?"none":void 0,transform:!v&&!h?"scale(0.95)":void 0,opacity:!v&&!h?0:void 0,transformOrigin:"center"},children:g.jsxs("div",{className:"relative w-full h-full",children:[g.jsxs("div",{className:"absolute -top-2 -left-2 -right-2 -bottom-2 pointer-events-none z-50",children:[g.jsx("div",{className:Pe("absolute left-0 right-0 cursor-n-resize pointer-events-auto transition-[top,height]",ne!=null&&ne.includes("n")?"top-[-100px] h-[200px]":"-top-2 h-6"),onMouseDown:he=>ye(he,"n"),onTouchStart:he=>ye(he,"n"),onDoubleClick:re}),g.jsx("div",{className:Pe("absolute left-0 right-0 cursor-s-resize pointer-events-auto transition-[bottom,height]",ne!=null&&ne.includes("s")?"bottom-[-100px] h-[200px]":"-bottom-2 h-6"),onMouseDown:he=>ye(he,"s"),onTouchStart:he=>ye(he,"s"),onDoubleClick:re}),g.jsx("div",{className:Pe("absolute top-8 cursor-w-resize pointer-events-auto transition-[left,width]",ne!=null&&ne.includes("w")?"left-[-100px] w-[200px]":"-left-2 w-6"),style:{bottom:(ne!=null&&ne.includes("s"),"32px")},onMouseDown:he=>ye(he,"w")}),g.jsx("div",{className:Pe("absolute top-8 cursor-e-resize pointer-events-auto transition-[right,width]",ne!=null&&ne.includes("e")?"right-[-100px] w-[200px]":"-right-2 w-6"),style:{bottom:(ne!=null&&ne.includes("s"),"32px")},onMouseDown:he=>ye(he,"e")}),g.jsx("div",{className:Pe("absolute cursor-ne-resize pointer-events-auto transition-all",ne==="ne"?"top-[-100px] right-[-100px] w-[200px] h-[200px]":"top-0 right-0 w-6 h-6"),onMouseDown:he=>ye(he,"ne")}),g.jsx("div",{className:Pe("absolute cursor-sw-resize pointer-events-auto transition-all",ne==="sw"?"bottom-[-100px] left-[-100px] w-[200px] h-[200px]":"bottom-0 left-0 w-6 h-6"),onMouseDown:he=>ye(he,"sw")}),g.jsx("div",{className:Pe("absolute cursor-se-resize pointer-events-auto transition-all",ne==="se"?"bottom-[-100px] right-[-100px] w-[200px] h-[200px]":"bottom-0 right-0 w-6 h-6"),onMouseDown:he=>ye(he,"se")})]}),g.jsxs("div",{className:Pe("w-full h-full flex flex-col bg-system7-window-bg border-[2px] border-black rounded-lg overflow-hidden",r?"shadow-[2px_2px_0px_0px_rgba(0,0,0,0.5)]":""),onTouchStart:L?q:void 0,onTouchMove:L?K:void 0,onTouchEnd:L?G:void 0,style:Y(),children:[g.jsxs("div",{className:`flex items-center shrink-0 h-6 min-h-6 mx-0 my-[0.1rem] px-[0.1rem] py-[0.2rem] ${r?"bg-[linear-gradient(#000_50%,transparent_0)] bg-clip-content bg-[length:6.6666666667%_13.3333333333%] border-b-black":"bg-white border-b-gray-400"} cursor-move border-b-[2px]`,onMouseDown:pe,onTouchStart:pe,children:[g.jsx("button",{onClick:P,onMouseDown:he=>he.stopPropagation(),onTouchStart:he=>he.stopPropagation(),className:`ml-2 w-4 h-4 bg-white border-2 border-black hover:bg-gray-200 active:bg-gray-300 flex items-center justify-center shadow-[0_0_0_1px_white] ${!r&&"invisible"}`}),g.jsx("span",{className:`select-none mx-auto bg-white px-2 py-0 h-full flex items-center justify-center max-w-[80%] truncate ${!r&&"text-gray-500"}`,onDoubleClick:Q,onTouchStart:he=>{X(he),pe(he)},onTouchMove:he=>he.preventDefault(),children:e}),g.jsx("div",{className:"mr-2 w-4 h-4"})]}),g.jsx("div",{className:"flex flex-1 min-h-0 flex-col md:flex-row",children:n})]})]})})}function Te(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function P$(n,e){const t=b.createContext(e),r=i=>{const{children:o,...a}=i,c=b.useMemo(()=>a,Object.values(a));return g.jsx(t.Provider,{value:c,children:o})};r.displayName=n+"Provider";function s(i){const o=b.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${n}\``)}return[r,s]}function Ir(n,e=[]){let t=[];function r(i,o){const a=b.createContext(o),c=t.length;t=[...t,o];const d=f=>{var C;const{scope:m,children:y,...v}=f,w=((C=m==null?void 0:m[n])==null?void 0:C[c])||a,S=b.useMemo(()=>v,Object.values(v));return g.jsx(w.Provider,{value:S,children:y})};d.displayName=i+"Provider";function h(f,m){var w;const y=((w=m==null?void 0:m[n])==null?void 0:w[c])||a,v=b.useContext(y);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,h]}const s=()=>{const i=t.map(o=>b.createContext(o));return function(a){const c=(a==null?void 0:a[n])||i;return b.useMemo(()=>({[`__scope${n}`]:{...a,[n]:c}}),[a,c])}};return s.scopeName=n,[r,D$(s,...e)]}function D$(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...a,...f}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function qt(n){const e=b.useRef(n);return b.useEffect(()=>{e.current=n}),b.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function Cs({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,s]=R$({defaultProp:e,onChange:t}),i=n!==void 0,o=i?n:r,a=qt(t),c=b.useCallback(d=>{if(i){const f=typeof d=="function"?d(n):d;f!==n&&a(f)}else s(d)},[i,n,s,a]);return[o,c]}function R$({defaultProp:n,onChange:e}){const t=b.useState(n),[r]=t,s=b.useRef(r),i=qt(e);return b.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),t}var I$=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],We=I$.reduce((n,e)=>{const t=b.forwardRef((r,s)=>{const{asChild:i,...o}=r,a=i?eo:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g.jsx(a,{...o,ref:s})});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function wA(n,e){n&&zu.flushSync(()=>n.dispatchEvent(e))}function mp(n){const e=n+"CollectionProvider",[t,r]=Ir(e),[s,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:v,children:w}=y,S=Ct.useRef(null),C=Ct.useRef(new Map).current;return g.jsx(s,{scope:v,itemMap:C,collectionRef:S,children:w})};o.displayName=e;const a=n+"CollectionSlot",c=Ct.forwardRef((y,v)=>{const{scope:w,children:S}=y,C=i(a,w),T=Ye(v,C.collectionRef);return g.jsx(eo,{ref:T,children:S})});c.displayName=a;const d=n+"CollectionItemSlot",h="data-radix-collection-item",f=Ct.forwardRef((y,v)=>{const{scope:w,children:S,...C}=y,T=Ct.useRef(null),k=Ye(v,T),M=i(d,w);return Ct.useEffect(()=>(M.itemMap.set(T,{ref:T,...C}),()=>void M.itemMap.delete(T))),g.jsx(eo,{[h]:"",ref:k,children:S})});f.displayName=d;function m(y){const v=i(n+"CollectionConsumer",y);return Ct.useCallback(()=>{const S=v.collectionRef.current;if(!S)return[];const C=Array.from(S.querySelectorAll(`[${h}]`));return Array.from(v.itemMap.values()).sort((M,N)=>C.indexOf(M.ref.current)-C.indexOf(N.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:f},m,r]}var j$=b.createContext(void 0);function Fl(n){const e=b.useContext(j$);return n||e||"ltr"}function L$(n,e=globalThis==null?void 0:globalThis.document){const t=qt(n);b.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var F$="DismissableLayer",Dv="dismissableLayer.update",V$="dismissableLayer.pointerDownOutside",B$="dismissableLayer.focusOutside",N1,bA=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Wu=b.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...c}=n,d=b.useContext(bA),[h,f]=b.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=b.useState({}),v=Ye(e,D=>f(D)),w=Array.from(d.layers),[S]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),C=w.indexOf(S),T=h?w.indexOf(h):-1,k=d.layersWithOutsidePointerEventsDisabled.size>0,M=T>=C,N=$$(D=>{const I=D.target,L=[...d.branches].some(A=>A.contains(I));!M||L||(s==null||s(D),o==null||o(D),D.defaultPrevented||a==null||a())},m),O=H$(D=>{const I=D.target;[...d.branches].some(A=>A.contains(I))||(i==null||i(D),o==null||o(D),D.defaultPrevented||a==null||a())},m);return L$(D=>{T===d.layers.size-1&&(r==null||r(D),!D.defaultPrevented&&a&&(D.preventDefault(),a()))},m),b.useEffect(()=>{if(h)return t&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(N1=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),A1(),()=>{t&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=N1)}},[h,m,t,d]),b.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),A1())},[h,d]),b.useEffect(()=>{const D=()=>y({});return document.addEventListener(Dv,D),()=>document.removeEventListener(Dv,D)},[]),g.jsx(We.div,{...c,ref:v,style:{pointerEvents:k?M?"auto":"none":void 0,...n.style},onFocusCapture:Te(n.onFocusCapture,O.onFocusCapture),onBlurCapture:Te(n.onBlurCapture,O.onBlurCapture),onPointerDownCapture:Te(n.onPointerDownCapture,N.onPointerDownCapture)})});Wu.displayName=F$;var z$="DismissableLayerBranch",W$=b.forwardRef((n,e)=>{const t=b.useContext(bA),r=b.useRef(null),s=Ye(e,r);return b.useEffect(()=>{const i=r.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),g.jsx(We.div,{...n,ref:s})});W$.displayName=z$;function $$(n,e=globalThis==null?void 0:globalThis.document){const t=qt(n),r=b.useRef(!1),s=b.useRef(()=>{});return b.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let c=function(){SA(V$,t,d,{discrete:!0})};const d={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function H$(n,e=globalThis==null?void 0:globalThis.document){const t=qt(n),r=b.useRef(!1);return b.useEffect(()=>{const s=i=>{i.target&&!r.current&&SA(B$,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function A1(){const n=new CustomEvent(Dv);document.dispatchEvent(n)}function SA(n,e,t,{discrete:r}){const s=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?wA(s,i):s.dispatchEvent(i)}var Sy=0;function lx(){b.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??M1()),document.body.insertAdjacentElement("beforeend",n[1]??M1()),Sy++,()=>{Sy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Sy--}},[])}function M1(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Cy="focusScope.autoFocusOnMount",_y="focusScope.autoFocusOnUnmount",O1={bubbles:!1,cancelable:!0},U$="FocusScope",gp=b.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=n,[a,c]=b.useState(null),d=qt(s),h=qt(i),f=b.useRef(null),m=Ye(e,w=>c(w)),y=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(r){let w=function(k){if(y.paused||!a)return;const M=k.target;a.contains(M)?f.current=M:Li(f.current,{select:!0})},S=function(k){if(y.paused||!a)return;const M=k.relatedTarget;M!==null&&(a.contains(M)||Li(f.current,{select:!0}))},C=function(k){if(document.activeElement===document.body)for(const N of k)N.removedNodes.length>0&&Li(a)};document.addEventListener("focusin",w),document.addEventListener("focusout",S);const T=new MutationObserver(C);return a&&T.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",S),T.disconnect()}}},[r,a,y.paused]),b.useEffect(()=>{if(a){D1.add(y);const w=document.activeElement;if(!a.contains(w)){const C=new CustomEvent(Cy,O1);a.addEventListener(Cy,d),a.dispatchEvent(C),C.defaultPrevented||(q$(J$(CA(a)),{select:!0}),document.activeElement===w&&Li(a))}return()=>{a.removeEventListener(Cy,d),setTimeout(()=>{const C=new CustomEvent(_y,O1);a.addEventListener(_y,h),a.dispatchEvent(C),C.defaultPrevented||Li(w??document.body,{select:!0}),a.removeEventListener(_y,h),D1.remove(y)},0)}}},[a,d,h,y]);const v=b.useCallback(w=>{if(!t&&!r||y.paused)return;const S=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,C=document.activeElement;if(S&&C){const T=w.currentTarget,[k,M]=G$(T);k&&M?!w.shiftKey&&C===M?(w.preventDefault(),t&&Li(k,{select:!0})):w.shiftKey&&C===k&&(w.preventDefault(),t&&Li(M,{select:!0})):C===T&&w.preventDefault()}},[t,r,y.paused]);return g.jsx(We.div,{tabIndex:-1,...o,ref:m,onKeyDown:v})});gp.displayName=U$;function q$(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(Li(r,{select:e}),document.activeElement!==t)return}function G$(n){const e=CA(n),t=P1(e,n),r=P1(e.reverse(),n);return[t,r]}function CA(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function P1(n,e){for(const t of n)if(!K$(t,{upTo:e}))return t}function K$(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function Y$(n){return n instanceof HTMLInputElement&&"select"in n}function Li(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&Y$(n)&&e&&n.select()}}var D1=X$();function X$(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=R1(n,e),n.unshift(e)},remove(e){var t;n=R1(n,e),(t=n[0])==null||t.resume()}}}function R1(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function J$(n){return n.filter(e=>e.tagName!=="A")}var On=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},Z$=CL.useId||(()=>{}),Q$=0;function fr(n){const[e,t]=b.useState(Z$());return On(()=>{t(r=>r??String(Q$++))},[n]),e?`radix-${e}`:""}const eH=["top","right","bottom","left"],no=Math.min,ar=Math.max,_f=Math.round,Oh=Math.floor,vs=n=>({x:n,y:n}),tH={left:"right",right:"left",bottom:"top",top:"bottom"},nH={start:"end",end:"start"};function Rv(n,e,t){return ar(n,no(e,t))}function ri(n,e){return typeof n=="function"?n(e):n}function si(n){return n.split("-")[0]}function Vl(n){return n.split("-")[1]}function cx(n){return n==="x"?"y":"x"}function ux(n){return n==="y"?"height":"width"}function ro(n){return["top","bottom"].includes(si(n))?"y":"x"}function dx(n){return cx(ro(n))}function rH(n,e,t){t===void 0&&(t=!1);const r=Vl(n),s=dx(n),i=ux(s);let o=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Tf(o)),[o,Tf(o)]}function sH(n){const e=Tf(n);return[Iv(n),e,Iv(e)]}function Iv(n){return n.replace(/start|end/g,e=>nH[e])}function iH(n,e,t){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function oH(n,e,t,r){const s=Vl(n);let i=iH(si(n),t==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Iv)))),i}function Tf(n){return n.replace(/left|right|bottom|top/g,e=>tH[e])}function aH(n){return{top:0,right:0,bottom:0,left:0,...n}}function _A(n){return typeof n!="number"?aH(n):{top:n,right:n,bottom:n,left:n}}function kf(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function I1(n,e,t){let{reference:r,floating:s}=n;const i=ro(e),o=dx(e),a=ux(o),c=si(e),d=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,m=r[a]/2-s[a]/2;let y;switch(c){case"top":y={x:h,y:r.y-s.height};break;case"bottom":y={x:h,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:f};break;case"left":y={x:r.x-s.width,y:f};break;default:y={x:r.x,y:r.y}}switch(Vl(e)){case"start":y[o]-=m*(t&&d?-1:1);break;case"end":y[o]+=m*(t&&d?-1:1);break}return y}const lH=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=t,a=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:n,floating:e,strategy:s}),{x:h,y:f}=I1(d,r,c),m=r,y={},v=0;for(let w=0;w<a.length;w++){const{name:S,fn:C}=a[w],{x:T,y:k,data:M,reset:N}=await C({x:h,y:f,initialPlacement:r,placement:m,strategy:s,middlewareData:y,rects:d,platform:o,elements:{reference:n,floating:e}});h=T??h,f=k??f,y={...y,[S]:{...y[S],...M}},N&&v<=50&&(v++,typeof N=="object"&&(N.placement&&(m=N.placement),N.rects&&(d=N.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:s}):N.rects),{x:h,y:f}=I1(d,m,c)),w=-1)}return{x:h,y:f,placement:m,strategy:s,middlewareData:y}};async function vu(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:c}=n,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:y=0}=ri(e,n),v=_A(y),S=a[m?f==="floating"?"reference":"floating":f],C=kf(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(S)))==null||t?S:S.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:d,rootBoundary:h,strategy:c})),T=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,k=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),M=await(i.isElement==null?void 0:i.isElement(k))?await(i.getScale==null?void 0:i.getScale(k))||{x:1,y:1}:{x:1,y:1},N=kf(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:T,offsetParent:k,strategy:c}):T);return{top:(C.top-N.top+v.top)/M.y,bottom:(N.bottom-C.bottom+v.bottom)/M.y,left:(C.left-N.left+v.left)/M.x,right:(N.right-C.right+v.right)/M.x}}const cH=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:c}=e,{element:d,padding:h=0}=ri(n,e)||{};if(d==null)return{};const f=_A(h),m={x:t,y:r},y=dx(s),v=ux(y),w=await o.getDimensions(d),S=y==="y",C=S?"top":"left",T=S?"bottom":"right",k=S?"clientHeight":"clientWidth",M=i.reference[v]+i.reference[y]-m[y]-i.floating[v],N=m[y]-i.reference[y],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let D=O?O[k]:0;(!D||!await(o.isElement==null?void 0:o.isElement(O)))&&(D=a.floating[k]||i.floating[v]);const I=M/2-N/2,L=D/2-w[v]/2-1,A=no(f[C],L),V=no(f[T],L),F=A,U=D-w[v]-V,B=D/2-w[v]/2+I,q=Rv(F,B,U),K=!c.arrow&&Vl(s)!=null&&B!==q&&i.reference[v]/2-(B<F?A:V)-w[v]/2<0,G=K?B<F?B-F:B-U:0;return{[y]:m[y]+G,data:{[y]:q,centerOffset:B-q-G,...K&&{alignmentOffset:G}},reset:K}}}),uH=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:c,elements:d}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:w=!0,...S}=ri(n,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const C=si(s),T=ro(a),k=si(a)===a,M=await(c.isRTL==null?void 0:c.isRTL(d.floating)),N=m||(k||!w?[Tf(a)]:sH(a)),O=v!=="none";!m&&O&&N.push(...oH(a,w,v,M));const D=[a,...N],I=await vu(e,S),L=[];let A=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&L.push(I[C]),f){const B=rH(s,o,M);L.push(I[B[0]],I[B[1]])}if(A=[...A,{placement:s,overflows:L}],!L.every(B=>B<=0)){var V,F;const B=(((V=i.flip)==null?void 0:V.index)||0)+1,q=D[B];if(q)return{data:{index:B,overflows:A},reset:{placement:q}};let K=(F=A.filter(G=>G.overflows[0]<=0).sort((G,$)=>G.overflows[1]-$.overflows[1])[0])==null?void 0:F.placement;if(!K)switch(y){case"bestFit":{var U;const G=(U=A.filter($=>{if(O){const z=ro($.placement);return z===T||z==="y"}return!0}).map($=>[$.placement,$.overflows.filter(z=>z>0).reduce((z,W)=>z+W,0)]).sort(($,z)=>$[1]-z[1])[0])==null?void 0:U[0];G&&(K=G);break}case"initialPlacement":K=a;break}if(s!==K)return{reset:{placement:K}}}return{}}}};function j1(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function L1(n){return eH.some(e=>n[e]>=0)}const dH=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=ri(n,e);switch(r){case"referenceHidden":{const i=await vu(e,{...s,elementContext:"reference"}),o=j1(i,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:L1(o)}}}case"escaped":{const i=await vu(e,{...s,altBoundary:!0}),o=j1(i,t.floating);return{data:{escapedOffsets:o,escaped:L1(o)}}}default:return{}}}}};async function hH(n,e){const{placement:t,platform:r,elements:s}=n,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=si(t),a=Vl(t),c=ro(t)==="y",d=["left","top"].includes(o)?-1:1,h=i&&c?-1:1,f=ri(e,n);let{mainAxis:m,crossAxis:y,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof v=="number"&&(y=a==="end"?v*-1:v),c?{x:y*h,y:m*d}:{x:m*d,y:y*h}}const fH=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:i,placement:o,middlewareData:a}=e,c=await hH(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},pH=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:S=>{let{x:C,y:T}=S;return{x:C,y:T}}},...c}=ri(n,e),d={x:t,y:r},h=await vu(e,c),f=ro(si(s)),m=cx(f);let y=d[m],v=d[f];if(i){const S=m==="y"?"top":"left",C=m==="y"?"bottom":"right",T=y+h[S],k=y-h[C];y=Rv(T,y,k)}if(o){const S=f==="y"?"top":"left",C=f==="y"?"bottom":"right",T=v+h[S],k=v-h[C];v=Rv(T,v,k)}const w=a.fn({...e,[m]:y,[f]:v});return{...w,data:{x:w.x-t,y:w.y-r,enabled:{[m]:i,[f]:o}}}}}},mH=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:c=!0,crossAxis:d=!0}=ri(n,e),h={x:t,y:r},f=ro(s),m=cx(f);let y=h[m],v=h[f];const w=ri(a,e),S=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(c){const k=m==="y"?"height":"width",M=i.reference[m]-i.floating[k]+S.mainAxis,N=i.reference[m]+i.reference[k]-S.mainAxis;y<M?y=M:y>N&&(y=N)}if(d){var C,T;const k=m==="y"?"width":"height",M=["top","left"].includes(si(s)),N=i.reference[f]-i.floating[k]+(M&&((C=o.offset)==null?void 0:C[f])||0)+(M?0:S.crossAxis),O=i.reference[f]+i.reference[k]+(M?0:((T=o.offset)==null?void 0:T[f])||0)-(M?S.crossAxis:0);v<N?v=N:v>O&&(v=O)}return{[m]:y,[f]:v}}}},gH=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:c=()=>{},...d}=ri(n,e),h=await vu(e,d),f=si(s),m=Vl(s),y=ro(s)==="y",{width:v,height:w}=i.floating;let S,C;f==="top"||f==="bottom"?(S=f,C=m===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(C=f,S=m==="end"?"top":"bottom");const T=w-h.top-h.bottom,k=v-h.left-h.right,M=no(w-h[S],T),N=no(v-h[C],k),O=!e.middlewareData.shift;let D=M,I=N;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(I=k),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(D=T),O&&!m){const A=ar(h.left,0),V=ar(h.right,0),F=ar(h.top,0),U=ar(h.bottom,0);y?I=v-2*(A!==0||V!==0?A+V:ar(h.left,h.right)):D=w-2*(F!==0||U!==0?F+U:ar(h.top,h.bottom))}await c({...e,availableWidth:I,availableHeight:D});const L=await o.getDimensions(a.floating);return v!==L.width||w!==L.height?{reset:{rects:!0}}:{}}}};function yp(){return typeof window<"u"}function Bl(n){return TA(n)?(n.nodeName||"").toLowerCase():"#document"}function pr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Es(n){var e;return(e=(TA(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function TA(n){return yp()?n instanceof Node||n instanceof pr(n).Node:!1}function Qr(n){return yp()?n instanceof Element||n instanceof pr(n).Element:!1}function _s(n){return yp()?n instanceof HTMLElement||n instanceof pr(n).HTMLElement:!1}function F1(n){return!yp()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof pr(n).ShadowRoot}function $u(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=es(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(s)}function yH(n){return["table","td","th"].includes(Bl(n))}function vp(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function hx(n){const e=fx(),t=Qr(n)?es(n):n;return["transform","translate","scale","rotate","perspective"].some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function vH(n){let e=so(n);for(;_s(e)&&!vl(e);){if(hx(e))return e;if(vp(e))return null;e=so(e)}return null}function fx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function vl(n){return["html","body","#document"].includes(Bl(n))}function es(n){return pr(n).getComputedStyle(n)}function xp(n){return Qr(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function so(n){if(Bl(n)==="html")return n;const e=n.assignedSlot||n.parentNode||F1(n)&&n.host||Es(n);return F1(e)?e.host:e}function kA(n){const e=so(n);return vl(e)?n.ownerDocument?n.ownerDocument.body:n.body:_s(e)&&$u(e)?e:kA(e)}function xu(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=kA(n),i=s===((r=n.ownerDocument)==null?void 0:r.body),o=pr(s);if(i){const a=jv(o);return e.concat(o,o.visualViewport||[],$u(s)?s:[],a&&t?xu(a):[])}return e.concat(s,xu(s,[],t))}function jv(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function EA(n){const e=es(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=_s(n),i=s?n.offsetWidth:t,o=s?n.offsetHeight:r,a=_f(t)!==i||_f(r)!==o;return a&&(t=i,r=o),{width:t,height:r,$:a}}function px(n){return Qr(n)?n:n.contextElement}function il(n){const e=px(n);if(!_s(e))return vs(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:i}=EA(e);let o=(i?_f(t.width):t.width)/r,a=(i?_f(t.height):t.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const xH=vs(0);function NA(n){const e=pr(n);return!fx()||!e.visualViewport?xH:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function wH(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==pr(n)?!1:e}function Jo(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),i=px(n);let o=vs(1);e&&(r?Qr(r)&&(o=il(r)):o=il(n));const a=wH(i,t,r)?NA(i):vs(0);let c=(s.left+a.x)/o.x,d=(s.top+a.y)/o.y,h=s.width/o.x,f=s.height/o.y;if(i){const m=pr(i),y=r&&Qr(r)?pr(r):r;let v=m,w=jv(v);for(;w&&r&&y!==v;){const S=il(w),C=w.getBoundingClientRect(),T=es(w),k=C.left+(w.clientLeft+parseFloat(T.paddingLeft))*S.x,M=C.top+(w.clientTop+parseFloat(T.paddingTop))*S.y;c*=S.x,d*=S.y,h*=S.x,f*=S.y,c+=k,d+=M,v=pr(w),w=jv(v)}}return kf({width:h,height:f,x:c,y:d})}function mx(n,e){const t=xp(n).scrollLeft;return e?e.left+t:Jo(Es(n)).left+t}function AA(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),s=r.left+e.scrollLeft-(t?0:mx(n,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function bH(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const i=s==="fixed",o=Es(r),a=e?vp(e.floating):!1;if(r===o||a&&i)return t;let c={scrollLeft:0,scrollTop:0},d=vs(1);const h=vs(0),f=_s(r);if((f||!f&&!i)&&((Bl(r)!=="body"||$u(o))&&(c=xp(r)),_s(r))){const y=Jo(r);d=il(r),h.x=y.x+r.clientLeft,h.y=y.y+r.clientTop}const m=o&&!f&&!i?AA(o,c,!0):vs(0);return{width:t.width*d.x,height:t.height*d.y,x:t.x*d.x-c.scrollLeft*d.x+h.x+m.x,y:t.y*d.y-c.scrollTop*d.y+h.y+m.y}}function SH(n){return Array.from(n.getClientRects())}function CH(n){const e=Es(n),t=xp(n),r=n.ownerDocument.body,s=ar(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=ar(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+mx(n);const a=-t.scrollTop;return es(r).direction==="rtl"&&(o+=ar(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function _H(n,e){const t=pr(n),r=Es(n),s=t.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,c=0;if(s){i=s.width,o=s.height;const d=fx();(!d||d&&e==="fixed")&&(a=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:a,y:c}}function TH(n,e){const t=Jo(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,i=_s(n)?il(n):vs(1),o=n.clientWidth*i.x,a=n.clientHeight*i.y,c=s*i.x,d=r*i.y;return{width:o,height:a,x:c,y:d}}function V1(n,e,t){let r;if(e==="viewport")r=_H(n,t);else if(e==="document")r=CH(Es(n));else if(Qr(e))r=TH(e,t);else{const s=NA(n);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return kf(r)}function MA(n,e){const t=so(n);return t===e||!Qr(t)||vl(t)?!1:es(t).position==="fixed"||MA(t,e)}function kH(n,e){const t=e.get(n);if(t)return t;let r=xu(n,[],!1).filter(a=>Qr(a)&&Bl(a)!=="body"),s=null;const i=es(n).position==="fixed";let o=i?so(n):n;for(;Qr(o)&&!vl(o);){const a=es(o),c=hx(o);!c&&a.position==="fixed"&&(s=null),(i?!c&&!s:!c&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||$u(o)&&!c&&MA(n,o))?r=r.filter(h=>h!==o):s=a,o=so(o)}return e.set(n,r),r}function EH(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const o=[...t==="clippingAncestors"?vp(e)?[]:kH(e,this._c):[].concat(t),r],a=o[0],c=o.reduce((d,h)=>{const f=V1(e,h,s);return d.top=ar(f.top,d.top),d.right=no(f.right,d.right),d.bottom=no(f.bottom,d.bottom),d.left=ar(f.left,d.left),d},V1(e,a,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function NH(n){const{width:e,height:t}=EA(n);return{width:e,height:t}}function AH(n,e,t){const r=_s(e),s=Es(e),i=t==="fixed",o=Jo(n,!0,i,e);let a={scrollLeft:0,scrollTop:0};const c=vs(0);if(r||!r&&!i)if((Bl(e)!=="body"||$u(s))&&(a=xp(e)),r){const m=Jo(e,!0,i,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else s&&(c.x=mx(s));const d=s&&!r&&!i?AA(s,a):vs(0),h=o.left+a.scrollLeft-c.x-d.x,f=o.top+a.scrollTop-c.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function Ty(n){return es(n).position==="static"}function B1(n,e){if(!_s(n)||es(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Es(n)===t&&(t=t.ownerDocument.body),t}function OA(n,e){const t=pr(n);if(vp(n))return t;if(!_s(n)){let s=so(n);for(;s&&!vl(s);){if(Qr(s)&&!Ty(s))return s;s=so(s)}return t}let r=B1(n,e);for(;r&&yH(r)&&Ty(r);)r=B1(r,e);return r&&vl(r)&&Ty(r)&&!hx(r)?t:r||vH(n)||t}const MH=async function(n){const e=this.getOffsetParent||OA,t=this.getDimensions,r=await t(n.floating);return{reference:AH(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function OH(n){return es(n).direction==="rtl"}const PH={convertOffsetParentRelativeRectToViewportRelativeRect:bH,getDocumentElement:Es,getClippingRect:EH,getOffsetParent:OA,getElementRects:MH,getClientRects:SH,getDimensions:NH,getScale:il,isElement:Qr,isRTL:OH};function PA(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function DH(n,e){let t=null,r;const s=Es(n);function i(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),i();const d=n.getBoundingClientRect(),{left:h,top:f,width:m,height:y}=d;if(a||e(),!m||!y)return;const v=Oh(f),w=Oh(s.clientWidth-(h+m)),S=Oh(s.clientHeight-(f+y)),C=Oh(h),k={rootMargin:-v+"px "+-w+"px "+-S+"px "+-C+"px",threshold:ar(0,no(1,c))||1};let M=!0;function N(O){const D=O[0].intersectionRatio;if(D!==c){if(!M)return o();D?o(!1,D):r=setTimeout(()=>{o(!1,1e-7)},1e3)}D===1&&!PA(d,n.getBoundingClientRect())&&o(),M=!1}try{t=new IntersectionObserver(N,{...k,root:s.ownerDocument})}catch{t=new IntersectionObserver(N,k)}t.observe(n)}return o(!0),i}function RH(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=px(n),h=s||i?[...d?xu(d):[],...xu(e)]:[];h.forEach(C=>{s&&C.addEventListener("scroll",t,{passive:!0}),i&&C.addEventListener("resize",t)});const f=d&&a?DH(d,t):null;let m=-1,y=null;o&&(y=new ResizeObserver(C=>{let[T]=C;T&&T.target===d&&y&&(y.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var k;(k=y)==null||k.observe(e)})),t()}),d&&!c&&y.observe(d),y.observe(e));let v,w=c?Jo(n):null;c&&S();function S(){const C=Jo(n);w&&!PA(w,C)&&t(),w=C,v=requestAnimationFrame(S)}return t(),()=>{var C;h.forEach(T=>{s&&T.removeEventListener("scroll",t),i&&T.removeEventListener("resize",t)}),f==null||f(),(C=y)==null||C.disconnect(),y=null,c&&cancelAnimationFrame(v)}}const IH=fH,jH=pH,LH=uH,FH=gH,VH=dH,z1=cH,BH=mH,zH=(n,e,t)=>{const r=new Map,s={platform:PH,...t},i={...s.platform,_c:r};return lH(n,e,{...s,platform:i})};var Zh=typeof document<"u"?b.useLayoutEffect:b.useEffect;function Ef(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Ef(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const i=s[r];if(!(i==="_owner"&&n.$$typeof)&&!Ef(n[i],e[i]))return!1}return!0}return n!==n&&e!==e}function DA(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function W1(n,e){const t=DA(n);return Math.round(e*t)/t}function ky(n){const e=b.useRef(n);return Zh(()=>{e.current=n}),e}function WH(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:c,open:d}=n,[h,f]=b.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[m,y]=b.useState(r);Ef(m,r)||y(r);const[v,w]=b.useState(null),[S,C]=b.useState(null),T=b.useCallback($=>{$!==O.current&&(O.current=$,w($))},[]),k=b.useCallback($=>{$!==D.current&&(D.current=$,C($))},[]),M=i||v,N=o||S,O=b.useRef(null),D=b.useRef(null),I=b.useRef(h),L=c!=null,A=ky(c),V=ky(s),F=ky(d),U=b.useCallback(()=>{if(!O.current||!D.current)return;const $={placement:e,strategy:t,middleware:m};V.current&&($.platform=V.current),zH(O.current,D.current,$).then(z=>{const W={...z,isPositioned:F.current!==!1};B.current&&!Ef(I.current,W)&&(I.current=W,zu.flushSync(()=>{f(W)}))})},[m,e,t,V,F]);Zh(()=>{d===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,f($=>({...$,isPositioned:!1})))},[d]);const B=b.useRef(!1);Zh(()=>(B.current=!0,()=>{B.current=!1}),[]),Zh(()=>{if(M&&(O.current=M),N&&(D.current=N),M&&N){if(A.current)return A.current(M,N,U);U()}},[M,N,U,A,L]);const q=b.useMemo(()=>({reference:O,floating:D,setReference:T,setFloating:k}),[T,k]),K=b.useMemo(()=>({reference:M,floating:N}),[M,N]),G=b.useMemo(()=>{const $={position:t,left:0,top:0};if(!K.floating)return $;const z=W1(K.floating,h.x),W=W1(K.floating,h.y);return a?{...$,transform:"translate("+z+"px, "+W+"px)",...DA(K.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:z,top:W}},[t,a,K.floating,h.x,h.y]);return b.useMemo(()=>({...h,update:U,refs:q,elements:K,floatingStyles:G}),[h,U,q,K,G])}const $H=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?z1({element:r.current,padding:s}).fn(t):{}:r?z1({element:r,padding:s}).fn(t):{}}}},HH=(n,e)=>({...IH(n),options:[n,e]}),UH=(n,e)=>({...jH(n),options:[n,e]}),qH=(n,e)=>({...BH(n),options:[n,e]}),GH=(n,e)=>({...LH(n),options:[n,e]}),KH=(n,e)=>({...FH(n),options:[n,e]}),YH=(n,e)=>({...VH(n),options:[n,e]}),XH=(n,e)=>({...$H(n),options:[n,e]});var JH="Arrow",RA=b.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...i}=n;return g.jsx(We.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:g.jsx("polygon",{points:"0,0 30,0 15,10"})})});RA.displayName=JH;var ZH=RA;function gx(n){const[e,t]=b.useState(void 0);return On(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,a=d.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var yx="Popper",[IA,zl]=Ir(yx),[QH,jA]=IA(yx),LA=n=>{const{__scopePopper:e,children:t}=n,[r,s]=b.useState(null);return g.jsx(QH,{scope:e,anchor:r,onAnchorChange:s,children:t})};LA.displayName=yx;var FA="PopperAnchor",VA=b.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,i=jA(FA,t),o=b.useRef(null),a=Ye(e,o);return b.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:g.jsx(We.div,{...s,ref:a})});VA.displayName=FA;var vx="PopperContent",[eU,tU]=IA(vx),BA=b.forwardRef((n,e)=>{var ce,ae,xe,ke,pe,ye;const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:y="optimized",onPlaced:v,...w}=n,S=jA(vx,t),[C,T]=b.useState(null),k=Ye(e,re=>T(re)),[M,N]=b.useState(null),O=gx(M),D=(O==null?void 0:O.width)??0,I=(O==null?void 0:O.height)??0,L=r+(i!=="center"?"-"+i:""),A=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},V=Array.isArray(d)?d:[d],F=V.length>0,U={padding:A,boundary:V.filter(rU),altBoundary:F},{refs:B,floatingStyles:q,placement:K,isPositioned:G,middlewareData:$}=WH({strategy:"fixed",placement:L,whileElementsMounted:(...re)=>RH(...re,{animationFrame:y==="always"}),elements:{reference:S.anchor},middleware:[HH({mainAxis:s+I,alignmentAxis:o}),c&&UH({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?qH():void 0,...U}),c&&GH({...U}),KH({...U,apply:({elements:re,rects:Q,availableWidth:X,availableHeight:Y})=>{const{width:fe,height:_e}=Q.reference,se=re.floating.style;se.setProperty("--radix-popper-available-width",`${X}px`),se.setProperty("--radix-popper-available-height",`${Y}px`),se.setProperty("--radix-popper-anchor-width",`${fe}px`),se.setProperty("--radix-popper-anchor-height",`${_e}px`)}}),M&&XH({element:M,padding:a}),sU({arrowWidth:D,arrowHeight:I}),m&&YH({strategy:"referenceHidden",...U})]}),[z,W]=$A(K),P=qt(v);On(()=>{G&&(P==null||P())},[G,P]);const j=(ce=$.arrow)==null?void 0:ce.x,J=(ae=$.arrow)==null?void 0:ae.y,te=((xe=$.arrow)==null?void 0:xe.centerOffset)!==0,[ne,ue]=b.useState();return On(()=>{C&&ue(window.getComputedStyle(C).zIndex)},[C]),g.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...q,transform:G?q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ne,"--radix-popper-transform-origin":[(ke=$.transformOrigin)==null?void 0:ke.x,(pe=$.transformOrigin)==null?void 0:pe.y].join(" "),...((ye=$.hide)==null?void 0:ye.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:g.jsx(eU,{scope:t,placedSide:z,onArrowChange:N,arrowX:j,arrowY:J,shouldHideArrow:te,children:g.jsx(We.div,{"data-side":z,"data-align":W,...w,ref:k,style:{...w.style,animation:G?void 0:"none"}})})})});BA.displayName=vx;var zA="PopperArrow",nU={top:"bottom",right:"left",bottom:"top",left:"right"},WA=b.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,i=tU(zA,r),o=nU[i.placedSide];return g.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:g.jsx(ZH,{...s,ref:t,style:{...s.style,display:"block"}})})});WA.displayName=zA;function rU(n){return n!==null}var sU=n=>({name:"transformOrigin",options:n,fn(e){var S,C,T;const{placement:t,rects:r,middlewareData:s}=e,o=((S=s.arrow)==null?void 0:S.centerOffset)!==0,a=o?0:n.arrowWidth,c=o?0:n.arrowHeight,[d,h]=$A(t),f={start:"0%",center:"50%",end:"100%"}[h],m=(((C=s.arrow)==null?void 0:C.x)??0)+a/2,y=(((T=s.arrow)==null?void 0:T.y)??0)+c/2;let v="",w="";return d==="bottom"?(v=o?f:`${m}px`,w=`${-c}px`):d==="top"?(v=o?f:`${m}px`,w=`${r.floating.height+c}px`):d==="right"?(v=`${-c}px`,w=o?f:`${y}px`):d==="left"&&(v=`${r.floating.width+c}px`,w=o?f:`${y}px`),{data:{x:v,y:w}}}});function $A(n){const[e,t="center"]=n.split("-");return[e,t]}var wp=LA,xx=VA,wx=BA,bx=WA,iU="Portal",Hu=b.forwardRef((n,e)=>{var a;const{container:t,...r}=n,[s,i]=b.useState(!1);On(()=>i(!0),[]);const o=t||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?aA.createPortal(g.jsx(We.div,{...r,ref:e}),o):null});Hu.displayName=iU;function oU(n,e){return b.useReducer((t,r)=>e[t][r]??t,n)}var Hn=n=>{const{present:e,children:t}=n,r=aU(e),s=typeof t=="function"?t({present:r.isPresent}):b.Children.only(t),i=Ye(r.ref,lU(s));return typeof t=="function"||r.isPresent?b.cloneElement(s,{ref:i}):null};Hn.displayName="Presence";function aU(n){const[e,t]=b.useState(),r=b.useRef({}),s=b.useRef(n),i=b.useRef("none"),o=n?"mounted":"unmounted",[a,c]=oU(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const d=Ph(r.current);i.current=a==="mounted"?d:"none"},[a]),On(()=>{const d=r.current,h=s.current;if(h!==n){const m=i.current,y=Ph(d);n?c("MOUNT"):y==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(h&&m!==y?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,c]),On(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,f=y=>{const w=Ph(r.current).includes(y.animationName);if(y.target===e&&w&&(c("ANIMATION_END"),!s.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},m=y=>{y.target===e&&(i.current=Ph(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:b.useCallback(d=>{d&&(r.current=getComputedStyle(d)),t(d)},[])}}function Ph(n){return(n==null?void 0:n.animationName)||"none"}function lU(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Ey="rovingFocusGroup.onEntryFocus",cU={bubbles:!1,cancelable:!0},bp="RovingFocusGroup",[Lv,HA,uU]=mp(bp),[dU,Sp]=Ir(bp,[uU]),[hU,fU]=dU(bp),UA=b.forwardRef((n,e)=>g.jsx(Lv.Provider,{scope:n.__scopeRovingFocusGroup,children:g.jsx(Lv.Slot,{scope:n.__scopeRovingFocusGroup,children:g.jsx(pU,{...n,ref:e})})}));UA.displayName=bp;var pU=b.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...f}=n,m=b.useRef(null),y=Ye(e,m),v=Fl(i),[w=null,S]=Cs({prop:o,defaultProp:a,onChange:c}),[C,T]=b.useState(!1),k=qt(d),M=HA(t),N=b.useRef(!1),[O,D]=b.useState(0);return b.useEffect(()=>{const I=m.current;if(I)return I.addEventListener(Ey,k),()=>I.removeEventListener(Ey,k)},[k]),g.jsx(hU,{scope:t,orientation:r,dir:v,loop:s,currentTabStopId:w,onItemFocus:b.useCallback(I=>S(I),[S]),onItemShiftTab:b.useCallback(()=>T(!0),[]),onFocusableItemAdd:b.useCallback(()=>D(I=>I+1),[]),onFocusableItemRemove:b.useCallback(()=>D(I=>I-1),[]),children:g.jsx(We.div,{tabIndex:C||O===0?-1:0,"data-orientation":r,...f,ref:y,style:{outline:"none",...n.style},onMouseDown:Te(n.onMouseDown,()=>{N.current=!0}),onFocus:Te(n.onFocus,I=>{const L=!N.current;if(I.target===I.currentTarget&&L&&!C){const A=new CustomEvent(Ey,cU);if(I.currentTarget.dispatchEvent(A),!A.defaultPrevented){const V=M().filter(K=>K.focusable),F=V.find(K=>K.active),U=V.find(K=>K.id===w),q=[F,U,...V].filter(Boolean).map(K=>K.ref.current);KA(q,h)}}N.current=!1}),onBlur:Te(n.onBlur,()=>T(!1))})})}),qA="RovingFocusGroupItem",GA=b.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:i,...o}=n,a=fr(),c=i||a,d=fU(qA,t),h=d.currentTabStopId===c,f=HA(t),{onFocusableItemAdd:m,onFocusableItemRemove:y}=d;return b.useEffect(()=>{if(r)return m(),()=>y()},[r,m,y]),g.jsx(Lv.ItemSlot,{scope:t,id:c,focusable:r,active:s,children:g.jsx(We.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...o,ref:e,onMouseDown:Te(n.onMouseDown,v=>{r?d.onItemFocus(c):v.preventDefault()}),onFocus:Te(n.onFocus,()=>d.onItemFocus(c)),onKeyDown:Te(n.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){d.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const w=yU(v,d.orientation,d.dir);if(w!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let C=f().filter(T=>T.focusable).map(T=>T.ref.current);if(w==="last")C.reverse();else if(w==="prev"||w==="next"){w==="prev"&&C.reverse();const T=C.indexOf(v.currentTarget);C=d.loop?vU(C,T+1):C.slice(T+1)}setTimeout(()=>KA(C))}})})})});GA.displayName=qA;var mU={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function gU(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function yU(n,e,t){const r=gU(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return mU[r]}function KA(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function vU(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var YA=UA,XA=GA,xU=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},La=new WeakMap,Dh=new WeakMap,Rh={},Ny=0,JA=function(n){return n&&(n.host||JA(n.parentNode))},wU=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=JA(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},bU=function(n,e,t,r){var s=wU(e,Array.isArray(n)?n:[n]);Rh[t]||(Rh[t]=new WeakMap);var i=Rh[t],o=[],a=new Set,c=new Set(s),d=function(f){!f||a.has(f)||(a.add(f),d(f.parentNode))};s.forEach(d);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(a.has(m))h(m);else try{var y=m.getAttribute(r),v=y!==null&&y!=="false",w=(La.get(m)||0)+1,S=(i.get(m)||0)+1;La.set(m,w),i.set(m,S),o.push(m),w===1&&v&&Dh.set(m,!0),S===1&&m.setAttribute(t,"true"),v||m.setAttribute(r,"true")}catch(C){console.error("aria-hidden: cannot operate on ",m,C)}})};return h(e),a.clear(),Ny++,function(){o.forEach(function(f){var m=La.get(f)-1,y=i.get(f)-1;La.set(f,m),i.set(f,y),m||(Dh.has(f)||f.removeAttribute(r),Dh.delete(f)),y||f.removeAttribute(t)}),Ny--,Ny||(La=new WeakMap,La=new WeakMap,Dh=new WeakMap,Rh={})}},Sx=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=xU(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),bU(r,s,t,"aria-hidden")):function(){return null}},ms=function(){return ms=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ms.apply(this,arguments)};function ZA(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function rs(n,e,t,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(i=(s<3?o(i):s>3?o(e,t,i):o(e,t))||i);return s>3&&i&&Object.defineProperty(e,t,i),i}function Kt(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(h){try{d(r.next(h))}catch(f){o(f)}}function c(h){try{d(r.throw(h))}catch(f){o(f)}}function d(h){h.done?i(h.value):s(h.value).then(a,c)}d((r=r.apply(n,e||[])).next())})}function SU(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}var Qh="right-scroll-bar-position",ef="width-before-scroll-bar",CU="with-scroll-bars-hidden",_U="--removed-body-scroll-bar-size";function Ay(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function TU(n,e){var t=b.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var kU=typeof window<"u"?b.useLayoutEffect:b.useEffect,$1=new WeakMap;function EU(n,e){var t=TU(null,function(r){return n.forEach(function(s){return Ay(s,r)})});return kU(function(){var r=$1.get(t);if(r){var s=new Set(r),i=new Set(n),o=t.current;s.forEach(function(a){i.has(a)||Ay(a,null)}),i.forEach(function(a){s.has(a)||Ay(a,o)})}$1.set(t,n)},[n]),t}function NU(n){return n}function AU(n,e){e===void 0&&(e=NU);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(i){var o=e(i,r);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;t.length;){var o=t;t=[],o.forEach(i)}t={push:function(a){return i(a)},filter:function(){return t}}},assignMedium:function(i){r=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(i),o=t}var c=function(){var h=o;o=[],h.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),t={push:function(h){o.push(h),d()},filter:function(h){return o=o.filter(h),t}}}};return s}function MU(n){n===void 0&&(n={});var e=AU(null);return e.options=ms({async:!0,ssr:!1},n),e}var QA=function(n){var e=n.sideCar,t=ZA(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return b.createElement(r,ms({},t))};QA.isSideCarExport=!0;function OU(n,e){return n.useMedium(e),QA}var eM=MU(),My=function(){},Cp=b.forwardRef(function(n,e){var t=b.useRef(null),r=b.useState({onScrollCapture:My,onWheelCapture:My,onTouchMoveCapture:My}),s=r[0],i=r[1],o=n.forwardProps,a=n.children,c=n.className,d=n.removeScrollBar,h=n.enabled,f=n.shards,m=n.sideCar,y=n.noIsolation,v=n.inert,w=n.allowPinchZoom,S=n.as,C=S===void 0?"div":S,T=n.gapMode,k=ZA(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=m,N=EU([t,e]),O=ms(ms({},k),s);return b.createElement(b.Fragment,null,h&&b.createElement(M,{sideCar:eM,removeScrollBar:d,shards:f,noIsolation:y,inert:v,setCallbacks:i,allowPinchZoom:!!w,lockRef:t,gapMode:T}),o?b.cloneElement(b.Children.only(a),ms(ms({},O),{ref:N})):b.createElement(C,ms({},O,{className:c,ref:N}),a))});Cp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Cp.classNames={fullWidth:ef,zeroRight:Qh};var PU=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function DU(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=PU();return e&&n.setAttribute("nonce",e),n}function RU(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function IU(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var jU=function(){var n=0,e=null;return{add:function(t){n==0&&(e=DU())&&(RU(e,t),IU(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},LU=function(){var n=jU();return function(e,t){b.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},tM=function(){var n=LU(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},FU={left:0,top:0,right:0,gap:0},Oy=function(n){return parseInt(n||"",10)||0},VU=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[Oy(t),Oy(r),Oy(s)]},BU=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return FU;var e=VU(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},zU=tM(),ol="data-scroll-locked",WU=function(n,e,t,r){var s=n.left,i=n.top,o=n.right,a=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(CU,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(ol,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Qh,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(ef,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Qh," .").concat(Qh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ef," .").concat(ef,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ol,`] {
    `).concat(_U,": ").concat(a,`px;
  }
`)},H1=function(){var n=parseInt(document.body.getAttribute(ol)||"0",10);return isFinite(n)?n:0},$U=function(){b.useEffect(function(){return document.body.setAttribute(ol,(H1()+1).toString()),function(){var n=H1()-1;n<=0?document.body.removeAttribute(ol):document.body.setAttribute(ol,n.toString())}},[])},HU=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;$U();var i=b.useMemo(function(){return BU(s)},[s]);return b.createElement(zU,{styles:WU(i,!e,s,t?"":"!important")})},Fv=!1;if(typeof window<"u")try{var Ih=Object.defineProperty({},"passive",{get:function(){return Fv=!0,!0}});window.addEventListener("test",Ih,Ih),window.removeEventListener("test",Ih,Ih)}catch{Fv=!1}var Fa=Fv?{passive:!1}:!1,UU=function(n){return n.tagName==="TEXTAREA"},nM=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!UU(n)&&t[e]==="visible")},qU=function(n){return nM(n,"overflowY")},GU=function(n){return nM(n,"overflowX")},U1=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=rM(n,r);if(s){var i=sM(n,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},KU=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},YU=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},rM=function(n,e){return n==="v"?qU(e):GU(e)},sM=function(n,e){return n==="v"?KU(e):YU(e)},XU=function(n,e){return n==="h"&&e==="rtl"?-1:1},JU=function(n,e,t,r,s){var i=XU(n,window.getComputedStyle(e).direction),o=i*r,a=t.target,c=e.contains(a),d=!1,h=o>0,f=0,m=0;do{var y=sM(n,a),v=y[0],w=y[1],S=y[2],C=w-S-i*v;(v||C)&&rM(n,a)&&(f+=C,m+=v),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!c&&a!==document.body||c&&(e.contains(a)||e===a));return(h&&Math.abs(f)<1||!h&&Math.abs(m)<1)&&(d=!0),d},jh=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},q1=function(n){return[n.deltaX,n.deltaY]},G1=function(n){return n&&"current"in n?n.current:n},ZU=function(n,e){return n[0]===e[0]&&n[1]===e[1]},QU=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},e6=0,Va=[];function t6(n){var e=b.useRef([]),t=b.useRef([0,0]),r=b.useRef(),s=b.useState(e6++)[0],i=b.useState(tM)[0],o=b.useRef(n);b.useEffect(function(){o.current=n},[n]),b.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var w=SU([n.lockRef.current],(n.shards||[]).map(G1),!0).filter(Boolean);return w.forEach(function(S){return S.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),w.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var a=b.useCallback(function(w,S){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!o.current.allowPinchZoom;var C=jh(w),T=t.current,k="deltaX"in w?w.deltaX:T[0]-C[0],M="deltaY"in w?w.deltaY:T[1]-C[1],N,O=w.target,D=Math.abs(k)>Math.abs(M)?"h":"v";if("touches"in w&&D==="h"&&O.type==="range")return!1;var I=U1(D,O);if(!I)return!0;if(I?N=D:(N=D==="v"?"h":"v",I=U1(D,O)),!I)return!1;if(!r.current&&"changedTouches"in w&&(k||M)&&(r.current=N),!N)return!0;var L=r.current||N;return JU(L,S,w,L==="h"?k:M)},[]),c=b.useCallback(function(w){var S=w;if(!(!Va.length||Va[Va.length-1]!==i)){var C="deltaY"in S?q1(S):jh(S),T=e.current.filter(function(N){return N.name===S.type&&(N.target===S.target||S.target===N.shadowParent)&&ZU(N.delta,C)})[0];if(T&&T.should){S.cancelable&&S.preventDefault();return}if(!T){var k=(o.current.shards||[]).map(G1).filter(Boolean).filter(function(N){return N.contains(S.target)}),M=k.length>0?a(S,k[0]):!o.current.noIsolation;M&&S.cancelable&&S.preventDefault()}}},[]),d=b.useCallback(function(w,S,C,T){var k={name:w,delta:S,target:C,should:T,shadowParent:n6(C)};e.current.push(k),setTimeout(function(){e.current=e.current.filter(function(M){return M!==k})},1)},[]),h=b.useCallback(function(w){t.current=jh(w),r.current=void 0},[]),f=b.useCallback(function(w){d(w.type,q1(w),w.target,a(w,n.lockRef.current))},[]),m=b.useCallback(function(w){d(w.type,jh(w),w.target,a(w,n.lockRef.current))},[]);b.useEffect(function(){return Va.push(i),n.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Fa),document.addEventListener("touchmove",c,Fa),document.addEventListener("touchstart",h,Fa),function(){Va=Va.filter(function(w){return w!==i}),document.removeEventListener("wheel",c,Fa),document.removeEventListener("touchmove",c,Fa),document.removeEventListener("touchstart",h,Fa)}},[]);var y=n.removeScrollBar,v=n.inert;return b.createElement(b.Fragment,null,v?b.createElement(i,{styles:QU(s)}):null,y?b.createElement(HU,{gapMode:n.gapMode}):null)}function n6(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const r6=OU(eM,t6);var _p=b.forwardRef(function(n,e){return b.createElement(Cp,ms({},n,{ref:e,sideCar:r6}))});_p.classNames=Cp.classNames;var Vv=["Enter"," "],s6=["ArrowDown","PageUp","Home"],iM=["ArrowUp","PageDown","End"],i6=[...s6,...iM],o6={ltr:[...Vv,"ArrowRight"],rtl:[...Vv,"ArrowLeft"]},a6={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Uu="Menu",[wu,l6,c6]=mp(Uu),[sa,oM]=Ir(Uu,[c6,zl,Sp]),qu=zl(),aM=Sp(),[lM,fo]=sa(Uu),[u6,Gu]=sa(Uu),cM=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=n,a=qu(e),[c,d]=b.useState(null),h=b.useRef(!1),f=qt(i),m=Fl(s);return b.useEffect(()=>{const y=()=>{h.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>h.current=!1;return document.addEventListener("keydown",y,{capture:!0}),()=>{document.removeEventListener("keydown",y,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),g.jsx(wp,{...a,children:g.jsx(lM,{scope:e,open:t,onOpenChange:f,content:c,onContentChange:d,children:g.jsx(u6,{scope:e,onClose:b.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:h,dir:m,modal:o,children:r})})})};cM.displayName=Uu;var d6="MenuAnchor",Cx=b.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=qu(t);return g.jsx(xx,{...s,...r,ref:e})});Cx.displayName=d6;var _x="MenuPortal",[h6,uM]=sa(_x,{forceMount:void 0}),dM=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:s}=n,i=fo(_x,e);return g.jsx(h6,{scope:e,forceMount:t,children:g.jsx(Hn,{present:t||i.open,children:g.jsx(Hu,{asChild:!0,container:s,children:r})})})};dM.displayName=_x;var Pr="MenuContent",[f6,Tx]=sa(Pr),hM=b.forwardRef((n,e)=>{const t=uM(Pr,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,i=fo(Pr,n.__scopeMenu),o=Gu(Pr,n.__scopeMenu);return g.jsx(wu.Provider,{scope:n.__scopeMenu,children:g.jsx(Hn,{present:r||i.open,children:g.jsx(wu.Slot,{scope:n.__scopeMenu,children:o.modal?g.jsx(p6,{...s,ref:e}):g.jsx(m6,{...s,ref:e})})})})}),p6=b.forwardRef((n,e)=>{const t=fo(Pr,n.__scopeMenu),r=b.useRef(null),s=Ye(e,r);return b.useEffect(()=>{const i=r.current;if(i)return Sx(i)},[]),g.jsx(kx,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:Te(n.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),m6=b.forwardRef((n,e)=>{const t=fo(Pr,n.__scopeMenu);return g.jsx(kx,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),kx=b.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:m,onDismiss:y,disableOutsideScroll:v,...w}=n,S=fo(Pr,t),C=Gu(Pr,t),T=qu(t),k=aM(t),M=l6(t),[N,O]=b.useState(null),D=b.useRef(null),I=Ye(e,D,S.onContentChange),L=b.useRef(0),A=b.useRef(""),V=b.useRef(0),F=b.useRef(null),U=b.useRef("right"),B=b.useRef(0),q=v?_p:b.Fragment,K=v?{as:eo,allowPinchZoom:!0}:void 0,G=z=>{var ce,ae;const W=A.current+z,P=M().filter(xe=>!xe.disabled),j=document.activeElement,J=(ce=P.find(xe=>xe.ref.current===j))==null?void 0:ce.textValue,te=P.map(xe=>xe.textValue),ne=E6(te,W,J),ue=(ae=P.find(xe=>xe.textValue===ne))==null?void 0:ae.ref.current;(function xe(ke){A.current=ke,window.clearTimeout(L.current),ke!==""&&(L.current=window.setTimeout(()=>xe(""),1e3))})(W),ue&&setTimeout(()=>ue.focus())};b.useEffect(()=>()=>window.clearTimeout(L.current),[]),lx();const $=b.useCallback(z=>{var P,j;return U.current===((P=F.current)==null?void 0:P.side)&&A6(z,(j=F.current)==null?void 0:j.area)},[]);return g.jsx(f6,{scope:t,searchRef:A,onItemEnter:b.useCallback(z=>{$(z)&&z.preventDefault()},[$]),onItemLeave:b.useCallback(z=>{var W;$(z)||((W=D.current)==null||W.focus(),O(null))},[$]),onTriggerLeave:b.useCallback(z=>{$(z)&&z.preventDefault()},[$]),pointerGraceTimerRef:V,onPointerGraceIntentChange:b.useCallback(z=>{F.current=z},[]),children:g.jsx(q,{...K,children:g.jsx(gp,{asChild:!0,trapped:s,onMountAutoFocus:Te(i,z=>{var W;z.preventDefault(),(W=D.current)==null||W.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:g.jsx(Wu,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:m,onDismiss:y,children:g.jsx(YA,{asChild:!0,...k,dir:C.dir,orientation:"vertical",loop:r,currentTabStopId:N,onCurrentTabStopIdChange:O,onEntryFocus:Te(c,z=>{C.isUsingKeyboardRef.current||z.preventDefault()}),preventScrollOnEntryFocus:!0,children:g.jsx(wx,{role:"menu","aria-orientation":"vertical","data-state":AM(S.open),"data-radix-menu-content":"",dir:C.dir,...T,...w,ref:I,style:{outline:"none",...w.style},onKeyDown:Te(w.onKeyDown,z=>{const P=z.target.closest("[data-radix-menu-content]")===z.currentTarget,j=z.ctrlKey||z.altKey||z.metaKey,J=z.key.length===1;P&&(z.key==="Tab"&&z.preventDefault(),!j&&J&&G(z.key));const te=D.current;if(z.target!==te||!i6.includes(z.key))return;z.preventDefault();const ue=M().filter(ce=>!ce.disabled).map(ce=>ce.ref.current);iM.includes(z.key)&&ue.reverse(),T6(ue)}),onBlur:Te(n.onBlur,z=>{z.currentTarget.contains(z.target)||(window.clearTimeout(L.current),A.current="")}),onPointerMove:Te(n.onPointerMove,bu(z=>{const W=z.target,P=B.current!==z.clientX;if(z.currentTarget.contains(W)&&P){const j=z.clientX>B.current?"right":"left";U.current=j,B.current=z.clientX}}))})})})})})})});hM.displayName=Pr;var g6="MenuGroup",Ex=b.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return g.jsx(We.div,{role:"group",...r,ref:e})});Ex.displayName=g6;var y6="MenuLabel",fM=b.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return g.jsx(We.div,{...r,ref:e})});fM.displayName=y6;var Nf="MenuItem",K1="menu.itemSelect",Tp=b.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...s}=n,i=b.useRef(null),o=Gu(Nf,n.__scopeMenu),a=Tx(Nf,n.__scopeMenu),c=Ye(e,i),d=b.useRef(!1),h=()=>{const f=i.current;if(!t&&f){const m=new CustomEvent(K1,{bubbles:!0,cancelable:!0});f.addEventListener(K1,y=>r==null?void 0:r(y),{once:!0}),wA(f,m),m.defaultPrevented?d.current=!1:o.onClose()}};return g.jsx(pM,{...s,ref:c,disabled:t,onClick:Te(n.onClick,h),onPointerDown:f=>{var m;(m=n.onPointerDown)==null||m.call(n,f),d.current=!0},onPointerUp:Te(n.onPointerUp,f=>{var m;d.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:Te(n.onKeyDown,f=>{const m=a.searchRef.current!=="";t||m&&f.key===" "||Vv.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Tp.displayName=Nf;var pM=b.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:s,...i}=n,o=Tx(Nf,t),a=aM(t),c=b.useRef(null),d=Ye(e,c),[h,f]=b.useState(!1),[m,y]=b.useState("");return b.useEffect(()=>{const v=c.current;v&&y((v.textContent??"").trim())},[i.children]),g.jsx(wu.ItemSlot,{scope:t,disabled:r,textValue:s??m,children:g.jsx(XA,{asChild:!0,...a,focusable:!r,children:g.jsx(We.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:d,onPointerMove:Te(n.onPointerMove,bu(v=>{r?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Te(n.onPointerLeave,bu(v=>o.onItemLeave(v))),onFocus:Te(n.onFocus,()=>f(!0)),onBlur:Te(n.onBlur,()=>f(!1))})})})}),v6="MenuCheckboxItem",mM=b.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...s}=n;return g.jsx(wM,{scope:n.__scopeMenu,checked:t,children:g.jsx(Tp,{role:"menuitemcheckbox","aria-checked":Af(t)?"mixed":t,...s,ref:e,"data-state":Mx(t),onSelect:Te(s.onSelect,()=>r==null?void 0:r(Af(t)?!0:!t),{checkForDefaultPrevented:!1})})})});mM.displayName=v6;var gM="MenuRadioGroup",[x6,w6]=sa(gM,{value:void 0,onValueChange:()=>{}}),yM=b.forwardRef((n,e)=>{const{value:t,onValueChange:r,...s}=n,i=qt(r);return g.jsx(x6,{scope:n.__scopeMenu,value:t,onValueChange:i,children:g.jsx(Ex,{...s,ref:e})})});yM.displayName=gM;var vM="MenuRadioItem",xM=b.forwardRef((n,e)=>{const{value:t,...r}=n,s=w6(vM,n.__scopeMenu),i=t===s.value;return g.jsx(wM,{scope:n.__scopeMenu,checked:i,children:g.jsx(Tp,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":Mx(i),onSelect:Te(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,t)},{checkForDefaultPrevented:!1})})})});xM.displayName=vM;var Nx="MenuItemIndicator",[wM,b6]=sa(Nx,{checked:!1}),bM=b.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...s}=n,i=b6(Nx,t);return g.jsx(Hn,{present:r||Af(i.checked)||i.checked===!0,children:g.jsx(We.span,{...s,ref:e,"data-state":Mx(i.checked)})})});bM.displayName=Nx;var S6="MenuSeparator",SM=b.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return g.jsx(We.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});SM.displayName=S6;var C6="MenuArrow",CM=b.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=qu(t);return g.jsx(bx,{...s,...r,ref:e})});CM.displayName=C6;var Ax="MenuSub",[_6,_M]=sa(Ax),TM=n=>{const{__scopeMenu:e,children:t,open:r=!1,onOpenChange:s}=n,i=fo(Ax,e),o=qu(e),[a,c]=b.useState(null),[d,h]=b.useState(null),f=qt(s);return b.useEffect(()=>(i.open===!1&&f(!1),()=>f(!1)),[i.open,f]),g.jsx(wp,{...o,children:g.jsx(lM,{scope:e,open:r,onOpenChange:f,content:d,onContentChange:h,children:g.jsx(_6,{scope:e,contentId:fr(),triggerId:fr(),trigger:a,onTriggerChange:c,children:t})})})};TM.displayName=Ax;var Yc="MenuSubTrigger",kM=b.forwardRef((n,e)=>{const t=fo(Yc,n.__scopeMenu),r=Gu(Yc,n.__scopeMenu),s=_M(Yc,n.__scopeMenu),i=Tx(Yc,n.__scopeMenu),o=b.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:c}=i,d={__scopeMenu:n.__scopeMenu},h=b.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return b.useEffect(()=>h,[h]),b.useEffect(()=>{const f=a.current;return()=>{window.clearTimeout(f),c(null)}},[a,c]),g.jsx(Cx,{asChild:!0,...d,children:g.jsx(pM,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":s.contentId,"data-state":AM(t.open),...n,ref:tp(e,s.onTriggerChange),onClick:f=>{var m;(m=n.onClick)==null||m.call(n,f),!(n.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:Te(n.onPointerMove,bu(f=>{i.onItemEnter(f),!f.defaultPrevented&&!n.disabled&&!t.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{t.onOpenChange(!0),h()},100))})),onPointerLeave:Te(n.onPointerLeave,bu(f=>{var y,v;h();const m=(y=t.content)==null?void 0:y.getBoundingClientRect();if(m){const w=(v=t.content)==null?void 0:v.dataset.side,S=w==="right",C=S?-5:5,T=m[S?"left":"right"],k=m[S?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+C,y:f.clientY},{x:T,y:m.top},{x:k,y:m.top},{x:k,y:m.bottom},{x:T,y:m.bottom}],side:w}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Te(n.onKeyDown,f=>{var y;const m=i.searchRef.current!=="";n.disabled||m&&f.key===" "||o6[r.dir].includes(f.key)&&(t.onOpenChange(!0),(y=t.content)==null||y.focus(),f.preventDefault())})})})});kM.displayName=Yc;var EM="MenuSubContent",NM=b.forwardRef((n,e)=>{const t=uM(Pr,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,i=fo(Pr,n.__scopeMenu),o=Gu(Pr,n.__scopeMenu),a=_M(EM,n.__scopeMenu),c=b.useRef(null),d=Ye(e,c);return g.jsx(wu.Provider,{scope:n.__scopeMenu,children:g.jsx(Hn,{present:r||i.open,children:g.jsx(wu.Slot,{scope:n.__scopeMenu,children:g.jsx(kx,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var f;o.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:Te(n.onFocusOutside,h=>{h.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Te(n.onEscapeKeyDown,h=>{o.onClose(),h.preventDefault()}),onKeyDown:Te(n.onKeyDown,h=>{var y;const f=h.currentTarget.contains(h.target),m=a6[o.dir].includes(h.key);f&&m&&(i.onOpenChange(!1),(y=a.trigger)==null||y.focus(),h.preventDefault())})})})})})});NM.displayName=EM;function AM(n){return n?"open":"closed"}function Af(n){return n==="indeterminate"}function Mx(n){return Af(n)?"indeterminate":n?"checked":"unchecked"}function T6(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function k6(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function E6(n,e,t){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let o=k6(n,Math.max(i,0));s.length===1&&(o=o.filter(d=>d!==t));const c=o.find(d=>d.toLowerCase().startsWith(s.toLowerCase()));return c!==t?c:void 0}function N6(n,e){const{x:t,y:r}=n;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,c=e[i].y,d=e[o].x,h=e[o].y;c>r!=h>r&&t<(d-a)*(r-c)/(h-c)+a&&(s=!s)}return s}function A6(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return N6(t,e)}function bu(n){return e=>e.pointerType==="mouse"?n(e):void 0}var M6=cM,O6=Cx,P6=dM,D6=hM,R6=Ex,I6=fM,j6=Tp,L6=mM,F6=yM,V6=xM,B6=bM,z6=SM,W6=CM,$6=TM,H6=kM,U6=NM,Ox="DropdownMenu",[q6,zne]=Ir(Ox,[oM]),Dn=oM(),[G6,MM]=q6(Ox),OM=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:s,defaultOpen:i,onOpenChange:o,modal:a=!0}=n,c=Dn(e),d=b.useRef(null),[h=!1,f]=Cs({prop:s,defaultProp:i,onChange:o});return g.jsx(G6,{scope:e,triggerId:fr(),triggerRef:d,contentId:fr(),open:h,onOpenChange:f,onOpenToggle:b.useCallback(()=>f(m=>!m),[f]),modal:a,children:g.jsx(M6,{...c,open:h,onOpenChange:f,dir:r,modal:a,children:t})})};OM.displayName=Ox;var PM="DropdownMenuTrigger",DM=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...s}=n,i=MM(PM,t),o=Dn(t);return g.jsx(O6,{asChild:!0,...o,children:g.jsx(We.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:tp(e,i.triggerRef),onPointerDown:Te(n.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:Te(n.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});DM.displayName=PM;var K6="DropdownMenuPortal",RM=n=>{const{__scopeDropdownMenu:e,...t}=n,r=Dn(e);return g.jsx(P6,{...r,...t})};RM.displayName=K6;var IM="DropdownMenuContent",jM=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=MM(IM,t),i=Dn(t),o=b.useRef(!1);return g.jsx(D6,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:Te(n.onCloseAutoFocus,a=>{var c;o.current||(c=s.triggerRef.current)==null||c.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:Te(n.onInteractOutside,a=>{const c=a.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,h=c.button===2||d;(!s.modal||h)&&(o.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});jM.displayName=IM;var Y6="DropdownMenuGroup",X6=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Dn(t);return g.jsx(R6,{...s,...r,ref:e})});X6.displayName=Y6;var J6="DropdownMenuLabel",LM=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Dn(t);return g.jsx(I6,{...s,...r,ref:e})});LM.displayName=J6;var Z6="DropdownMenuItem",FM=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Dn(t);return g.jsx(j6,{...s,...r,ref:e})});FM.displayName=Z6;var Q6="DropdownMenuCheckboxItem",VM=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Dn(t);return g.jsx(L6,{...s,...r,ref:e})});VM.displayName=Q6;var e4="DropdownMenuRadioGroup",t4=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Dn(t);return g.jsx(F6,{...s,...r,ref:e})});t4.displayName=e4;var n4="DropdownMenuRadioItem",BM=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Dn(t);return g.jsx(V6,{...s,...r,ref:e})});BM.displayName=n4;var r4="DropdownMenuItemIndicator",zM=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Dn(t);return g.jsx(B6,{...s,...r,ref:e})});zM.displayName=r4;var s4="DropdownMenuSeparator",WM=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Dn(t);return g.jsx(z6,{...s,...r,ref:e})});WM.displayName=s4;var i4="DropdownMenuArrow",o4=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Dn(t);return g.jsx(W6,{...s,...r,ref:e})});o4.displayName=i4;var a4=n=>{const{__scopeDropdownMenu:e,children:t,open:r,onOpenChange:s,defaultOpen:i}=n,o=Dn(e),[a=!1,c]=Cs({prop:r,defaultProp:i,onChange:s});return g.jsx($6,{...o,open:a,onOpenChange:c,children:t})},l4="DropdownMenuSubTrigger",$M=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Dn(t);return g.jsx(H6,{...s,...r,ref:e})});$M.displayName=l4;var c4="DropdownMenuSubContent",HM=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Dn(t);return g.jsx(U6,{...s,...r,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});HM.displayName=c4;var UM=OM,u4=DM,d4=RM,qM=jM,GM=LM,KM=FM,YM=VM,XM=BM,JM=zM,ZM=WM,h4=a4,QM=$M,eO=HM;/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tO=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var p4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=b.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},c)=>b.createElement("svg",{ref:c,...p4,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:tO("lucide",s),...a},[...o.map(([d,h])=>b.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=(n,e)=>{const t=b.forwardRef(({className:r,...s},i)=>b.createElement(m4,{ref:i,iconNode:e,className:tO(`lucide-${f4(n)}`,r),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Bv=ss("ArrowLeft",g4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],nO=ss("ArrowRight",y4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Px=ss("Check",v4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Dx=ss("ChevronDown",x4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],b4=ss("ChevronRight",w4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],C4=ss("ChevronUp",S4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],T4=ss("Circle",_4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],E4=ss("LoaderCircle",k4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],A4=ss("Mic",N4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],O4=ss("Plus",M4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],D4=ss("Trash2",P4),Ue=({children:n,...e})=>{const{play:t}=pt(ut.MENU_OPEN),{play:r}=pt(ut.MENU_CLOSE);return g.jsx(UM,{onOpenChange:s=>{var i;s?t():r(),(i=e.onOpenChange)==null||i.call(e,s)},...e,children:n})};Ue.displayName=UM.displayName;const Qe=u4,iu=h4,al=b.forwardRef(({className:n,inset:e,children:t,...r},s)=>g.jsxs(QM,{ref:s,className:Pe("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",n),...r,children:[t,g.jsx(b4,{className:"ml-auto"})]}));al.displayName=QM.displayName;const ll=b.forwardRef(({className:n,...e},t)=>g.jsx(eO,{ref:t,className:Pe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...e}));ll.displayName=eO.displayName;const qe=b.forwardRef(({className:n,sideOffset:e=4,...t},r)=>g.jsx(d4,{children:g.jsx(qM,{ref:r,sideOffset:e,className:Pe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t})}));qe.displayName=qM.displayName;const de=b.forwardRef(({className:n,inset:e,...t},r)=>g.jsx(KM,{ref:r,className:Pe("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",e&&"pl-8",n),...t}));de.displayName=KM.displayName;const at=b.forwardRef(({className:n,children:e,checked:t,...r},s)=>g.jsxs(YM,{ref:s,className:Pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:t,...r,children:[g.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(JM,{children:g.jsx(Px,{className:"h-4 w-4"})})}),e]}));at.displayName=YM.displayName;const R4=b.forwardRef(({className:n,children:e,...t},r)=>g.jsxs(XM,{ref:r,className:Pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[g.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(JM,{children:g.jsx(T4,{className:"h-2 w-2 fill-current"})})}),e]}));R4.displayName=XM.displayName;const I4=b.forwardRef(({className:n,inset:e,...t},r)=>g.jsx(GM,{ref:r,className:Pe("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t}));I4.displayName=GM.displayName;const Le=b.forwardRef(({className:n,...e},t)=>g.jsx(ZM,{ref:t,className:Pe(n,"-mx-1 my-1 h-[1px] border-t border-dotted border-muted border-b-0"),...e}));Le.displayName=ZM.displayName;function j4({editor:n,onClose:e,onShowHelp:t,onShowAbout:r,onNewFile:s,onImportFile:i,onExportFile:o,onSave:a,currentFilePath:c,handleFileSelect:d}){const h=Ct.useRef(null);return g.jsxs(Rs,{children:[g.jsx("input",{type:"file",ref:h,onChange:d,accept:".txt,.html,.md",className:"hidden"}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 text-md px-2 py-1 border-none hover:bg-gray-200 active:bg-gray-900 active:text-white focus-visible:ring-0",children:"File"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{onClick:s,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"New File"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:i,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Open..."}),g.jsx(de,{onClick:a,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:c?"Save":"Save..."}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:()=>{var f;return(f=h.current)==null?void 0:f.click()},className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Import from Device..."}),g.jsxs(iu,{children:[g.jsx(al,{className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Export As..."}),g.jsxs(ll,{children:[g.jsx(de,{onClick:()=>o("html"),className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"HTML"}),g.jsx(de,{onClick:()=>o("md"),className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Markdown"}),g.jsx(de,{onClick:()=>o("txt"),className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Plain Text"})]})]}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:e,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Close"})]})]}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 text-md px-2 py-1 border-none hover:bg-gray-200 active:bg-gray-900 active:text-white focus-visible:ring-0",children:"Edit"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{onClick:()=>n==null?void 0:n.chain().focus().undo().run(),className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Undo"}),g.jsx(de,{onClick:()=>n==null?void 0:n.chain().focus().redo().run(),className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Redo"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:()=>{var f;(f=window.getSelection())!=null&&f.toString()&&document.execCommand("copy")},className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Copy"}),g.jsx(de,{onClick:()=>{var f;(f=window.getSelection())!=null&&f.toString()&&document.execCommand("cut")},className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Cut"}),g.jsx(de,{onClick:()=>document.execCommand("paste"),className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Paste"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:()=>n==null?void 0:n.chain().focus().selectAll().run(),className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Select All"})]})]}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 text-md px-2 py-1 border-none hover:bg-gray-200 active:bg-gray-900 active:text-white focus-visible:ring-0",children:"Format"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(at,{checked:n==null?void 0:n.isActive("bold"),onCheckedChange:()=>n==null?void 0:n.chain().focus().toggleBold().run(),className:"text-md h-6 px-3 pl-8 active:bg-gray-900 active:text-white flex justify-between items-center",children:g.jsx("span",{children:"Bold"})}),g.jsx(at,{checked:n==null?void 0:n.isActive("italic"),onCheckedChange:()=>n==null?void 0:n.chain().focus().toggleItalic().run(),className:"text-md h-6 px-3 pl-8 active:bg-gray-900 active:text-white flex justify-between items-center",children:g.jsx("span",{children:"Italic"})}),g.jsx(at,{checked:n==null?void 0:n.isActive("underline"),onCheckedChange:()=>n==null?void 0:n.chain().focus().toggleUnderline().run(),className:"text-md h-6 px-3 pl-8 active:bg-gray-900 active:text-white flex justify-between items-center",children:g.jsx("span",{children:"Underline"})}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(at,{checked:n==null?void 0:n.isActive("paragraph"),onCheckedChange:()=>n==null?void 0:n.chain().focus().setParagraph().run(),className:"text-md h-6 px-3 pl-8 active:bg-gray-900 active:text-white flex justify-between items-center",children:g.jsx("span",{children:"Text"})}),g.jsx(at,{checked:n==null?void 0:n.isActive("heading",{level:1}),onCheckedChange:()=>n==null?void 0:n.chain().focus().toggleHeading({level:1}).run(),className:"text-md h-6 px-3 pl-8 active:bg-gray-900 active:text-white flex justify-between items-center",children:g.jsx("span",{children:"Heading 1"})}),g.jsx(at,{checked:n==null?void 0:n.isActive("heading",{level:2}),onCheckedChange:()=>n==null?void 0:n.chain().focus().toggleHeading({level:2}).run(),className:"text-md h-6 px-3 pl-8 active:bg-gray-900 active:text-white flex justify-between items-center",children:g.jsx("span",{children:"Heading 2"})}),g.jsx(at,{checked:n==null?void 0:n.isActive("heading",{level:3}),onCheckedChange:()=>n==null?void 0:n.chain().focus().toggleHeading({level:3}).run(),className:"text-md h-6 px-3 pl-8 active:bg-gray-900 active:text-white flex justify-between items-center",children:g.jsx("span",{children:"Heading 3"})}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(at,{checked:n==null?void 0:n.isActive({textAlign:"left"}),onCheckedChange:()=>n==null?void 0:n.chain().focus().setTextAlign("left").run(),className:"text-md h-6 px-3 pl-8 active:bg-gray-900 active:text-white flex justify-between items-center",children:g.jsx("span",{children:"Align Left"})}),g.jsx(at,{checked:n==null?void 0:n.isActive({textAlign:"center"}),onCheckedChange:()=>n==null?void 0:n.chain().focus().setTextAlign("center").run(),className:"text-md h-6 px-3 pl-8 active:bg-gray-900 active:text-white flex justify-between items-center",children:g.jsx("span",{children:"Align Center"})}),g.jsx(at,{checked:n==null?void 0:n.isActive({textAlign:"right"}),onCheckedChange:()=>n==null?void 0:n.chain().focus().setTextAlign("right").run(),className:"text-md h-6 px-3 pl-8 active:bg-gray-900 active:text-white flex justify-between items-center",children:g.jsx("span",{children:"Align Right"})}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(at,{checked:n==null?void 0:n.isActive("bulletList"),onCheckedChange:()=>n==null?void 0:n.chain().focus().toggleBulletList().run(),className:"text-md h-6 px-3 pl-8 active:bg-gray-900 active:text-white flex justify-between items-center",children:g.jsx("span",{children:"Bullet List"})}),g.jsx(at,{checked:n==null?void 0:n.isActive("orderedList"),onCheckedChange:()=>n==null?void 0:n.chain().focus().toggleOrderedList().run(),className:"text-md h-6 px-3 pl-8 active:bg-gray-900 active:text-white flex justify-between items-center",children:g.jsx("span",{children:"Numbered List"})}),g.jsx(at,{checked:n==null?void 0:n.isActive("taskList"),onCheckedChange:()=>n==null?void 0:n.chain().focus().toggleTaskList().run(),className:"text-md h-6 px-3 pl-8 active:bg-gray-900 active:text-white flex justify-between items-center",children:g.jsx("span",{children:"Task List"})})]})]}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 text-md px-2 py-1 border-none hover:bg-gray-200 active:bg-gray-900 active:text-white focus-visible:ring-0",children:"Help"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{onClick:t,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"TextEdit Help"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:r,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"About TextEdit"})]})]})]})}var Rx="Dialog",[rO,Wne]=Ir(Rx),[L4,is]=rO(Rx),sO=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=n,a=b.useRef(null),c=b.useRef(null),[d=!1,h]=Cs({prop:r,defaultProp:s,onChange:i});return g.jsx(L4,{scope:e,triggerRef:a,contentRef:c,contentId:fr(),titleId:fr(),descriptionId:fr(),open:d,onOpenChange:h,onOpenToggle:b.useCallback(()=>h(f=>!f),[h]),modal:o,children:t})};sO.displayName=Rx;var iO="DialogTrigger",F4=b.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=is(iO,t),i=Ye(e,s.triggerRef);return g.jsx(We.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Lx(s.open),...r,ref:i,onClick:Te(n.onClick,s.onOpenToggle)})});F4.displayName=iO;var Ix="DialogPortal",[V4,oO]=rO(Ix,{forceMount:void 0}),aO=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:s}=n,i=is(Ix,e);return g.jsx(V4,{scope:e,forceMount:t,children:b.Children.map(r,o=>g.jsx(Hn,{present:t||i.open,children:g.jsx(Hu,{asChild:!0,container:s,children:o})}))})};aO.displayName=Ix;var Mf="DialogOverlay",lO=b.forwardRef((n,e)=>{const t=oO(Mf,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,i=is(Mf,n.__scopeDialog);return i.modal?g.jsx(Hn,{present:r||i.open,children:g.jsx(B4,{...s,ref:e})}):null});lO.displayName=Mf;var B4=b.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=is(Mf,t);return g.jsx(_p,{as:eo,allowPinchZoom:!0,shards:[s.contentRef],children:g.jsx(We.div,{"data-state":Lx(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Zo="DialogContent",cO=b.forwardRef((n,e)=>{const t=oO(Zo,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,i=is(Zo,n.__scopeDialog);return g.jsx(Hn,{present:r||i.open,children:i.modal?g.jsx(z4,{...s,ref:e}):g.jsx(W4,{...s,ref:e})})});cO.displayName=Zo;var z4=b.forwardRef((n,e)=>{const t=is(Zo,n.__scopeDialog),r=b.useRef(null),s=Ye(e,t.contentRef,r);return b.useEffect(()=>{const i=r.current;if(i)return Sx(i)},[]),g.jsx(uO,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Te(n.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=t.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Te(n.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:Te(n.onFocusOutside,i=>i.preventDefault())})}),W4=b.forwardRef((n,e)=>{const t=is(Zo,n.__scopeDialog),r=b.useRef(!1),s=b.useRef(!1);return g.jsx(uO,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=n.onCloseAutoFocus)==null||o.call(n,i),i.defaultPrevented||(r.current||(a=t.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,d;(c=n.onInteractOutside)==null||c.call(n,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((d=t.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),uO=b.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=n,a=is(Zo,t),c=b.useRef(null),d=Ye(e,c);return lx(),g.jsxs(g.Fragment,{children:[g.jsx(gp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:g.jsx(Wu,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":Lx(a.open),...o,ref:d,onDismiss:()=>a.onOpenChange(!1)})}),g.jsxs(g.Fragment,{children:[g.jsx($4,{titleId:a.titleId}),g.jsx(U4,{contentRef:c,descriptionId:a.descriptionId})]})]})}),jx="DialogTitle",dO=b.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=is(jx,t);return g.jsx(We.h2,{id:s.titleId,...r,ref:e})});dO.displayName=jx;var hO="DialogDescription",fO=b.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=is(hO,t);return g.jsx(We.p,{id:s.descriptionId,...r,ref:e})});fO.displayName=hO;var pO="DialogClose",mO=b.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=is(pO,t);return g.jsx(We.button,{type:"button",...r,ref:e,onClick:Te(n.onClick,()=>s.onOpenChange(!1))})});mO.displayName=pO;function Lx(n){return n?"open":"closed"}var gO="DialogTitleWarning",[$ne,yO]=P$(gO,{contentName:Zo,titleName:jx,docsSlug:"dialog"}),$4=({titleId:n})=>{const e=yO(gO),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return b.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},H4="DialogDescriptionWarning",U4=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${yO(H4).contentName}}.`;return b.useEffect(()=>{var i;const s=(i=n.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},q4=sO,G4=aO,K4=lO,vO=cO,xO=dO,wO=fO,Y4=mO;const Wl=q4,X4=G4,ia=b.forwardRef(({className:n,children:e,...t},r)=>{const s=b.useCallback(()=>{requestAnimationFrame(()=>{document.body.style.removeProperty("pointer-events")})},[]);return b.useEffect(()=>()=>s(),[s]),g.jsxs(X4,{children:[g.jsx(K4,{className:"fixed inset-0 z-50 bg-black/30 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),g.jsx(vO,{ref:r,className:Pe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-0 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 origin-center sm:rounded-lg",n),onEscapeKeyDown:s,onPointerDownOutside:s,onCloseAutoFocus:s,...t,children:e})]})});ia.displayName=vO.displayName;const oa=({className:n,children:e,...t})=>g.jsxs("div",{className:Pe("flex items-center h-6 mx-0 my-[0.1rem] px-[0.1rem] py-[0.2rem] bg-[linear-gradient(#000_50%,transparent_0)] bg-clip-content bg-[length:6.6666666667%_13.3333333333%] border-b-[2px] border-black",n),...t,children:[g.jsx(Y4,{className:"ml-2 w-4 h-4 bg-white border-2 border-black hover:bg-gray-200 active:bg-gray-300 flex items-center justify-center shadow-[0_0_0_1px_white] focus:outline-none focus:ring-0"}),g.jsx("div",{className:"select-none mx-auto bg-white px-2 py-0 h-full flex items-center justify-center",children:e}),g.jsx("div",{className:"mr-2 w-4 h-4"})]});oa.displayName="DialogHeader";const Fx=({className:n,...e})=>g.jsx("div",{className:Pe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});Fx.displayName="DialogFooter";const J4=b.forwardRef(({className:n,...e},t)=>g.jsx(xO,{ref:t,className:Pe("text-lg font-semibold leading-none tracking-tight",n),...e}));J4.displayName=xO.displayName;const Z4=b.forwardRef(({className:n,...e},t)=>g.jsx(wO,{ref:t,className:Pe("text-sm text-muted-foreground",n),...e}));Z4.displayName=wO.displayName;function Q4({icon:n,title:e,description:t}){return g.jsxs("div",{className:"p-4 bg-black/5 rounded-lg transition-colors",children:[g.jsx("div",{className:"text-xl",children:n}),g.jsx("h3",{className:"font-medium",children:e}),g.jsx("p",{className:"text-gray-700  font-geneva-12 text-[10px]",children:t})]})}function Ns({isOpen:n,onOpenChange:e,helpItems:t=[],appName:r}){return g.jsx(Wl,{open:n,onOpenChange:e,children:g.jsxs(ia,{className:"bg-system7-window-bg border-2 border-black rounded-lg shadow-[2px_2px_0px_0px_rgba(0,0,0,0.5)] max-w-[600px]",children:[g.jsx(oa,{children:"Help"}),g.jsxs("div",{className:"p-6 pt-2",children:[g.jsxs("p",{className:"text-2xl mb-4 font-apple-garamond",children:["Welcome to ",r]}),g.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:t.map(s=>g.jsx(Q4,{...s},s.title))})]})]})})}function As({isOpen:n,onOpenChange:e,metadata:t}){return g.jsx(Wl,{open:n,onOpenChange:e,children:g.jsxs(ia,{className:"bg-system7-window-bg border-2 border-black rounded-lg shadow-[2px_2px_0px_0px_rgba(0,0,0,0.5)] max-w-[280px]",children:[g.jsx(oa,{children:"About"}),g.jsxs("div",{className:"space-y-2 text-center p-4 pb-8",children:[g.jsx("div",{children:g.jsx("img",{src:t.icon,alt:"App Icon",className:"w-12 h-12 mx-auto [image-rendering:pixelated]"})}),g.jsxs("div",{className:"space-y-0 font-geneva-12 text-[10px]",children:[g.jsx("div",{className:"text-2xl font-medium font-apple-garamond",children:t.name}),g.jsxs("p",{className:"text-gray-500",children:["Version ",t.version]})]})]})]})})}const Ku=b.forwardRef(({className:n,type:e,...t},r)=>g.jsx("input",{type:e,className:Pe("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));Ku.displayName="Input";function $l({isOpen:n,onOpenChange:e,onSubmit:t,title:r,description:s,value:i,onChange:o}){return g.jsx(Wl,{open:n,onOpenChange:e,children:g.jsxs(ia,{className:"bg-system7-window-bg border-2 border-black rounded-lg shadow-[2px_2px_0px_0px_rgba(0,0,0,0.5)]",children:[g.jsx(oa,{children:r}),g.jsxs("div",{className:"p-4 px-6",children:[g.jsx("p",{className:"text-gray-500 mb-2",children:s}),g.jsx(Ku,{autoFocus:!0,value:i,onChange:a=>o(a.target.value),onKeyDown:a=>{a.key==="Enter"&&t(i)},className:"shadow-none"}),g.jsx(Fx,{className:"mt-4",children:g.jsx(Re,{variant:"retro",onClick:()=>t(i),children:"Save"})})]})]})})}function Ts({isOpen:n,onOpenChange:e,onConfirm:t,title:r,description:s}){const i=b.useRef(null),{play:o}=pt(ut.ALERT_SOSUMI);return b.useEffect(()=>{n&&o()},[n,o]),g.jsx(Wl,{open:n,onOpenChange:e,children:g.jsxs(ia,{className:"bg-system7-window-bg border-2 border-black rounded-lg shadow-[2px_2px_0px_0px_rgba(0,0,0,0.5)]",onOpenAutoFocus:a=>{var c;a.preventDefault(),(c=i.current)==null||c.focus()},children:[g.jsx(oa,{children:r}),g.jsxs("div",{className:"p-4 px-6",children:[g.jsxs("div",{className:"flex gap-3 items-start",children:[g.jsx("img",{src:"/icons/warn.png",alt:"Warning",className:"w-[32px] h-[32px] mt-0.5 [image-rendering:pixelated]",width:32,height:32}),g.jsx("p",{className:"text-gray-900 mb-2 leading-tight font-geneva-12 text-[12px]",children:s})]}),g.jsxs(Fx,{className:"mt-4 flex flex-col gap-1 sm:flex-row",children:[g.jsx(Re,{variant:"retro",onClick:()=>e(!1),className:"order-last sm:order-first",children:"Cancel"}),g.jsx(Re,{variant:"retro",onClick:t,ref:i,children:"Confirm"})]})]})]})})}function e5(n){var e;const{char:t,allowSpaces:r,allowToIncludeChar:s,allowedPrefixes:i,startOfLine:o,$position:a}=n,c=r&&!s,d=_z(t),h=new RegExp(`\\s${d}$`),f=o?"^":"",m=s?"":d,y=c?new RegExp(`${f}${d}.*?(?=\\s${m}|$)`,"gm"):new RegExp(`${f}(?:^)?${d}[^\\s${m}]*`,"gm"),v=((e=a.nodeBefore)===null||e===void 0?void 0:e.isText)&&a.nodeBefore.text;if(!v)return null;const w=a.pos-v.length,S=Array.from(v.matchAll(y)).pop();if(!S||S.input===void 0||S.index===void 0)return null;const C=S.input.slice(Math.max(0,S.index-1),S.index),T=new RegExp(`^[${i==null?void 0:i.join("")}\0]?$`).test(C);if(i!==null&&!T)return null;const k=w+S.index;let M=k+S[0].length;return c&&h.test(v.slice(M-1,M+1))&&(S[0]+=" ",M+=1),k<a.pos&&M>=a.pos?{range:{from:k,to:M},query:S[0].slice(t.length),text:S[0]}:null}const t5=new ns("suggestion");function n5({pluginKey:n=t5,editor:e,char:t="@",allowSpaces:r=!1,allowToIncludeChar:s=!1,allowedPrefixes:i=[" "],startOfLine:o=!1,decorationTag:a="span",decorationClass:c="suggestion",command:d=()=>null,items:h=()=>[],render:f=()=>({}),allow:m=()=>!0,findSuggestionMatch:y=e5}){let v;const w=f==null?void 0:f(),S=new $n({key:n,view(){return{update:async(C,T)=>{var k,M,N,O,D,I,L;const A=(k=this.key)===null||k===void 0?void 0:k.getState(T),V=(M=this.key)===null||M===void 0?void 0:M.getState(C.state),F=A.active&&V.active&&A.range.from!==V.range.from,U=!A.active&&V.active,B=A.active&&!V.active,q=!U&&!B&&A.query!==V.query,K=U||F&&q,G=q||F,$=B||F&&q;if(!K&&!G&&!$)return;const z=$&&!K?A:V,W=C.dom.querySelector(`[data-decoration-id="${z.decorationId}"]`);v={editor:e,range:z.range,query:z.query,text:z.text,items:[],command:P=>d({editor:e,range:z.range,props:P}),decorationNode:W,clientRect:W?()=>{var P;const{decorationId:j}=(P=this.key)===null||P===void 0?void 0:P.getState(e.state),J=C.dom.querySelector(`[data-decoration-id="${j}"]`);return(J==null?void 0:J.getBoundingClientRect())||null}:null},K&&((N=w==null?void 0:w.onBeforeStart)===null||N===void 0||N.call(w,v)),G&&((O=w==null?void 0:w.onBeforeUpdate)===null||O===void 0||O.call(w,v)),(G||K)&&(v.items=await h({editor:e,query:z.query})),$&&((D=w==null?void 0:w.onExit)===null||D===void 0||D.call(w,v)),G&&((I=w==null?void 0:w.onUpdate)===null||I===void 0||I.call(w,v)),K&&((L=w==null?void 0:w.onStart)===null||L===void 0||L.call(w,v))},destroy:()=>{var C;v&&((C=w==null?void 0:w.onExit)===null||C===void 0||C.call(w,v))}}},state:{init(){return{active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}},apply(C,T,k,M){const{isEditable:N}=e,{composing:O}=e.view,{selection:D}=C,{empty:I,from:L}=D,A={...T};if(A.composing=O,N&&(I||e.view.composing)){(L<T.range.from||L>T.range.to)&&!O&&!T.composing&&(A.active=!1);const V=y({char:t,allowSpaces:r,allowToIncludeChar:s,allowedPrefixes:i,startOfLine:o,$position:D.$from}),F=`id_${Math.floor(Math.random()*4294967295)}`;V&&m({editor:e,state:M,range:V.range,isActive:T.active})?(A.active=!0,A.decorationId=T.decorationId?T.decorationId:F,A.range=V.range,A.query=V.query,A.text=V.text):A.active=!1}else A.active=!1;return A.active||(A.decorationId=null,A.range={from:0,to:0},A.query=null,A.text=null),A}},props:{handleKeyDown(C,T){var k;const{active:M,range:N}=S.getState(C.state);return M&&((k=w==null?void 0:w.onKeyDown)===null||k===void 0?void 0:k.call(w,{view:C,event:T,range:N}))||!1},decorations(C){const{active:T,range:k,decorationId:M}=S.getState(C);return T?Ht.create(C.doc,[dr.inline(k.from,k.to,{nodeName:a,class:c,"data-decoration-id":M})]):null}}});return S}const Y1=({items:n,onCommand:e,editor:t})=>{const[r,s]=b.useState(0);b.useEffect(()=>{s(0)},[n]);const i=o=>{switch(o.title){case"Text":return t.isActive("paragraph");case"Heading 1":return t.isActive("heading",{level:1});case"Heading 2":return t.isActive("heading",{level:2});case"Heading 3":return t.isActive("heading",{level:3});case"Bullet List":return t.isActive("bulletList");case"Numbered List":return t.isActive("orderedList");default:return!1}};return b.useEffect(()=>{const o=a=>{switch(a.key){case"ArrowDown":a.preventDefault(),s(c=>(c+1)%n.length);break;case"ArrowUp":a.preventDefault(),s(c=>(c-1+n.length)%n.length);break;case"Enter":a.preventDefault(),n.length>0&&e(n[r]);break;default:return}};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[n,r,e]),g.jsx("div",{children:n.map((o,a)=>g.jsxs("button",{role:"menuitem",onClick:()=>e(o),onMouseEnter:()=>s(a),className:`relative flex w-full items-center h-8 px-2 text-sm ${a===r?"bg-gray-100":""}`,children:[o.title,i(o)&&g.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(Px,{className:"h-4 w-4"})})]},a))})},r5=[{title:"Text",description:"Just start typing with plain text",command:n=>{n.chain().focus().setParagraph().run()}},{title:"Heading 1",description:"Large section heading",command:n=>{n.chain().focus().toggleHeading({level:1}).run()}},{title:"Heading 2",description:"Medium section heading",command:n=>{n.chain().focus().toggleHeading({level:2}).run()}},{title:"Heading 3",description:"Small section heading",command:n=>{n.chain().focus().toggleHeading({level:3}).run()}},{title:"Bullet List",description:"Create a simple bullet list",command:n=>{n.chain().focus().toggleBulletList().run()}},{title:"Numbered List",description:"Create a numbered list",command:n=>{n.chain().focus().toggleOrderedList().run()}},{title:"Task List",description:"Create a checklist with checkboxes",command:n=>{n.chain().focus().toggleTaskList().run()}}],s5={char:"/",startOfLine:!1,command:({editor:n,range:e,props:t})=>{t.command.command(n),n.commands.deleteRange(e)},items:({query:n})=>r5.filter(e=>e.title.toLowerCase().includes(n.toLowerCase())).slice(0,10),render:()=>{let n=null,e=null;const t=()=>{n&&n.unmount(),e&&e.remove()};return{onStart:r=>{var i;const s=(i=r.clientRect)==null?void 0:i.call(r);s&&(e=document.createElement("div"),e&&(e.style.position="absolute",e.style.zIndex="50",document.body.appendChild(e),n=xE.createRoot(e),n&&n.render(g.jsx(Ue,{open:!0,children:g.jsx(qe,{style:{position:"fixed",top:`${s.top+s.height}px`,left:`${s.left}px`},className:"w-72",children:g.jsx(Y1,{items:r.items,editor:r.editor,onCommand:o=>{r.command({command:o}),t()}})})}))))},onUpdate:r=>{var i;const s=(i=r.clientRect)==null?void 0:i.call(r);!s||!n||!e||(e.style.position="absolute",e.style.zIndex="50",n.render(g.jsx(Ue,{open:!0,children:g.jsx(qe,{style:{position:"fixed",top:`${s.top+s.height}px`,left:`${s.left}px`},className:"w-72",children:g.jsx(Y1,{items:r.items,editor:r.editor,onCommand:o=>{r.command({command:o}),t()}})})})))},onKeyDown:r=>r.event.key==="Escape"?(t(),r.event.preventDefault(),!0):!1,onExit:t}}},i5=xn.create({name:"slash-commands",addOptions(){return{suggestion:s5}},addProseMirrorPlugins(){return[n5({editor:this.editor,...this.options.suggestion})]}});function kp(){return(e,t={})=>{window.dispatchEvent(new CustomEvent("launchApp",{detail:{appId:e,...t}}))}}const o5="ryOS",a5=1,it={DOCUMENTS:"documents",IMAGES:"images",TRASH:"trash"},$c=()=>new Promise((n,e)=>{const t=indexedDB.open(o5,a5);t.onerror=()=>e(t.error),t.onsuccess=()=>n(t.result),t.onupgradeneeded=r=>{const s=r.target.result;s.objectStoreNames.contains(it.DOCUMENTS)||s.createObjectStore(it.DOCUMENTS,{keyPath:"name"}),s.objectStoreNames.contains(it.IMAGES)||s.createObjectStore(it.IMAGES,{keyPath:"name"}),s.objectStoreNames.contains(it.TRASH)||s.createObjectStore(it.TRASH,{keyPath:"name"})}}),ht={async getAll(n){const e=await $c();return new Promise((t,r)=>{const o=e.transaction(n,"readonly").objectStore(n).getAll();o.onsuccess=()=>t(o.result),o.onerror=()=>r(o.error)})},async get(n,e){const t=await $c();return new Promise((r,s)=>{const a=t.transaction(n,"readonly").objectStore(n).get(e);a.onsuccess=()=>r(a.result),a.onerror=()=>s(a.error)})},async put(n,e){const t=await $c();return new Promise((r,s)=>{const a=t.transaction(n,"readwrite").objectStore(n).put(e);a.onsuccess=()=>r(),a.onerror=()=>s(a.error)})},async delete(n,e){const t=await $c();return new Promise((r,s)=>{const a=t.transaction(n,"readwrite").objectStore(n).delete(e);a.onsuccess=()=>r(),a.onerror=()=>s(a.error)})},async clear(n){const e=await $c();return new Promise((t,r)=>{const o=e.transaction(n,"readwrite").objectStore(n).clear();o.onsuccess=()=>t(),o.onerror=()=>r(o.error)})}},zv=[{name:"ABOUTME.md",content:`# Architect of digital experience, AI strategy, and UX innovation.

 HELLO! I'M JASMINE.

Welcome to a space where I control the narrative, the experience, and the way my work is shared.

My work sits at the intersection of AI, UX, and human behavior, shaping the future of digital experiences. But innovation isnt just about the presentits about the journey. Explore the system and create. You'll find more information on my journey below. <br></br>

## Leadership Training
- **2025 Rising Leaders Academy**: Im part of a six-month virtual program designed for rising leaders from underrepresented communities in advertising and marketing. Its focused on leadership growth, management skills, and fresh strategies for making an impact. With insights from industry experts, Im gaining practical tools to level up as a leader. Ill complete the program in summer 2025.
- **First Generation Mentorship Program**: As a mentor in this year-long program, I supported first-generation undergraduate students pursuing careers in marketing and advertising. I provided career advice, shared resources, and helped with personal development, building a meaningful mentor-mentee relationship. Backed by the AMA Collegiate Communities team, I played a key role in guiding the next generation of marketing professionals by sharing my knowledge and experiences to help them navigate their career paths.

## Training & Certifications
- Member of the AI Class Certification
- Digital Strategy Certification
- Generative AI Business Strategy
- AI for Marketers
- Building a Custom GPT
- Intermediate AI Prompt Writing
- Brand Strategy
- Platform Strategy

## Professional Experience
- **Web Experience Strategist, GE HealthCare (Current)**:
Spearhead digital transformation for GEHealthCare.com and 30+ global sites. Develop tailored content and collaborate cross-functionally to align marketing strategies with business objectives. Enhance user experience and design consistency while advocating for AI-driven solutions that deliver measurable business impact.

- **Co-Founder, Gulf Reach Institute (2020  Current)**:
Co-founded an organization focused on STEM education, Gulf and ocean health, and equity and inclusion. Led initiatives empowering underrepresented youth as future leaders and decision-makers in water protection and conservation.

- **Digital Marketing Manager, Community First Health Plans (20192023)**:
Directed digital growth across web, social, email, and SMS channels. Led digital transformation for communityfirsthealthplans.com by aligning digital assets with user needs and business goals. Facilitated user-centered workshops and collaborated with cross-functional teams to create impactful digital experiences.


## Education

- Master of Business Administration, Texas A&M University  San Antonio (2018)
- Bachelor of Science, University of Texas  San Antonio (2016)

## Tools & Technologies

- ContentSquare
- Adobe
- Figma
- Miro
- ChatGPT, Copilot, Claude
- Midjourney, KlingAI


`},{name:"User Manual.md",content:`# Tips for navigating this system efficiently. 

## Using Apps
- Launch apps from the Finder, Desktop, or Apple menu
- Multiple apps can run simultaneously
- Windows can be moved, resized, and minimized
- Use Control Panels to customize your experience

## Finder
- Browse files in Documents, Applications, and Trash
- Navigate with back/forward buttons or path bar
- Sort files by name, kind, size, or date
- Multiple view options (icons, list)
- Move files to Trash and empty when needed
- Monitor available storage space

## TextEdit
- Create and edit rich text documents
- Format text with bold, italic, and underline
- Align text and create ordered/unordered lists
- Use slash commands (/) for quick formatting
- Record audio input for dictation
- Auto-saves your work
- Export documents when needed

## Soundboard
- Create multiple custom soundboards
- Record sounds directly from your microphone
- Customize with emojis and titles
- Play sounds with clicks or number keys (1-9)
- View sound waveforms with WaveSurfer.js
- Import/export soundboards for sharing
- Auto-saves your recordings
- Choose input device
- Toggle waveform/emoji display

## Control Panels
- Customize system appearance
  - Choose from tiled patterns or photos
  - Multiple categories of wallpapers
  - Real-time preview
- Adjust sound settings
  - Enable/disable UI sounds
  - Configure typing synthesis
  - Choose synth presets
- Manage system
  - Backup all settings
  - Restore from backup
  - Reset to defaults
  - Format file system

## Minesweeper
- Classic puzzle game with modern features
- Left-click to reveal cells
- Right-click to flag mines
- Sound effects for actions
- Track remaining mines
- Start new game anytime

## Internet Explorer
- Browse web content
- Time travel feature to see historical dates
- Add websites to favorites
- Modern browsing experience
- Classic System 7 style interface

## Videos
- Make video playlists and watch them
- Add videos to favorites
- VHS-style video player interface

## Virtual PC
- Play classic PC games like Doom and SimCity
- Launch from Applications folder
- Use keyboard shortcuts for game controls
- Save game progress automatically
- Switch between multiple games
- Adjust emulator settings in Control Panels
- Import/export game saves
- Full-screen mode available

`}],l5=async()=>{try{if((await ht.getAll(it.DOCUMENTS)).length===0)for(const e of zv)await ht.put(it.DOCUMENTS,e)}catch(n){console.error("Error initializing database:",n)}};function Fi(n){var t;switch(((t=n.split(".").pop())==null?void 0:t.toLowerCase())||""){case"png":case"jpg":case"jpeg":case"gif":case"webp":case"bmp":return"image";case"md":return"markdown";case"txt":return"text";default:return"unknown"}}function Py(n,e){if(e)return"/icons/directory.png";switch(Fi(n)){case"image":return"/icons/image.png";case"markdown":case"text":return"/icons/file-text.png";default:return"/icons/file.png"}}function Ep(n="/"){const[e,t]=b.useState(n),[r,s]=b.useState([]),[i,o]=b.useState(),[a,c]=b.useState(!1),[d,h]=b.useState(),[f,m]=b.useState([]),[y,v]=b.useState([]),[w,S]=b.useState([]),[C,T]=b.useState([n]),[k,M]=b.useState(0),N=kp();b.useEffect(()=>{(async()=>{try{await l5();const[j,J,te]=await Promise.all([ht.getAll(it.DOCUMENTS),ht.getAll(it.IMAGES),ht.getAll(it.TRASH)]);m(j),v(J),S(te)}catch(j){console.error("Error loading data:",j),h("Failed to load data")}})()},[]),b.useEffect(()=>{O()},[e,f,y,w]),b.useEffect(()=>{const P=async J=>{if(!J.detail.content)return;const te={name:J.detail.name,content:J.detail.content,type:J.detail.type||Fi(J.detail.name)};try{J.detail.path.startsWith("/Images/")?(await ht.put(it.IMAGES,te),await ht.delete(it.DOCUMENTS,te.name),v(ne=>{const ue=[...ne],ce=ue.findIndex(ae=>ae.name===te.name);return ce>=0?ue[ce]=te:ue.push(te),ue}),m(ne=>ne.filter(ue=>ue.name!==te.name))):J.detail.path.startsWith("/Documents/")&&(await ht.put(it.DOCUMENTS,te),await ht.delete(it.IMAGES,te.name),m(ne=>{const ue=[...ne],ce=ue.findIndex(ae=>ae.name===te.name);return ce>=0?ue[ce]=te:ue.push(te),ue}),v(ne=>ne.filter(ue=>ue.name!==te.name)))}catch(ne){console.error("Error saving file:",ne),h("Failed to save file")}},j=J=>{P(J)};return window.addEventListener("saveFile",j),()=>{window.removeEventListener("saveFile",j)}},[]);async function O(){c(!0),h(void 0);try{let P=[];e==="/"?P=[{name:"Applications",isDirectory:!0,path:"/Applications",icon:"/icons/applications.png",type:"directory"},{name:"Documents",isDirectory:!0,path:"/Documents",icon:"/icons/documents.png",type:"directory"},{name:"Images",isDirectory:!0,path:"/Images",icon:"/icons/images.png",type:"directory"},{name:"Trash",isDirectory:!0,path:"/Trash",icon:w.length>0?"/icons/trash-full.png":"/icons/trash-empty.png",type:"directory"}]:e==="/Applications"?P=gj().map(j=>({name:j.name,isDirectory:!1,path:`/Applications/${j.name}`,icon:j.icon,appId:j.id,type:"application"})):e==="/Documents"?P=f.map(j=>({name:j.name,isDirectory:!1,path:`/Documents/${j.name}`,icon:Py(j.name,!1),content:j.content,type:j.type||Fi(j.name)})):e==="/Images"?P=y.map(j=>({name:j.name,isDirectory:!1,path:`/Images/${j.name}`,icon:Py(j.name,!1),content:j.content,type:j.type||Fi(j.name)})):e==="/Trash"&&(P=w.map(j=>({...j,path:`/Trash/${j.name}`,icon:Py(j.name,j.isDirectory),type:j.type||Fi(j.name)}))),s(P)}catch(P){h(P instanceof Error?P.message:"Failed to load files")}finally{c(!1)}}function D(P){var j,J;if(P.isDirectory){t(P.path);return}P.path.startsWith("/Applications/")?P.appId&&(localStorage.getItem((j=me[P.appId])==null?void 0:j.WINDOW)||localStorage.setItem((J=me[P.appId])==null?void 0:J.WINDOW,JSON.stringify({position:{x:100,y:100},size:{width:600,height:400}})),N(P.appId)):P.path.startsWith("/Documents/")?P.content&&(localStorage.getItem(me.textedit.WINDOW)||localStorage.setItem(me.textedit.WINDOW,JSON.stringify({position:{x:100,y:100},size:{width:600,height:400}})),localStorage.setItem("pending_file_open",JSON.stringify({path:P.path,content:P.content})),N("textedit")):P.path.startsWith("/Images/")&&(localStorage.getItem(me.paint.WINDOW)||localStorage.setItem(me.paint.WINDOW,JSON.stringify({position:{x:100,y:100},size:{width:713,height:480}})),localStorage.setItem("pending_file_open",JSON.stringify({path:P.path,content:P.content})),N("paint"))}function I(P){o(P)}function L(){if(e==="/")return;const P=e.split("/").slice(0,-1).join("/")||"/";A(P)}function A(P){const j=P.startsWith("/")?P:`/${P}`;if(j!==e){const J=C.slice(0,k+1);J.push(j),T(J),M(J.length-1),t(j)}}function V(){k>0&&(M(k-1),t(C[k-1]))}function F(){k<C.length-1&&(M(k+1),t(C[k+1]))}function U(){return k>0}function B(){return k<C.length-1}async function q(P){if(P.path==="/Trash"||P.path.startsWith("/Trash/"))return;const j={...P,originalPath:P.path,deletedAt:Date.now()};try{await ht.put(it.TRASH,j),S(J=>[...J,j]),P.path.startsWith("/Documents/")?(await ht.delete(it.DOCUMENTS,P.name),m(J=>J.filter(te=>te.name!==P.name))):P.path.startsWith("/Images/")&&(await ht.delete(it.IMAGES,P.name),v(J=>J.filter(te=>te.name!==P.name)))}catch(J){console.error("Error moving to trash:",J),h("Failed to move file to trash")}}async function K(P){if(!P.path.startsWith("/Trash/"))return;const j=w.find(J=>J.name===P.name);if(j)try{if(j.originalPath.startsWith("/Documents/")){const J={name:j.name,content:j.content||"",type:j.type||Fi(j.name)};await ht.put(it.DOCUMENTS,J),m(te=>[...te,J])}else if(j.originalPath.startsWith("/Images/")){const J={name:j.name,content:j.content||"",type:j.type||Fi(j.name)};await ht.put(it.IMAGES,J),v(te=>[...te,J])}await ht.delete(it.TRASH,P.name),S(J=>J.filter(te=>te.name!==P.name))}catch(J){console.error("Error restoring from trash:",J),h("Failed to restore file from trash")}}async function G(){try{await ht.clear(it.TRASH),S([])}catch(P){console.error("Error emptying trash:",P),h("Failed to empty trash")}}async function $(P){if(!P.content)return;const j={name:P.name,content:P.content,type:P.type||Fi(P.name)};try{P.path.startsWith("/Images/")?(await ht.put(it.IMAGES,j),await ht.delete(it.DOCUMENTS,j.name),v(J=>{const te=[...J],ne=te.findIndex(ue=>ue.name===j.name);return ne>=0?te[ne]=j:te.push(j),te}),m(J=>J.filter(te=>te.name!==j.name))):P.path.startsWith("/Documents/")&&(await ht.put(it.DOCUMENTS,j),await ht.delete(it.IMAGES,j.name),m(J=>{const te=[...J],ne=te.findIndex(ue=>ue.name===j.name);return ne>=0?te[ne]=j:te.push(j),te}),v(J=>J.filter(te=>te.name!==j.name)))}catch(J){console.error("Error saving file:",J),h("Failed to save file")}}async function z(P,j){try{const J=await ht.get(it.DOCUMENTS,P);if(J){const te={...J,name:j};await ht.put(it.DOCUMENTS,te),await ht.delete(it.DOCUMENTS,P),m(ne=>{const ue=[...ne],ce=ue.findIndex(ae=>ae.name===P);return ce>=0&&(ue[ce]=te),ue})}}catch(J){console.error("Error renaming file:",J),h("Failed to rename file")}}async function W(){try{await Promise.all([ht.clear(it.IMAGES),ht.clear(it.TRASH)]),await ht.clear(it.DOCUMENTS);for(const P of zv)await ht.put(it.DOCUMENTS,P);m(zv),v([]),S([]),h(void 0)}catch(P){console.error("Error formatting file system:",P),h("Failed to format file system")}}return{currentPath:e,files:r,selectedFile:i,isLoading:a,error:d,handleFileOpen:D,handleFileSelect:I,navigateUp:L,navigateToPath:A,moveToTrash:q,restoreFromTrash:K,emptyTrash:G,trashItems:w,navigateBack:V,navigateForward:F,canNavigateBack:U,canNavigateForward:B,saveFile:$,setSelectedFile:o,renameFile:z,formatFileSystem:W}}function vn(n,e,t,r){return new(t||(t=Promise))(function(s,i){function o(d){try{c(r.next(d))}catch(h){i(h)}}function a(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){var h;d.done?s(d.value):(h=d.value,h instanceof t?h:new t(function(f){f(h)})).then(o,a)}c((r=r.apply(n,e||[])).next())})}class Yu{constructor(){this.listeners={}}on(e,t,r){if(this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t),r==null?void 0:r.once){const s=()=>{this.un(e,s),this.un(e,t)};return this.on(e,s),s}return()=>this.un(e,t)}un(e,t){var r;(r=this.listeners[e])===null||r===void 0||r.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach(r=>r(...t))}}const Lh={decode:function(n,e){return vn(this,void 0,void 0,function*(){const t=new AudioContext({sampleRate:e});return t.decodeAudioData(n).finally(()=>t.close())})},createBuffer:function(n,e){return typeof n[0]=="number"&&(n=[n]),function(t){const r=t[0];if(r.some(s=>s>1||s<-1)){const s=r.length;let i=0;for(let o=0;o<s;o++){const a=Math.abs(r[o]);a>i&&(i=a)}for(const o of t)for(let a=0;a<s;a++)o[a]/=i}}(n),{duration:e,length:n[0].length,sampleRate:n[0].length/e,numberOfChannels:n.length,getChannelData:t=>n==null?void 0:n[t],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function bO(n,e){const t=e.xmlns?document.createElementNS(e.xmlns,n):document.createElement(n);for(const[r,s]of Object.entries(e))if(r==="children")for(const[i,o]of Object.entries(e))typeof o=="string"?t.appendChild(document.createTextNode(o)):t.appendChild(bO(i,o));else r==="style"?Object.assign(t.style,s):r==="textContent"?t.textContent=s:t.setAttribute(r,s.toString());return t}function X1(n,e,t){const r=bO(n,e||{});return t==null||t.appendChild(r),r}var c5=Object.freeze({__proto__:null,createElement:X1,default:X1});const u5={fetchBlob:function(n,e,t){return vn(this,void 0,void 0,function*(){const r=yield fetch(n,t);if(r.status>=400)throw new Error(`Failed to fetch ${n}: ${r.status} (${r.statusText})`);return function(s,i){vn(this,void 0,void 0,function*(){if(!s.body||!s.headers)return;const o=s.body.getReader(),a=Number(s.headers.get("Content-Length"))||0;let c=0;const d=f=>vn(this,void 0,void 0,function*(){c+=(f==null?void 0:f.length)||0;const m=Math.round(c/a*100);i(m)}),h=()=>vn(this,void 0,void 0,function*(){let f;try{f=yield o.read()}catch{return}f.done||(d(f.value),yield h())});h()})}(r.clone(),e),r.blob()})}};class d5 extends Yu{constructor(e){super(),this.isExternalMedia=!1,e.media?(this.media=e.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),e.mediaControls&&(this.media.controls=!0),e.autoplay&&(this.media.autoplay=!0),e.playbackRate!=null&&this.onMediaEvent("canplay",()=>{e.playbackRate!=null&&(this.media.playbackRate=e.playbackRate)},{once:!0})}onMediaEvent(e,t,r){return this.media.addEventListener(e,t,r),()=>this.media.removeEventListener(e,t,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const e=this.getSrc();e.startsWith("blob:")&&URL.revokeObjectURL(e)}canPlayType(e){return this.media.canPlayType(e)!==""}setSrc(e,t){const r=this.getSrc();if(e&&r===e)return;this.revokeSrc();const s=t instanceof Blob&&(this.canPlayType(t.type)||!e)?URL.createObjectURL(t):e;r&&(this.media.src="");try{this.media.src=s}catch{this.media.src=e}}destroy(){this.isExternalMedia||(this.media.pause(),this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(e){this.media=e}play(){return vn(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(e){this.media.currentTime=Math.max(0,Math.min(e,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(e){this.media.volume=e}getMuted(){return this.media.muted}setMuted(e){this.media.muted=e}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(e,t){t!=null&&(this.media.preservesPitch=t),this.media.playbackRate=e}getMediaElement(){return this.media}setSinkId(e){return this.media.setSinkId(e)}}class xl extends Yu{constructor(e,t){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.subscriptions=[],this.options=e;const r=this.parentFromOptionsContainer(e.container);this.parent=r;const[s,i]=this.initHtml();r.appendChild(s),this.container=s,this.scrollContainer=i.querySelector(".scroll"),this.wrapper=i.querySelector(".wrapper"),this.canvasWrapper=i.querySelector(".canvases"),this.progressWrapper=i.querySelector(".progress"),this.cursor=i.querySelector(".cursor"),t&&i.appendChild(t),this.initEvents()}parentFromOptionsContainer(e){let t;if(typeof e=="string"?t=document.querySelector(e):e instanceof HTMLElement&&(t=e),!t)throw new Error("Container not found");return t}initEvents(){const e=t=>{const r=this.wrapper.getBoundingClientRect(),s=t.clientX-r.left,i=t.clientY-r.top;return[s/r.width,i/r.height]};if(this.wrapper.addEventListener("click",t=>{const[r,s]=e(t);this.emit("click",r,s)}),this.wrapper.addEventListener("dblclick",t=>{const[r,s]=e(t);this.emit("dblclick",r,s)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:t,scrollWidth:r,clientWidth:s}=this.scrollContainer,i=t/r,o=(t+s)/r;this.emit("scroll",i,o,t,t+s)}),typeof ResizeObserver=="function"){const t=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{t().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const e=this.parent.clientWidth;e===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=e,this.reRender())}initDrag(){this.subscriptions.push(function(e,t,r,s,i=3,o=0,a=100){if(!e)return()=>{};const c=matchMedia("(pointer: coarse)").matches;let d=()=>{};const h=f=>{if(f.button!==o)return;f.preventDefault(),f.stopPropagation();let m=f.clientX,y=f.clientY,v=!1;const w=Date.now(),S=N=>{if(N.preventDefault(),N.stopPropagation(),c&&Date.now()-w<a)return;const O=N.clientX,D=N.clientY,I=O-m,L=D-y;if(v||Math.abs(I)>i||Math.abs(L)>i){const A=e.getBoundingClientRect(),{left:V,top:F}=A;v||(r==null||r(m-V,y-F),v=!0),t(I,L,O-V,D-F),m=O,y=D}},C=N=>{if(v){const O=N.clientX,D=N.clientY,I=e.getBoundingClientRect(),{left:L,top:A}=I;s==null||s(O-L,D-A)}d()},T=N=>{N.relatedTarget&&N.relatedTarget!==document.documentElement||C(N)},k=N=>{v&&(N.stopPropagation(),N.preventDefault())},M=N=>{v&&N.preventDefault()};document.addEventListener("pointermove",S),document.addEventListener("pointerup",C),document.addEventListener("pointerout",T),document.addEventListener("pointercancel",T),document.addEventListener("touchmove",M,{passive:!1}),document.addEventListener("click",k,{capture:!0}),d=()=>{document.removeEventListener("pointermove",S),document.removeEventListener("pointerup",C),document.removeEventListener("pointerout",T),document.removeEventListener("pointercancel",T),document.removeEventListener("touchmove",M),setTimeout(()=>{document.removeEventListener("click",k,{capture:!0})},10)}};return e.addEventListener("pointerdown",h),()=>{d(),e.removeEventListener("pointerdown",h)}}(this.wrapper,(e,t,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},e=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,e/this.wrapper.getBoundingClientRect().width)))},e=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,e/this.wrapper.getBoundingClientRect().width)))}))}getHeight(e,t){var r;const s=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;if(e==null)return 128;if(!isNaN(Number(e)))return Number(e);if(e==="auto"){const i=this.parent.clientHeight||128;return t!=null&&t.every(o=>!o.overlay)?i/s:i}return 128}initHtml(){const e=document.createElement("div"),t=e.attachShadow({mode:"open"}),r=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return t.innerHTML=`
      <style${r?` nonce="${r}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[e,t]}setOptions(e){if(this.options.container!==e.container){const t=this.parentFromOptionsContainer(e.container);t.appendChild(this.container),this.parent=t}e.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=e,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(e){this.scrollContainer.scrollLeft=e}setScrollPercentage(e){const{scrollWidth:t}=this.scrollContainer,r=t*e;this.setScroll(r)}destroy(){var e,t;this.subscriptions.forEach(r=>r()),this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.unsubscribeOnScroll)===null||t===void 0||t.forEach(r=>r()),this.unsubscribeOnScroll=[]}createDelay(e=10){let t,r;const s=()=>{t&&clearTimeout(t),r&&r()};return this.timeouts.push(s),()=>new Promise((i,o)=>{s(),r=o,t=setTimeout(()=>{t=void 0,r=void 0,i()},e)})}convertColorValues(e){if(!Array.isArray(e))return e||"";if(e.length<2)return e[0]||"";const t=document.createElement("canvas"),r=t.getContext("2d"),s=t.height*(window.devicePixelRatio||1),i=r.createLinearGradient(0,0,0,s),o=1/(e.length-1);return e.forEach((a,c)=>{const d=c*o;i.addColorStop(d,a)}),i}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(e,t,r,s){const i=e[0],o=e[1]||e[0],a=i.length,{width:c,height:d}=r.canvas,h=d/2,f=this.getPixelRatio(),m=t.barWidth?t.barWidth*f:1,y=t.barGap?t.barGap*f:t.barWidth?m/2:0,v=t.barRadius||0,w=c/(m+y)/a,S=v&&"roundRect"in r?"roundRect":"rect";r.beginPath();let C=0,T=0,k=0;for(let M=0;M<=a;M++){const N=Math.round(M*w);if(N>C){const I=Math.round(T*h*s),L=I+Math.round(k*h*s)||1;let A=h-I;t.barAlign==="top"?A=0:t.barAlign==="bottom"&&(A=d-L),r[S](C*(m+y),A,m,L,v),C=N,T=0,k=0}const O=Math.abs(i[M]||0),D=Math.abs(o[M]||0);O>T&&(T=O),D>k&&(k=D)}r.fill(),r.closePath()}renderLineWaveform(e,t,r,s){const i=o=>{const a=e[o]||e[0],c=a.length,{height:d}=r.canvas,h=d/2,f=r.canvas.width/c;r.moveTo(0,h);let m=0,y=0;for(let v=0;v<=c;v++){const w=Math.round(v*f);if(w>m){const C=h+(Math.round(y*h*s)||1)*(o===0?-1:1);r.lineTo(m,C),m=w,y=0}const S=Math.abs(a[v]||0);S>y&&(y=S)}r.lineTo(m,h)};r.beginPath(),i(0),i(1),r.fill(),r.closePath()}renderWaveform(e,t,r){if(r.fillStyle=this.convertColorValues(t.waveColor),t.renderFunction)return void t.renderFunction(e,r);let s=t.barHeight||1;if(t.normalize){const i=Array.from(e[0]).reduce((o,a)=>Math.max(o,Math.abs(a)),0);s=i?1/i:1}t.barWidth||t.barGap||t.barAlign?this.renderBarWaveform(e,t,r,s):this.renderLineWaveform(e,t,r,s)}renderSingleCanvas(e,t,r,s,i,o,a){const c=this.getPixelRatio(),d=document.createElement("canvas");d.width=Math.round(r*c),d.height=Math.round(s*c),d.style.width=`${r}px`,d.style.height=`${s}px`,d.style.left=`${Math.round(i)}px`,o.appendChild(d);const h=d.getContext("2d");if(this.renderWaveform(e,t,h),d.width>0&&d.height>0){const f=d.cloneNode(),m=f.getContext("2d");m.drawImage(d,0,0),m.globalCompositeOperation="source-in",m.fillStyle=this.convertColorValues(t.progressColor),m.fillRect(0,0,d.width,d.height),a.appendChild(f)}}renderMultiCanvas(e,t,r,s,i,o){const a=this.getPixelRatio(),{clientWidth:c}=this.scrollContainer,d=r/a;let h=Math.min(xl.MAX_CANVAS_WIDTH,c,d),f={};if(h===0)return;if(t.barWidth||t.barGap){const S=t.barWidth||.5,C=S+(t.barGap||S/2);h%C!=0&&(h=Math.floor(h/C)*C)}const m=S=>{if(S<0||S>=y||f[S])return;f[S]=!0;const C=S*h,T=Math.min(d-C,h);if(T<=0)return;const k=e.map(M=>{const N=Math.floor(C/d*M.length),O=Math.floor((C+T)/d*M.length);return M.slice(N,O)});this.renderSingleCanvas(k,t,T,s,C,i,o)},y=Math.ceil(d/h);if(!this.isScrollable){for(let S=0;S<y;S++)m(S);return}const v=this.scrollContainer.scrollLeft/d,w=Math.floor(v*y);if(m(w-1),m(w),m(w+1),y>1){const S=this.on("scroll",()=>{const{scrollLeft:C}=this.scrollContainer,T=Math.floor(C/d*y);Object.keys(f).length>xl.MAX_NODES&&(i.innerHTML="",o.innerHTML="",f={}),m(T-1),m(T),m(T+1)});this.unsubscribeOnScroll.push(S)}}renderChannel(e,t,r,s){var{overlay:i}=t,o=function(h,f){var m={};for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&f.indexOf(y)<0&&(m[y]=h[y]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function"){var v=0;for(y=Object.getOwnPropertySymbols(h);v<y.length;v++)f.indexOf(y[v])<0&&Object.prototype.propertyIsEnumerable.call(h,y[v])&&(m[y[v]]=h[y[v]])}return m}(t,["overlay"]);const a=document.createElement("div"),c=this.getHeight(o.height,o.splitChannels);a.style.height=`${c}px`,i&&s>0&&(a.style.marginTop=`-${c}px`),this.canvasWrapper.style.minHeight=`${c}px`,this.canvasWrapper.appendChild(a);const d=a.cloneNode();this.progressWrapper.appendChild(d),this.renderMultiCanvas(e,o,r,c,a,d)}render(e){return vn(this,void 0,void 0,function*(){var t;this.timeouts.forEach(c=>c()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const r=this.getPixelRatio(),s=this.scrollContainer.clientWidth,i=Math.ceil(e.duration*(this.options.minPxPerSec||0));this.isScrollable=i>s;const o=this.options.fillParent&&!this.isScrollable,a=(o?s:i)*r;if(this.wrapper.style.width=o?"100%":`${i}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=e,this.emit("render"),this.options.splitChannels)for(let c=0;c<e.numberOfChannels;c++){const d=Object.assign(Object.assign({},this.options),(t=this.options.splitChannels)===null||t===void 0?void 0:t[c]);this.renderChannel([e.getChannelData(c)],d,a,c)}else{const c=[e.getChannelData(0)];e.numberOfChannels>1&&c.push(e.getChannelData(1)),this.renderChannel(c,this.options,a,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){if(this.unsubscribeOnScroll.forEach(r=>r()),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:e}=this.scrollContainer,{right:t}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&e!==this.scrollContainer.scrollWidth){const{right:r}=this.progressWrapper.getBoundingClientRect();let s=r-t;s*=2,s=s<0?Math.floor(s):Math.ceil(s),s/=2,this.scrollContainer.scrollLeft+=s}}zoom(e){this.options.minPxPerSec=e,this.reRender()}scrollIntoView(e,t=!1){const{scrollLeft:r,scrollWidth:s,clientWidth:i}=this.scrollContainer,o=e*s,a=r,c=r+i,d=i/2;if(this.isDragging)o+30>c?this.scrollContainer.scrollLeft+=30:o-30<a&&(this.scrollContainer.scrollLeft-=30);else{(o<a||o>c)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?d:0));const h=o-r-d;t&&this.options.autoCenter&&h>0&&(this.scrollContainer.scrollLeft+=Math.min(h,10))}{const h=this.scrollContainer.scrollLeft,f=h/s,m=(h+i)/s;this.emit("scroll",f,m,h,h+i)}}renderProgress(e,t){if(isNaN(e))return;const r=100*e;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=`translateX(-${Math.round(r)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(e,t)}exportImage(e,t,r){return vn(this,void 0,void 0,function*(){const s=this.canvasWrapper.querySelectorAll("canvas");if(!s.length)throw new Error("No waveform data");if(r==="dataURL"){const i=Array.from(s).map(o=>o.toDataURL(e,t));return Promise.resolve(i)}return Promise.all(Array.from(s).map(i=>new Promise((o,a)=>{i.toBlob(c=>{c?o(c):a(new Error("Could not export image"))},e,t)})))})}}xl.MAX_CANVAS_WIDTH=8e3,xl.MAX_NODES=10;class h5 extends Yu{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class Dy extends Yu{constructor(e=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=e,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return vn(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(e){if(this.currentSrc=e,this._duration=void 0,!e)return this.buffer=null,void this.emit("emptied");fetch(e).then(t=>{if(t.status>=400)throw new Error(`Failed to fetch ${e}: ${t.status} (${t.statusText})`);return t.arrayBuffer()}).then(t=>this.currentSrc!==e?null:this.audioContext.decodeAudioData(t)).then(t=>{this.currentSrc===e&&(this.buffer=t,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var e;if(!this.paused)return;this.paused=!1,(e=this.bufferNode)===null||e===void 0||e.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let t=this.playedDuration*this._playbackRate;(t>=this.duration||t<0)&&(t=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,t),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var e;this.paused=!0,(e=this.bufferNode)===null||e===void 0||e.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return vn(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(e){var t,r;const s=e-this.currentTime;(t=this.bufferNode)===null||t===void 0||t.stop(this.audioContext.currentTime+s),(r=this.bufferNode)===null||r===void 0||r.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(e){return vn(this,void 0,void 0,function*(){return this.audioContext.setSinkId(e)})}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this.bufferNode&&(this.bufferNode.playbackRate.value=e)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(e){const t=!this.paused;t&&this._pause(),this.playedDuration=e/this._playbackRate,t&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var e,t;return(e=this._duration)!==null&&e!==void 0?e:((t=this.buffer)===null||t===void 0?void 0:t.duration)||0}set duration(e){this._duration=e}get volume(){return this.gainNode.gain.value}set volume(e){this.gainNode.gain.value=e,this.emit("volumechange")}get muted(){return this._muted}set muted(e){this._muted!==e&&(this._muted=e,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(e){return/^(audio|video)\//.test(e)}getGainNode(){return this.gainNode}getChannelData(){const e=[];if(!this.buffer)return e;const t=this.buffer.numberOfChannels;for(let r=0;r<t;r++)e.push(this.buffer.getChannelData(r));return e}}const f5={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class Su extends d5{static create(e){return new Su(e)}constructor(e){const t=e.media||(e.backend==="WebAudio"?new Dy:void 0);super({media:t,mediaControls:e.mediaControls,autoplay:e.autoplay,playbackRate:e.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},f5,e),this.timer=new h5;const r=t?void 0:this.getMediaElement();this.renderer=new xl(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const s=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:i,duration:o}=this.options;(s||i&&o)&&this.load(s,i,o).catch(()=>null)})}updateProgress(e=this.getCurrentTime()){return this.renderer.renderProgress(e/this.getDuration(),this.isPlaying()),e}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const e=this.updateProgress();this.emit("timeupdate",e),this.emit("audioprocess",e),this.stopAtPosition!=null&&this.isPlaying()&&e>=this.stopAtPosition&&this.pause()}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const e=this.updateProgress();this.emit("timeupdate",e)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop(),this.stopAtPosition=null}),this.onMediaEvent("emptied",()=>{this.timer.stop(),this.stopAtPosition=null}),this.onMediaEvent("ended",()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish"),this.stopAtPosition=null}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",()=>{var e;this.emit("error",(e=this.getMediaElement().error)!==null&&e!==void 0?e:new Error("Media error")),this.stopAtPosition=null}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(e,t)=>{this.options.interact&&(this.seekTo(e),this.emit("interaction",e*this.getDuration()),this.emit("click",e,t))}),this.renderer.on("dblclick",(e,t)=>{this.emit("dblclick",e,t)}),this.renderer.on("scroll",(e,t,r,s)=>{const i=this.getDuration();this.emit("scroll",e*i,t*i,r,s)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",e=>{this.emit("dragstart",e)}),this.renderer.on("dragend",e=>{this.emit("dragend",e)}));{let e;this.subscriptions.push(this.renderer.on("drag",t=>{if(!this.options.interact)return;let r;this.renderer.renderProgress(t),clearTimeout(e),this.isPlaying()?r=0:this.options.dragToSeek===!0?r=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(r=this.options.dragToSeek.debounceTime),e=setTimeout(()=>{this.seekTo(t)},r),this.emit("interaction",t*this.getDuration()),this.emit("drag",t)}))}}initPlugins(){var e;!((e=this.options.plugins)===null||e===void 0)&&e.length&&this.options.plugins.forEach(t=>{this.registerPlugin(t)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(e=>e()),this.mediaSubscriptions=[]}setOptions(e){this.options=Object.assign({},this.options,e),e.duration&&!e.peaks&&(this.decodedData=Lh.createBuffer(this.exportPeaks(),e.duration)),e.peaks&&e.duration&&(this.decodedData=Lh.createBuffer(e.peaks,e.duration)),this.renderer.setOptions(this.options),e.audioRate&&this.setPlaybackRate(e.audioRate),e.mediaControls!=null&&(this.getMediaElement().controls=e.mediaControls)}registerPlugin(e){return e._init(this),this.plugins.push(e),this.subscriptions.push(e.once("destroy",()=>{this.plugins=this.plugins.filter(t=>t!==e)})),e}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(e){return this.renderer.setScroll(e)}setScrollTime(e){const t=e/this.getDuration();this.renderer.setScrollPercentage(t)}getActivePlugins(){return this.plugins}loadAudio(e,t,r,s){return vn(this,void 0,void 0,function*(){var i;if(this.emit("load",e),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,!t&&!r){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=(i=this.abortController)===null||i===void 0?void 0:i.signal);const c=h=>this.emit("loading",h);t=yield u5.fetchBlob(e,c,a);const d=this.options.blobMimeType;d&&(t=new Blob([t],{type:d}))}this.setSrc(e,t);const o=yield new Promise(a=>{const c=s||this.getDuration();c?a(c):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>a(this.getDuration()),{once:!0}))});if(!e&&!t){const a=this.getMediaElement();a instanceof Dy&&(a.duration=o)}if(r)this.decodedData=Lh.createBuffer(r,o||0);else if(t){const a=yield t.arrayBuffer();this.decodedData=yield Lh.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(e,t,r){return vn(this,void 0,void 0,function*(){try{return yield this.loadAudio(e,void 0,t,r)}catch(s){throw this.emit("error",s),s}})}loadBlob(e,t,r){return vn(this,void 0,void 0,function*(){try{return yield this.loadAudio("",e,t,r)}catch(s){throw this.emit("error",s),s}})}zoom(e){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(e),this.emit("zoom",e)}getDecodedData(){return this.decodedData}exportPeaks({channels:e=2,maxLength:t=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const s=Math.min(e,this.decodedData.numberOfChannels),i=[];for(let o=0;o<s;o++){const a=this.decodedData.getChannelData(o),c=[],d=a.length/t;for(let h=0;h<t;h++){const f=a.slice(Math.floor(h*d),Math.ceil((h+1)*d));let m=0;for(let y=0;y<f.length;y++){const v=f[y];Math.abs(v)>Math.abs(m)&&(m=v)}c.push(Math.round(m*r)/r)}i.push(c)}return i}getDuration(){let e=super.getDuration()||0;return e!==0&&e!==1/0||!this.decodedData||(e=this.decodedData.duration),e}toggleInteraction(e){this.options.interact=e}setTime(e){this.stopAtPosition=null,super.setTime(e),this.updateProgress(e),this.emit("timeupdate",e)}seekTo(e){const t=this.getDuration()*e;this.setTime(t)}play(e,t){const r=Object.create(null,{play:{get:()=>super.play}});return vn(this,void 0,void 0,function*(){return e!=null&&this.setTime(e),t!=null&&(this.media instanceof Dy?this.media.stopAt(t):this.stopAtPosition=t),r.play.call(this)})}playPause(){return vn(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(e){this.setTime(this.getCurrentTime()+e)}empty(){this.load("",[[0]],.001)}setMediaElement(e){this.unsubscribePlayerEvents(),super.setMediaElement(e),this.initPlayerEvents()}exportImage(){return vn(this,arguments,void 0,function*(e="image/png",t=1,r="dataURL"){return this.renderer.exportImage(e,t,r)})}destroy(){var e;this.emit("destroy"),(e=this.abortController)===null||e===void 0||e.abort(),this.plugins.forEach(t=>t.destroy()),this.subscriptions.forEach(t=>t()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}Su.BasePlugin=class extends Yu{constructor(n){super(),this.subscriptions=[],this.options=n}onInit(){}_init(n){this.wavesurfer=n,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(n=>n())}},Su.dom=c5;const p5=async(n,e)=>{const t=atob(e),r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);const s=Cu(),i=new Blob([r],{type:s}),o=Su.create({container:n,height:55,progressColor:"rgba(0, 0, 0, 1)",cursorColor:"transparent",cursorWidth:1,barWidth:2,barGap:1,barRadius:2,interact:!1});return o.on("play",()=>{o.setOptions({cursorColor:"rgba(199, 24, 24, 0.56)"})}),o.on("pause",()=>{o.setOptions({cursorColor:"transparent"})}),await o.loadBlob(i),o},m5=n=>{const e=atob(n),t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);const r=Cu(),s=new Blob([t],{type:r});return new Audio(URL.createObjectURL(s))},Cu=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?"audio/mp4":"audio/webm",g5=async n=>{const e=await n.arrayBuffer();return btoa(String.fromCharCode(...new Uint8Array(e)))},y5=2e3,v5=1e3,x5=.05,w5=256,b5=3,S5={channelCount:1,sampleRate:16e3,echoCancellation:!0,noiseSuppression:!0},C5=n=>{const e=new Uint8Array(n.frequencyBinCount);n.getByteFrequencyData(e);const t=Math.floor(e.length/4),r=Array.from({length:4},(o,a)=>{const c=a*t,d=c+t,h=e.slice(c,d);return h.reduce((m,y)=>m+y,0)/h.length/255}),i=r.reduce((o,a)=>o+a,0)/4<x5;return{frequencies:r,isSilent:i}};function _5({onTranscriptionComplete:n,onTranscriptionStart:e,onError:t,onDebugState:r,silenceThreshold:s=y5,minRecordingDuration:i=v5}){const[o,a]=b.useState(!1),[c,d]=b.useState([0,0,0,0]),[h,f]=b.useState(!0),m=b.useRef(null),y=b.useRef([]),v=b.useRef(null),w=b.useRef(null),S=b.useRef(),C=b.useRef(null),T=b.useRef(),k=b.useRef(0),M=b.useRef(0),N=b.useCallback(async L=>{if(L.length!==0)try{if(L.reduce((G,$)=>G+$.size,0)===0)return;const V=Cu(),F=new Blob(L,{type:V});if(!F.size)throw new Error("Generated audio blob is empty");e==null||e();const U=new FormData,B=V.split(";")[0].split("/")[1];U.append("audio",F,`recording.${B}`);const q=await fetch("/api/audio-transcribe",{method:"POST",body:U});if(!q.ok){const G=await q.json();throw new Error(G.error||"Transcription failed")}const{text:K}=await q.json();K&&K.trim()&&n(K)}catch(A){const V=A instanceof Error?A:new Error("Unknown error");t==null||t(V)}},[n,e,t]),O=b.useCallback(()=>{if(m.current){T.current&&clearTimeout(T.current),C.current=null,S.current&&cancelAnimationFrame(S.current);try{m.current.state==="recording"&&(m.current.stop(),a(!1))}catch(L){console.error("Error stopping media recorder:",L)}}},[]),D=b.useCallback(()=>{var B,q;if(!w.current)return;const{frequencies:L,isSilent:A}=C5(w.current);d(L),A?M.current=(M.current||0)+1:M.current=0;const V=M.current>=b5;f(V);const F=Date.now()-k.current,U=((B=m.current)==null?void 0:B.state)==="recording";r==null||r({isSilent:V,silenceDuration:C.current?Date.now()-C.current:null,recordingDuration:F,frequencies:L}),F>=i&&(V&&!C.current?C.current=Date.now():V&&C.current?Date.now()-C.current>=s&&U&&((q=m.current)==null||q.requestData(),O()):!V&&C.current&&(C.current=null)),S.current=requestAnimationFrame(D)},[o,i,s,O,r]),I=b.useCallback(async()=>{try{k.current=Date.now();const L=await navigator.mediaDevices.getUserMedia({audio:S5});v.current=new AudioContext({sampleRate:16e3}),w.current=v.current.createAnalyser(),v.current.createMediaStreamSource(L).connect(w.current),w.current.fftSize=w5,y.current=[],M.current=0,C.current=null,D();const V=Cu(),F=new MediaRecorder(L,{mimeType:V,audioBitsPerSecond:32e3});m.current=F,F.ondataavailable=U=>{U.data&&U.data.size>0&&y.current.push(U.data)},F.onstop=async()=>{const U=[...y.current];y.current=[],S.current&&cancelAnimationFrame(S.current),v.current&&await v.current.close(),L.getTracks().forEach(B=>B.stop()),d([0,0,0,0]),f(!0),await N(U)},F.start(50),a(!0)}catch(L){const A=L instanceof Error?L:new Error("Unknown error");t==null||t(A)}},[N,D,t]);return{isRecording:o,frequencies:c,isSilent:h,startRecording:I,stopRecording:O}}const Vx=b.createContext({});function Bx(n){const e=b.useRef(null);return e.current===null&&(e.current=n()),e.current}const Np=b.createContext(null),zx=b.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class T5 extends b.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,s=r instanceof HTMLElement&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function k5({children:n,isPresent:e,anchorX:t}){const r=b.useId(),s=b.useRef(null),i=b.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=b.useContext(zx);return b.useInsertionEffect(()=>{const{width:a,height:c,top:d,left:h,right:f}=i.current;if(e||!s.current||!a||!c)return;const m=t==="left"?`left: ${h}`:`right: ${f}`;s.current.dataset.motionPopId=r;const y=document.createElement("style");return o&&(y.nonce=o),document.head.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${c}px !important;
            ${m}px !important;
            top: ${d}px !important;
          }
        `),()=>{document.head.removeChild(y)}},[e]),g.jsx(T5,{isPresent:e,childRef:s,sizeRef:i,children:b.cloneElement(n,{ref:s})})}const E5=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o,anchorX:a})=>{const c=Bx(N5),d=b.useId(),h=b.useCallback(m=>{c.set(m,!0);for(const y of c.values())if(!y)return;r&&r()},[c,r]),f=b.useMemo(()=>({id:d,initial:e,isPresent:t,custom:s,onExitComplete:h,register:m=>(c.set(m,!1),()=>c.delete(m))}),i?[Math.random(),h]:[t,h]);return b.useMemo(()=>{c.forEach((m,y)=>c.set(y,!1))},[t]),b.useEffect(()=>{!t&&!c.size&&r&&r()},[t]),o==="popLayout"&&(n=g.jsx(k5,{isPresent:t,anchorX:a,children:n})),g.jsx(Np.Provider,{value:f,children:n})};function N5(){return new Map}function SO(n=!0){const e=b.useContext(Np);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:s}=e,i=b.useId();b.useEffect(()=>{if(n)return s(i)},[n]);const o=b.useCallback(()=>n&&r&&r(i),[i,r,n]);return!t&&r?[!1,o]:[!0]}const Fh=n=>n.key||"";function J1(n){const e=[];return b.Children.forEach(n,t=>{b.isValidElement(t)&&e.push(t)}),e}const Wx=typeof window<"u",CO=Wx?b.useLayoutEffect:b.useEffect,Of=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:a="left"})=>{const[c,d]=SO(o),h=b.useMemo(()=>J1(n),[n]),f=o&&!c?[]:h.map(Fh),m=b.useRef(!0),y=b.useRef(h),v=Bx(()=>new Map),[w,S]=b.useState(h),[C,T]=b.useState(h);CO(()=>{m.current=!1,y.current=h;for(let N=0;N<C.length;N++){const O=Fh(C[N]);f.includes(O)?v.delete(O):v.get(O)!==!0&&v.set(O,!1)}},[C,f.length,f.join("-")]);const k=[];if(h!==w){let N=[...h];for(let O=0;O<C.length;O++){const D=C[O],I=Fh(D);f.includes(I)||(N.splice(O,0,D),k.push(D))}return i==="wait"&&k.length&&(N=k),T(J1(N)),S(h),null}const{forceRender:M}=b.useContext(Vx);return g.jsx(g.Fragment,{children:C.map(N=>{const O=Fh(N),D=o&&!c?!1:h===C||f.includes(O),I=()=>{if(v.has(O))v.set(O,!0);else return;let L=!0;v.forEach(A=>{A||(L=!1)}),L&&(M==null||M(),T(y.current),o&&(d==null||d()),r&&r())};return g.jsx(E5,{isPresent:D,initial:!m.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:i,onExitComplete:D?void 0:I,anchorX:a,children:N},O)})})},mr=n=>n;let _O=mr;function $x(n){let e;return()=>(e===void 0&&(e=n()),e)}const wl=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},Zs=n=>n*1e3,Qs=n=>n/1e3,A5={useManualTiming:!1},Vh=["read","resolveKeyframes","update","preRender","render","postRender"],Z1={value:null};function M5(n,e){let t=new Set,r=new Set,s=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},c=0;function d(f){o.has(f)&&(h.schedule(f),n()),c++,f(a)}const h={schedule:(f,m=!1,y=!1)=>{const w=y&&s?t:r;return m&&o.add(f),w.has(f)||w.add(f),f},cancel:f=>{r.delete(f),o.delete(f)},process:f=>{if(a=f,s){i=!0;return}s=!0,[t,r]=[r,t],t.forEach(d),e&&Z1.value&&Z1.value.frameloop[e].push(c),c=0,t.clear(),s=!1,i&&(i=!1,h.process(f))}};return h}const O5=40;function TO(n,e){let t=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>t=!0,o=Vh.reduce((C,T)=>(C[T]=M5(i,e?T:void 0),C),{}),{read:a,resolveKeyframes:c,update:d,preRender:h,render:f,postRender:m}=o,y=()=>{const C=performance.now();t=!1,s.delta=r?1e3/60:Math.max(Math.min(C-s.timestamp,O5),1),s.timestamp=C,s.isProcessing=!0,a.process(s),c.process(s),d.process(s),h.process(s),f.process(s),m.process(s),s.isProcessing=!1,t&&e&&(r=!1,n(y))},v=()=>{t=!0,r=!0,s.isProcessing||n(y)};return{schedule:Vh.reduce((C,T)=>{const k=o[T];return C[T]=(M,N=!1,O=!1)=>(t||v(),k.schedule(M,N,O)),C},{}),cancel:C=>{for(let T=0;T<Vh.length;T++)o[Vh[T]].cancel(C)},state:s,steps:o}}const{schedule:yt,cancel:io,state:mn,steps:Ry}=TO(typeof requestAnimationFrame<"u"?requestAnimationFrame:mr,!0),kO=b.createContext({strict:!1}),Q1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},bl={};for(const n in Q1)bl[n]={isEnabled:e=>Q1[n].some(t=>!!e[t])};function P5(n){for(const e in n)bl[e]={...bl[e],...n[e]}}const D5=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Pf(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||D5.has(n)}let EO=n=>!Pf(n);function R5(n){n&&(EO=e=>e.startsWith("on")?!Pf(e):n(e))}try{R5(require("@emotion/is-prop-valid").default)}catch{}function I5(n,e,t){const r={};for(const s in n)s==="values"&&typeof n.values=="object"||(EO(s)||t===!0&&Pf(s)||!e&&!Pf(s)||n.draggable&&s.startsWith("onDrag"))&&(r[s]=n[s]);return r}function j5(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...r)=>n(...r);return new Proxy(t,{get:(r,s)=>s==="create"?n:(e.has(s)||e.set(s,n(s)),e.get(s))})}const Ap=b.createContext({});function Mp(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function _u(n){return typeof n=="string"||Array.isArray(n)}const Hx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ux=["initial",...Hx];function Op(n){return Mp(n.animate)||Ux.some(e=>_u(n[e]))}function NO(n){return!!(Op(n)||n.variants)}function L5(n,e){if(Op(n)){const{initial:t,animate:r}=n;return{initial:t===!1||_u(t)?t:void 0,animate:_u(r)?r:void 0}}return n.inherit!==!1?e:{}}function F5(n){const{initial:e,animate:t}=L5(n,b.useContext(Ap));return b.useMemo(()=>({initial:e,animate:t}),[eT(e),eT(t)])}function eT(n){return Array.isArray(n)?n.join(" "):n}const V5=Symbol.for("motionComponentSymbol");function Ua(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function B5(n,e,t){return b.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Ua(t)&&(t.current=r))},[e])}const qx=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),z5="framerAppearId",AO="data-"+qx(z5),{schedule:Gx}=TO(queueMicrotask,!1),MO=b.createContext({});function W5(n,e,t,r,s){var i,o;const{visualElement:a}=b.useContext(Ap),c=b.useContext(kO),d=b.useContext(Np),h=b.useContext(zx).reducedMotion,f=b.useRef(null);r=r||c.renderer,!f.current&&r&&(f.current=r(n,{visualState:e,parent:a,props:t,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h}));const m=f.current,y=b.useContext(MO);m&&!m.projection&&s&&(m.type==="html"||m.type==="svg")&&$5(f.current,t,s,y);const v=b.useRef(!1);b.useInsertionEffect(()=>{m&&v.current&&m.update(t,d)});const w=t[AO],S=b.useRef(!!w&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,w))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,w)));return CO(()=>{m&&(v.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),Gx.render(m.render),S.current&&m.animationState&&m.animationState.animateChanges())}),b.useEffect(()=>{m&&(!S.current&&m.animationState&&m.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{var C;(C=window.MotionHandoffMarkAsComplete)===null||C===void 0||C.call(window,w)}),S.current=!1))}),m}function $5(n,e,t,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:c,layoutRoot:d}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:OO(n.parent)),n.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&Ua(a),visualElement:n,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,layoutScroll:c,layoutRoot:d})}function OO(n){if(n)return n.options.allowProjection!==!1?n.projection:OO(n.parent)}function H5({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:s}){var i,o;n&&P5(n);function a(d,h){let f;const m={...b.useContext(zx),...d,layoutId:U5(d)},{isStatic:y}=m,v=F5(d),w=r(d,y);if(!y&&Wx){q5();const S=G5(m);f=S.MeasureLayout,v.visualElement=W5(s,w,m,e,S.ProjectionNode)}return g.jsxs(Ap.Provider,{value:v,children:[f&&v.visualElement?g.jsx(f,{visualElement:v.visualElement,...m}):null,t(s,d,B5(w,v.visualElement,h),w,y,v.visualElement)]})}a.displayName=`motion.${typeof s=="string"?s:`create(${(o=(i=s.displayName)!==null&&i!==void 0?i:s.name)!==null&&o!==void 0?o:""})`}`;const c=b.forwardRef(a);return c[V5]=s,c}function U5({layoutId:n}){const e=b.useContext(Vx).id;return e&&n!==void 0?e+"-"+n:n}function q5(n,e){b.useContext(kO).strict}function G5(n){const{drag:e,layout:t}=bl;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const PO=n=>e=>typeof e=="string"&&e.startsWith(n),Kx=PO("--"),K5=PO("var(--"),Yx=n=>K5(n)?Y5.test(n.split("/*")[0].trim()):!1,Y5=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Tu={};function X5(n){for(const e in n)Tu[e]=n[e],Kx(e)&&(Tu[e].isCSSVariable=!0)}const Hl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],aa=new Set(Hl);function DO(n,{layout:e,layoutId:t}){return aa.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Tu[n]||n==="opacity")}const An=n=>!!(n&&n.getVelocity),RO=(n,e)=>e&&typeof n=="number"?e.transform(n):n,ii=(n,e,t)=>t>e?e:t<n?n:t,Ul={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},ku={...Ul,transform:n=>ii(0,1,n)},Bh={...Ul,default:1},Xu=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Vi=Xu("deg"),xs=Xu("%"),ze=Xu("px"),J5=Xu("vh"),Z5=Xu("vw"),tT={...xs,parse:n=>xs.parse(n)/100,transform:n=>xs.transform(n*100)},Q5={borderWidth:ze,borderTopWidth:ze,borderRightWidth:ze,borderBottomWidth:ze,borderLeftWidth:ze,borderRadius:ze,radius:ze,borderTopLeftRadius:ze,borderTopRightRadius:ze,borderBottomRightRadius:ze,borderBottomLeftRadius:ze,width:ze,maxWidth:ze,height:ze,maxHeight:ze,top:ze,right:ze,bottom:ze,left:ze,padding:ze,paddingTop:ze,paddingRight:ze,paddingBottom:ze,paddingLeft:ze,margin:ze,marginTop:ze,marginRight:ze,marginBottom:ze,marginLeft:ze,backgroundPositionX:ze,backgroundPositionY:ze},e9={rotate:Vi,rotateX:Vi,rotateY:Vi,rotateZ:Vi,scale:Bh,scaleX:Bh,scaleY:Bh,scaleZ:Bh,skew:Vi,skewX:Vi,skewY:Vi,distance:ze,translateX:ze,translateY:ze,translateZ:ze,x:ze,y:ze,z:ze,perspective:ze,transformPerspective:ze,opacity:ku,originX:tT,originY:tT,originZ:ze},nT={...Ul,transform:Math.round},Xx={...Q5,...e9,zIndex:nT,size:ze,fillOpacity:ku,strokeOpacity:ku,numOctaves:nT},t9={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},n9=Hl.length;function r9(n,e,t){let r="",s=!0;for(let i=0;i<n9;i++){const o=Hl[i],a=n[o];if(a===void 0)continue;let c=!0;if(typeof a=="number"?c=a===(o.startsWith("scale")?1:0):c=parseFloat(a)===0,!c||t){const d=RO(a,Xx[o]);if(!c){s=!1;const h=t9[o]||o;r+=`${h}(${d}) `}t&&(e[o]=d)}}return r=r.trim(),t?r=t(e,s?"":r):s&&(r="none"),r}function Jx(n,e,t){const{style:r,vars:s,transformOrigin:i}=n;let o=!1,a=!1;for(const c in e){const d=e[c];if(aa.has(c)){o=!0;continue}else if(Kx(c)){s[c]=d;continue}else{const h=RO(d,Xx[c]);c.startsWith("origin")?(a=!0,i[c]=h):r[c]=h}}if(e.transform||(o||t?r.transform=r9(e,n.transform,t):r.transform&&(r.transform="none")),a){const{originX:c="50%",originY:d="50%",originZ:h=0}=i;r.transformOrigin=`${c} ${d} ${h}`}}const Zx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function IO(n,e,t){for(const r in e)!An(e[r])&&!DO(r,t)&&(n[r]=e[r])}function s9({transformTemplate:n},e){return b.useMemo(()=>{const t=Zx();return Jx(t,e,n),Object.assign({},t.vars,t.style)},[e])}function i9(n,e){const t=n.style||{},r={};return IO(r,t,n),Object.assign(r,s9(n,e)),r}function o9(n,e){const t={},r=i9(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const a9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Qx(n){return typeof n!="string"||n.includes("-")?!1:!!(a9.indexOf(n)>-1||/[A-Z]/u.test(n))}const l9={offset:"stroke-dashoffset",array:"stroke-dasharray"},c9={offset:"strokeDashoffset",array:"strokeDasharray"};function u9(n,e,t=1,r=0,s=!0){n.pathLength=1;const i=s?l9:c9;n[i.offset]=ze.transform(-r);const o=ze.transform(e),a=ze.transform(t);n[i.array]=`${o} ${a}`}function rT(n,e,t){return typeof n=="string"?n:ze.transform(e+t*n)}function d9(n,e,t){const r=rT(e,n.x,n.width),s=rT(t,n.y,n.height);return`${r} ${s}`}function ew(n,{attrX:e,attrY:t,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:c=0,...d},h,f){if(Jx(n,d,f),h){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:m,style:y,dimensions:v}=n;m.transform&&(v&&(y.transform=m.transform),delete m.transform),v&&(s!==void 0||i!==void 0||y.transform)&&(y.transformOrigin=d9(v,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),r!==void 0&&(m.scale=r),o!==void 0&&u9(m,o,a,c,!1)}const jO=()=>({...Zx(),attrs:{}}),tw=n=>typeof n=="string"&&n.toLowerCase()==="svg";function h9(n,e,t,r){const s=b.useMemo(()=>{const i=jO();return ew(i,e,tw(r),n.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(n.style){const i={};IO(i,n.style,n),s.style={...i,...s.style}}return s}function f9(n=!1){return(t,r,s,{latestValues:i},o)=>{const c=(Qx(t)?h9:o9)(r,i,o,t),d=I5(r,typeof t=="string",n),h=t!==b.Fragment?{...d,...c,ref:s}:{},{children:f}=r,m=b.useMemo(()=>An(f)?f.get():f,[f]);return b.createElement(t,{...h,children:m})}}function sT(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function nw(n,e,t,r){if(typeof e=="function"){const[s,i]=sT(r);e=e(t!==void 0?t:n.custom,s,i)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,i]=sT(r);e=e(t!==void 0?t:n.custom,s,i)}return e}const Wv=n=>Array.isArray(n),p9=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),m9=n=>Wv(n)?n[n.length-1]||0:n;function tf(n){const e=An(n)?n.get():n;return p9(e)?e.toValue():e}function g9({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},r,s,i){const o={latestValues:y9(r,s,i,n),renderState:e()};return t&&(o.onMount=a=>t({props:r,current:a,...o}),o.onUpdate=a=>t(a)),o}const LO=n=>(e,t)=>{const r=b.useContext(Ap),s=b.useContext(Np),i=()=>g9(n,e,r,s);return t?i():Bx(i)};function y9(n,e,t,r){const s={},i=r(n,{});for(const m in i)s[m]=tf(i[m]);let{initial:o,animate:a}=n;const c=Op(n),d=NO(n);e&&d&&!c&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=t?t.initial===!1:!1;h=h||o===!1;const f=h?a:o;if(f&&typeof f!="boolean"&&!Mp(f)){const m=Array.isArray(f)?f:[f];for(let y=0;y<m.length;y++){const v=nw(n,m[y]);if(v){const{transitionEnd:w,transition:S,...C}=v;for(const T in C){let k=C[T];if(Array.isArray(k)){const M=h?k.length-1:0;k=k[M]}k!==null&&(s[T]=k)}for(const T in w)s[T]=w[T]}}}return s}function rw(n,e,t){var r;const{style:s}=n,i={};for(const o in s)(An(s[o])||e.style&&An(e.style[o])||DO(o,n)||((r=t==null?void 0:t.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(i[o]=s[o]);return i}const v9={useVisualState:LO({scrapeMotionValuesFromProps:rw,createRenderState:Zx})};function FO(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function VO(n,{style:e,vars:t},r,s){Object.assign(n.style,e,s&&s.getProjectionStyles(r));for(const i in t)n.style.setProperty(i,t[i])}const BO=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function zO(n,e,t,r){VO(n,e,void 0,r);for(const s in e.attrs)n.setAttribute(BO.has(s)?s:qx(s),e.attrs[s])}function WO(n,e,t){const r=rw(n,e,t);for(const s in n)if(An(n[s])||An(e[s])){const i=Hl.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=n[s]}return r}const iT=["x","y","width","height","cx","cy","r"],x9={useVisualState:LO({scrapeMotionValuesFromProps:WO,createRenderState:jO,onUpdate:({props:n,prevProps:e,current:t,renderState:r,latestValues:s})=>{if(!t)return;let i=!!n.drag;if(!i){for(const a in s)if(aa.has(a)){i=!0;break}}if(!i)return;let o=!e;if(e)for(let a=0;a<iT.length;a++){const c=iT[a];n[c]!==e[c]&&(o=!0)}o&&yt.read(()=>{FO(t,r),yt.render(()=>{ew(r,s,tw(t.tagName),n.transformTemplate),zO(t,r)})})}})};function w9(n,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...Qx(r)?x9:v9,preloadedFeatures:n,useRender:f9(s),createVisualElement:e,Component:r};return H5(o)}}function Eu(n,e,t){const r=n.getProps();return nw(r,e,t!==void 0?t:r.custom,n)}const b9=$x(()=>window.ScrollTimeline!==void 0);class S9{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){const r=this.animations.map(s=>{if(b9()&&s.attachTimeline)return s.attachTimeline(e);if(typeof t=="function")return t(s)});return()=>{r.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class C9 extends S9{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function sw(n,e){return n?n[e]||n.default||n:void 0}const $v=2e4;function $O(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<$v;)e+=t,r=n.next(e);return e>=$v?1/0:e}function iw(n){return typeof n=="function"}function oT(n,e){n.timeline=e,n.onfinish=null}const ow=n=>Array.isArray(n)&&typeof n[0]=="number",_9={linearEasing:void 0};function T9(n,e){const t=$x(n);return()=>{var r;return(r=_9[e])!==null&&r!==void 0?r:t()}}const Df=T9(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),HO=(n,e,t=10)=>{let r="";const s=Math.max(Math.round(e/t),2);for(let i=0;i<s;i++)r+=n(wl(0,s-1,i))+", ";return`linear(${r.substring(0,r.length-2)})`};function UO(n){return!!(typeof n=="function"&&Df()||!n||typeof n=="string"&&(n in Hv||Df())||ow(n)||Array.isArray(n)&&n.every(UO))}const Xc=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,Hv={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Xc([0,.65,.55,1]),circOut:Xc([.55,0,1,.45]),backIn:Xc([.31,.01,.66,-.59]),backOut:Xc([.33,1.53,.69,.99])};function qO(n,e){if(n)return typeof n=="function"&&Df()?HO(n,e):ow(n)?Xc(n):Array.isArray(n)?n.map(t=>qO(t,e)||Hv.easeOut):Hv[n]}const Ur={x:!1,y:!1};function GO(){return Ur.x||Ur.y}function k9(n,e,t){var r;if(n instanceof EventTarget)return[n];if(typeof n=="string"){let s=document;const i=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}function KO(n,e){const t=k9(n),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[t,s,()=>r.abort()]}function aT(n){return!(n.pointerType==="touch"||GO())}function E9(n,e,t={}){const[r,s,i]=KO(n,t),o=a=>{if(!aT(a))return;const{target:c}=a,d=e(c,a);if(typeof d!="function"||!c)return;const h=f=>{aT(f)&&(d(f),c.removeEventListener("pointerleave",h))};c.addEventListener("pointerleave",h,s)};return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}function Rf(n,e){const t=`${e}PointerCapture`;if(n.target instanceof Element&&t in n.target&&n.pointerId!==void 0)try{n.target[t](n.pointerId)}catch{}}const YO=(n,e)=>e?n===e?!0:YO(n,e.parentElement):!1,aw=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,N9=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function A9(n){return N9.has(n.tagName)||n.tabIndex!==-1}const Jc=new WeakSet;function lT(n){return e=>{e.key==="Enter"&&n(e)}}function Iy(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const M9=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=lT(()=>{if(Jc.has(t))return;Iy(t,"down");const s=lT(()=>{Iy(t,"up")}),i=()=>Iy(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",i,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function cT(n){return aw(n)&&!GO()}function O9(n,e,t={}){const[r,s,i]=KO(n,t),o=a=>{const c=a.currentTarget;if(!c||!cT(a)||Jc.has(c))return;Jc.add(c),Rf(a,"set");const d=e(c,a),h=(y,v)=>{c.removeEventListener("pointerup",f),c.removeEventListener("pointercancel",m),Rf(y,"release"),!(!cT(y)||!Jc.has(c))&&(Jc.delete(c),typeof d=="function"&&d(y,{success:v}))},f=y=>{(y.isTrusted?P9(y,c instanceof Element?c.getBoundingClientRect():{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight}):!1)?h(y,!1):h(y,!(c instanceof Element)||YO(c,y.target))},m=y=>{h(y,!1)};c.addEventListener("pointerup",f,s),c.addEventListener("pointercancel",m,s),c.addEventListener("lostpointercapture",m,s)};return r.forEach(a=>{a=t.useGlobalTarget?window:a;let c=!1;a instanceof HTMLElement&&(c=!0,!A9(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0)),a.addEventListener("pointerdown",o,s),c&&a.addEventListener("focus",d=>M9(d,s),s)}),i}function P9(n,e){return n.clientX<e.left||n.clientX>e.right||n.clientY<e.top||n.clientY>e.bottom}function D9(n){return n==="x"||n==="y"?Ur[n]?null:(Ur[n]=!0,()=>{Ur[n]=!1}):Ur.x||Ur.y?null:(Ur.x=Ur.y=!0,()=>{Ur.x=Ur.y=!1})}const XO=new Set(["width","height","top","left","right","bottom",...Hl]);let nf;function R9(){nf=void 0}const ws={now:()=>(nf===void 0&&ws.set(mn.isProcessing||A5.useManualTiming?mn.timestamp:performance.now()),nf),set:n=>{nf=n,queueMicrotask(R9)}};function lw(n,e){n.indexOf(e)===-1&&n.push(e)}function cw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class uw{constructor(){this.subscriptions=[]}add(e){return lw(this.subscriptions,e),()=>cw(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function JO(n,e){return e?n*(1e3/e):0}const uT=30,I9=n=>!isNaN(parseFloat(n));class j9{constructor(e,t={}){this.version="12.4.7",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const i=ws.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=ws.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=I9(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new uw);const r=this.events[e].add(t);return e==="change"?()=>{r(),yt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ws.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>uT)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,uT);return JO(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Nu(n,e){return new j9(n,e)}function L9(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Nu(t))}function F9(n,e){const t=Eu(n,e);let{transitionEnd:r={},transition:s={},...i}=t||{};i={...i,...r};for(const o in i){const a=m9(i[o]);L9(n,o,a)}}function V9(n){return!!(An(n)&&n.add)}function Uv(n,e){const t=n.getValue("willChange");if(V9(t))return t.add(e)}function ZO(n){return n.props[AO]}const QO=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,B9=1e-7,z9=12;function W9(n,e,t,r,s){let i,o,a=0;do o=e+(t-e)/2,i=QO(o,r,s)-n,i>0?t=o:e=o;while(Math.abs(i)>B9&&++a<z9);return o}function Ju(n,e,t,r){if(n===e&&t===r)return mr;const s=i=>W9(i,0,1,n,t);return i=>i===0||i===1?i:QO(s(i),e,r)}const eP=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,tP=n=>e=>1-n(1-e),nP=Ju(.33,1.53,.69,.99),dw=tP(nP),rP=eP(dw),sP=n=>(n*=2)<1?.5*dw(n):.5*(2-Math.pow(2,-10*(n-1))),hw=n=>1-Math.sin(Math.acos(n)),iP=tP(hw),oP=eP(hw),aP=n=>/^0[^.\s]+$/u.test(n);function $9(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||aP(n):!0}const ou=n=>Math.round(n*1e5)/1e5,fw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function H9(n){return n==null}const U9=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,pw=(n,e)=>t=>!!(typeof t=="string"&&U9.test(t)&&t.startsWith(n)||e&&!H9(t)&&Object.prototype.hasOwnProperty.call(t,e)),lP=(n,e,t)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(fw);return{[n]:parseFloat(s),[e]:parseFloat(i),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},q9=n=>ii(0,255,n),jy={...Ul,transform:n=>Math.round(q9(n))},Bo={test:pw("rgb","red"),parse:lP("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+jy.transform(n)+", "+jy.transform(e)+", "+jy.transform(t)+", "+ou(ku.transform(r))+")"};function G9(n){let e="",t="",r="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const qv={test:pw("#"),parse:G9,transform:Bo.transform},qa={test:pw("hsl","hue"),parse:lP("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+xs.transform(ou(e))+", "+xs.transform(ou(t))+", "+ou(ku.transform(r))+")"},En={test:n=>Bo.test(n)||qv.test(n)||qa.test(n),parse:n=>Bo.test(n)?Bo.parse(n):qa.test(n)?qa.parse(n):qv.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Bo.transform(n):qa.transform(n)},K9=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Y9(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(fw))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(K9))===null||t===void 0?void 0:t.length)||0)>0}const cP="number",uP="color",X9="var",J9="var(",dT="${}",Z9=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Au(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=e.replace(Z9,c=>(En.test(c)?(r.color.push(i),s.push(uP),t.push(En.parse(c))):c.startsWith(J9)?(r.var.push(i),s.push(X9),t.push(c)):(r.number.push(i),s.push(cP),t.push(parseFloat(c))),++i,dT)).split(dT);return{values:t,split:a,indexes:r,types:s}}function dP(n){return Au(n).values}function hP(n){const{split:e,types:t}=Au(n),r=e.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],s[o]!==void 0){const a=t[o];a===cP?i+=ou(s[o]):a===uP?i+=En.transform(s[o]):i+=s[o]}return i}}const Q9=n=>typeof n=="number"?0:n;function e8(n){const e=dP(n);return hP(n)(e.map(Q9))}const oo={test:Y9,parse:dP,createTransformer:hP,getAnimatableNone:e8},t8=new Set(["brightness","contrast","saturate","opacity"]);function n8(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(fw)||[];if(!r)return n;const s=t.replace(r,"");let i=t8.has(e)?1:0;return r!==t&&(i*=100),e+"("+i+s+")"}const r8=/\b([a-z-]*)\(.*?\)/gu,Gv={...oo,getAnimatableNone:n=>{const e=n.match(r8);return e?e.map(n8).join(" "):n}},s8={...Xx,color:En,backgroundColor:En,outlineColor:En,fill:En,stroke:En,borderColor:En,borderTopColor:En,borderRightColor:En,borderBottomColor:En,borderLeftColor:En,filter:Gv,WebkitFilter:Gv},mw=n=>s8[n];function fP(n,e){let t=mw(n);return t!==Gv&&(t=oo),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const i8=new Set(["auto","none","0"]);function o8(n,e,t){let r=0,s;for(;r<n.length&&!s;){const i=n[r];typeof i=="string"&&!i8.has(i)&&Au(i).values.length&&(s=n[r]),r++}if(s&&t)for(const i of e)n[i]=fP(t,s)}const hT=n=>n===Ul||n===ze,fT=(n,e)=>parseFloat(n.split(", ")[e]),pT=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return fT(s[1],e);{const i=r.match(/^matrix\((.+)\)$/u);return i?fT(i[1],n):0}},a8=new Set(["x","y","z"]),l8=Hl.filter(n=>!a8.has(n));function c8(n){const e=[];return l8.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const Sl={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:pT(4,13),y:pT(5,14)};Sl.translateX=Sl.x;Sl.translateY=Sl.y;const qo=new Set;let Kv=!1,Yv=!1;function pP(){if(Yv){const n=Array.from(qo).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const s=c8(r);s.length&&(t.set(r,s),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=t.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))===null||a===void 0||a.set(o)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Yv=!1,Kv=!1,qo.forEach(n=>n.complete()),qo.clear()}function mP(){qo.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Yv=!0)})}function u8(){mP(),pP()}class gw{constructor(e,t,r,s,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(qo.add(this),Kv||(Kv=!0,yt.read(mP),yt.resolveKeyframes(pP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:s}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const o=s==null?void 0:s.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&t){const c=r.readValue(t,a);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=a),s&&o===void 0&&s.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),qo.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,qo.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const gP=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),d8=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function h8(n){const e=d8.exec(n);if(!e)return[,];const[,t,r,s]=e;return[`--${t??r}`,s]}function yP(n,e,t=1){const[r,s]=h8(n);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return gP(o)?parseFloat(o):o}return Yx(s)?yP(s,e,t+1):s}const vP=n=>e=>e.test(n),f8={test:n=>n==="auto",parse:n=>n},xP=[Ul,ze,xs,Vi,Z5,J5,f8],mT=n=>xP.find(vP(n));class wP extends gw{constructor(e,t,r,s,i){super(e,t,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),Yx(d))){const h=yP(d,t.current);h!==void 0&&(e[c]=h),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!XO.has(r)||e.length!==2)return;const[s,i]=e,o=mT(s),a=mT(i);if(o!==a)if(hT(o)&&hT(a))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let s=0;s<e.length;s++)$9(e[s])&&r.push(s);r.length&&o8(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Sl[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:t,name:r,unresolvedKeyframes:s}=this;if(!t||!t.current)return;const i=t.getValue(r);i&&i.jump(this.measuredOrigin,!1);const o=s.length-1,a=s[o];s[o]=Sl[r](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,d])=>{t.getValue(c).set(d)}),this.resolveNoneKeyframes()}}const gT=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(oo.test(n)||n==="0")&&!n.startsWith("url("));function p8(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function m8(n,e,t,r){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=n[n.length-1],o=gT(s,e),a=gT(i,e);return!o||!a?!1:p8(n)||(t==="spring"||iw(t))&&r}const g8=n=>n!==null;function Pp(n,{repeat:e,repeatType:t="loop"},r){const s=n.filter(g8),i=e&&t!=="loop"&&e%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const y8=40;class bP{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ws.now(),this.options={autoplay:e,delay:t,type:r,repeat:s,repeatDelay:i,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>y8?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&u8(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=ws.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:i,delay:o,onComplete:a,onUpdate:c,isGenerator:d}=this.options;if(!d&&!m8(e,r,s,i))if(o)this.options.duration=0;else{c&&c(Pp(e,this.options,t)),a&&a(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,t);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...h},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Ot=(n,e,t)=>n+(e-n)*t;function Ly(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function v8({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let s=0,i=0,o=0;if(!e)s=i=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,c=2*t-a;s=Ly(c,a,n+1/3),i=Ly(c,a,n),o=Ly(c,a,n-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function If(n,e){return t=>t>0?e:n}const Fy=(n,e,t)=>{const r=n*n,s=t*(e*e-r)+r;return s<0?0:Math.sqrt(s)},x8=[qv,Bo,qa],w8=n=>x8.find(e=>e.test(n));function yT(n){const e=w8(n);if(!e)return!1;let t=e.parse(n);return e===qa&&(t=v8(t)),t}const vT=(n,e)=>{const t=yT(n),r=yT(e);if(!t||!r)return If(n,e);const s={...t};return i=>(s.red=Fy(t.red,r.red,i),s.green=Fy(t.green,r.green,i),s.blue=Fy(t.blue,r.blue,i),s.alpha=Ot(t.alpha,r.alpha,i),Bo.transform(s))},b8=(n,e)=>t=>e(n(t)),Zu=(...n)=>n.reduce(b8),Xv=new Set(["none","hidden"]);function S8(n,e){return Xv.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function C8(n,e){return t=>Ot(n,e,t)}function yw(n){return typeof n=="number"?C8:typeof n=="string"?Yx(n)?If:En.test(n)?vT:k8:Array.isArray(n)?SP:typeof n=="object"?En.test(n)?vT:_8:If}function SP(n,e){const t=[...n],r=t.length,s=n.map((i,o)=>yw(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)t[o]=s[o](i);return t}}function _8(n,e){const t={...n,...e},r={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(r[s]=yw(n[s])(n[s],e[s]));return s=>{for(const i in r)t[i]=r[i](s);return t}}function T8(n,e){var t;const r=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],a=n.indexes[o][s[o]],c=(t=n.values[a])!==null&&t!==void 0?t:0;r[i]=c,s[o]++}return r}const k8=(n,e)=>{const t=oo.createTransformer(e),r=Au(n),s=Au(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Xv.has(n)&&!s.values.length||Xv.has(e)&&!r.values.length?S8(n,e):Zu(SP(T8(r,s),s.values),t):If(n,e)};function CP(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Ot(n,e,t):yw(n)(n,e)}const E8=5;function _P(n,e,t){const r=Math.max(e-E8,0);return JO(t-n(r),e-r)}const Dt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},xT=.001;function N8({duration:n=Dt.duration,bounce:e=Dt.bounce,velocity:t=Dt.velocity,mass:r=Dt.mass}){let s,i,o=1-e;o=ii(Dt.minDamping,Dt.maxDamping,o),n=ii(Dt.minDuration,Dt.maxDuration,Qs(n)),o<1?(s=d=>{const h=d*o,f=h*n,m=h-t,y=Jv(d,o),v=Math.exp(-f);return xT-m/y*v},i=d=>{const f=d*o*n,m=f*t+t,y=Math.pow(o,2)*Math.pow(d,2)*n,v=Math.exp(-f),w=Jv(Math.pow(d,2),o);return(-s(d)+xT>0?-1:1)*((m-y)*v)/w}):(s=d=>{const h=Math.exp(-d*n),f=(d-t)*n+1;return-.001+h*f},i=d=>{const h=Math.exp(-d*n),f=(t-d)*(n*n);return h*f});const a=5/n,c=M8(s,i,a);if(n=Zs(n),isNaN(c))return{stiffness:Dt.stiffness,damping:Dt.damping,duration:n};{const d=Math.pow(c,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:n}}}const A8=12;function M8(n,e,t){let r=t;for(let s=1;s<A8;s++)r=r-n(r)/e(r);return r}function Jv(n,e){return n*Math.sqrt(1-e*e)}const O8=["duration","bounce"],P8=["stiffness","damping","mass"];function wT(n,e){return e.some(t=>n[t]!==void 0)}function D8(n){let e={velocity:Dt.velocity,stiffness:Dt.stiffness,damping:Dt.damping,mass:Dt.mass,isResolvedFromDuration:!1,...n};if(!wT(n,P8)&&wT(n,O8))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),s=r*r,i=2*ii(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:Dt.mass,stiffness:s,damping:i}}else{const t=N8(n);e={...e,...t,mass:Dt.mass},e.isResolvedFromDuration=!0}return e}function TP(n=Dt.visualDuration,e=Dt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:s}=t;const i=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],a={done:!1,value:i},{stiffness:c,damping:d,mass:h,duration:f,velocity:m,isResolvedFromDuration:y}=D8({...t,velocity:-Qs(t.velocity||0)}),v=m||0,w=d/(2*Math.sqrt(c*h)),S=o-i,C=Qs(Math.sqrt(c/h)),T=Math.abs(S)<5;r||(r=T?Dt.restSpeed.granular:Dt.restSpeed.default),s||(s=T?Dt.restDelta.granular:Dt.restDelta.default);let k;if(w<1){const N=Jv(C,w);k=O=>{const D=Math.exp(-w*C*O);return o-D*((v+w*C*S)/N*Math.sin(N*O)+S*Math.cos(N*O))}}else if(w===1)k=N=>o-Math.exp(-C*N)*(S+(v+C*S)*N);else{const N=C*Math.sqrt(w*w-1);k=O=>{const D=Math.exp(-w*C*O),I=Math.min(N*O,300);return o-D*((v+w*C*S)*Math.sinh(I)+N*S*Math.cosh(I))/N}}const M={calculatedDuration:y&&f||null,next:N=>{const O=k(N);if(y)a.done=N>=f;else{let D=0;w<1&&(D=N===0?Zs(v):_P(k,N,O));const I=Math.abs(D)<=r,L=Math.abs(o-O)<=s;a.done=I&&L}return a.value=a.done?o:O,a},toString:()=>{const N=Math.min($O(M),$v),O=HO(D=>M.next(N*D).value,N,30);return N+"ms "+O}};return M}function bT({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:c,restDelta:d=.5,restSpeed:h}){const f=n[0],m={done:!1,value:f},y=I=>a!==void 0&&I<a||c!==void 0&&I>c,v=I=>a===void 0?c:c===void 0||Math.abs(a-I)<Math.abs(c-I)?a:c;let w=t*e;const S=f+w,C=o===void 0?S:o(S);C!==S&&(w=C-f);const T=I=>-w*Math.exp(-I/r),k=I=>C+T(I),M=I=>{const L=T(I),A=k(I);m.done=Math.abs(L)<=d,m.value=m.done?C:A};let N,O;const D=I=>{y(m.value)&&(N=I,O=TP({keyframes:[m.value,v(m.value)],velocity:_P(k,I,m.value),damping:s,stiffness:i,restDelta:d,restSpeed:h}))};return D(0),{calculatedDuration:null,next:I=>{let L=!1;return!O&&N===void 0&&(L=!0,M(I),D(I)),N!==void 0&&I>=N?O.next(I-N):(!L&&M(I),m)}}}const R8=Ju(.42,0,1,1),I8=Ju(0,0,.58,1),kP=Ju(.42,0,.58,1),j8=n=>Array.isArray(n)&&typeof n[0]!="number",L8={linear:mr,easeIn:R8,easeInOut:kP,easeOut:I8,circIn:hw,circInOut:oP,circOut:iP,backIn:dw,backInOut:rP,backOut:nP,anticipate:sP},ST=n=>{if(ow(n)){_O(n.length===4);const[e,t,r,s]=n;return Ju(e,t,r,s)}else if(typeof n=="string")return L8[n];return n};function F8(n,e,t){const r=[],s=t||CP,i=n.length-1;for(let o=0;o<i;o++){let a=s(n[o],n[o+1]);if(e){const c=Array.isArray(e)?e[o]||mr:e;a=Zu(c,a)}r.push(a)}return r}function V8(n,e,{clamp:t=!0,ease:r,mixer:s}={}){const i=n.length;if(_O(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[i-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=F8(e,r,s),c=a.length,d=h=>{if(o&&h<n[0])return e[0];let f=0;if(c>1)for(;f<n.length-2&&!(h<n[f+1]);f++);const m=wl(n[f],n[f+1],h);return a[f](m)};return t?h=>d(ii(n[0],n[i-1],h)):d}function B8(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const s=wl(0,e,r);n.push(Ot(t,1,s))}}function z8(n){const e=[0];return B8(e,n.length-1),e}function W8(n,e){return n.map(t=>t*e)}function $8(n,e){return n.map(()=>e||kP).splice(0,n.length-1)}function jf({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const s=j8(r)?r.map(ST):ST(r),i={done:!1,value:e[0]},o=W8(t&&t.length===e.length?t:z8(e),n),a=V8(o,e,{ease:Array.isArray(s)?s:$8(e,s)});return{calculatedDuration:n,next:c=>(i.value=a(c),i.done=c>=n,i)}}const H8=n=>{const e=({timestamp:t})=>n(t);return{start:()=>yt.update(e,!0),stop:()=>io(e),now:()=>mn.isProcessing?mn.timestamp:ws.now()}},U8={decay:bT,inertia:bT,tween:jf,keyframes:jf,spring:TP},q8=n=>n/100;class vw extends bP{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:t,motionValue:r,element:s,keyframes:i}=this.options,o=(s==null?void 0:s.KeyframeResolver)||gw,a=(c,d)=>this.onKeyframesResolved(c,d);this.resolver=new o(i,a,t,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=this.options,a=iw(t)?t:U8[t]||jf;let c,d;a!==jf&&typeof e[0]!="number"&&(c=Zu(q8,CP(e[0],e[1])),e=[0,100]);const h=a({...this.options,keyframes:e});i==="mirror"&&(d=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=$O(h));const{calculatedDuration:f}=h,m=f+s,y=m*(r+1)-s;return{generator:h,mirroredGenerator:d,mapPercentToKeyframes:c,calculatedDuration:f,resolvedDuration:m,totalDuration:y}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:r}=this;if(!r){const{keyframes:I}=this.options;return{done:!0,value:I[I.length-1]}}const{finalKeyframe:s,generator:i,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:c,calculatedDuration:d,totalDuration:h,resolvedDuration:f}=r;if(this.startTime===null)return i.next(0);const{delay:m,repeat:y,repeatType:v,repeatDelay:w,onUpdate:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const C=this.currentTime-m*(this.speed>=0?1:-1),T=this.speed>=0?C<0:C>h;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let k=this.currentTime,M=i;if(y){const I=Math.min(this.currentTime,h)/f;let L=Math.floor(I),A=I%1;!A&&I>=1&&(A=1),A===1&&L--,L=Math.min(L,y+1),!!(L%2)&&(v==="reverse"?(A=1-A,w&&(A-=w/f)):v==="mirror"&&(M=o)),k=ii(0,1,A)*f}const N=T?{done:!1,value:c[0]}:M.next(k);a&&(N.value=a(N.value));let{done:O}=N;!T&&d!==null&&(O=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return D&&s!==void 0&&(N.value=Pp(c,this.options,s)),S&&S(N.value),D&&this.finish(),N}get duration(){const{resolved:e}=this;return e?Qs(e.calculatedDuration):0}get time(){return Qs(this.currentTime)}set time(e){e=Zs(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Qs(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=H8,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),t&&t();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const G8=new Set(["opacity","clipPath","filter","transform"]);function K8(n,e,t,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeInOut",times:c}={}){const d={[e]:t};c&&(d.offset=c);const h=qO(a,s);return Array.isArray(h)&&(d.easing=h),n.animate(d,{delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}const Y8=$x(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Lf=10,X8=2e4;function J8(n){return iw(n.type)||n.type==="spring"||!UO(n.ease)}function Z8(n,e){const t=new vw({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:n[0]};const s=[];let i=0;for(;!r.done&&i<X8;)r=t.sample(i),s.push(r.value),i+=Lf;return{times:void 0,keyframes:s,duration:i-Lf,ease:"linear"}}const EP={anticipate:sP,backInOut:rP,circInOut:oP};function Q8(n){return n in EP}class CT extends bP{constructor(e){super(e);const{name:t,motionValue:r,element:s,keyframes:i}=this.options;this.resolver=new wP(i,(o,a)=>this.onKeyframesResolved(o,a),t,r,s),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:r=300,times:s,ease:i,type:o,motionValue:a,name:c,startTime:d}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof i=="string"&&Df()&&Q8(i)&&(i=EP[i]),J8(this.options)){const{onComplete:f,onUpdate:m,motionValue:y,element:v,...w}=this.options,S=Z8(e,w);e=S.keyframes,e.length===1&&(e[1]=e[0]),r=S.duration,s=S.times,i=S.ease,o="keyframes"}const h=K8(a.owner.current,c,e,{...this.options,duration:r,times:s,ease:i});return h.startTime=d??this.calcStartTime(),this.pendingTimeline?(oT(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:f}=this.options;a.set(Pp(e,this.options,t)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:r,times:s,type:o,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Qs(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Qs(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.currentTime=Zs(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return mr;const{animation:r}=t;oT(r,e)}return mr}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:r,duration:s,type:i,ease:o,times:a}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:h,onComplete:f,element:m,...y}=this.options,v=new vw({...y,keyframes:r,duration:s,type:i,ease:o,times:a,isGenerator:!0}),w=Zs(this.time);d.setWithVelocity(v.sample(w-Lf).value,v.sample(w).value,Lf)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:r,repeatDelay:s,repeatType:i,damping:o,type:a}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=t.owner.getProps();return Y8()&&r&&G8.has(r)&&!c&&!d&&!s&&i!=="mirror"&&o!==0&&a!=="inertia"}}const eq={type:"spring",stiffness:500,damping:25,restSpeed:10},tq=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),nq={type:"keyframes",duration:.8},rq={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},sq=(n,{keyframes:e})=>e.length>2?nq:aa.has(n)?n.startsWith("scale")?tq(e[1]):eq:rq;function iq({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:c,elapsed:d,...h}){return!!Object.keys(h).length}const xw=(n,e,t,r={},s,i)=>o=>{const a=sw(r,n)||{},c=a.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Zs(c);let h={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-d,onUpdate:m=>{e.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:i?void 0:s};iq(a)||(h={...h,...sq(n,h)}),h.duration&&(h.duration=Zs(h.duration)),h.repeatDelay&&(h.repeatDelay=Zs(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let f=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(f=!0)),f&&!i&&e.get()!==void 0){const m=Pp(h.keyframes,a);if(m!==void 0)return yt.update(()=>{h.onUpdate(m),h.onComplete()}),new C9([])}return!i&&CT.supports(h)?new CT(h):new vw(h)};function oq({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function NP(n,e,{delay:t=0,transitionOverride:r,type:s}={}){var i;let{transition:o=n.getDefaultTransition(),transitionEnd:a,...c}=e;r&&(o=r);const d=[],h=s&&n.animationState&&n.animationState.getState()[s];for(const f in c){const m=n.getValue(f,(i=n.latestValues[f])!==null&&i!==void 0?i:null),y=c[f];if(y===void 0||h&&oq(h,f))continue;const v={delay:t,...sw(o||{},f)};let w=!1;if(window.MotionHandoffAnimation){const C=ZO(n);if(C){const T=window.MotionHandoffAnimation(C,f,yt);T!==null&&(v.startTime=T,w=!0)}}Uv(n,f),m.start(xw(f,m,y,n.shouldReduceMotion&&XO.has(f)?{type:!1}:v,n,w));const S=m.animation;S&&d.push(S)}return a&&Promise.all(d).then(()=>{yt.update(()=>{a&&F9(n,a)})}),d}function Zv(n,e,t={}){var r;const s=Eu(n,e,t.type==="exit"?(r=n.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=s||{};t.transitionOverride&&(i=t.transitionOverride);const o=s?()=>Promise.all(NP(n,s,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:m}=i;return aq(n,e,h+d,f,m,t)}:()=>Promise.resolve(),{when:c}=i;if(c){const[d,h]=c==="beforeChildren"?[o,a]:[a,o];return d().then(()=>h())}else return Promise.all([o(),a(t.delay)])}function aq(n,e,t=0,r=0,s=1,i){const o=[],a=(n.variantChildren.size-1)*r,c=s===1?(d=0)=>d*r:(d=0)=>a-d*r;return Array.from(n.variantChildren).sort(lq).forEach((d,h)=>{d.notify("AnimationStart",e),o.push(Zv(d,e,{...i,delay:t+c(h)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(o)}function lq(n,e){return n.sortNodePosition(e)}function cq(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>Zv(n,i,t));r=Promise.all(s)}else if(typeof e=="string")r=Zv(n,e,t);else{const s=typeof e=="function"?Eu(n,e,t.custom):e;r=Promise.all(NP(n,s,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function AP(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const uq=Ux.length;function MP(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?MP(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<uq;t++){const r=Ux[t],s=n.props[r];(_u(s)||s===!1)&&(e[r]=s)}return e}const dq=[...Hx].reverse(),hq=Hx.length;function fq(n){return e=>Promise.all(e.map(({animation:t,options:r})=>cq(n,t,r)))}function pq(n){let e=fq(n),t=_T(),r=!0;const s=c=>(d,h)=>{var f;const m=Eu(n,h,c==="exit"?(f=n.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(m){const{transition:y,transitionEnd:v,...w}=m;d={...d,...w,...v}}return d};function i(c){e=c(n)}function o(c){const{props:d}=n,h=MP(n.parent)||{},f=[],m=new Set;let y={},v=1/0;for(let S=0;S<hq;S++){const C=dq[S],T=t[C],k=d[C]!==void 0?d[C]:h[C],M=_u(k),N=C===c?T.isActive:null;N===!1&&(v=S);let O=k===h[C]&&k!==d[C]&&M;if(O&&r&&n.manuallyAnimateOnMount&&(O=!1),T.protectedKeys={...y},!T.isActive&&N===null||!k&&!T.prevProp||Mp(k)||typeof k=="boolean")continue;const D=mq(T.prevProp,k);let I=D||C===c&&T.isActive&&!O&&M||S>v&&M,L=!1;const A=Array.isArray(k)?k:[k];let V=A.reduce(s(C),{});N===!1&&(V={});const{prevResolvedValues:F={}}=T,U={...F,...V},B=G=>{I=!0,m.has(G)&&(L=!0,m.delete(G)),T.needsAnimating[G]=!0;const $=n.getValue(G);$&&($.liveStyle=!1)};for(const G in U){const $=V[G],z=F[G];if(y.hasOwnProperty(G))continue;let W=!1;Wv($)&&Wv(z)?W=!AP($,z):W=$!==z,W?$!=null?B(G):m.add(G):$!==void 0&&m.has(G)?B(G):T.protectedKeys[G]=!0}T.prevProp=k,T.prevResolvedValues=V,T.isActive&&(y={...y,...V}),r&&n.blockInitialAnimation&&(I=!1),I&&(!(O&&D)||L)&&f.push(...A.map(G=>({animation:G,options:{type:C}})))}if(m.size){const S={};if(typeof d.initial!="boolean"){const C=Eu(n,Array.isArray(d.initial)?d.initial[0]:d.initial);C&&C.transition&&(S.transition=C.transition)}m.forEach(C=>{const T=n.getBaseTarget(C),k=n.getValue(C);k&&(k.liveStyle=!0),S[C]=T??null}),f.push({animation:S})}let w=!!f.length;return r&&(d.initial===!1||d.initial===d.animate)&&!n.manuallyAnimateOnMount&&(w=!1),r=!1,w?e(f):Promise.resolve()}function a(c,d){var h;if(t[c].isActive===d)return Promise.resolve();(h=n.variantChildren)===null||h===void 0||h.forEach(m=>{var y;return(y=m.animationState)===null||y===void 0?void 0:y.setActive(c,d)}),t[c].isActive=d;const f=o(c);for(const m in t)t[m].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>t,reset:()=>{t=_T(),r=!0}}}function mq(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!AP(e,n):!1}function Do(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function _T(){return{animate:Do(!0),whileInView:Do(),whileHover:Do(),whileTap:Do(),whileDrag:Do(),whileFocus:Do(),exit:Do()}}class po{constructor(e){this.isMounted=!1,this.node=e}update(){}}class gq extends po{constructor(e){super(e),e.animationState||(e.animationState=pq(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Mp(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let yq=0;class vq extends po{constructor(){super(...arguments),this.id=yq++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const xq={animation:{Feature:gq},exit:{Feature:vq}};function Mu(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function Qu(n){return{point:{x:n.pageX,y:n.pageY}}}const wq=n=>e=>aw(e)&&n(e,Qu(e));function Ga(n,e,t,r){return Mu(n,e,wq(t),r)}function OP({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function bq({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function Sq(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}const PP=1e-4,Cq=1-PP,_q=1+PP,DP=.01,Tq=0-DP,kq=0+DP;function Fn(n){return n.max-n.min}function Eq(n,e,t){return Math.abs(n-e)<=t}function TT(n,e,t,r=.5){n.origin=r,n.originPoint=Ot(e.min,e.max,n.origin),n.scale=Fn(t)/Fn(e),n.translate=Ot(t.min,t.max,n.origin)-n.originPoint,(n.scale>=Cq&&n.scale<=_q||isNaN(n.scale))&&(n.scale=1),(n.translate>=Tq&&n.translate<=kq||isNaN(n.translate))&&(n.translate=0)}function au(n,e,t,r){TT(n.x,e.x,t.x,r?r.originX:void 0),TT(n.y,e.y,t.y,r?r.originY:void 0)}function kT(n,e,t){n.min=t.min+e.min,n.max=n.min+Fn(e)}function Nq(n,e,t){kT(n.x,e.x,t.x),kT(n.y,e.y,t.y)}function ET(n,e,t){n.min=e.min-t.min,n.max=n.min+Fn(e)}function lu(n,e,t){ET(n.x,e.x,t.x),ET(n.y,e.y,t.y)}const NT=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ka=()=>({x:NT(),y:NT()}),AT=()=>({min:0,max:0}),Bt=()=>({x:AT(),y:AT()});function Er(n){return[n("x"),n("y")]}function Vy(n){return n===void 0||n===1}function Qv({scale:n,scaleX:e,scaleY:t}){return!Vy(n)||!Vy(e)||!Vy(t)}function Ro(n){return Qv(n)||RP(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function RP(n){return MT(n.x)||MT(n.y)}function MT(n){return n&&n!=="0%"}function Ff(n,e,t){const r=n-t,s=e*r;return t+s}function OT(n,e,t,r,s){return s!==void 0&&(n=Ff(n,s,r)),Ff(n,t,r)+e}function e0(n,e=0,t=1,r,s){n.min=OT(n.min,e,t,r,s),n.max=OT(n.max,e,t,r,s)}function IP(n,{x:e,y:t}){e0(n.x,e.translate,e.scale,e.originPoint),e0(n.y,t.translate,t.scale,t.originPoint)}const PT=.999999999999,DT=1.0000000000001;function Aq(n,e,t,r=!1){const s=t.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=t[a],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Xa(n,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,IP(n,o)),r&&Ro(i.latestValues)&&Xa(n,i.latestValues))}e.x<DT&&e.x>PT&&(e.x=1),e.y<DT&&e.y>PT&&(e.y=1)}function Ya(n,e){n.min=n.min+e,n.max=n.max+e}function RT(n,e,t,r,s=.5){const i=Ot(n.min,n.max,s);e0(n,e,t,i,r)}function Xa(n,e){RT(n.x,e.x,e.scaleX,e.scale,e.originX),RT(n.y,e.y,e.scaleY,e.scale,e.originY)}function jP(n,e){return OP(Sq(n.getBoundingClientRect(),e))}function Mq(n,e,t){const r=jP(n,t),{scroll:s}=e;return s&&(Ya(r.x,s.offset.x),Ya(r.y,s.offset.y)),r}const IT=(n,e)=>Math.abs(n-e);function Oq(n,e){const t=IT(n.x,e.x),r=IT(n.y,e.y);return Math.sqrt(t**2+r**2)}class LP{constructor(e,t,{transformPagePoint:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=zy(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=Oq(h.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:y}=h,{timestamp:v}=mn;this.history.push({...y,timestamp:v});const{onStart:w,onMove:S}=this.handlers;f||(w&&w(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{if(h.target instanceof Element&&h.target.hasPointerCapture&&h.pointerId!==void 0)try{if(!h.target.hasPointerCapture(h.pointerId))return}catch{}this.lastMoveEvent=h,this.lastMoveEventInfo=By(f,this.transformPagePoint),yt.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{Rf(h,"release"),this.end();const{onEnd:m,onSessionEnd:y,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=zy(h.type==="pointercancel"||h.type==="lostpointercapture"?this.lastMoveEventInfo:By(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,w),y&&y(h,w)},!aw(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r;const i=Qu(e),o=By(i,this.transformPagePoint),{point:a}=o,{timestamp:c}=mn;this.history=[{...a,timestamp:c}];const{onSessionStart:d}=t;d&&d(e,zy(o,this.history)),Rf(e,"set"),this.removeListeners=Zu(Ga(e.currentTarget,"pointermove",this.handlePointerMove),Ga(e.currentTarget,"pointerup",this.handlePointerUp),Ga(e.currentTarget,"pointercancel",this.handlePointerUp),Ga(e.currentTarget,"lostpointercapture",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),io(this.updatePoint)}}function By(n,e){return e?{point:e(n.point)}:n}function jT(n,e){return{x:n.x-e.x,y:n.y-e.y}}function zy({point:n},e){return{point:n,delta:jT(n,FP(e)),offset:jT(n,Pq(e)),velocity:Dq(e,.1)}}function Pq(n){return n[0]}function FP(n){return n[n.length-1]}function Dq(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const s=FP(n);for(;t>=0&&(r=n[t],!(s.timestamp-r.timestamp>Zs(e)));)t--;if(!r)return{x:0,y:0};const i=Qs(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Rq(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?Ot(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?Ot(t,n,r.max):Math.min(n,t)),n}function LT(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function Iq(n,{top:e,left:t,bottom:r,right:s}){return{x:LT(n.x,t,s),y:LT(n.y,e,r)}}function FT(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function jq(n,e){return{x:FT(n.x,e.x),y:FT(n.y,e.y)}}function Lq(n,e){let t=.5;const r=Fn(n),s=Fn(e);return s>r?t=wl(e.min,e.max-r,n.min):r>s&&(t=wl(n.min,n.max-s,e.min)),ii(0,1,t)}function Fq(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const t0=.35;function Vq(n=t0){return n===!1?n=0:n===!0&&(n=t0),{x:VT(n,"left","right"),y:VT(n,"top","bottom")}}function VT(n,e,t){return{min:BT(n,e),max:BT(n,t)}}function BT(n,e){return typeof n=="number"?n:n[e]||0}const Bq=new WeakMap;class zq{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Bt(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Qu(h).point)},i=(h,f)=>{const{drag:m,dragPropagation:y,onDragStart:v}=this.getProps();if(m&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=D9(m),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Er(S=>{let C=this.getAxisMotionValue(S).get()||0;if(xs.test(C)){const{projection:T}=this.visualElement;if(T&&T.layout){const k=T.layout.layoutBox[S];k&&(C=Fn(k)*(parseFloat(C)/100))}}this.originPoint[S]=C}),v&&yt.postRender(()=>v(h,f)),Uv(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(h,f)=>{const{dragPropagation:m,dragDirectionLock:y,onDirectionLock:v,onDrag:w}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:S}=f;if(y&&this.currentDirection===null){this.currentDirection=Wq(S),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",f.point,S),this.updateAxis("y",f.point,S),this.visualElement.render(),w&&w(h,f)},a=(h,f)=>this.stop(h,f),c=()=>Er(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new LP(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&yt.postRender(()=>i(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!zh(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=Rq(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;t&&Ua(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=Iq(s.layoutBox,t):this.constraints=!1,this.elastic=Vq(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Er(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Fq(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ua(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=Mq(r,s.root,this.visualElement.getTransformPagePoint());let o=jq(s.layout.layoutBox,i);if(t){const a=t(bq(o));this.hasMutatedConstraints=!!a,a&&(o=OP(a))}return o}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},d=Er(h=>{if(!zh(h,t,this.currentDirection))return;let f=c&&c[h]||{};o&&(f={min:0,max:0});const m=s?200:1e6,y=s?40:1e7,v={type:"inertia",velocity:r?e[h]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(h,v)});return Promise.all(d).then(a)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return Uv(this.visualElement,e),r.start(xw(e,r,0,t,this.visualElement,!1))}stopAnimation(){Er(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Er(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Er(t=>{const{drag:r}=this.getProps();if(!zh(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(t);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[t];i.set(e[t]-Ot(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Ua(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Er(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const c=a.get();s[o]=Lq({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Er(o=>{if(!zh(o,e,null))return;const a=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];a.set(Ot(c,d,s[o]))})}addListeners(){if(!this.visualElement.current)return;Bq.set(this.visualElement,this);const e=this.visualElement.current,t=Ga(e,"pointerdown",c=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Ua(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),yt.read(r);const o=Mu(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(Er(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=c[h].translate,f.set(f.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),t(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=t0,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function zh(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function Wq(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class $q extends po{constructor(e){super(e),this.removeGroupControls=mr,this.removeListeners=mr,this.controls=new zq(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||mr}unmount(){this.removeGroupControls(),this.removeListeners()}}const zT=n=>(e,t)=>{n&&yt.postRender(()=>n(e,t))};class Hq extends po{constructor(){super(...arguments),this.removePointerDownListener=mr}onPointerDown(e){this.session=new LP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:zT(e),onStart:zT(t),onMove:r,onEnd:(i,o)=>{delete this.session,s&&yt.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=Ga(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const rf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function WT(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Hc={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(ze.test(n))n=parseFloat(n);else return n;const t=WT(n,e.target.x),r=WT(n,e.target.y);return`${t}% ${r}%`}},Uq={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,s=oo.parse(n);if(s.length>5)return r;const i=oo.createTransformer(n),o=typeof s[0]!="number"?1:0,a=t.x.scale*e.x,c=t.y.scale*e.y;s[0+o]/=a,s[1+o]/=c;const d=Ot(a,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=d),typeof s[3+o]=="number"&&(s[3+o]/=d),i(s)}};class qq extends b.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;X5(Gq),i&&(t.group&&t.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),rf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||yt.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Gx.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function VP(n){const[e,t]=SO(),r=b.useContext(Vx);return g.jsx(qq,{...n,layoutGroup:r,switchLayoutGroup:b.useContext(MO),isPresent:e,safeToRemove:t})}const Gq={borderRadius:{...Hc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Hc,borderTopRightRadius:Hc,borderBottomLeftRadius:Hc,borderBottomRightRadius:Hc,boxShadow:Uq};function Kq(n,e,t){const r=An(n)?n:Nu(n);return r.start(xw("",r,e,t)),r.animation}function Yq(n){return n instanceof SVGElement&&n.tagName!=="svg"}const Xq=(n,e)=>n.depth-e.depth;class Jq{constructor(){this.children=[],this.isDirty=!1}add(e){lw(this.children,e),this.isDirty=!0}remove(e){cw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Xq),this.isDirty=!1,this.children.forEach(e)}}function Zq(n,e){const t=ws.now(),r=({timestamp:s})=>{const i=s-t;i>=e&&(io(r),n(i-e))};return yt.read(r,!0),()=>io(r)}const BP=["TopLeft","TopRight","BottomLeft","BottomRight"],Qq=BP.length,$T=n=>typeof n=="string"?parseFloat(n):n,HT=n=>typeof n=="number"||ze.test(n);function eG(n,e,t,r,s,i){s?(n.opacity=Ot(0,t.opacity!==void 0?t.opacity:1,tG(r)),n.opacityExit=Ot(e.opacity!==void 0?e.opacity:1,0,nG(r))):i&&(n.opacity=Ot(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let o=0;o<Qq;o++){const a=`border${BP[o]}Radius`;let c=UT(e,a),d=UT(t,a);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||HT(c)===HT(d)?(n[a]=Math.max(Ot($T(c),$T(d),r),0),(xs.test(d)||xs.test(c))&&(n[a]+="%")):n[a]=d}(e.rotate||t.rotate)&&(n.rotate=Ot(e.rotate||0,t.rotate||0,r))}function UT(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const tG=zP(0,.5,iP),nG=zP(.5,.95,mr);function zP(n,e,t){return r=>r<n?0:r>e?1:t(wl(n,e,r))}function qT(n,e){n.min=e.min,n.max=e.max}function kr(n,e){qT(n.x,e.x),qT(n.y,e.y)}function GT(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function KT(n,e,t,r,s){return n-=e,n=Ff(n,1/t,r),s!==void 0&&(n=Ff(n,1/s,r)),n}function rG(n,e=0,t=1,r=.5,s,i=n,o=n){if(xs.test(e)&&(e=parseFloat(e),e=Ot(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Ot(i.min,i.max,r);n===i&&(a-=e),n.min=KT(n.min,e,t,a,s),n.max=KT(n.max,e,t,a,s)}function YT(n,e,[t,r,s],i,o){rG(n,e[t],e[r],e[s],e.scale,i,o)}const sG=["x","scaleX","originX"],iG=["y","scaleY","originY"];function XT(n,e,t,r){YT(n.x,e,sG,t?t.x:void 0,r?r.x:void 0),YT(n.y,e,iG,t?t.y:void 0,r?r.y:void 0)}function JT(n){return n.translate===0&&n.scale===1}function WP(n){return JT(n.x)&&JT(n.y)}function ZT(n,e){return n.min===e.min&&n.max===e.max}function oG(n,e){return ZT(n.x,e.x)&&ZT(n.y,e.y)}function QT(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function $P(n,e){return QT(n.x,e.x)&&QT(n.y,e.y)}function ek(n){return Fn(n.x)/Fn(n.y)}function tk(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class aG{constructor(){this.members=[]}add(e){lw(this.members,e),e.scheduleRender()}remove(e){if(cw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let r;for(let s=t;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function lG(n,e,t){let r="";const s=n.x.translate/e.x,i=n.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:d,rotate:h,rotateX:f,rotateY:m,skewX:y,skewY:v}=t;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),f&&(r+=`rotateX(${f}deg) `),m&&(r+=`rotateY(${m}deg) `),y&&(r+=`skewX(${y}deg) `),v&&(r+=`skewY(${v}deg) `)}const a=n.x.scale*e.x,c=n.y.scale*e.y;return(a!==1||c!==1)&&(r+=`scale(${a}, ${c})`),r||"none"}const Wy=["","X","Y","Z"],cG={visibility:"hidden"},nk=1e3;let uG=0;function $y(n,e,t,r){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),r&&(r[n]=0))}function HP(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=ZO(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:i}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",yt,!(s||i))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&HP(r)}function UP({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=uG++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(fG),this.nodes.forEach(vG),this.nodes.forEach(xG),this.nodes.forEach(pG)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Jq)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new uw),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Yq(o),this.instance=o;const{layoutId:c,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(d||c)&&(this.isLayoutDirty=!0),n){let f;const m=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Zq(m,250),rf.hasAnimatedSinceResize&&(rf.hasAnimatedSinceResize=!1,this.nodes.forEach(sk))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||d)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m,hasRelativeLayoutChanged:y,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||h.getDefaultTransition()||_G,{onLayoutAnimationStart:S,onLayoutAnimationComplete:C}=h.getProps(),T=!this.targetLayout||!$P(this.targetLayout,v),k=!m&&y;if(this.options.layoutRoot||this.resumeFrom||k||m&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,k);const M={...sw(w,"layout"),onPlay:S,onComplete:C};(h.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M)}else m||sk(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,io(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(wG),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&HP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(rk);return}this.isUpdating||this.nodes.forEach(gG),this.isUpdating=!1,this.nodes.forEach(yG),this.nodes.forEach(dG),this.nodes.forEach(hG),this.clearAllSnapshots();const a=ws.now();mn.delta=ii(0,1e3/60,a-mn.timestamp),mn.timestamp=a,mn.isProcessing=!0,Ry.update.process(mn),Ry.preRender.process(mn),Ry.render.process(mn),mn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Gx.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(mG),this.sharedNodes.forEach(bG)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,yt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){yt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Fn(this.snapshot.measuredBox.x)&&!Fn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Bt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!WP(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&(a||Ro(this.latestValues)||h)&&(s(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),TG(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Bt();const c=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(kG))){const{scroll:h}=this.root;h&&(Ya(c.x,h.offset.x),Ya(c.y,h.offset.y))}return c}removeElementScroll(o){var a;const c=Bt();if(kr(c,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return c;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:f,options:m}=h;h!==this.root&&f&&m.layoutScroll&&(f.wasRoot&&kr(c,o),Ya(c.x,f.offset.x),Ya(c.y,f.offset.y))}return c}applyTransform(o,a=!1){const c=Bt();kr(c,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Xa(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Ro(h.latestValues)&&Xa(c,h.latestValues)}return Ro(this.latestValues)&&Xa(c,this.latestValues),c}removeTransform(o){const a=Bt();kr(a,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!Ro(d.latestValues))continue;Qv(d.latestValues)&&d.updateSnapshot();const h=Bt(),f=d.measurePageBox();kr(h,f),XT(a,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return Ro(this.latestValues)&&XT(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==mn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:m}=this.options;if(!(!this.layout||!(f||m))){if(this.resolvedRelativeTargetAt=mn.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Bt(),this.relativeTargetOrigin=Bt(),lu(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),kr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Bt(),this.targetWithTransforms=Bt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Nq(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):kr(this.target,this.layout.layoutBox),IP(this.target,this.targetDelta)):kr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Bt(),this.relativeTargetOrigin=Bt(),lu(this.relativeTargetOrigin,this.target,y.target),kr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Qv(this.parent.latestValues)||RP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===mn.timestamp&&(d=!1),d)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;kr(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,y=this.treeScale.y;Aq(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Bt());const{target:v}=a;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(GT(this.prevProjectionDelta.x,this.projectionDelta.x),GT(this.prevProjectionDelta.y,this.projectionDelta.y)),au(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==y||!tk(this.projectionDelta.x,this.prevProjectionDelta.x)||!tk(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ka(),this.projectionDelta=Ka(),this.projectionDeltaWithTransform=Ka()}setAnimationOrigin(o,a=!1){const c=this.snapshot,d=c?c.latestValues:{},h={...this.latestValues},f=Ka();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=Bt(),y=c?c.source:void 0,v=this.layout?this.layout.source:void 0,w=y!==v,S=this.getStack(),C=!S||S.members.length<=1,T=!!(w&&!C&&this.options.crossfade===!0&&!this.path.some(CG));this.animationProgress=0;let k;this.mixTargetDelta=M=>{const N=M/1e3;ik(f.x,o.x,N),ik(f.y,o.y,N),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(lu(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),SG(this.relativeTarget,this.relativeTargetOrigin,m,N),k&&oG(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=Bt()),kr(k,this.relativeTarget)),w&&(this.animationValues=h,eG(h,d,this.latestValues,N,T,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(io(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=yt.update(()=>{rf.hasAnimatedSinceResize=!0,this.currentAnimation=Kq(0,nk,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(nk),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:d,latestValues:h}=o;if(!(!a||!c||!d)){if(this!==o&&this.layout&&d&&qP(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||Bt();const f=Fn(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+f;const m=Fn(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+m}kr(a,c),Xa(a,h),au(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new aG),this.sharedNodes.get(o).add(a);const d=a.options.initialPromotionConfig;a.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(a=!0),!a)return;const d={};c.z&&$y("z",o,d,this.animationValues);for(let h=0;h<Wy.length;h++)$y(`rotate${Wy[h]}`,o,d,this.animationValues),$y(`skew${Wy[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}getProjectionStyles(o){var a,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return cG;const d={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=tf(o==null?void 0:o.pointerEvents)||"",d.transform=h?h(this.latestValues,""):"none",d;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=tf(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ro(this.latestValues)&&(w.transform=h?h({},""):"none",this.hasProjected=!1),w}const m=f.animationValues||f.latestValues;this.applyTransformsToTarget(),d.transform=lG(this.projectionDeltaWithTransform,this.treeScale,m),h&&(d.transform=h(m,d.transform));const{x:y,y:v}=this.projectionDelta;d.transformOrigin=`${y.origin*100}% ${v.origin*100}% 0`,f.animationValues?d.opacity=f===this?(c=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:d.opacity=f===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const w in Tu){if(m[w]===void 0)continue;const{correct:S,applyTo:C,isCSSVariable:T}=Tu[w],k=d.transform==="none"?m[w]:S(m[w],f);if(C){const M=C.length;for(let N=0;N<M;N++)d[C[N]]=k}else T?this.options.visualElement.renderState.vars[w]=k:d[w]=k}return this.options.layoutId&&(d.pointerEvents=f===this?tf(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(rk),this.root.sharedNodes.clear()}}}function dG(n){n.updateLayout()}function hG(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=n.layout,{animationType:i}=n.options,o=t.source!==n.layout.source;i==="size"?Er(f=>{const m=o?t.measuredBox[f]:t.layoutBox[f],y=Fn(m);m.min=r[f].min,m.max=m.min+y}):qP(i,t.layoutBox,r)&&Er(f=>{const m=o?t.measuredBox[f]:t.layoutBox[f],y=Fn(r[f]);m.max=m.min+y,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[f].max=n.relativeTarget[f].min+y)});const a=Ka();au(a,r,t.layoutBox);const c=Ka();o?au(c,n.applyTransform(s,!0),t.measuredBox):au(c,r,t.layoutBox);const d=!WP(a);let h=!1;if(!n.resumeFrom){const f=n.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:y}=f;if(m&&y){const v=Bt();lu(v,t.layoutBox,m.layoutBox);const w=Bt();lu(w,r,y.layoutBox),$P(v,w)||(h=!0),f.options.layoutRoot&&(n.relativeTarget=w,n.relativeTargetOrigin=v,n.relativeParent=f)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:c,layoutDelta:a,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function fG(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function pG(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function mG(n){n.clearSnapshot()}function rk(n){n.clearMeasurements()}function gG(n){n.isLayoutDirty=!1}function yG(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function sk(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function vG(n){n.resolveTargetDelta()}function xG(n){n.calcProjection()}function wG(n){n.resetSkewAndRotation()}function bG(n){n.removeLeadSnapshot()}function ik(n,e,t){n.translate=Ot(e.translate,0,t),n.scale=Ot(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function ok(n,e,t,r){n.min=Ot(e.min,t.min,r),n.max=Ot(e.max,t.max,r)}function SG(n,e,t,r){ok(n.x,e.x,t.x,r),ok(n.y,e.y,t.y,r)}function CG(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const _G={duration:.45,ease:[.4,0,.1,1]},ak=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),lk=ak("applewebkit/")&&!ak("chrome/")?Math.round:mr;function ck(n){n.min=lk(n.min),n.max=lk(n.max)}function TG(n){ck(n.x),ck(n.y)}function qP(n,e,t){return n==="position"||n==="preserve-aspect"&&!Eq(ek(e),ek(t),.2)}function kG(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const EG=UP({attachResizeListener:(n,e)=>Mu(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Hy={current:void 0},GP=UP({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Hy.current){const n=new EG({});n.mount(window),n.setOptions({layoutScroll:!0}),Hy.current=n}return Hy.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),NG={pan:{Feature:Hq},drag:{Feature:$q,ProjectionNode:GP,MeasureLayout:VP}};function uk(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,i=r[s];i&&yt.postRender(()=>i(e,Qu(e)))}class AG extends po{mount(){const{current:e}=this.node;e&&(this.unmount=E9(e,(t,r)=>(uk(this.node,r,"Start"),s=>uk(this.node,s,"End"))))}unmount(){}}class MG extends po{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Zu(Mu(this.node.current,"focus",()=>this.onFocus()),Mu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function dk(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),i=r[s];i&&yt.postRender(()=>i(e,Qu(e)))}class OG extends po{mount(){const{current:e}=this.node;e&&(this.unmount=O9(e,(t,r)=>(dk(this.node,r,"Start"),(s,{success:i})=>dk(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const n0=new WeakMap,Uy=new WeakMap,PG=n=>{const e=n0.get(n.target);e&&e(n)},DG=n=>{n.forEach(PG)};function RG({root:n,...e}){const t=n||document;Uy.has(t)||Uy.set(t,{});const r=Uy.get(t),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(DG,{root:n,...e})),r[s]}function IG(n,e,t){const r=RG(e);return n0.set(n,t),r.observe(n),()=>{n0.delete(n),r.unobserve(n)}}const jG={some:0,all:1};class LG extends po{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:i}=e,o={root:t?t.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:jG[s]},a=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),m=d?h:f;m&&m(c)};return IG(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(FG(e,t))&&this.startObserver()}unmount(){}}function FG({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const VG={inView:{Feature:LG},tap:{Feature:OG},focus:{Feature:MG},hover:{Feature:AG}},BG={layout:{ProjectionNode:GP,MeasureLayout:VP}},r0={current:null},KP={current:!1};function zG(){if(KP.current=!0,!!Wx)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>r0.current=n.matches;n.addListener(e),e()}else r0.current=!1}const WG=[...xP,En,oo],$G=n=>WG.find(vP(n)),HG=new WeakMap;function UG(n,e,t){for(const r in e){const s=e[r],i=t[r];if(An(s))n.addValue(r,s);else if(An(i))n.addValue(r,Nu(s,{owner:n}));else if(i!==s)if(n.hasValue(r)){const o=n.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=n.getStaticValue(r);n.addValue(r,Nu(o!==void 0?o:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const hk=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class qG{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=gw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=ws.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,yt.render(this.render,!1,!0))};const{latestValues:c,renderState:d,onUpdate:h}=o;this.onUpdate=h,this.latestValues=c,this.baseTarget={...c},this.initialValues=t.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=Op(t),this.isVariantNode=NO(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(t,{},this);for(const y in m){const v=m[y];c[y]!==void 0&&An(v)&&v.set(c[y],!1)}}mount(e){this.current=e,HG.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),KP.current||zG(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:r0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),io(this.notifyUpdate),io(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=aa.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&yt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),i(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in bl){const t=bl[e];if(!t)continue;const{isEnabled:r,Feature:s}=t;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Bt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<hk.length;r++){const s=hk[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=UG(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Nu(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(gP(s)||aP(s))?s=parseFloat(s):!$G(s)&&oo.test(t)&&(s=fP(e,t)),this.setBaseTarget(e,An(s)?s.get():s)),An(s)?s.get():s}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const o=nw(this.props,r,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);o&&(s=o[e])}if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!An(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new uw),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class YP extends qG{constructor(){super(...arguments),this.KeyframeResolver=wP}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;An(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function GG(n){return window.getComputedStyle(n)}class KG extends YP{constructor(){super(...arguments),this.type="html",this.renderInstance=VO}readValueFromInstance(e,t){if(aa.has(t)){const r=mw(t);return r&&r.default||0}else{const r=GG(e),s=(Kx(t)?r.getPropertyValue(t):r[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return jP(e,t)}build(e,t,r){Jx(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return rw(e,t,r)}}class YG extends YP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Bt,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&FO(this.current,this.renderState)}}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(aa.has(t)){const r=mw(t);return r&&r.default||0}return t=BO.has(t)?t:qx(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return WO(e,t,r)}onBindTransform(){this.current&&!this.renderState.dimensions&&yt.postRender(this.updateDimensions)}build(e,t,r){ew(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,s){zO(e,t,r,s)}mount(e){this.isSVGTag=tw(e.tagName),super.mount(e)}}const XG=(n,e)=>Qx(n)?new YG(e):new KG(e,{allowProjection:n!==b.Fragment}),JG=w9({...xq,...VG,...NG,...BG},XG),ei=j5(JG);function ZG({frequencies:n,className:e="",color:t="white",isSilent:r=!1}){return g.jsx("div",{className:`flex gap-[2px] items-center justify-center h-full ${e}`,style:{opacity:r?.4:1},children:n.map((i,o)=>g.jsx(ei.div,{className:`w-[2px] rounded-full origin-center ${t==="white"?"bg-white":"bg-black"}`,initial:{scaleY:.4},animate:{scaleY:r?.4:Math.max(.4,i*2)},style:{height:12},transition:{type:"spring",bounce:.45,duration:.15}},o))})}const QG=b.forwardRef(({onTranscriptionComplete:n,onTranscriptionStart:e,onRecordingStateChange:t,isLoading:r=!1,className:s="",silenceThreshold:i=1e3},o)=>{const{isRecording:a,frequencies:c,isSilent:d,startRecording:h,stopRecording:f}=_5({onTranscriptionComplete:m=>{n(m)},onTranscriptionStart:()=>{e==null||e()},onError:m=>{console.error("Audio transcription error:",m),n("")},silenceThreshold:i,minRecordingDuration:500});return b.useEffect(()=>{t==null||t(a)},[a,t]),g.jsx("div",{className:"relative",children:g.jsx("button",{ref:o,type:"button",onClick:a?f:h,className:s,disabled:r,children:r?g.jsx(E4,{className:"h-4 w-4 animate-spin"}):a?g.jsx(ZG,{frequencies:c,color:"black",isSilent:d}):g.jsx(A4,{className:"h-4 w-4"})})})}),eK=n=>{let e=n;return e=e.replace(/<table[^>]*>(.*?)<\/table>/gis,(t,r)=>{const s=r.match(/<tr[^>]*>.*?<\/tr>/gis)||[];if(s.length===0)return"";const i=s.map(o=>"| "+(o.match(/<t[dh][^>]*>(.*?)<\/t[dh]>/gi)||[]).map(c=>c.replace(/<t[dh][^>]*>(.*?)<\/t[dh]>/i,"$1").trim().replace(/\|/g,"\\|")).join(" | ")+" |");if(i.length>0){const o=(i[0].match(/\|/g)||[]).length-1,a=`
|`+" --- |".repeat(o);i.splice(1,0,a)}return`
`+i.join(`
`)+`
`}),e=e.replace(/<pre[^>]*><code[^>]*(?:class="language-([^"]+)")?[^>]*>(.*?)<\/code><\/pre>/gis,(t,r,s)=>`
\`\`\`${r||""}
${s.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}
\`\`\`
`),e=e.replace(/<code[^>]*>(.*?)<\/code>/gi,(t,r)=>`\`${r.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}\``),e=e.replace(/<h1[^>]*>(.*?)<\/h1>/gi,`# $1

`).replace(/<h2[^>]*>(.*?)<\/h2>/gi,`## $1

`).replace(/<h3[^>]*>(.*?)<\/h3>/gi,`### $1

`).replace(/<strong[^>]*>(.*?)<\/strong>/gi,"**$1**").replace(/<b[^>]*>(.*?)<\/b>/gi,"**$1**").replace(/<em[^>]*>(.*?)<\/em>/gi,"*$1*").replace(/<i[^>]*>(.*?)<\/i>/gi,"*$1*").replace(/<u[^>]*>(.*?)<\/u>/gi,"_$1_").replace(/<ul[^>]*>(.*?)<\/ul>/gi,(t,r)=>r.replace(/<li[^>]*>(.*?)<\/li>/gi,`- $1
`).replace(/<[^>]+>/g,"")).replace(/<ol[^>]*>(.*?)<\/ol>/gi,(t,r)=>{let s=1;return r.replace(/<li[^>]*>(.*?)<\/li>/gi,()=>`${s++}. $1
`).replace(/<[^>]+>/g,"")}).replace(/<p[^>]*>(.*?)<\/p>/gi,`$1

`).replace(/<br[^>]*>/gi,`
`).replace(/<[^>]+>/g,"").replace(/&nbsp;/g," ").replace(/\n\n+/g,`

`).trim(),e},tK=n=>n.replace(/<[^>]+>/g,"").replace(/&nbsp;/g," ").replace(/\n\n+/g,`

`).trim(),Uc=n=>{let e=n;return e=e.replace(/^### (.*$)/gm,"<h3>$1</h3>"),e=e.replace(/^## (.*$)/gm,"<h2>$1</h2>"),e=e.replace(/^# (.*$)/gm,"<h1>$1</h1>"),e=e.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>"),e=e.replace(/\*([^*]+)\*/g,"<em>$1</em>"),e=e.replace(/_([^_]+)_/g,"<u>$1</u>"),e=e.replace(/^\s*[-*+]\s+(.*)$/gm,"<ul><li>$1</li></ul>"),e=e.replace(/^\s*\d+\.\s+(.*)$/gm,"<ol><li>$1</li></ol>"),e=e.replace(/<\/ul>\s*<ul>/g,""),e=e.replace(/<\/ol>\s*<ol>/g,""),e=e.replace(/```([^`]*?)```/gs,"<pre><code>$1</code></pre>"),e=e.replace(/`([^`]+)`/g,"<code>$1</code>"),e=e.replace(/^(?![#<*_\s*-+\d.])(.*$)/gm,"<p>$1</p>"),e=e.replace(/<p>\s*<\/p>/g,""),e=e.trim(),e},fk=n=>n.replace(/\.[^/.]+$/,"");function nK({isWindowOpen:n,onClose:e,isForeground:t}){const[r,s]=b.useState(!1),[i,o]=b.useState(!1),[a,c]=b.useState(!1),[d,h]=b.useState(!1),[f,m]=b.useState(!1),[y,v]=b.useState(null),[w,S]=b.useState(""),[C,T]=b.useState(!1),k=b.useRef(null),{files:M,saveFile:N}=Ep("/Documents"),O=kp(),{play:D}=pt(ut.BUTTON_CLICK),[I,L]=b.useState(!1),A=Wz({extensions:[UW,qW,GW.configure({types:["heading","paragraph"]}),KW,XW.configure({nested:!0}),i5],content:"",editorProps:{attributes:{class:"prose prose-sm prose-neutral max-w-none focus:outline-none p-4 [&>ul]:list-disc [&>ol]:list-decimal [&>*]:my-1 [&>p]:leading-5 [&>h1]:mt-3 [&>h1]:mb-2 [&>h2]:mt-2 [&>h2]:mb-1 [&>ul]:my-1 [&>ol]:my-1 [&>ul>li]:my-0.5 [&>ol>li]:my-0.5 [&>ul]:pl-0 [&>ol]:pl-4 [&>ul>li>p]:my-0 [&>ol>li>p]:my-0 [&>ul>li]:pl-0 [&>ol>li]:pl-0 [&>ul>li]:marker:text-neutral-900 [&>ol>li]:marker:text-neutral-900 [&>ul[data-type='taskList']]:ml-0 [&>ul[data-type='taskList']]:list-none [&>ul[data-type='taskList']>li]:flex [&>ul[data-type='taskList']>li]:items-start [&>ul[data-type='taskList']>li>label]:mr-2 [&>ul[data-type='taskList']>li>label>input]:mt-1 [&>ul[data-type='taskList']>li>div]:flex-1 [&>ul[data-type='taskList']>li>div>p]:my-0 min-h-full font-geneva-12 text-[12px] [&>h1]:text-[24px] [&>h2]:text-[20px] [&>h3]:text-[16px] [&>h1]:font-['ChicagoKare'] [&>h2]:font-['ChicagoKare'] [&>h3]:font-['ChicagoKare']"}},onUpdate:({editor:P})=>{const j=P.getJSON();if(localStorage.setItem(me.textedit.CONTENT,JSON.stringify(j)),y){const J=y.split("/").pop()||"Untitled",te=new CustomEvent("saveFile",{detail:{name:J,path:y,content:JSON.stringify(j),icon:"/icons/file-text.png",isDirectory:!1}});window.dispatchEvent(te)}T(!0)}});b.useEffect(()=>{if(A&&!C){const P=localStorage.getItem(me.textedit.LAST_FILE_PATH);if(P!=null&&P.startsWith("/Documents/")){const j=M.find(J=>J.path===P);if(j!=null&&j.content&&!y){try{const J=JSON.parse(j.content);A.commands.setContent(J)}catch{const J=P.endsWith(".md")?Uc(j.content):j.content;A.commands.setContent(J)}v(P),T(!1)}}else if(!y){const j=localStorage.getItem(me.textedit.CONTENT);if(j)try{const J=JSON.parse(j);A.commands.setContent(J)}catch{A.commands.setContent(j)}}}},[A,M,y,C]),b.useEffect(()=>{const P=te=>{var ne,ue;if(A&&((ne=te.detail)==null?void 0:ne.path)===y&&((ue=te.detail)!=null&&ue.content))try{const ce=JSON.parse(te.detail.content),{from:ae,to:xe}=A.state.selection;if(A.commands.setContent(ce),ae&&xe&&ae===xe)try{A.commands.setTextSelection(Math.min(ae,A.state.doc.content.size))}catch(ke){console.log("Could not restore cursor position",ke)}T(!1),console.log("Editor content updated from external source")}catch(ce){console.error("Failed to update editor content:",ce)}},j=te=>{var ne;if(A&&((ne=te.detail)==null?void 0:ne.path)===y){const ue=localStorage.getItem(me.textedit.CONTENT);if(ue)try{const ce=JSON.parse(ue);A.commands.setContent(ce),T(!1),console.log("Editor content reloaded from localStorage after content changed event")}catch(ce){console.error("Failed to reload content:",ce)}}},J=te=>{var ne,ue;if(A&&((ne=te.detail)==null?void 0:ne.path)===y&&((ue=te.detail)!=null&&ue.content))try{const ce=JSON.parse(te.detail.content);A.commands.setContent(ce),T(!1),console.log("Editor content updated after document updated event")}catch(ce){console.error("Failed to update editor with document updated event:",ce)}};return window.addEventListener("updateEditorContent",P),window.addEventListener("contentChanged",j),window.addEventListener("documentUpdated",J),()=>{window.removeEventListener("updateEditorContent",P),window.removeEventListener("contentChanged",j),window.removeEventListener("documentUpdated",J)}},[A,y]),b.useEffect(()=>{if(t&&A){const P=localStorage.getItem("pending_file_open");if(P)try{const{path:j,content:J}=JSON.parse(P);if(j.startsWith("/Documents/"))if(C&&!y)m(!0);else{A.commands.clearContent();try{const te=JSON.parse(J);A.commands.setContent(te);const ne=j.split("/").pop()||"Untitled";N({name:ne,path:j,content:J,icon:"/icons/file-text.png",isDirectory:!1})}catch{const te=j.endsWith(".md")?Uc(J):J;A.commands.setContent(te);const ne=j.split("/").pop()||"Untitled";N({name:ne,path:j,content:JSON.stringify(A.getJSON()),icon:"/icons/file-text.png",isDirectory:!1})}v(j),T(!1),localStorage.setItem(me.textedit.LAST_FILE_PATH,j),localStorage.setItem(me.textedit.CONTENT,JSON.stringify(A.getJSON()))}}catch(j){console.error("Failed to parse pending file open data:",j)}finally{localStorage.removeItem("pending_file_open")}}},[t,A]);const V=P=>{c(!1),A&&(A.isFocused||A.commands.focus(),A.state.selection.empty&&A.state.selection.anchor===0&&(A.commands.setTextSelection(A.state.doc.content.size),A.commands.insertContent(`
`)),A.commands.insertContent(P))},F=()=>{c(!0)},U=()=>{A&&C?m(!0):B()},B=()=>{if(A){A.commands.clearContent(),localStorage.removeItem(me.textedit.CONTENT),localStorage.removeItem(me.textedit.LAST_FILE_PATH),v(null),T(!1);const P=localStorage.getItem("pending_file_open");if(P)try{const{path:j,content:J}=JSON.parse(P);if(j.startsWith("/Documents/")){const te=j.endsWith(".md")?Uc(J):J;A.commands.setContent(te),v(j),T(!1),localStorage.setItem(me.textedit.LAST_FILE_PATH,j),localStorage.setItem(me.textedit.CONTENT,te)}}catch(j){console.error("Failed to parse pending file open data:",j)}finally{localStorage.removeItem("pending_file_open")}}},q=()=>{if(A)if(y){const P=JSON.stringify(A.getJSON()),j=y.split("/").pop()||"Untitled",J=new CustomEvent("saveFile",{detail:{name:j,path:y,content:P,icon:"/icons/file-text.png",isDirectory:!1}});window.dispatchEvent(J),localStorage.setItem(me.textedit.CONTENT,P),localStorage.setItem(me.textedit.LAST_FILE_PATH,y),T(!1)}else{const j=A.getHTML().split(`
`)[0].replace(/<[^>]+>/g,"").split("-")[0].trim().replace(/[^a-zA-Z0-9\s-]/g,"").replace(/\s+/g,"-").substring(0,50);h(!0),S(`${j||"Untitled"}.md`)}},K=P=>{if(!A)return;const j=JSON.stringify(A.getJSON()),J=`/Documents/${P}${P.endsWith(".md")?"":".md"}`,te=new CustomEvent("saveFile",{detail:{name:P,path:J,content:j,icon:"/icons/file-text.png",isDirectory:!1}});window.dispatchEvent(te),localStorage.setItem(me.textedit.CONTENT,j),localStorage.setItem(me.textedit.LAST_FILE_PATH,J),v(J),T(!1),h(!1)},G=async P=>{var J;const j=(J=P.target.files)==null?void 0:J[0];if(j&&A){const te=await j.text();let ne;j.name.endsWith(".html")?ne=te:j.name.endsWith(".md")?ne=Uc(te):ne=`<p>${te}</p>`,A.commands.setContent(ne);const ue=`/Documents/${j.name}`,ce=new CustomEvent("saveFile",{detail:{name:j.name,path:ue,content:JSON.stringify(A.getJSON()),icon:"/icons/file-text.png",isDirectory:!1}});window.dispatchEvent(ce),v(ue),T(!1),localStorage.setItem(me.textedit.CONTENT,A.getHTML()),localStorage.setItem(me.textedit.LAST_FILE_PATH,ue)}k.current&&(k.current.value="")},$=P=>{if(!A)return;const j=A.getHTML();let J,te,ne;switch(P){case"md":J=eK(j),te="text/markdown",ne="md";break;case"txt":J=tK(j),te="text/plain",ne="txt";break;case"html":default:J=j,te="text/html",ne="html";break}const ue=y?fk(y.split("/").pop()||""):"Untitled",ce=new Blob([J],{type:te}),ae=URL.createObjectURL(ce),xe=document.createElement("a");xe.href=ae,xe.download=`${ue}.${ne}`,document.body.appendChild(xe),xe.click(),document.body.removeChild(xe),URL.revokeObjectURL(ae)},z=()=>{O("finder",{initialPath:"/Documents"})},W=async P=>{P.preventDefault(),P.stopPropagation(),L(!1);const j=P.dataTransfer.files[0];if(j&&A){if(!j.type.startsWith("text/")&&!j.name.endsWith(".md"))return;const J=await j.text();let te;if(j.name.endsWith(".html")?te=J:j.name.endsWith(".md")?te=Uc(J):te=`<p>${J}</p>`,C)m(!0),localStorage.setItem("pending_file_open",JSON.stringify({path:`/Documents/${j.name}`,content:te}));else{A.commands.clearContent(),A.commands.setContent(te);const ne=`/Documents/${j.name}`,ue=new CustomEvent("saveFile",{detail:{name:j.name,path:ne,content:JSON.stringify(A.getJSON()),icon:"/icons/file-text.png",isDirectory:!1}});window.dispatchEvent(ue),v(ne),T(!1),localStorage.setItem(me.textedit.CONTENT,JSON.stringify(A.getJSON())),localStorage.setItem(me.textedit.LAST_FILE_PATH,ne)}}};return g.jsxs(g.Fragment,{children:[g.jsx("input",{type:"file",ref:k,onChange:G,accept:".txt,.html,.md,.rtf,.doc,.docx",className:"hidden"}),g.jsx(j4,{editor:A,onClose:e,isWindowOpen:n,onShowHelp:()=>s(!0),onShowAbout:()=>o(!0),onNewFile:U,onImportFile:z,onExportFile:$,onSave:q,hasUnsavedChanges:C,currentFilePath:y,handleFileSelect:G}),g.jsx(ai,{title:y?`${fk(y.split("/").pop()||"")}`:`Untitled${C?" ":""}`,onClose:e,isForeground:t,appId:"textedit",children:g.jsxs("div",{className:"flex flex-col h-full w-full",children:[g.jsxs("div",{className:`flex-1 flex flex-col bg-white relative min-h-0 ${I?"after:absolute after:inset-0 after:bg-black/20":""}`,onDragOver:P=>{P.preventDefault(),P.stopPropagation(),I||L(!0)},onDragLeave:P=>{P.preventDefault(),P.stopPropagation();const j=P.relatedTarget;P.currentTarget.contains(j)||L(!1)},onDragEnd:()=>L(!1),onMouseLeave:()=>L(!1),onDrop:W,children:[g.jsx("div",{className:"flex bg-[#c0c0c0] border-b border-black w-full flex-shrink-0",children:g.jsxs("div",{className:"flex px-1 py-1 gap-x-1",children:[g.jsxs("div",{className:"flex",children:[g.jsx("button",{onClick:()=>{D(),A==null||A.chain().focus().toggleBold().run()},className:"w-[26px] h-[22px] flex items-center justify-center",children:g.jsx("img",{src:`/icons/text-editor/bold-${A!=null&&A.isActive("bold")?"depressed":"off"}.png`,alt:"Bold",className:"w-[26px] h-[22px]"})}),g.jsx("button",{onClick:()=>{D(),A==null||A.chain().focus().toggleItalic().run()},className:"w-[26px] h-[22px] flex items-center justify-center",children:g.jsx("img",{src:`/icons/text-editor/italic-${A!=null&&A.isActive("italic")?"depressed":"off"}.png`,alt:"Italic",className:"w-[26px] h-[22px]"})}),g.jsx("button",{onClick:()=>{D(),A==null||A.chain().focus().toggleUnderline().run()},className:"w-[26px] h-[22px] flex items-center justify-center",children:g.jsx("img",{src:`/icons/text-editor/underline-${A!=null&&A.isActive("underline")?"depressed":"off"}.png`,alt:"Underline",className:"w-[26px] h-[22px]"})})]}),g.jsx("div",{className:"w-[1px] h-[22px] bg-[#808080] shadow-[1px_0_0_#ffffff]"}),g.jsx("div",{className:"flex",children:g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsxs("button",{className:"w-[80px] h-[22px] flex items-center justify-between px-2 bg-white border border-[#808080] text-sm",children:[A!=null&&A.isActive("heading",{level:1})?"H1":A!=null&&A.isActive("heading",{level:2})?"H2":A!=null&&A.isActive("heading",{level:3})?"H3":"Text",g.jsx(Dx,{className:"ml-1 h-3 w-3"})]})}),g.jsxs(qe,{align:"start",className:"w-[80px]",children:[g.jsx(de,{onClick:()=>A==null?void 0:A.chain().focus().setParagraph().run(),className:`text-sm h-6 px-2 ${A!=null&&A.isActive("paragraph")?"bg-gray-200":""}`,children:"Text"}),g.jsx(de,{onClick:()=>A==null?void 0:A.chain().focus().toggleHeading({level:1}).run(),className:`text-sm h-6 px-2 ${A!=null&&A.isActive("heading",{level:1})?"bg-gray-200":""}`,children:"H1"}),g.jsx(de,{onClick:()=>A==null?void 0:A.chain().focus().toggleHeading({level:2}).run(),className:`text-sm h-6 px-2 ${A!=null&&A.isActive("heading",{level:2})?"bg-gray-200":""}`,children:"H2"}),g.jsx(de,{onClick:()=>A==null?void 0:A.chain().focus().toggleHeading({level:3}).run(),className:`text-sm h-6 px-2 ${A!=null&&A.isActive("heading",{level:3})?"bg-gray-200":""}`,children:"H3"})]})]})}),g.jsx("div",{className:"w-[1px] h-[22px] bg-[#808080] shadow-[1px_0_0_#ffffff]"}),g.jsxs("div",{className:"flex",children:[g.jsx("button",{onClick:()=>{D(),A==null||A.chain().focus().setTextAlign("left").run()},className:"w-[26px] h-[22px] flex items-center justify-center",children:g.jsx("img",{src:`/icons/text-editor/align-left-${A!=null&&A.isActive({textAlign:"left"})?"depressed":"off"}.png`,alt:"Align Left",className:"w-[26px] h-[22px]"})}),g.jsx("button",{onClick:()=>{D(),A==null||A.chain().focus().setTextAlign("center").run()},className:"w-[26px] h-[22px] flex items-center justify-center",children:g.jsx("img",{src:`/icons/text-editor/align-center-${A!=null&&A.isActive({textAlign:"center"})?"depressed":"off"}.png`,alt:"Align Center",className:"w-[26px] h-[22px]"})}),g.jsx("button",{onClick:()=>{D(),A==null||A.chain().focus().setTextAlign("right").run()},className:"w-[26px] h-[22px] flex items-center justify-center",children:g.jsx("img",{src:`/icons/text-editor/align-right-${A!=null&&A.isActive({textAlign:"right"})?"depressed":"off"}.png`,alt:"Align Right",className:"w-[26px] h-[22px]"})})]}),g.jsx("div",{className:"w-[1px] h-[22px] bg-[#808080] shadow-[1px_0_0_#ffffff]"}),g.jsxs("div",{className:"flex",children:[g.jsx("button",{onClick:()=>{D(),A==null||A.chain().focus().toggleBulletList().run()},className:"w-[26px] h-[22px] flex items-center justify-center",children:g.jsx("img",{src:`/icons/text-editor/unordered-list-${A!=null&&A.isActive("bulletList")?"depressed":"off"}.png`,alt:"Bullet List",className:"w-[26px] h-[22px]"})}),g.jsx("button",{onClick:()=>{D(),A==null||A.chain().focus().toggleOrderedList().run()},className:"w-[26px] h-[22px] flex items-center justify-center",children:g.jsx("img",{src:`/icons/text-editor/ordered-list-${A!=null&&A.isActive("orderedList")?"depressed":"off"}.png`,alt:"Ordered List",className:"w-[26px] h-[22px]"})})]}),g.jsx("div",{className:"w-[1px] h-[22px] bg-[#808080] shadow-[1px_0_0_#ffffff]"}),g.jsx("div",{className:"flex",children:g.jsx(QG,{onTranscriptionComplete:V,onTranscriptionStart:F,isLoading:a,className:"w-[26px] h-[22px] flex items-center justify-center",silenceThreshold:1e4})})]})}),g.jsx(Pz,{editor:A,className:"flex-1 overflow-y-auto w-full min-h-0"})]}),g.jsx($l,{isOpen:d,onOpenChange:h,onSubmit:K,title:"Save File",description:"Enter a name for your file",value:w,onChange:S}),g.jsx(Ts,{isOpen:f,onOpenChange:m,onConfirm:()=>{B(),m(!1)},title:"Discard Changes",description:"Do you want to discard your changes and create a new file?"}),g.jsx(Ns,{isOpen:r,onOpenChange:s,helpItems:XP,appName:"TextEdit"}),g.jsx(As,{isOpen:i,onOpenChange:o,metadata:s0})]})})]})}const XP=[{icon:"",title:"Basic Editing",description:"Type, copy, cut, paste, and undo/redo your text"},{icon:"",title:"Text Formatting",description:"Style with bold, italic, underline, headings, and text alignment"},{icon:"",title:"Lists & Organization",description:"Create bullet, numbered, and task lists to organize content"},{icon:"",title:"File Management",description:"Create, open, save, and export files (HTML, MD, TXT) with auto-save"},{icon:"",title:"Voice Input",description:"Dictate text using voice transcription for hands-free editing"},{icon:"",title:"Quick Commands",description:"Type / to access formatting and editing shortcuts"}],s0={name:"TextEdit",version:"1.0",creator:{name:"Ryo Lu",url:"https://ryo.lu"},github:"https://github.com/ryokun6/ryos",icon:"/icons/textedit.png"},pk={id:"textedit",name:"TextEdit",icon:{type:"image",src:s0.icon},description:"A simple rich text editor",component:nK,helpItems:XP,metadata:s0};function rK({onRefresh:n,onStop:e,onHome:t,onShowHelp:r,onShowAbout:s,isLoading:i,favorites:o=[],history:a=[],onAddFavorite:c,onClearFavorites:d,onNavigateToFavorite:h,onNavigateToHistory:f,onFocusUrlInput:m,onClose:y,onGoBack:v,onGoForward:w,canGoBack:S,canGoForward:C,onClearHistory:T}){return g.jsxs(Rs,{children:[g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 text-md px-2 py-1 border-none hover:bg-gray-200 active:bg-gray-900 active:text-white focus-visible:ring-0",children:"File"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{onClick:m,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Go to URL"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:y,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Close"})]})]}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 px-2 py-1 text-md focus-visible:ring-0 hover:bg-gray-200 active:bg-gray-900 active:text-white",children:"Edit"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{onClick:n,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Refresh"}),g.jsx(de,{onClick:e,disabled:!i,className:i?"text-md h-6 px-3 active:bg-gray-900 active:text-white":"text-gray-400 text-md h-6 px-3",children:"Stop"})]})]}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 px-2 py-1 text-md focus-visible:ring-0 hover:bg-gray-200 active:bg-gray-900 active:text-white",children:"Favorites"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{onClick:t,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Go Home"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:c,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Add to Favorites..."}),o.length>0&&g.jsxs(g.Fragment,{children:[g.jsx(Le,{className:"h-[2px] bg-black my-1"}),o.map(k=>g.jsxs(de,{onClick:()=>h==null?void 0:h(k.url,k.year),className:"text-md h-6 px-3 active:bg-gray-900 active:text-white flex items-center gap-2",children:[g.jsx("img",{src:k.favicon||"/icons/ie-site.png",alt:"",className:"w-4 h-4",onError:M=>{M.currentTarget.src="/icons/ie-site.png"}}),k.title,k.year&&k.year!=="current"&&g.jsxs("span",{className:"text-xs text-gray-500",children:["(",k.year,")"]})]},k.url)),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:d,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Clear Favorites..."})]})]})]}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 px-2 py-1 text-md focus-visible:ring-0 hover:bg-gray-200 active:bg-gray-900 active:text-white",children:"History"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0 max-h-[400px] overflow-y-auto",children:[g.jsx(de,{onClick:v,disabled:!S,className:S?"text-md h-6 px-3 active:bg-gray-900 active:text-white":"text-gray-400 text-md h-6 px-3",children:"Back"}),g.jsx(de,{onClick:w,disabled:!C,className:C?"text-md h-6 px-3 active:bg-gray-900 active:text-white":"text-gray-400 text-md h-6 px-3",children:"Forward"}),a.length>0&&g.jsxs(g.Fragment,{children:[g.jsx(Le,{className:"h-[2px] bg-black my-1"}),a.slice(0,10).map(k=>g.jsxs(de,{onClick:()=>f==null?void 0:f(k.url,k.year),className:"text-md h-6 px-3 active:bg-gray-900 active:text-white flex items-center gap-2",children:[g.jsx("img",{src:k.favicon||"/icons/ie-site.png",alt:"",className:"w-4 h-4",onError:M=>{M.currentTarget.src="/icons/ie-site.png"}}),g.jsxs("span",{className:"truncate",children:[k.title,k.year&&k.year!=="current"&&g.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",k.year,")"]})]})]},k.url+k.timestamp)),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:T,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Clear History..."})]})]})]}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 px-2 py-1 text-md focus-visible:ring-0 hover:bg-gray-200 active:bg-gray-900 active:text-white",children:"Help"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{onClick:r,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Internet Explorer Help"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:s,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"About Internet Explorer"})]})]})]})}function Ou(n,[e,t]){return Math.min(t,Math.max(e,n))}function ww(n){const e=b.useRef({value:n,previous:n});return b.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var sK="VisuallyHidden",bw=b.forwardRef((n,e)=>g.jsx(We.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));bw.displayName=sK;var iK=bw,oK=[" ","Enter","ArrowUp","ArrowDown"],aK=[" ","Enter"],ed="Select",[Dp,Rp,lK]=mp(ed),[ql,Une]=Ir(ed,[lK,zl]),Ip=zl(),[cK,mo]=ql(ed),[uK,dK]=ql(ed),JP=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:c,dir:d,name:h,autoComplete:f,disabled:m,required:y,form:v}=n,w=Ip(e),[S,C]=b.useState(null),[T,k]=b.useState(null),[M,N]=b.useState(!1),O=Fl(d),[D=!1,I]=Cs({prop:r,defaultProp:s,onChange:i}),[L,A]=Cs({prop:o,defaultProp:a,onChange:c}),V=b.useRef(null),F=S?v||!!S.closest("form"):!0,[U,B]=b.useState(new Set),q=Array.from(U).map(K=>K.props.value).join(";");return g.jsx(wp,{...w,children:g.jsxs(cK,{required:y,scope:e,trigger:S,onTriggerChange:C,valueNode:T,onValueNodeChange:k,valueNodeHasChildren:M,onValueNodeHasChildrenChange:N,contentId:fr(),value:L,onValueChange:A,open:D,onOpenChange:I,dir:O,triggerPointerDownPosRef:V,disabled:m,children:[g.jsx(Dp.Provider,{scope:e,children:g.jsx(uK,{scope:n.__scopeSelect,onNativeOptionAdd:b.useCallback(K=>{B(G=>new Set(G).add(K))},[]),onNativeOptionRemove:b.useCallback(K=>{B(G=>{const $=new Set(G);return $.delete(K),$})},[]),children:t})}),F?g.jsxs(SD,{"aria-hidden":!0,required:y,tabIndex:-1,name:h,autoComplete:f,value:L,onChange:K=>A(K.target.value),disabled:m,form:v,children:[L===void 0?g.jsx("option",{value:""}):null,Array.from(U)]},q):null]})})};JP.displayName=ed;var ZP="SelectTrigger",QP=b.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...s}=n,i=Ip(t),o=mo(ZP,t),a=o.disabled||r,c=Ye(e,o.onTriggerChange),d=Rp(t),h=b.useRef("touch"),[f,m,y]=CD(w=>{const S=d().filter(k=>!k.disabled),C=S.find(k=>k.value===o.value),T=_D(S,w,C);T!==void 0&&o.onValueChange(T.value)}),v=w=>{a||(o.onOpenChange(!0),y()),w&&(o.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return g.jsx(xx,{asChild:!0,...i,children:g.jsx(We.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":bD(o.value)?"":void 0,...s,ref:c,onClick:Te(s.onClick,w=>{w.currentTarget.focus(),h.current!=="mouse"&&v(w)}),onPointerDown:Te(s.onPointerDown,w=>{h.current=w.pointerType;const S=w.target;S.hasPointerCapture(w.pointerId)&&S.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(v(w),w.preventDefault())}),onKeyDown:Te(s.onKeyDown,w=>{const S=f.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&m(w.key),!(S&&w.key===" ")&&oK.includes(w.key)&&(v(),w.preventDefault())})})})});QP.displayName=ZP;var eD="SelectValue",tD=b.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,children:i,placeholder:o="",...a}=n,c=mo(eD,t),{onValueNodeHasChildrenChange:d}=c,h=i!==void 0,f=Ye(e,c.onValueNodeChange);return On(()=>{d(h)},[d,h]),g.jsx(We.span,{...a,ref:f,style:{pointerEvents:"none"},children:bD(c.value)?g.jsx(g.Fragment,{children:o}):i})});tD.displayName=eD;var hK="SelectIcon",nD=b.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...s}=n;return g.jsx(We.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});nD.displayName=hK;var fK="SelectPortal",rD=n=>g.jsx(Hu,{asChild:!0,...n});rD.displayName=fK;var Qo="SelectContent",sD=b.forwardRef((n,e)=>{const t=mo(Qo,n.__scopeSelect),[r,s]=b.useState();if(On(()=>{s(new DocumentFragment)},[]),!t.open){const i=r;return i?zu.createPortal(g.jsx(iD,{scope:n.__scopeSelect,children:g.jsx(Dp.Slot,{scope:n.__scopeSelect,children:g.jsx("div",{children:n.children})})}),i):null}return g.jsx(oD,{...n,ref:e})});sD.displayName=Qo;var qr=10,[iD,go]=ql(Qo),pK="SelectContentImpl",oD=b.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:y,sticky:v,hideWhenDetached:w,avoidCollisions:S,...C}=n,T=mo(Qo,t),[k,M]=b.useState(null),[N,O]=b.useState(null),D=Ye(e,ce=>M(ce)),[I,L]=b.useState(null),[A,V]=b.useState(null),F=Rp(t),[U,B]=b.useState(!1),q=b.useRef(!1);b.useEffect(()=>{if(k)return Sx(k)},[k]),lx();const K=b.useCallback(ce=>{const[ae,...xe]=F().map(ye=>ye.ref.current),[ke]=xe.slice(-1),pe=document.activeElement;for(const ye of ce)if(ye===pe||(ye==null||ye.scrollIntoView({block:"nearest"}),ye===ae&&N&&(N.scrollTop=0),ye===ke&&N&&(N.scrollTop=N.scrollHeight),ye==null||ye.focus(),document.activeElement!==pe))return},[F,N]),G=b.useCallback(()=>K([I,k]),[K,I,k]);b.useEffect(()=>{U&&G()},[U,G]);const{onOpenChange:$,triggerPointerDownPosRef:z}=T;b.useEffect(()=>{if(k){let ce={x:0,y:0};const ae=ke=>{var pe,ye;ce={x:Math.abs(Math.round(ke.pageX)-(((pe=z.current)==null?void 0:pe.x)??0)),y:Math.abs(Math.round(ke.pageY)-(((ye=z.current)==null?void 0:ye.y)??0))}},xe=ke=>{ce.x<=10&&ce.y<=10?ke.preventDefault():k.contains(ke.target)||$(!1),document.removeEventListener("pointermove",ae),z.current=null};return z.current!==null&&(document.addEventListener("pointermove",ae),document.addEventListener("pointerup",xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ae),document.removeEventListener("pointerup",xe,{capture:!0})}}},[k,$,z]),b.useEffect(()=>{const ce=()=>$(!1);return window.addEventListener("blur",ce),window.addEventListener("resize",ce),()=>{window.removeEventListener("blur",ce),window.removeEventListener("resize",ce)}},[$]);const[W,P]=CD(ce=>{const ae=F().filter(pe=>!pe.disabled),xe=ae.find(pe=>pe.ref.current===document.activeElement),ke=_D(ae,ce,xe);ke&&setTimeout(()=>ke.ref.current.focus())}),j=b.useCallback((ce,ae,xe)=>{const ke=!q.current&&!xe;(T.value!==void 0&&T.value===ae||ke)&&(L(ce),ke&&(q.current=!0))},[T.value]),J=b.useCallback(()=>k==null?void 0:k.focus(),[k]),te=b.useCallback((ce,ae,xe)=>{const ke=!q.current&&!xe;(T.value!==void 0&&T.value===ae||ke)&&V(ce)},[T.value]),ne=r==="popper"?i0:aD,ue=ne===i0?{side:a,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:y,sticky:v,hideWhenDetached:w,avoidCollisions:S}:{};return g.jsx(iD,{scope:t,content:k,viewport:N,onViewportChange:O,itemRefCallback:j,selectedItem:I,onItemLeave:J,itemTextRefCallback:te,focusSelectedItem:G,selectedItemText:A,position:r,isPositioned:U,searchRef:W,children:g.jsx(_p,{as:eo,allowPinchZoom:!0,children:g.jsx(gp,{asChild:!0,trapped:T.open,onMountAutoFocus:ce=>{ce.preventDefault()},onUnmountAutoFocus:Te(s,ce=>{var ae;(ae=T.trigger)==null||ae.focus({preventScroll:!0}),ce.preventDefault()}),children:g.jsx(Wu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:ce=>ce.preventDefault(),onDismiss:()=>T.onOpenChange(!1),children:g.jsx(ne,{role:"listbox",id:T.contentId,"data-state":T.open?"open":"closed",dir:T.dir,onContextMenu:ce=>ce.preventDefault(),...C,...ue,onPlaced:()=>B(!0),ref:D,style:{display:"flex",flexDirection:"column",outline:"none",...C.style},onKeyDown:Te(C.onKeyDown,ce=>{const ae=ce.ctrlKey||ce.altKey||ce.metaKey;if(ce.key==="Tab"&&ce.preventDefault(),!ae&&ce.key.length===1&&P(ce.key),["ArrowUp","ArrowDown","Home","End"].includes(ce.key)){let ke=F().filter(pe=>!pe.disabled).map(pe=>pe.ref.current);if(["ArrowUp","End"].includes(ce.key)&&(ke=ke.slice().reverse()),["ArrowUp","ArrowDown"].includes(ce.key)){const pe=ce.target,ye=ke.indexOf(pe);ke=ke.slice(ye+1)}setTimeout(()=>K(ke)),ce.preventDefault()}})})})})})})});oD.displayName=pK;var mK="SelectItemAlignedPosition",aD=b.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...s}=n,i=mo(Qo,t),o=go(Qo,t),[a,c]=b.useState(null),[d,h]=b.useState(null),f=Ye(e,D=>h(D)),m=Rp(t),y=b.useRef(!1),v=b.useRef(!0),{viewport:w,selectedItem:S,selectedItemText:C,focusSelectedItem:T}=o,k=b.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&d&&w&&S&&C){const D=i.trigger.getBoundingClientRect(),I=d.getBoundingClientRect(),L=i.valueNode.getBoundingClientRect(),A=C.getBoundingClientRect();if(i.dir!=="rtl"){const pe=A.left-I.left,ye=L.left-pe,re=D.left-ye,Q=D.width+re,X=Math.max(Q,I.width),Y=window.innerWidth-qr,fe=Ou(ye,[qr,Math.max(qr,Y-X)]);a.style.minWidth=Q+"px",a.style.left=fe+"px"}else{const pe=I.right-A.right,ye=window.innerWidth-L.right-pe,re=window.innerWidth-D.right-ye,Q=D.width+re,X=Math.max(Q,I.width),Y=window.innerWidth-qr,fe=Ou(ye,[qr,Math.max(qr,Y-X)]);a.style.minWidth=Q+"px",a.style.right=fe+"px"}const V=m(),F=window.innerHeight-qr*2,U=w.scrollHeight,B=window.getComputedStyle(d),q=parseInt(B.borderTopWidth,10),K=parseInt(B.paddingTop,10),G=parseInt(B.borderBottomWidth,10),$=parseInt(B.paddingBottom,10),z=q+K+U+$+G,W=Math.min(S.offsetHeight*5,z),P=window.getComputedStyle(w),j=parseInt(P.paddingTop,10),J=parseInt(P.paddingBottom,10),te=D.top+D.height/2-qr,ne=F-te,ue=S.offsetHeight/2,ce=S.offsetTop+ue,ae=q+K+ce,xe=z-ae;if(ae<=te){const pe=V.length>0&&S===V[V.length-1].ref.current;a.style.bottom="0px";const ye=d.clientHeight-w.offsetTop-w.offsetHeight,re=Math.max(ne,ue+(pe?J:0)+ye+G),Q=ae+re;a.style.height=Q+"px"}else{const pe=V.length>0&&S===V[0].ref.current;a.style.top="0px";const re=Math.max(te,q+w.offsetTop+(pe?j:0)+ue)+xe;a.style.height=re+"px",w.scrollTop=ae-te+w.offsetTop}a.style.margin=`${qr}px 0`,a.style.minHeight=W+"px",a.style.maxHeight=F+"px",r==null||r(),requestAnimationFrame(()=>y.current=!0)}},[m,i.trigger,i.valueNode,a,d,w,S,C,i.dir,r]);On(()=>k(),[k]);const[M,N]=b.useState();On(()=>{d&&N(window.getComputedStyle(d).zIndex)},[d]);const O=b.useCallback(D=>{D&&v.current===!0&&(k(),T==null||T(),v.current=!1)},[k,T]);return g.jsx(yK,{scope:t,contentWrapper:a,shouldExpandOnScrollRef:y,onScrollButtonChange:O,children:g.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:M},children:g.jsx(We.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});aD.displayName=mK;var gK="SelectPopperPosition",i0=b.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:s=qr,...i}=n,o=Ip(t);return g.jsx(wx,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});i0.displayName=gK;var[yK,Sw]=ql(Qo,{}),o0="SelectViewport",lD=b.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...s}=n,i=go(o0,t),o=Sw(o0,t),a=Ye(e,i.onViewportChange),c=b.useRef(0);return g.jsxs(g.Fragment,{children:[g.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),g.jsx(Dp.Slot,{scope:t,children:g.jsx(We.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Te(s.onScroll,d=>{const h=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&f){const y=Math.abs(c.current-h.scrollTop);if(y>0){const v=window.innerHeight-qr*2,w=parseFloat(f.style.minHeight),S=parseFloat(f.style.height),C=Math.max(w,S);if(C<v){const T=C+y,k=Math.min(v,T),M=T-k;f.style.height=k+"px",f.style.bottom==="0px"&&(h.scrollTop=M>0?M:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});lD.displayName=o0;var cD="SelectGroup",[vK,xK]=ql(cD),wK=b.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=fr();return g.jsx(vK,{scope:t,id:s,children:g.jsx(We.div,{role:"group","aria-labelledby":s,...r,ref:e})})});wK.displayName=cD;var uD="SelectLabel",dD=b.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=xK(uD,t);return g.jsx(We.div,{id:s.id,...r,ref:e})});dD.displayName=uD;var Vf="SelectItem",[bK,hD]=ql(Vf),fD=b.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:s=!1,textValue:i,...o}=n,a=mo(Vf,t),c=go(Vf,t),d=a.value===r,[h,f]=b.useState(i??""),[m,y]=b.useState(!1),v=Ye(e,T=>{var k;return(k=c.itemRefCallback)==null?void 0:k.call(c,T,r,s)}),w=fr(),S=b.useRef("touch"),C=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return g.jsx(bK,{scope:t,value:r,disabled:s,textId:w,isSelected:d,onItemTextChange:b.useCallback(T=>{f(k=>k||((T==null?void 0:T.textContent)??"").trim())},[]),children:g.jsx(Dp.ItemSlot,{scope:t,value:r,disabled:s,textValue:h,children:g.jsx(We.div,{role:"option","aria-labelledby":w,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:v,onFocus:Te(o.onFocus,()=>y(!0)),onBlur:Te(o.onBlur,()=>y(!1)),onClick:Te(o.onClick,()=>{S.current!=="mouse"&&C()}),onPointerUp:Te(o.onPointerUp,()=>{S.current==="mouse"&&C()}),onPointerDown:Te(o.onPointerDown,T=>{S.current=T.pointerType}),onPointerMove:Te(o.onPointerMove,T=>{var k;S.current=T.pointerType,s?(k=c.onItemLeave)==null||k.call(c):S.current==="mouse"&&T.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Te(o.onPointerLeave,T=>{var k;T.currentTarget===document.activeElement&&((k=c.onItemLeave)==null||k.call(c))}),onKeyDown:Te(o.onKeyDown,T=>{var M;((M=c.searchRef)==null?void 0:M.current)!==""&&T.key===" "||(aK.includes(T.key)&&C(),T.key===" "&&T.preventDefault())})})})})});fD.displayName=Vf;var Zc="SelectItemText",pD=b.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,...i}=n,o=mo(Zc,t),a=go(Zc,t),c=hD(Zc,t),d=dK(Zc,t),[h,f]=b.useState(null),m=Ye(e,C=>f(C),c.onItemTextChange,C=>{var T;return(T=a.itemTextRefCallback)==null?void 0:T.call(a,C,c.value,c.disabled)}),y=h==null?void 0:h.textContent,v=b.useMemo(()=>g.jsx("option",{value:c.value,disabled:c.disabled,children:y},c.value),[c.disabled,c.value,y]),{onNativeOptionAdd:w,onNativeOptionRemove:S}=d;return On(()=>(w(v),()=>S(v)),[w,S,v]),g.jsxs(g.Fragment,{children:[g.jsx(We.span,{id:c.textId,...i,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?zu.createPortal(i.children,o.valueNode):null]})});pD.displayName=Zc;var mD="SelectItemIndicator",gD=b.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return hD(mD,t).isSelected?g.jsx(We.span,{"aria-hidden":!0,...r,ref:e}):null});gD.displayName=mD;var a0="SelectScrollUpButton",yD=b.forwardRef((n,e)=>{const t=go(a0,n.__scopeSelect),r=Sw(a0,n.__scopeSelect),[s,i]=b.useState(!1),o=Ye(e,r.onScrollButtonChange);return On(()=>{if(t.viewport&&t.isPositioned){let a=function(){const d=c.scrollTop>0;i(d)};const c=t.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),s?g.jsx(xD,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=t;a&&c&&(a.scrollTop=a.scrollTop-c.offsetHeight)}}):null});yD.displayName=a0;var l0="SelectScrollDownButton",vD=b.forwardRef((n,e)=>{const t=go(l0,n.__scopeSelect),r=Sw(l0,n.__scopeSelect),[s,i]=b.useState(!1),o=Ye(e,r.onScrollButtonChange);return On(()=>{if(t.viewport&&t.isPositioned){let a=function(){const d=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<d;i(h)};const c=t.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),s?g.jsx(xD,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=t;a&&c&&(a.scrollTop=a.scrollTop+c.offsetHeight)}}):null});vD.displayName=l0;var xD=b.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...s}=n,i=go("SelectScrollButton",t),o=b.useRef(null),a=Rp(t),c=b.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return b.useEffect(()=>()=>c(),[c]),On(()=>{var h;const d=a().find(f=>f.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[a]),g.jsx(We.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Te(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Te(s.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Te(s.onPointerLeave,()=>{c()})})}),SK="SelectSeparator",wD=b.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return g.jsx(We.div,{"aria-hidden":!0,...r,ref:e})});wD.displayName=SK;var c0="SelectArrow",CK=b.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=Ip(t),i=mo(c0,t),o=go(c0,t);return i.open&&o.position==="popper"?g.jsx(bx,{...s,...r,ref:e}):null});CK.displayName=c0;function bD(n){return n===""||n===void 0}var SD=b.forwardRef((n,e)=>{const{value:t,...r}=n,s=b.useRef(null),i=Ye(e,s),o=ww(t);return b.useEffect(()=>{const a=s.current,c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&h){const f=new Event("change",{bubbles:!0});h.call(a,t),a.dispatchEvent(f)}},[o,t]),g.jsx(bw,{asChild:!0,children:g.jsx("select",{...r,ref:i,defaultValue:t})})});SD.displayName="BubbleSelect";function CD(n){const e=qt(n),t=b.useRef(""),r=b.useRef(0),s=b.useCallback(o=>{const a=t.current+o;e(a),function c(d){t.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(a)},[e]),i=b.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,s,i]}function _D(n,e,t){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let o=_K(n,Math.max(i,0));s.length===1&&(o=o.filter(d=>d!==t));const c=o.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==t?c:void 0}function _K(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var TK=JP,TD=QP,kK=tD,EK=nD,NK=rD,kD=sD,AK=lD,ED=dD,ND=fD,MK=pD,OK=gD,AD=yD,MD=vD,OD=wD;const Pu=({children:n,...e})=>{const{play:t}=pt(ut.MENU_OPEN),{play:r}=pt(ut.MENU_CLOSE);return g.jsx(TK,{onOpenChange:s=>{var i;s?t():r(),(i=e.onOpenChange)==null||i.call(e,s)},...e,children:n})},Du=kK,Cl=b.forwardRef(({className:n,children:e,...t},r)=>{const{play:s}=pt(ut.BUTTON_CLICK,.3);return g.jsxs(TD,{ref:r,className:Pe("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm [border-image:url('/button.svg')_30_stretch] active:[border-image:url('/button-default.svg')_60_stretch] focus:[border-image:url('/button-default.svg')_60_stretch] border-[5px] ring-offset-background placeholder:text-muted-foreground focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),onClick:()=>s(),...t,children:[e,g.jsx(EK,{asChild:!0,children:g.jsx(Dx,{className:"h-4 w-4 opacity-50"})})]})});Cl.displayName=TD.displayName;const PD=b.forwardRef(({className:n,...e},t)=>g.jsx(AD,{ref:t,className:Pe("flex cursor-default items-center justify-center py-1",n),...e,children:g.jsx(C4,{className:"h-4 w-4"})}));PD.displayName=AD.displayName;const DD=b.forwardRef(({className:n,...e},t)=>g.jsx(MD,{ref:t,className:Pe("flex cursor-default items-center justify-center py-1",n),...e,children:g.jsx(Dx,{className:"h-4 w-4"})}));DD.displayName=MD.displayName;const _l=b.forwardRef(({className:n,children:e,position:t="popper",...r},s)=>g.jsx(NK,{children:g.jsxs(kD,{ref:s,className:Pe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[g.jsx(PD,{}),g.jsx(AK,{className:Pe("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),g.jsx(DD,{})]})}));_l.displayName=kD.displayName;const PK=b.forwardRef(({className:n,...e},t)=>g.jsx(ED,{ref:t,className:Pe("px-2 py-1.5 text-sm font-semibold",n),...e}));PK.displayName=ED.displayName;const Qn=b.forwardRef(({className:n,children:e,...t},r)=>{const{play:s}=pt(ut.BUTTON_CLICK,.3);return g.jsxs(ND,{ref:r,className:Pe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),onSelect:i=>{var o;s(),(o=t.onSelect)==null||o.call(t,i)},...t,children:[g.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(OK,{children:g.jsx(Px,{className:"h-4 w-4"})})}),g.jsx(MK,{children:e})]})});Qn.displayName=ND.displayName;const DK=b.forwardRef(({className:n,...e},t)=>g.jsx(OD,{ref:t,className:Pe("-mx-1 my-1 h-px bg-muted",n),...e}));DK.displayName=OD.displayName;function RK({isWindowOpen:n,onClose:e,isForeground:t}){const r=hE(),s=fE(),[i,o]=b.useState({url:r,year:s,currentUrl:null}),[a,c]=b.useState(!0),[d,h]=b.useState(null),[f,m]=b.useState([]),[y,v]=b.useState([]),[w,S]=b.useState(-1),[C,T]=b.useState(!1),[k,M]=b.useState(""),[N,O]=b.useState(!1),[D,I]=b.useState(!1),[L,A]=b.useState(!1),[V,F]=b.useState(!1),[U,B]=b.useState(!1),[q,K]=b.useState(!1),G=b.useRef(null),$=b.useRef(null),z=b.useRef(null),W=b.useRef(!1),P=Array.from({length:new Date().getFullYear()-1996},(se,ge)=>(1996+ge).toString());b.useEffect(()=>{(async()=>{m(nne());const ge=wj();v(ge),ge.length>0&&S(0);const he=hE(),je=fE();if(c(!0),W.current=!0,o({url:he,year:je,currentUrl:null}),je!=="current"){const Je=await j(he,je);Je&&o(mt=>({...mt,currentUrl:Je}))}else o(Je=>({...Je,currentUrl:he.startsWith("http")?he:`https://${he}`}))})()},[]),b.useEffect(()=>{i.url&&i.year&&(ine(i.url),lne(i.year))},[i.url,i.year]),b.useEffect(()=>{const se=()=>{const he=z.current;if(he){const je=he.scrollWidth>he.clientWidth&&he.scrollLeft<he.scrollWidth-he.clientWidth;K(je)}},ge=z.current;return ge&&(ge.addEventListener("scroll",se),window.addEventListener("resize",se),se()),()=>{ge&&(ge.removeEventListener("scroll",se),window.removeEventListener("resize",se))}},[f]);const j=async(se,ge)=>{if(ge==="current")return se;const he=new Date,je=String(he.getMonth()+1).padStart(2,"0"),Je=String(he.getDate()).padStart(2,"0"),mt=se.startsWith("http")?se:`https://${se}`;return`https://web.archive.org/web/${ge}${je}${Je}/${mt}`},J=()=>{c(!1),W.current=!1},te=async(se=i.url,ge=!0,he=i.year)=>{c(!0),W.current=!0,h(null);const je=setTimeout(()=>{c(!1),W.current=!1},1e4);let Je=se.startsWith("http")?se:`https://${se}`;const Qt=new URL(Je).hostname,Lr=`https://www.google.com/s2/favicons?domain=${Qt}&sz=32`;try{if(he!=="current"){const Tt=await j(Je,he);if(!Tt){clearTimeout(je),c(!1),W.current=!1;return}Je=Tt}if(o(Tt=>({url:se,year:he,currentUrl:Je===Tt.currentUrl?`${Je}${Je.includes("?")?"&":"?"}_t=${Date.now()}`:Je})),ge&&!L){const Tt={url:se,title:Qt,favicon:Lr,timestamp:Date.now(),year:he!=="current"?he:void 0};v(Yt=>[Tt,...Yt]),S(0),ane(Tt)}}catch(Tt){clearTimeout(je),h(`Failed to navigate: ${Tt}`),c(!1),W.current=!1}},ne=async(se,ge)=>{A(!1),te(se,!0,ge||i.year)},ue=()=>{if(w<y.length-1){A(!0);const se=w+1;S(se);const ge=y[se];te(ge.url,!1,ge.year||"current"),A(!1)}},ce=()=>{if(w>0){A(!0);const se=w-1;S(se);const ge=y[se];te(ge.url,!1,ge.year||"current"),A(!1)}},ae=()=>{M(new URL(i.currentUrl||i.url).hostname),T(!0)},xe=()=>{if(!k)return;const se=[...f,{title:k,url:i.url,favicon:`https://www.google.com/s2/favicons?domain=${new URL(i.currentUrl||i.url).hostname}&sz=32`,year:i.year!=="current"?i.year:void 0}];m(se),dE(se),T(!1)},ke=()=>{F(!0)},pe=()=>{m([]),dE([]),F(!1)},ye=()=>{c(!1),W.current=!1,h(`Cannot access ${i.currentUrl||i.url}. The website might be blocking access or requires authentication.`)},re=()=>{te()},Q=()=>{c(!1),W.current=!1,$.current&&($.current.src="about:blank")},X=()=>{var se,ge;(se=G.current)==null||se.focus(),(ge=G.current)==null||ge.select()},Y=()=>{te(vj,!0,xj)},fe=()=>{B(!0)},_e=()=>{v([]),S(-1),localStorage.removeItem(me["internet-explorer"].HISTORY),B(!1)};return n?g.jsxs(g.Fragment,{children:[g.jsx(rK,{isWindowOpen:n,isForeground:t,onRefresh:re,onStop:Q,onFocusUrlInput:X,onHome:Y,onShowHelp:()=>O(!0),onShowAbout:()=>I(!0),isLoading:a,favorites:f,history:y,onAddFavorite:ae,onClearFavorites:ke,onNavigateToFavorite:(se,ge)=>ne(se,ge),onNavigateToHistory:ne,onGoBack:ue,onGoForward:ce,canGoBack:w<y.length-1,canGoForward:w>0,onClearHistory:fe,onClose:e}),g.jsxs(ai,{title:"Internet Explorer",onClose:e,isForeground:t,appId:"internet-explorer",children:[g.jsxs("div",{className:"flex flex-col h-full w-full",children:[g.jsxs("div",{className:"flex flex-col gap-1 p-1 bg-gray-100 border-b border-black",children:[g.jsxs("div",{className:"flex gap-2 items-center",children:[g.jsxs("div",{className:"flex gap-1",children:[g.jsx(Re,{variant:"ghost",size:"icon",onClick:ue,disabled:w>=y.length-1,className:"h-8 w-8",children:g.jsx(Bv,{className:"h-4 w-4"})}),g.jsx(Re,{variant:"ghost",size:"icon",onClick:ce,disabled:w<=0,className:"h-8 w-8",children:g.jsx(nO,{className:"h-4 w-4"})})]}),g.jsx(Ku,{ref:G,value:i.url,onChange:se=>o(ge=>({...ge,url:se.target.value})),onKeyDown:se=>{se.key==="Enter"&&te()},className:"flex-1",placeholder:"Enter URL"}),g.jsx("div",{className:"flex items-center gap-2",children:g.jsxs(Pu,{value:i.year,onValueChange:se=>te(i.url,!0,se),children:[g.jsx(Cl,{children:g.jsx(Du,{placeholder:"Year"})}),g.jsxs(_l,{children:[g.jsx(Qn,{value:"current",children:"Now"}),P.reverse().map(se=>g.jsx(Qn,{value:se,children:se},se))]})]})})]}),g.jsxs("div",{className:"relative",children:[g.jsx("div",{ref:z,className:"overflow-x-auto scrollbar-none relative",children:g.jsx("div",{className:"flex items-center min-w-full ",children:f.map((se,ge)=>g.jsxs(Re,{variant:"ghost",size:"sm",className:"whitespace-nowrap hover:bg-gray-200 font-geneva-12 text-[10px] gap-1 px-1 mr-1 w-content min-w-[60px] max-w-[120px] flex-shrink-0",onClick:()=>ne(se.url,se.year),children:[g.jsx("img",{src:se.favicon||"/icons/ie-site.png",alt:"Site",className:"w-4 h-4 mr-1",onError:he=>{he.currentTarget.src="/icons/ie-site.png"}}),g.jsx("span",{className:"truncate",children:se.title})]},ge))})}),f.length>0&&q&&g.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-8 bg-gradient-to-l from-gray-100 to-transparent pointer-events-none"})]})]}),g.jsxs("div",{className:"flex-1 relative",children:[a&&g.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gray-100 overflow-hidden z-50",children:g.jsx("div",{className:"h-full bg-blue-500 animate-progress-indeterminate"})}),d?g.jsx("div",{className:"p-4 text-red-500",children:d}):g.jsx("iframe",{ref:$,src:i.currentUrl||"",className:"w-full h-full",onLoad:J,onError:ye})]})]}),g.jsx($l,{isOpen:C,onOpenChange:T,onSubmit:xe,title:"Add Favorite",description:"Enter a title for this favorite",value:k,onChange:M}),g.jsx(Ns,{isOpen:N,onOpenChange:O,helpItems:RD,appName:"Internet Explorer"}),g.jsx(As,{isOpen:D,onOpenChange:I,metadata:u0}),g.jsx(Ts,{isOpen:V,onOpenChange:F,onConfirm:pe,title:"Clear Favorites",description:"Are you sure you want to clear all favorites?"}),g.jsx(Ts,{isOpen:U,onOpenChange:B,onConfirm:_e,title:"Clear History",description:"Are you sure you want to clear all history?"})]})]}):null}const RD=[{icon:"",title:"Browse",description:"Enter URLs to browse the web"},{icon:"",title:"Favorites",description:"Save and manage your favorite sites"},{icon:"",title:"Load and refresh",description:"Open iframable websites"}],u0={version:"1.02",name:"Internet Explorer",icon:"/icons/ie.png"},mk={id:"internet-explorer",name:"Internet Explorer",icon:{type:"image",src:u0.icon},description:"Browse the web like it's 1999",component:RK,helpItems:RD,metadata:u0};function IK({onClose:n,onShowHelp:e,onShowAbout:t}){return g.jsxs(Rs,{children:[g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 text-md px-2 py-1 border-none hover:bg-gray-200 active:bg-gray-900 active:text-white focus-visible:ring-0",children:"File"})}),g.jsx(qe,{align:"start",sideOffset:1,className:"px-0",children:g.jsx(de,{onClick:n,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Close"})})]}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 text-md px-2 py-1 border-none hover:bg-gray-200 active:bg-gray-900 active:text-white focus-visible:ring-0",children:"Help"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{onClick:e,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Help Topics"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:t,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"About Control Panels"})]})]})]})}var Cw="Switch",[jK,qne]=Ir(Cw),[LK,FK]=jK(Cw),ID=b.forwardRef((n,e)=>{const{__scopeSwitch:t,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:c="on",onCheckedChange:d,form:h,...f}=n,[m,y]=b.useState(null),v=Ye(e,k=>y(k)),w=b.useRef(!1),S=m?h||!!m.closest("form"):!0,[C=!1,T]=Cs({prop:s,defaultProp:i,onChange:d});return g.jsxs(LK,{scope:t,checked:C,disabled:a,children:[g.jsx(We.button,{type:"button",role:"switch","aria-checked":C,"aria-required":o,"data-state":FD(C),"data-disabled":a?"":void 0,disabled:a,value:c,...f,ref:v,onClick:Te(n.onClick,k=>{T(M=>!M),S&&(w.current=k.isPropagationStopped(),w.current||k.stopPropagation())})}),S&&g.jsx(VK,{control:m,bubbles:!w.current,name:r,value:c,checked:C,required:o,disabled:a,form:h,style:{transform:"translateX(-100%)"}})]})});ID.displayName=Cw;var jD="SwitchThumb",LD=b.forwardRef((n,e)=>{const{__scopeSwitch:t,...r}=n,s=FK(jD,t);return g.jsx(We.span,{"data-state":FD(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});LD.displayName=jD;var VK=n=>{const{control:e,checked:t,bubbles:r=!0,...s}=n,i=b.useRef(null),o=ww(t),a=gx(e);return b.useEffect(()=>{const c=i.current,d=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(d,"checked").set;if(o!==t&&f){const m=new Event("click",{bubbles:r});f.call(c,t),c.dispatchEvent(m)}},[o,t,r]),g.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...s,tabIndex:-1,ref:i,style:{...n.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function FD(n){return n?"checked":"unchecked"}var VD=ID,BK=LD;const d0=b.forwardRef(({className:n,onCheckedChange:e,...t},r)=>{const{play:s}=pt(ut.BUTTON_CLICK,.3),i=o=>{s(),e==null||e(o)};return g.jsx(VD,{className:Pe("peer inline-flex h-[16px] w-7 shrink-0 cursor-pointer items-center rounded-full bg-gray-400 transition-colors focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-gray-900",n),onCheckedChange:i,...t,ref:r,children:g.jsx(BK,{className:Pe("pointer-events-none block h-3 w-3 rounded-full bg-white transition-transform data-[state=checked]:translate-x-[14px] data-[state=unchecked]:translate-x-[2px]")})})});d0.displayName=VD.displayName;var zK="Label",BD=b.forwardRef((n,e)=>g.jsx(We.label,{...n,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=n.onMouseDown)==null||s.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));BD.displayName=zK;var zD=BD;const WK=_E("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Qc=b.forwardRef(({className:n,...e},t)=>g.jsx(zD,{ref:t,className:Pe(WK(),n),...e}));Qc.displayName=zD.displayName;var _w="Tabs",[$K,Gne]=Ir(_w,[Sp]),WD=Sp(),[HK,Tw]=$K(_w),$D=b.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:c="automatic",...d}=n,h=Fl(a),[f,m]=Cs({prop:r,onChange:s,defaultProp:i});return g.jsx(HK,{scope:t,baseId:fr(),value:f,onValueChange:m,orientation:o,dir:h,activationMode:c,children:g.jsx(We.div,{dir:h,"data-orientation":o,...d,ref:e})})});$D.displayName=_w;var HD="TabsList",UD=b.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...s}=n,i=Tw(HD,t),o=WD(t);return g.jsx(YA,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:g.jsx(We.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});UD.displayName=HD;var qD="TabsTrigger",GD=b.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:s=!1,...i}=n,o=Tw(qD,t),a=WD(t),c=XD(o.baseId,r),d=JD(o.baseId,r),h=r===o.value;return g.jsx(XA,{asChild:!0,...a,focusable:!s,active:h,children:g.jsx(We.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:Te(n.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:Te(n.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:Te(n.onFocus,()=>{const f=o.activationMode!=="manual";!h&&!s&&f&&o.onValueChange(r)})})})});GD.displayName=qD;var KD="TabsContent",YD=b.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:s,children:i,...o}=n,a=Tw(KD,t),c=XD(a.baseId,r),d=JD(a.baseId,r),h=r===a.value,f=b.useRef(h);return b.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),g.jsx(Hn,{present:s||h,children:({present:m})=>g.jsx(We.div,{"data-state":h?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:d,tabIndex:0,...o,ref:e,style:{...n.style,animationDuration:f.current?"0s":void 0},children:m&&i})})});YD.displayName=KD;function XD(n,e){return`${n}-trigger-${e}`}function JD(n,e){return`${n}-content-${e}`}var UK=$D,ZD=UD,QD=GD,eR=YD;const qK=UK,tR=b.forwardRef(({className:n,...e},t)=>g.jsx(ZD,{ref:t,className:Pe("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",n),...e}));tR.displayName=ZD.displayName;const sf=b.forwardRef(({className:n,onClick:e,...t},r)=>{const{play:s}=pt(ut.BUTTON_CLICK,.3),i=o=>{s(),e==null||e(o)};return g.jsx(QD,{ref:r,className:Pe("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",n),onClick:i,...t})});sf.displayName=QD.displayName;const of=b.forwardRef(({className:n,...e},t)=>g.jsx(eR,{ref:t,className:Pe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));of.displayName=eR.displayName;function GK(n,e){return b.useReducer((t,r)=>e[t][r]??t,n)}var kw="ScrollArea",[nR,Kne]=Ir(kw),[KK,jr]=nR(kw),rR=b.forwardRef((n,e)=>{const{__scopeScrollArea:t,type:r="hover",dir:s,scrollHideDelay:i=600,...o}=n,[a,c]=b.useState(null),[d,h]=b.useState(null),[f,m]=b.useState(null),[y,v]=b.useState(null),[w,S]=b.useState(null),[C,T]=b.useState(0),[k,M]=b.useState(0),[N,O]=b.useState(!1),[D,I]=b.useState(!1),L=Ye(e,V=>c(V)),A=Fl(s);return g.jsx(KK,{scope:t,type:r,dir:A,scrollHideDelay:i,scrollArea:a,viewport:d,onViewportChange:h,content:f,onContentChange:m,scrollbarX:y,onScrollbarXChange:v,scrollbarXEnabled:N,onScrollbarXEnabledChange:O,scrollbarY:w,onScrollbarYChange:S,scrollbarYEnabled:D,onScrollbarYEnabledChange:I,onCornerWidthChange:T,onCornerHeightChange:M,children:g.jsx(We.div,{dir:A,...o,ref:L,style:{position:"relative","--radix-scroll-area-corner-width":C+"px","--radix-scroll-area-corner-height":k+"px",...n.style}})})});rR.displayName=kw;var sR="ScrollAreaViewport",iR=b.forwardRef((n,e)=>{const{__scopeScrollArea:t,children:r,nonce:s,...i}=n,o=jr(sR,t),a=b.useRef(null),c=Ye(e,a,o.onViewportChange);return g.jsxs(g.Fragment,{children:[g.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),g.jsx(We.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...n.style},children:g.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});iR.displayName=sR;var Ms="ScrollAreaScrollbar",Ew=b.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=jr(Ms,n.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,a=n.orientation==="horizontal";return b.useEffect(()=>(a?i(!0):o(!0),()=>{a?i(!1):o(!1)}),[a,i,o]),s.type==="hover"?g.jsx(YK,{...r,ref:e,forceMount:t}):s.type==="scroll"?g.jsx(XK,{...r,ref:e,forceMount:t}):s.type==="auto"?g.jsx(oR,{...r,ref:e,forceMount:t}):s.type==="always"?g.jsx(Nw,{...r,ref:e}):null});Ew.displayName=Ms;var YK=b.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=jr(Ms,n.__scopeScrollArea),[i,o]=b.useState(!1);return b.useEffect(()=>{const a=s.scrollArea;let c=0;if(a){const d=()=>{window.clearTimeout(c),o(!0)},h=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return a.addEventListener("pointerenter",d),a.addEventListener("pointerleave",h),()=>{window.clearTimeout(c),a.removeEventListener("pointerenter",d),a.removeEventListener("pointerleave",h)}}},[s.scrollArea,s.scrollHideDelay]),g.jsx(Hn,{present:t||i,children:g.jsx(oR,{"data-state":i?"visible":"hidden",...r,ref:e})})}),XK=b.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=jr(Ms,n.__scopeScrollArea),i=n.orientation==="horizontal",o=Lp(()=>c("SCROLL_END"),100),[a,c]=GK("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return b.useEffect(()=>{if(a==="idle"){const d=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(d)}},[a,s.scrollHideDelay,c]),b.useEffect(()=>{const d=s.viewport,h=i?"scrollLeft":"scrollTop";if(d){let f=d[h];const m=()=>{const y=d[h];f!==y&&(c("SCROLL"),o()),f=y};return d.addEventListener("scroll",m),()=>d.removeEventListener("scroll",m)}},[s.viewport,i,c,o]),g.jsx(Hn,{present:t||a!=="hidden",children:g.jsx(Nw,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Te(n.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Te(n.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),oR=b.forwardRef((n,e)=>{const t=jr(Ms,n.__scopeScrollArea),{forceMount:r,...s}=n,[i,o]=b.useState(!1),a=n.orientation==="horizontal",c=Lp(()=>{if(t.viewport){const d=t.viewport.offsetWidth<t.viewport.scrollWidth,h=t.viewport.offsetHeight<t.viewport.scrollHeight;o(a?d:h)}},10);return Tl(t.viewport,c),Tl(t.content,c),g.jsx(Hn,{present:r||i,children:g.jsx(Nw,{"data-state":i?"visible":"hidden",...s,ref:e})})}),Nw=b.forwardRef((n,e)=>{const{orientation:t="vertical",...r}=n,s=jr(Ms,n.__scopeScrollArea),i=b.useRef(null),o=b.useRef(0),[a,c]=b.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=dR(a.viewport,a.content),h={...r,sizes:a,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function f(m,y){return n7(m,o.current,a,y)}return t==="horizontal"?g.jsx(JK,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const m=s.viewport.scrollLeft,y=gk(m,a,s.dir);i.current.style.transform=`translate3d(${y}px, 0, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollLeft=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollLeft=f(m,s.dir))}}):t==="vertical"?g.jsx(ZK,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const m=s.viewport.scrollTop,y=gk(m,a);i.current.style.transform=`translate3d(0, ${y}px, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollTop=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollTop=f(m))}}):null}),JK=b.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,i=jr(Ms,n.__scopeScrollArea),[o,a]=b.useState(),c=b.useRef(null),d=Ye(e,c,i.onScrollbarXChange);return b.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),g.jsx(lR,{"data-orientation":"horizontal",...s,ref:d,sizes:t,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":jp(t)+"px",...n.style},onThumbPointerDown:h=>n.onThumbPointerDown(h.x),onDragScroll:h=>n.onDragScroll(h.x),onWheelScroll:(h,f)=>{if(i.viewport){const m=i.viewport.scrollLeft+h.deltaX;n.onWheelScroll(m),fR(m,f)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:zf(o.paddingLeft),paddingEnd:zf(o.paddingRight)}})}})}),ZK=b.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,i=jr(Ms,n.__scopeScrollArea),[o,a]=b.useState(),c=b.useRef(null),d=Ye(e,c,i.onScrollbarYChange);return b.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),g.jsx(lR,{"data-orientation":"vertical",...s,ref:d,sizes:t,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":jp(t)+"px",...n.style},onThumbPointerDown:h=>n.onThumbPointerDown(h.y),onDragScroll:h=>n.onDragScroll(h.y),onWheelScroll:(h,f)=>{if(i.viewport){const m=i.viewport.scrollTop+h.deltaY;n.onWheelScroll(m),fR(m,f)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:zf(o.paddingTop),paddingEnd:zf(o.paddingBottom)}})}})}),[QK,aR]=nR(Ms),lR=b.forwardRef((n,e)=>{const{__scopeScrollArea:t,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:h,onResize:f,...m}=n,y=jr(Ms,t),[v,w]=b.useState(null),S=Ye(e,L=>w(L)),C=b.useRef(null),T=b.useRef(""),k=y.viewport,M=r.content-r.viewport,N=qt(h),O=qt(c),D=Lp(f,10);function I(L){if(C.current){const A=L.clientX-C.current.left,V=L.clientY-C.current.top;d({x:A,y:V})}}return b.useEffect(()=>{const L=A=>{const V=A.target;(v==null?void 0:v.contains(V))&&N(A,M)};return document.addEventListener("wheel",L,{passive:!1}),()=>document.removeEventListener("wheel",L,{passive:!1})},[k,v,M,N]),b.useEffect(O,[r,O]),Tl(v,D),Tl(y.content,D),g.jsx(QK,{scope:t,scrollbar:v,hasThumb:s,onThumbChange:qt(i),onThumbPointerUp:qt(o),onThumbPositionChange:O,onThumbPointerDown:qt(a),children:g.jsx(We.div,{...m,ref:S,style:{position:"absolute",...m.style},onPointerDown:Te(n.onPointerDown,L=>{L.button===0&&(L.target.setPointerCapture(L.pointerId),C.current=v.getBoundingClientRect(),T.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),I(L))}),onPointerMove:Te(n.onPointerMove,I),onPointerUp:Te(n.onPointerUp,L=>{const A=L.target;A.hasPointerCapture(L.pointerId)&&A.releasePointerCapture(L.pointerId),document.body.style.webkitUserSelect=T.current,y.viewport&&(y.viewport.style.scrollBehavior=""),C.current=null})})})}),Bf="ScrollAreaThumb",cR=b.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=aR(Bf,n.__scopeScrollArea);return g.jsx(Hn,{present:t||s.hasThumb,children:g.jsx(e7,{ref:e,...r})})}),e7=b.forwardRef((n,e)=>{const{__scopeScrollArea:t,style:r,...s}=n,i=jr(Bf,t),o=aR(Bf,t),{onThumbPositionChange:a}=o,c=Ye(e,f=>o.onThumbChange(f)),d=b.useRef(void 0),h=Lp(()=>{d.current&&(d.current(),d.current=void 0)},100);return b.useEffect(()=>{const f=i.viewport;if(f){const m=()=>{if(h(),!d.current){const y=r7(f,a);d.current=y,a()}};return a(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[i.viewport,h,a]),g.jsx(We.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Te(n.onPointerDownCapture,f=>{const y=f.target.getBoundingClientRect(),v=f.clientX-y.left,w=f.clientY-y.top;o.onThumbPointerDown({x:v,y:w})}),onPointerUp:Te(n.onPointerUp,o.onThumbPointerUp)})});cR.displayName=Bf;var Aw="ScrollAreaCorner",uR=b.forwardRef((n,e)=>{const t=jr(Aw,n.__scopeScrollArea),r=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&r?g.jsx(t7,{...n,ref:e}):null});uR.displayName=Aw;var t7=b.forwardRef((n,e)=>{const{__scopeScrollArea:t,...r}=n,s=jr(Aw,t),[i,o]=b.useState(0),[a,c]=b.useState(0),d=!!(i&&a);return Tl(s.scrollbarX,()=>{var f;const h=((f=s.scrollbarX)==null?void 0:f.offsetHeight)||0;s.onCornerHeightChange(h),c(h)}),Tl(s.scrollbarY,()=>{var f;const h=((f=s.scrollbarY)==null?void 0:f.offsetWidth)||0;s.onCornerWidthChange(h),o(h)}),d?g.jsx(We.div,{...r,ref:e,style:{width:i,height:a,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function zf(n){return n?parseInt(n,10):0}function dR(n,e){const t=n/e;return isNaN(t)?0:t}function jp(n){const e=dR(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,r=(n.scrollbar.size-t)*e;return Math.max(r,18)}function n7(n,e,t,r="ltr"){const s=jp(t),i=s/2,o=e||i,a=s-o,c=t.scrollbar.paddingStart+o,d=t.scrollbar.size-t.scrollbar.paddingEnd-a,h=t.content-t.viewport,f=r==="ltr"?[0,h]:[h*-1,0];return hR([c,d],f)(n)}function gk(n,e,t="ltr"){const r=jp(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,o=e.content-e.viewport,a=i-r,c=t==="ltr"?[0,o]:[o*-1,0],d=Ou(n,c);return hR([0,o],[0,a])(d)}function hR(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function fR(n,e){return n>0&&n<e}var r7=(n,e=()=>{})=>{let t={left:n.scrollLeft,top:n.scrollTop},r=0;return function s(){const i={left:n.scrollLeft,top:n.scrollTop},o=t.left!==i.left,a=t.top!==i.top;(o||a)&&e(),t=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function Lp(n,e){const t=qt(n),r=b.useRef(0);return b.useEffect(()=>()=>window.clearTimeout(r.current),[]),b.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(t,e)},[t,e])}function Tl(n,e){const t=qt(e);On(()=>{let r=0;if(n){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(t)});return s.observe(n),()=>{window.cancelAnimationFrame(r),s.unobserve(n)}}},[n,t])}var pR=rR,s7=iR,i7=uR;const Mw=b.forwardRef(({className:n,children:e,...t},r)=>g.jsxs(pR,{ref:r,className:Pe("relative overflow-hidden",n),...t,children:[g.jsx(s7,{className:"h-full w-full rounded-[inherit]",children:e}),g.jsx(Ow,{}),g.jsx(i7,{})]}));Mw.displayName=pR.displayName;const Ow=b.forwardRef(({className:n,orientation:e="vertical",...t},r)=>g.jsx(Ew,{ref:r,orientation:e,className:Pe("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...t,children:g.jsx(cR,{className:"relative flex-1 rounded-full bg-border"})}));Ow.displayName=Ew.displayName;function mR(){const[n,e]=b.useState(mE);return b.useEffect(()=>{const r=s=>{s.key==="control-panels:wallpaper"&&e(mE())};return window.addEventListener("storage",r),()=>window.removeEventListener("storage",r)},[]),{currentWallpaper:n,setWallpaper:r=>{e(r),cne(r),window.dispatchEvent(new CustomEvent("wallpaperChange",{detail:r}))}}}const gR=()=>localStorage.getItem("displayMode")||"color",yR=n=>{localStorage.setItem("displayMode",n);const e=document.documentElement;switch(e.style.filter="none",e.classList.remove("crt-effect"),n){case"monotone":e.style.filter="grayscale(100%)",e.classList.add("crt-effect");break;case"crt":e.style.filter="brightness(1.05) contrast(1.05) saturate(1.05)",e.classList.add("crt-effect");break;case"sepia":e.style.filter="sepia(0.8)";break;case"high-contrast":e.style.filter="contrast(1.5) brightness(1.1)";break;case"dream":e.style.filter="brightness(1.1) contrast(0.9) saturate(1.5) blur(1px)";break;case"invert":e.style.filter="invert(1)";break;default:e.style.filter="none"}};function yk({path:n,isSelected:e,onClick:t,isTile:r=!1}){const{play:s}=pt(ut.BUTTON_CLICK,.3),i=()=>{s(),t()};return g.jsx("div",{className:`w-full ${r?"aspect-square":"aspect-video"} border-2 cursor-pointer hover:opacity-90 ${e?"ring-2 ring-black border-white":"border-transparent"}`,style:{backgroundImage:`url(${n})`,backgroundSize:r?"64px 64px":"cover",backgroundPosition:r?void 0:"center",backgroundRepeat:r?"repeat":void 0},onClick:i})}const o7=["default","macos","bondi","bondi_dark","bondi_light","bondi_medium","bondi_extra_dark","french_blue_dark","french_blue_light","sunny","sunny_dark","sunny_light","poppy","poppy_dark","poppy_light","poppy_medium","azul_dark","azul_light","azul_extra_light","pistachio_dark","pistachio_light","pistachio_medium","candy_bar","candy_bar_sunny","candy_bar_pistachio","candy_bar_azul","waves_sunny","waves_bondi","waves_azul","ripple_poppy","ripple_bondi","ripple_azul","rio_pistachio","rio_azul","bubbles_poppy","bubbles_bondi","bossanova_poppy","bossanova_poppy_2","bossanova_bondi","diagonals_poppy","diagonals_bondi","diagonals_bondi_dark","flat_peanuts","flat_peanuts_poppy","peanuts_pistachio","peanuts_azul"].map(n=>`/wallpapers/tiles/${n}.png`),Ru={"3d_graphics":["capsule","capsule_azul","capsule_pistachio","tub","tub_azul","tub_bondi","ufo_1","ufo_2","ufo_3"],convergency:Array.from({length:15},(n,e)=>`convergence_${e+1}`),foliage:["blue_flowers","cactus","golden_poppy","red_cyclamens","red_tulips","rose","spider_lily","waterdrops_on_leaf","yellow_tulips"],landscapes:["beach","clouds","french_alps","ganges_river","golden_gate_at_dusk","mono_lake","palace_on_lake_in_jaipur","rain_god_mesa","refuge-col_de_la_grasse-alps","zabriskie_point"],nostalgia:["acropolis","beach_on_ko_samui","birds_in_flight","cancun_sunset","cliffs_of_moher","fish_eagle","galway_bay","glacier_national_park","highway_395","hong_kong_at_night","islamorada_sunrise","lily_pad","long_island_sound","mac_os_background","midsummer_night","moraine_lake","oasis_in_baja","red_clouds","toronto_skyline","tuolumne_meadows","yosemite_valley","yucatan"],objects:["alpine_granite","bicycles","bottles","burmese_claypots","burning_candle","chairs","faucet_handle","neon","salt_shaker_top","shamus"],structures:["gate","gate_lock","glass_door_knob","padlock","rusty_lock","shutters","stone_wall","wall_of_stones"]};Object.entries(Ru).forEach(([n,e])=>{Ru[n]=e.map(t=>`/wallpapers/photos/${n}/${t}.jpg`)});const qy=Object.keys(Ru);function a7({onSelect:n}){const{currentWallpaper:e,setWallpaper:t}=mR(),{play:r}=pt(ut.BUTTON_CLICK,.3),[s,i]=b.useState(()=>gR()),[o,a]=b.useState(()=>{if(e.includes("/wallpapers/tiles/"))return"tiles";for(const f of qy)if(e.includes(`/wallpapers/photos/${f}/`))return f;return"tiles"}),c=f=>{t(f),r(),n&&n(f)};b.useEffect(()=>{if(e.includes("/wallpapers/tiles/"))a("tiles");else for(const f of qy)if(e.includes(`/wallpapers/photos/${f}/`)){a(f);break}},[e]);const d=f=>f.split("_").map(m=>m.charAt(0).toUpperCase()+m.slice(1)).join(" "),h=f=>{i(f),yR(f)};return g.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"flex-[3]",children:g.jsxs(Pu,{value:o,onValueChange:f=>a(f),children:[g.jsx(Cl,{children:g.jsx(Du,{placeholder:"Select a category"})}),g.jsxs(_l,{children:[g.jsx(Qn,{value:"tiles",children:"Tiled Patterns"}),qy.map(f=>g.jsx(Qn,{value:f,children:d(f)},f))]})]})}),g.jsxs(Pu,{value:s,onValueChange:h,children:[g.jsx(Cl,{className:"w-[120px]",children:g.jsx(Du,{})}),g.jsxs(_l,{children:[g.jsx(Qn,{value:"color",children:"Color"}),g.jsx(Qn,{value:"monotone",children:"Mono"}),g.jsx(Qn,{value:"crt",children:"CRT"}),g.jsx(Qn,{value:"sepia",children:"Sepia"}),g.jsx(Qn,{value:"high-contrast",children:"High Contrast"}),g.jsx(Qn,{value:"dream",children:"Dream"}),g.jsx(Qn,{value:"invert",children:"Invert"})]})]})]}),g.jsx(Mw,{className:"flex-1 h-[200px]",children:g.jsx("div",{className:`grid gap-2 p-1 ${o==="tiles"?"grid-cols-8":"grid-cols-3"}`,children:o==="tiles"?o7.map(f=>g.jsx(yk,{path:f,isSelected:e===f,onClick:()=>c(f),isTile:!0},f)):Ru[o]?Ru[o].map(f=>g.jsx(yk,{path:f,isSelected:e===f,onClick:()=>c(f)},f)):g.jsx("div",{className:"col-span-4 text-center py-8 text-gray-500",children:"Photos coming soon for this category..."})})})]})}const vR="15.0.4",vk=(n,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:n}),xk=(n,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:n}),h0=(n,e)=>({startTime:e,type:"setValue",value:n}),xR=(n,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:n}),wR=(n,e,{startTime:t,target:r,timeConstant:s})=>r+(e-r)*Math.exp((t-n)/s),Ja=n=>n.type==="exponentialRampToValue",Wf=n=>n.type==="linearRampToValue",$i=n=>Ja(n)||Wf(n),Pw=n=>n.type==="setValue",Ks=n=>n.type==="setValueCurve",$f=(n,e,t,r)=>{const s=n[e];return s===void 0?r:$i(s)||Pw(s)?s.value:Ks(s)?s.values[s.values.length-1]:wR(t,$f(n,e-1,s.startTime,r),s)},wk=(n,e,t,r,s)=>t===void 0?[r.insertTime,s]:$i(t)?[t.endTime,t.value]:Pw(t)?[t.startTime,t.value]:Ks(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,$f(n,e-1,t.startTime,s)],f0=n=>n.type==="cancelAndHold",p0=n=>n.type==="cancelScheduledValues",Ii=n=>f0(n)||p0(n)?n.cancelTime:Ja(n)||Wf(n)?n.endTime:n.startTime,bk=(n,e,t,{endTime:r,value:s})=>t===s?s:0<t&&0<s||t<0&&s<0?t*(s/t)**((n-e)/(r-e)):0,Sk=(n,e,t,{endTime:r,value:s})=>t+(n-e)/(r-e)*(s-t),l7=(n,e)=>{const t=Math.floor(e),r=Math.ceil(e);return t===r?n[t]:(1-(e-t))*n[t]+(1-(r-e))*n[r]},c7=(n,{duration:e,startTime:t,values:r})=>{const s=(n-t)/e*(r.length-1);return l7(r,s)},Wh=n=>n.type==="setTarget";class u7{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=Ii(e);if(f0(e)||p0(e)){const r=this._automationEvents.findIndex(i=>p0(e)&&Ks(i)?i.startTime+i.duration>=t:Ii(i)>=t),s=this._automationEvents[r];if(r!==-1&&(this._automationEvents=this._automationEvents.slice(0,r)),f0(e)){const i=this._automationEvents[this._automationEvents.length-1];if(s!==void 0&&$i(s)){if(i!==void 0&&Wh(i))throw new Error("The internal list is malformed.");const o=i===void 0?s.insertTime:Ks(i)?i.startTime+i.duration:Ii(i),a=i===void 0?this._defaultValue:Ks(i)?i.values[i.values.length-1]:i.value,c=Ja(s)?bk(t,o,a,s):Sk(t,o,a,s),d=Ja(s)?vk(c,t,this._currenTime):xk(c,t,this._currenTime);this._automationEvents.push(d)}if(i!==void 0&&Wh(i)&&this._automationEvents.push(h0(this.getValue(t),t)),i!==void 0&&Ks(i)&&i.startTime+i.duration>t){const o=t-i.startTime,a=(i.values.length-1)/i.duration,c=Math.max(2,1+Math.ceil(o*a)),d=o/(c-1)*a,h=i.values.slice(0,c);if(d<1)for(let f=1;f<c;f+=1){const m=d*f%1;h[f]=i.values[f-1]*(1-m)+i.values[f]*m}this._automationEvents[this._automationEvents.length-1]=xR(h,i.startTime,o)}}}else{const r=this._automationEvents.findIndex(o=>Ii(o)>t),s=r===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[r-1];if(s!==void 0&&Ks(s)&&Ii(s)+s.duration>t)return!1;const i=Ja(e)?vk(e.value,e.endTime,this._currenTime):Wf(e)?xk(e.value,t,this._currenTime):e;if(r===-1)this._automationEvents.push(i);else{if(Ks(e)&&t+e.duration>Ii(this._automationEvents[r]))return!1;this._automationEvents.splice(r,0,i)}}return!0}flush(e){const t=this._automationEvents.findIndex(r=>Ii(r)>e);if(t>1){const r=this._automationEvents.slice(t-1),s=r[0];Wh(s)&&r.unshift(h0($f(this._automationEvents,t-2,s.startTime,this._defaultValue),s.startTime)),this._automationEvents=r}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(o=>Ii(o)>e),r=this._automationEvents[t],s=(t===-1?this._automationEvents.length:t)-1,i=this._automationEvents[s];if(i!==void 0&&Wh(i)&&(r===void 0||!$i(r)||r.insertTime>e))return wR(e,$f(this._automationEvents,s-1,i.startTime,this._defaultValue),i);if(i!==void 0&&Pw(i)&&(r===void 0||!$i(r)))return i.value;if(i!==void 0&&Ks(i)&&(r===void 0||!$i(r)||i.startTime+i.duration>e))return e<i.startTime+i.duration?c7(e,i):i.values[i.values.length-1];if(i!==void 0&&$i(i)&&(r===void 0||!$i(r)))return i.value;if(r!==void 0&&Ja(r)){const[o,a]=wk(this._automationEvents,s,i,r,this._defaultValue);return bk(e,o,a,r)}if(r!==void 0&&Wf(r)){const[o,a]=wk(this._automationEvents,s,i,r,this._defaultValue);return Sk(e,o,a,r)}return this._defaultValue}}const d7=n=>({cancelTime:n,type:"cancelAndHold"}),h7=n=>({cancelTime:n,type:"cancelScheduledValues"}),f7=(n,e)=>({endTime:e,type:"exponentialRampToValue",value:n}),p7=(n,e)=>({endTime:e,type:"linearRampToValue",value:n}),m7=(n,e,t)=>({startTime:e,target:n,timeConstant:t,type:"setTarget"}),g7=()=>new DOMException("","AbortError"),y7=n=>(e,t,[r,s,i],o)=>{n(e[s],[t,r,i],a=>a[0]===t&&a[1]===r,o)},v7=n=>(e,t,r)=>{const s=[];for(let i=0;i<r.numberOfInputs;i+=1)s.push(new Set);n.set(e,{activeInputs:s,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},x7=n=>(e,t)=>{n.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},kl=new WeakSet,bR=new WeakMap,Dw=new WeakMap,SR=new WeakMap,Rw=new WeakMap,Fp=new WeakMap,CR=new WeakMap,m0=new WeakMap,g0=new WeakMap,y0=new WeakMap,_R={construct(){return _R}},w7=n=>{try{const e=new Proxy(n,_R);new e}catch{return!1}return!0},Ck=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,_k=(n,e)=>{const t=[];let r=n.replace(/^[\s]+/,""),s=r.match(Ck);for(;s!==null;){const i=s[1].slice(1,-1),o=s[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());t.push(o),r=r.slice(s[0].length).replace(/^[\s]+/,""),s=r.match(Ck)}return[t.join(";"),r]},Tk=n=>{if(n!==void 0&&!Array.isArray(n))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},kk=n=>{if(!w7(n))throw new TypeError("The given value for processorCtor should be a constructor.");if(n.prototype===null||typeof n.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},b7=(n,e,t,r,s,i,o,a,c,d,h,f,m)=>{let y=0;return(v,w,S={credentials:"omit"})=>{const C=h.get(v);if(C!==void 0&&C.has(w))return Promise.resolve();const T=d.get(v);if(T!==void 0){const N=T.get(w);if(N!==void 0)return N}const k=i(v),M=k.audioWorklet===void 0?s(w).then(([N,O])=>{const[D,I]=_k(N,O),L=`${D};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${I}
})})(window,'_AWGS')`;return t(L)}).then(()=>{const N=m._AWGS.pop();if(N===void 0)throw new SyntaxError;r(k.currentTime,k.sampleRate,()=>N(class{},void 0,(O,D)=>{if(O.trim()==="")throw e();const I=g0.get(k);if(I!==void 0){if(I.has(O))throw e();kk(D),Tk(D.parameterDescriptors),I.set(O,D)}else kk(D),Tk(D.parameterDescriptors),g0.set(k,new Map([[O,D]]))},k.sampleRate,void 0,void 0))}):Promise.all([s(w),Promise.resolve(n(f,f))]).then(([[N,O],D])=>{const I=y+1;y=I;const[L,A]=_k(N,O),B=`${L};((AudioWorkletProcessor,registerProcessor)=>{${A}
})(${D?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${D?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${D?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${I}',class extends AudioWorkletProcessor{process(){return !1}})`,q=new Blob([B],{type:"application/javascript; charset=utf-8"}),K=URL.createObjectURL(q);return k.audioWorklet.addModule(K,S).then(()=>{if(a(k))return k;const G=o(k);return G.audioWorklet.addModule(K,S).then(()=>G)}).then(G=>{if(c===null)throw new SyntaxError;try{new c(G,`__sac${I}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(K))});return T===void 0?d.set(v,new Map([[w,M]])):T.set(w,M),M.then(()=>{const N=h.get(v);N===void 0?h.set(v,new Set([w])):N.add(w)}).finally(()=>{const N=d.get(v);N!==void 0&&N.delete(w)}),M}},ts=(n,e)=>{const t=n.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},Vp=(n,e)=>{const t=Array.from(n).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[r]=t;return n.delete(r),r},TR=(n,e,t,r)=>{const s=ts(n,e),i=Vp(s,o=>o[0]===t&&o[1]===r);return s.size===0&&n.delete(e),i},td=n=>ts(CR,n),El=n=>{if(kl.has(n))throw new Error("The AudioNode is already stored.");kl.add(n),td(n).forEach(e=>e(!0))},kR=n=>"port"in n,nd=n=>{if(!kl.has(n))throw new Error("The AudioNode is not stored.");kl.delete(n),td(n).forEach(e=>e(!1))},v0=(n,e)=>{!kR(n)&&e.every(t=>t.size===0)&&nd(n)},S7=(n,e,t,r,s,i,o,a,c,d,h,f,m)=>{const y=new WeakMap;return(v,w,S,C,T)=>{const{activeInputs:k,passiveInputs:M}=i(w),{outputs:N}=i(v),O=a(v),D=I=>{const L=c(w),A=c(v);if(I){const V=TR(M,v,S,C);n(k,v,V,!1),!T&&!f(v)&&t(A,L,S,C),m(w)&&El(w)}else{const V=r(k,v,S,C);e(M,C,V,!1),!T&&!f(v)&&s(A,L,S,C);const F=o(w);if(F===0)h(w)&&v0(w,k);else{const U=y.get(w);U!==void 0&&clearTimeout(U),y.set(w,setTimeout(()=>{h(w)&&v0(w,k)},F*1e3))}}};return d(N,[w,S,C],I=>I[0]===w&&I[1]===S&&I[2]===C,!0)?(O.add(D),h(v)?n(k,v,[S,C,D],!0):e(M,C,[v,S,D],!0),!0):!1}},C7=n=>(e,t,[r,s,i],o)=>{const a=e.get(r);a===void 0?e.set(r,new Set([[s,t,i]])):n(a,[s,t,i],c=>c[0]===s&&c[1]===t,o)},_7=n=>(e,t)=>{const r=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(r).connect(e.destination);const s=()=>{t.removeEventListener("ended",s),t.disconnect(r),r.disconnect()};t.addEventListener("ended",s)},T7=n=>(e,t)=>{n(e).add(t)},k7={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},E7=(n,e,t,r,s,i)=>class extends n{constructor(a,c){const d=s(a),h={...k7,...c},f=r(d,h),m=i(d)?e():null;super(a,!1,f,m),this._nativeAnalyserNode=f}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},Rn=(n,e)=>n.context===e,N7=(n,e,t)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Rn(a,o)){const d={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=n(o,d)}return r.set(o,a),await t(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},Hf=n=>{try{n.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Os=()=>new DOMException("","IndexSizeError"),Iw=n=>{n.getChannelData=(e=>t=>{try{return e.call(n,t)}catch(r){throw r.code===12?Os():r}})(n.getChannelData)},A7={numberOfChannels:1},M7=(n,e,t,r,s,i,o,a)=>{let c=null;return class ER{constructor(h){if(s===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:f,numberOfChannels:m,sampleRate:y}={...A7,...h};c===null&&(c=new s(1,1,44100));const v=r!==null&&e(i,i)?new r({length:f,numberOfChannels:m,sampleRate:y}):c.createBuffer(m,f,y);if(v.numberOfChannels===0)throw t();return typeof v.copyFromChannel!="function"?(o(v),Iw(v)):e(Hf,()=>Hf(v))||a(v),n.add(v),v}static[Symbol.hasInstance](h){return h!==null&&typeof h=="object"&&Object.getPrototypeOf(h)===ER.prototype||n.has(h)}}},lr=-34028234663852886e22,Ln=34028234663852886e22,ti=n=>kl.has(n),O7={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},P7=(n,e,t,r,s,i,o,a)=>class extends n{constructor(d,h){const f=i(d),m={...O7,...h},y=s(f,m),v=o(f),w=v?e():null;super(d,!1,y,w),this._audioBufferSourceNodeRenderer=w,this._isBufferNullified=!1,this._isBufferSet=m.buffer!==null,this._nativeAudioBufferSourceNode=y,this._onended=null,this._playbackRate=t(this,v,y.playbackRate,Ln,lr)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(d){if(this._nativeAudioBufferSourceNode.buffer=d,d!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(d){this._nativeAudioBufferSourceNode.loop=d}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(d){this._nativeAudioBufferSourceNode.loopEnd=d}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(d){this._nativeAudioBufferSourceNode.loopStart=d}get onended(){return this._onended}set onended(d){const h=typeof d=="function"?a(this,d):null;this._nativeAudioBufferSourceNode.onended=h;const f=this._nativeAudioBufferSourceNode.onended;this._onended=f!==null&&f===h?d:f}get playbackRate(){return this._playbackRate}start(d=0,h=0,f){if(this._nativeAudioBufferSourceNode.start(d,h,f),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=f===void 0?[d,h]:[d,h,f]),this.context.state!=="closed"){El(this);const m=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",m),ti(this)&&nd(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",m)}}stop(d=0){this._nativeAudioBufferSourceNode.stop(d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=d)}},D7=(n,e,t,r,s)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(d,h)=>{let f=t(d);const m=Rn(f,h);if(!m){const y={buffer:f.buffer,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,loop:f.loop,loopEnd:f.loopEnd,loopStart:f.loopStart,playbackRate:f.playbackRate.value};f=e(h,y),o!==null&&f.start(...o),a!==null&&f.stop(a)}return i.set(h,f),m?await n(h,d.playbackRate,f.playbackRate):await r(h,d.playbackRate,f.playbackRate),await s(d,h,f),f};return{set start(d){o=d},set stop(d){a=d},render(d,h){const f=i.get(h);return f!==void 0?Promise.resolve(f):c(d,h)}}},R7=n=>"playbackRate"in n,I7=n=>"frequency"in n&&"gain"in n,j7=n=>"offset"in n,L7=n=>!("frequency"in n)&&"gain"in n,F7=n=>"detune"in n&&"frequency"in n&&!("gain"in n),V7=n=>"pan"in n,Vn=n=>ts(bR,n),rd=n=>ts(SR,n),x0=(n,e)=>{const{activeInputs:t}=Vn(n);t.forEach(s=>s.forEach(([i])=>{e.includes(n)||x0(i,[...e,n])}));const r=R7(n)?[n.playbackRate]:kR(n)?Array.from(n.parameters.values()):I7(n)?[n.Q,n.detune,n.frequency,n.gain]:j7(n)?[n.offset]:L7(n)?[n.gain]:F7(n)?[n.detune,n.frequency]:V7(n)?[n.pan]:[];for(const s of r){const i=rd(s);i!==void 0&&i.activeInputs.forEach(([o])=>x0(o,e))}ti(n)&&nd(n)},NR=n=>{x0(n.destination,[])},B7=n=>n===void 0||typeof n=="number"||typeof n=="string"&&(n==="balanced"||n==="interactive"||n==="playback"),z7=(n,e,t,r,s,i,o,a,c)=>class extends n{constructor(h={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let f;try{f=new c(h)}catch(v){throw v.code===12&&v.message==="sampleRate is not in range"?t():v}if(f===null)throw r();if(!B7(h.latencyHint))throw new TypeError(`The provided value '${h.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(h.sampleRate!==void 0&&f.sampleRate!==h.sampleRate)throw t();super(f,2);const{latencyHint:m}=h,{sampleRate:y}=f;if(this._baseLatency=typeof f.baseLatency=="number"?f.baseLatency:m==="balanced"?512/y:m==="interactive"||m===void 0?256/y:m==="playback"?1024/y:Math.max(2,Math.min(128,Math.round(m*y/128)))*128/y,this._nativeAudioContext=f,c.name==="webkitAudioContext"?(this._nativeGainNode=f.createGain(),this._nativeOscillatorNode=f.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(f.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,f.state==="running"){this._state="suspended";const v=()=>{this._state==="suspended"&&(this._state=null),f.removeEventListener("statechange",v)};f.addEventListener("statechange",v)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),NR(this)}))}createMediaElementSource(h){return new s(this,{mediaElement:h})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(h){return new o(this,{mediaStream:h})}createMediaStreamTrackSource(h){return new a(this,{mediaStreamTrack:h})}resume(){return this._state==="suspended"?new Promise((h,f)=>{const m=()=>{this._nativeAudioContext.removeEventListener("statechange",m),this._nativeAudioContext.state==="running"?h():this.resume().then(h,f)};this._nativeAudioContext.addEventListener("statechange",m)}):this._nativeAudioContext.resume().catch(h=>{throw h===void 0||h.code===15?e():h})}suspend(){return this._nativeAudioContext.suspend().catch(h=>{throw h===void 0?e():h})}},W7=(n,e,t,r,s,i,o,a)=>class extends n{constructor(d,h){const f=i(d),m=o(f),y=s(f,h,m),v=m?e(a):null;super(d,!1,y,v),this._isNodeOfNativeOfflineAudioContext=m,this._nativeAudioDestinationNode=y}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(d){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(d>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=d}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(d){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=d}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},$7=n=>{const e=new WeakMap,t=async(r,s)=>{const i=s.destination;return e.set(s,i),await n(r,s,i),i};return{render(r,s){const i=e.get(s);return i!==void 0?Promise.resolve(i):t(r,s)}}},H7=(n,e,t,r,s,i,o,a)=>(c,d)=>{const h=d.listener,f=()=>{const N=new Float32Array(1),O=e(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),D=o(d);let I=!1,L=[0,0,-1,0,1,0],A=[0,0,0];const V=()=>{if(I)return;I=!0;const q=r(d,256,9,0);q.onaudioprocess=({inputBuffer:K})=>{const G=[i(K,N,0),i(K,N,1),i(K,N,2),i(K,N,3),i(K,N,4),i(K,N,5)];G.some((z,W)=>z!==L[W])&&(h.setOrientation(...G),L=G);const $=[i(K,N,6),i(K,N,7),i(K,N,8)];$.some((z,W)=>z!==A[W])&&(h.setPosition(...$),A=$)},O.connect(q)},F=q=>K=>{K!==L[q]&&(L[q]=K,h.setOrientation(...L))},U=q=>K=>{K!==A[q]&&(A[q]=K,h.setPosition(...A))},B=(q,K,G)=>{const $=t(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:K});$.connect(O,0,q),$.start(),Object.defineProperty($.offset,"defaultValue",{get(){return K}});const z=n({context:c},D,$.offset,Ln,lr);return a(z,"value",W=>()=>W.call(z),W=>P=>{try{W.call(z,P)}catch(j){if(j.code!==9)throw j}V(),D&&G(P)}),z.cancelAndHoldAtTime=(W=>D?()=>{throw s()}:(...P)=>{const j=W.apply(z,P);return V(),j})(z.cancelAndHoldAtTime),z.cancelScheduledValues=(W=>D?()=>{throw s()}:(...P)=>{const j=W.apply(z,P);return V(),j})(z.cancelScheduledValues),z.exponentialRampToValueAtTime=(W=>D?()=>{throw s()}:(...P)=>{const j=W.apply(z,P);return V(),j})(z.exponentialRampToValueAtTime),z.linearRampToValueAtTime=(W=>D?()=>{throw s()}:(...P)=>{const j=W.apply(z,P);return V(),j})(z.linearRampToValueAtTime),z.setTargetAtTime=(W=>D?()=>{throw s()}:(...P)=>{const j=W.apply(z,P);return V(),j})(z.setTargetAtTime),z.setValueAtTime=(W=>D?()=>{throw s()}:(...P)=>{const j=W.apply(z,P);return V(),j})(z.setValueAtTime),z.setValueCurveAtTime=(W=>D?()=>{throw s()}:(...P)=>{const j=W.apply(z,P);return V(),j})(z.setValueCurveAtTime),z};return{forwardX:B(0,0,F(0)),forwardY:B(1,0,F(1)),forwardZ:B(2,-1,F(2)),positionX:B(6,0,U(0)),positionY:B(7,0,U(1)),positionZ:B(8,0,U(2)),upX:B(3,0,F(3)),upY:B(4,1,F(4)),upZ:B(5,0,F(5))}},{forwardX:m,forwardY:y,forwardZ:v,positionX:w,positionY:S,positionZ:C,upX:T,upY:k,upZ:M}=h.forwardX===void 0?f():h;return{get forwardX(){return m},get forwardY(){return y},get forwardZ(){return v},get positionX(){return w},get positionY(){return S},get positionZ(){return C},get upX(){return T},get upY(){return k},get upZ(){return M}}},Uf=n=>"context"in n,sd=n=>Uf(n[0]),la=(n,e,t,r)=>{for(const s of n)if(t(s)){if(r)return!1;throw Error("The set contains at least one similar element.")}return n.add(e),!0},Ek=(n,e,[t,r],s)=>{la(n,[e,t,r],i=>i[0]===e&&i[1]===t,s)},Nk=(n,[e,t,r],s)=>{const i=n.get(e);i===void 0?n.set(e,new Set([[t,r]])):la(i,[t,r],o=>o[0]===t,s)},Gl=n=>"inputs"in n,qf=(n,e,t,r)=>{if(Gl(e)){const s=e.inputs[r];return n.connect(s,t,0),[s,t,0]}return n.connect(e,t,r),[e,t,r]},AR=(n,e,t)=>{for(const r of n)if(r[0]===e&&r[1]===t)return n.delete(r),r;return null},U7=(n,e,t)=>Vp(n,r=>r[0]===e&&r[1]===t),MR=(n,e)=>{if(!td(n).delete(e))throw new Error("Missing the expected event listener.")},OR=(n,e,t)=>{const r=ts(n,e),s=Vp(r,i=>i[0]===t);return r.size===0&&n.delete(e),s},Gf=(n,e,t,r)=>{Gl(e)?n.disconnect(e.inputs[r],t,0):n.disconnect(e,t,r)},_t=n=>ts(Dw,n),Iu=n=>ts(Rw,n),ea=n=>m0.has(n),af=n=>!kl.has(n),Ak=(n,e)=>new Promise(t=>{if(e!==null)t(!0);else{const r=n.createScriptProcessor(256,1,1),s=n.createGain(),i=n.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=n.createBufferSource();a.buffer=i,a.loop=!0,a.connect(r).connect(n.destination),a.connect(s),a.disconnect(s),r.onaudioprocess=c=>{const d=c.inputBuffer.getChannelData(0);Array.prototype.some.call(d,h=>h===1)?t(!0):t(!1),a.stop(),r.onaudioprocess=null,a.disconnect(r),r.disconnect(n.destination)},a.start()}}),Gy=(n,e)=>{const t=new Map;for(const r of n)for(const s of r){const i=t.get(s);t.set(s,i===void 0?1:i+1)}t.forEach((r,s)=>e(s,r))},Kf=n=>"context"in n,q7=n=>{const e=new Map;n.connect=(t=>(r,s=0,i=0)=>{const o=Kf(r)?t(r,s,i):t(r,s),a=e.get(r);return a===void 0?e.set(r,[{input:i,output:s}]):a.every(c=>c.input!==i||c.output!==s)&&a.push({input:i,output:s}),o})(n.connect.bind(n)),n.disconnect=(t=>(r,s,i)=>{if(t.apply(n),r===void 0)e.clear();else if(typeof r=="number")for(const[o,a]of e){const c=a.filter(d=>d.output!==r);c.length===0?e.delete(o):e.set(o,c)}else if(e.has(r))if(s===void 0)e.delete(r);else{const o=e.get(r);if(o!==void 0){const a=o.filter(c=>c.output!==s&&(c.input!==i||i===void 0));a.length===0?e.delete(r):e.set(r,a)}}for(const[o,a]of e)a.forEach(c=>{Kf(o)?n.connect(o,c.output,c.input):n.connect(o,c.output)})})(n.disconnect)},G7=(n,e,t,r)=>{const{activeInputs:s,passiveInputs:i}=rd(e),{outputs:o}=Vn(n),a=td(n),c=d=>{const h=_t(n),f=Iu(e);if(d){const m=OR(i,n,t);Ek(s,n,m,!1),!r&&!ea(n)&&h.connect(f,t)}else{const m=U7(s,n,t);Nk(i,m,!1),!r&&!ea(n)&&h.disconnect(f,t)}};return la(o,[e,t],d=>d[0]===e&&d[1]===t,!0)?(a.add(c),ti(n)?Ek(s,n,[t,c],!0):Nk(i,[n,t,c],!0),!0):!1},K7=(n,e,t,r)=>{const{activeInputs:s,passiveInputs:i}=Vn(e),o=AR(s[r],n,t);return o===null?[TR(i,n,t,r)[2],!1]:[o[2],!0]},Y7=(n,e,t)=>{const{activeInputs:r,passiveInputs:s}=rd(e),i=AR(r,n,t);return i===null?[OR(s,n,t)[1],!1]:[i[2],!0]},jw=(n,e,t,r,s)=>{const[i,o]=K7(n,t,r,s);if(i!==null&&(MR(n,i),o&&!e&&!ea(n)&&Gf(_t(n),_t(t),r,s)),ti(t)){const{activeInputs:a}=Vn(t);v0(t,a)}},Lw=(n,e,t,r)=>{const[s,i]=Y7(n,t,r);s!==null&&(MR(n,s),i&&!e&&!ea(n)&&_t(n).disconnect(Iu(t),r))},X7=(n,e)=>{const t=Vn(n),r=[];for(const s of t.outputs)sd(s)?jw(n,e,...s):Lw(n,e,...s),r.push(s[0]);return t.outputs.clear(),r},J7=(n,e,t)=>{const r=Vn(n),s=[];for(const i of r.outputs)i[1]===t&&(sd(i)?jw(n,e,...i):Lw(n,e,...i),s.push(i[0]),r.outputs.delete(i));return s},Z7=(n,e,t,r,s)=>{const i=Vn(n);return Array.from(i.outputs).filter(o=>o[0]===t&&(r===void 0||o[1]===r)&&(s===void 0||o[2]===s)).map(o=>(sd(o)?jw(n,e,...o):Lw(n,e,...o),i.outputs.delete(o),o[0]))},Q7=(n,e,t,r,s,i,o,a,c,d,h,f,m,y,v,w)=>class extends d{constructor(C,T,k,M){super(k),this._context=C,this._nativeAudioNode=k;const N=h(C);f(N)&&t(Ak,()=>Ak(N,w))!==!0&&q7(k),Dw.set(this,k),CR.set(this,new Set),C.state!=="closed"&&T&&El(this),n(this,M,k)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(C){this._nativeAudioNode.channelCount=C}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(C){this._nativeAudioNode.channelCountMode=C}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(C){this._nativeAudioNode.channelInterpretation=C}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(C,T=0,k=0){if(T<0||T>=this._nativeAudioNode.numberOfOutputs)throw s();const M=h(this._context),N=v(M);if(m(C)||y(C))throw i();if(Uf(C)){const I=_t(C);try{const A=qf(this._nativeAudioNode,I,T,k),V=af(this);(N||V)&&this._nativeAudioNode.disconnect(...A),this.context.state!=="closed"&&!V&&af(C)&&El(C)}catch(A){throw A.code===12?i():A}if(e(this,C,T,k,N)){const A=c([this],C);Gy(A,r(N))}return C}const O=Iu(C);if(O.name==="playbackRate"&&O.maxValue===1024)throw o();try{this._nativeAudioNode.connect(O,T),(N||af(this))&&this._nativeAudioNode.disconnect(O,T)}catch(I){throw I.code===12?i():I}if(G7(this,C,T,N)){const I=c([this],C);Gy(I,r(N))}}disconnect(C,T,k){let M;const N=h(this._context),O=v(N);if(C===void 0)M=X7(this,O);else if(typeof C=="number"){if(C<0||C>=this.numberOfOutputs)throw s();M=J7(this,O,C)}else{if(T!==void 0&&(T<0||T>=this.numberOfOutputs)||Uf(C)&&k!==void 0&&(k<0||k>=C.numberOfInputs))throw s();if(M=Z7(this,O,C,T,k),M.length===0)throw i()}for(const D of M){const I=c([this],D);Gy(I,a)}}},eY=(n,e,t,r,s,i,o,a,c,d,h,f,m)=>(y,v,w,S=null,C=null)=>{const T=w.value,k=new u7(T),M=v?r(k):null,N={get defaultValue(){return T},get maxValue(){return S===null?w.maxValue:S},get minValue(){return C===null?w.minValue:C},get value(){return w.value},set value(O){w.value=O,N.setValueAtTime(O,y.context.currentTime)},cancelAndHoldAtTime(O){if(typeof w.cancelAndHoldAtTime=="function")M===null&&k.flush(y.context.currentTime),k.add(s(O)),w.cancelAndHoldAtTime(O);else{const D=Array.from(k).pop();M===null&&k.flush(y.context.currentTime),k.add(s(O));const I=Array.from(k).pop();w.cancelScheduledValues(O),D!==I&&I!==void 0&&(I.type==="exponentialRampToValue"?w.exponentialRampToValueAtTime(I.value,I.endTime):I.type==="linearRampToValue"?w.linearRampToValueAtTime(I.value,I.endTime):I.type==="setValue"?w.setValueAtTime(I.value,I.startTime):I.type==="setValueCurve"&&w.setValueCurveAtTime(I.values,I.startTime,I.duration))}return N},cancelScheduledValues(O){return M===null&&k.flush(y.context.currentTime),k.add(i(O)),w.cancelScheduledValues(O),N},exponentialRampToValueAtTime(O,D){if(O===0)throw new RangeError;if(!Number.isFinite(D)||D<0)throw new RangeError;const I=y.context.currentTime;return M===null&&k.flush(I),Array.from(k).length===0&&(k.add(d(T,I)),w.setValueAtTime(T,I)),k.add(o(O,D)),w.exponentialRampToValueAtTime(O,D),N},linearRampToValueAtTime(O,D){const I=y.context.currentTime;return M===null&&k.flush(I),Array.from(k).length===0&&(k.add(d(T,I)),w.setValueAtTime(T,I)),k.add(a(O,D)),w.linearRampToValueAtTime(O,D),N},setTargetAtTime(O,D,I){return M===null&&k.flush(y.context.currentTime),k.add(c(O,D,I)),w.setTargetAtTime(O,D,I),N},setValueAtTime(O,D){return M===null&&k.flush(y.context.currentTime),k.add(d(O,D)),w.setValueAtTime(O,D),N},setValueCurveAtTime(O,D,I){const L=O instanceof Float32Array?O:new Float32Array(O);if(f!==null&&f.name==="webkitAudioContext"){const A=D+I,V=y.context.sampleRate,F=Math.ceil(D*V),U=Math.floor(A*V),B=U-F,q=new Float32Array(B);for(let G=0;G<B;G+=1){const $=(L.length-1)/I*((F+G)/V-D),z=Math.floor($),W=Math.ceil($);q[G]=z===W?L[z]:(1-($-z))*L[z]+(1-(W-$))*L[W]}M===null&&k.flush(y.context.currentTime),k.add(h(q,D,I)),w.setValueCurveAtTime(q,D,I);const K=U/V;K<A&&m(N,q[q.length-1],K),m(N,L[L.length-1],A)}else M===null&&k.flush(y.context.currentTime),k.add(h(L,D,I)),w.setValueCurveAtTime(L,D,I);return N}};return t.set(N,w),e.set(N,y),n(N,M),N},tY=n=>({replay(e){for(const t of n)if(t.type==="exponentialRampToValue"){const{endTime:r,value:s}=t;e.exponentialRampToValueAtTime(s,r)}else if(t.type==="linearRampToValue"){const{endTime:r,value:s}=t;e.linearRampToValueAtTime(s,r)}else if(t.type==="setTarget"){const{startTime:r,target:s,timeConstant:i}=t;e.setTargetAtTime(s,r,i)}else if(t.type==="setValue"){const{startTime:r,value:s}=t;e.setValueAtTime(s,r)}else if(t.type==="setValueCurve"){const{duration:r,startTime:s,values:i}=t;e.setValueCurveAtTime(i,s,r)}else throw new Error("Can't apply an unknown automation.")}});class PR{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((r,s)=>e.call(t,r,s,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const nY={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},rY=(n,e,t,r,s,i,o,a,c,d,h,f,m,y)=>class extends e{constructor(w,S,C){var T;const k=a(w),M=c(k),N=h({...nY,...C});m(N);const O=g0.get(k),D=O==null?void 0:O.get(S),I=M||k.state!=="closed"?k:(T=o(k))!==null&&T!==void 0?T:k,L=s(I,M?null:w.baseLatency,d,S,D,N),A=M?r(S,N,D):null;super(w,!0,L,A);const V=[];L.parameters.forEach((U,B)=>{const q=t(this,M,U);V.push([B,q])}),this._nativeAudioWorkletNode=L,this._onprocessorerror=null,this._parameters=new PR(V),M&&n(k,this);const{activeInputs:F}=i(this);f(L,F)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(w){const S=typeof w=="function"?y(this,w):null;this._nativeAudioWorkletNode.onprocessorerror=S;const C=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=C!==null&&C===S?w:C}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Yf(n,e,t,r,s){if(typeof n.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),n.copyFromChannel(e[t],r,s);else{const i=n.getChannelData(r);if(e[t].byteLength===0)e[t]=i.slice(s,s+128);else{const o=new Float32Array(i.buffer,s*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(o)}}}const DR=(n,e,t,r,s)=>{typeof n.copyToChannel=="function"?e[t].byteLength!==0&&n.copyToChannel(e[t],r,s):e[t].byteLength!==0&&n.getChannelData(r).set(e[t],s)},Xf=(n,e)=>{const t=[];for(let r=0;r<n;r+=1){const s=[],i=typeof e=="number"?e:e[r];for(let o=0;o<i;o+=1)s.push(new Float32Array(128));t.push(s)}return t},sY=(n,e)=>{const t=ts(y0,n),r=_t(e);return ts(t,r)},iY=async(n,e,t,r,s,i,o)=>{const a=e===null?Math.ceil(n.context.length/128)*128:e.length,c=r.channelCount*r.numberOfInputs,d=s.reduce((S,C)=>S+C,0),h=d===0?null:t.createBuffer(d,a,t.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const f=Vn(n),m=await sY(t,n),y=Xf(r.numberOfInputs,r.channelCount),v=Xf(r.numberOfOutputs,s),w=Array.from(n.parameters.keys()).reduce((S,C)=>({...S,[C]:new Float32Array(128)}),{});for(let S=0;S<a;S+=128){if(r.numberOfInputs>0&&e!==null)for(let C=0;C<r.numberOfInputs;C+=1)for(let T=0;T<r.channelCount;T+=1)Yf(e,y[C],T,T,S);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:C},T)=>{Yf(e,w,C,c+T,S)});for(let C=0;C<r.numberOfInputs;C+=1)for(let T=0;T<s[C];T+=1)v[C][T].byteLength===0&&(v[C][T]=new Float32Array(128));try{const C=y.map((k,M)=>f.activeInputs[M].size===0?[]:k),T=o(S/t.sampleRate,t.sampleRate,()=>m.process(C,v,w));if(h!==null)for(let k=0,M=0;k<r.numberOfOutputs;k+=1){for(let N=0;N<s[k];N+=1)DR(h,v[k],N,M+N,S);M+=s[k]}if(!T)break}catch(C){n.dispatchEvent(new ErrorEvent("processorerror",{colno:C.colno,filename:C.filename,lineno:C.lineno,message:C.message}));break}}return h},oY=(n,e,t,r,s,i,o,a,c,d,h,f,m,y,v,w)=>(S,C,T)=>{const k=new WeakMap;let M=null;const N=async(O,D)=>{let I=h(O),L=null;const A=Rn(I,D),V=Array.isArray(C.outputChannelCount)?C.outputChannelCount:Array.from(C.outputChannelCount);if(f===null){const F=V.reduce((K,G)=>K+G,0),U=s(D,{channelCount:Math.max(1,F),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,F)}),B=[];for(let K=0;K<O.numberOfOutputs;K+=1)B.push(r(D,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:V[K]}));const q=o(D,{channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation,gain:1});q.connect=e.bind(null,B),q.disconnect=c.bind(null,B),L=[U,B,q]}else A||(I=new f(D,S));if(k.set(D,L===null?I:L[2]),L!==null){if(M===null){if(T===void 0)throw new Error("Missing the processor constructor.");if(m===null)throw new Error("Missing the native OfflineAudioContext constructor.");const G=O.channelCount*O.numberOfInputs,$=T.parameterDescriptors===void 0?0:T.parameterDescriptors.length,z=G+$;M=iY(O,z===0?null:await(async()=>{const P=new m(z,Math.ceil(O.context.length/128)*128,D.sampleRate),j=[],J=[];for(let ue=0;ue<C.numberOfInputs;ue+=1)j.push(o(P,{channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation,gain:1})),J.push(s(P,{channelCount:C.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:C.channelCount}));const te=await Promise.all(Array.from(O.parameters.values()).map(async ue=>{const ce=i(P,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ue.value});return await y(P,ue,ce.offset),ce})),ne=r(P,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,G+$)});for(let ue=0;ue<C.numberOfInputs;ue+=1){j[ue].connect(J[ue]);for(let ce=0;ce<C.channelCount;ce+=1)J[ue].connect(ne,ce,ue*C.channelCount+ce)}for(const[ue,ce]of te.entries())ce.connect(ne,0,G+ue),ce.start(0);return ne.connect(P.destination),await Promise.all(j.map(ue=>v(O,P,ue))),w(P)})(),D,C,V,T,d)}const F=await M,U=t(D,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[B,q,K]=L;F!==null&&(U.buffer=F,U.start(0)),U.connect(B);for(let G=0,$=0;G<O.numberOfOutputs;G+=1){const z=q[G];for(let W=0;W<V[G];W+=1)B.connect(z,$+W,W);$+=V[G]}return K}if(A)for(const[F,U]of O.parameters.entries())await n(D,U,I.parameters.get(F));else for(const[F,U]of O.parameters.entries())await y(D,U,I.parameters.get(F));return await v(O,D,I),I};return{render(O,D){a(D,O);const I=k.get(D);return I!==void 0?Promise.resolve(I):N(O,D)}}},aY=(n,e,t,r,s,i,o,a,c,d,h,f,m,y,v,w,S,C,T,k)=>class extends v{constructor(N,O){super(N,O),this._nativeContext=N,this._audioWorklet=n===void 0?void 0:{addModule:(D,I)=>n(this,D,I)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new s(this)}createBuffer(N,O,D){return new t({length:O,numberOfChannels:N,sampleRate:D})}createBufferSource(){return new r(this)}createChannelMerger(N=6){return new i(this,{numberOfInputs:N})}createChannelSplitter(N=6){return new o(this,{numberOfOutputs:N})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(N=1){return new h(this,{maxDelayTime:N})}createDynamicsCompressor(){return new f(this)}createGain(){return new m(this)}createIIRFilter(N,O){return new y(this,{feedback:O,feedforward:N})}createOscillator(){return new w(this)}createPanner(){return new S(this)}createPeriodicWave(N,O,D={disableNormalization:!1}){return new C(this,{...D,imag:O,real:N})}createStereoPanner(){return new T(this)}createWaveShaper(){return new k(this)}decodeAudioData(N,O,D){return d(this._nativeContext,N).then(I=>(typeof O=="function"&&O(I),I),I=>{throw typeof D=="function"&&D(I),I})}},lY={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},cY=(n,e,t,r,s,i,o,a)=>class extends n{constructor(d,h){const f=i(d),m={...lY,...h},y=s(f,m),v=o(f),w=v?t():null;super(d,!1,y,w),this._Q=e(this,v,y.Q,Ln,lr),this._detune=e(this,v,y.detune,1200*Math.log2(Ln),-1200*Math.log2(Ln)),this._frequency=e(this,v,y.frequency,d.sampleRate/2,0),this._gain=e(this,v,y.gain,40*Math.log10(Ln),lr),this._nativeBiquadFilterNode=y,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(d){this._nativeBiquadFilterNode.type=d}getFrequencyResponse(d,h,f){try{this._nativeBiquadFilterNode.getFrequencyResponse(d,h,f)}catch(m){throw m.code===11?r():m}if(d.length!==h.length||h.length!==f.length)throw r()}},uY=(n,e,t,r,s)=>()=>{const i=new WeakMap,o=async(a,c)=>{let d=t(a);const h=Rn(d,c);if(!h){const f={Q:d.Q.value,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,gain:d.gain.value,type:d.type};d=e(c,f)}return i.set(c,d),h?(await n(c,a.Q,d.Q),await n(c,a.detune,d.detune),await n(c,a.frequency,d.frequency),await n(c,a.gain,d.gain)):(await r(c,a.Q,d.Q),await r(c,a.detune,d.detune),await r(c,a.frequency,d.frequency),await r(c,a.gain,d.gain)),await s(a,c,d),d};return{render(a,c){const d=i.get(c);return d!==void 0?Promise.resolve(d):o(a,c)}}},dY=(n,e)=>(t,r)=>{const s=e.get(t);if(s!==void 0)return s;const i=n.get(t);if(i!==void 0)return i;try{const o=r();return o instanceof Promise?(n.set(t,o),o.catch(()=>!1).then(a=>(n.delete(t),e.set(t,a),a))):(e.set(t,o),o)}catch{return e.set(t,!1),!1}},hY={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},fY=(n,e,t,r,s)=>class extends n{constructor(o,a){const c=r(o),d={...hY,...a},h=t(c,d),f=s(c)?e():null;super(o,!1,h,f)}},pY=(n,e,t)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Rn(a,o)){const d={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=n(o,d)}return r.set(o,a),await t(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},mY={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},gY=(n,e,t,r,s,i)=>class extends n{constructor(a,c){const d=r(a),h=i({...mY,...c}),f=t(d,h),m=s(d)?e():null;super(a,!1,f,m)}},yY=(n,e,t)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Rn(a,o)){const d={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=n(o,d)}return r.set(o,a),await t(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},vY=n=>(e,t,r)=>n(t,e,r),xY=n=>(e,t,r=0,s=0)=>{const i=e[r];if(i===void 0)throw n();return Kf(t)?i.connect(t,0,s):i.connect(t,0)},wY=n=>(e,t)=>{const r=n(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),s=e.createBuffer(1,2,44100);return r.buffer=s,r.loop=!0,r.connect(t),r.start(),()=>{r.stop(),r.disconnect(t)}},bY={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},SY=(n,e,t,r,s,i,o)=>class extends n{constructor(c,d){const h=s(c),f={...bY,...d},m=r(h,f),y=i(h),v=y?t():null;super(c,!1,m,v),this._constantSourceNodeRenderer=v,this._nativeConstantSourceNode=m,this._offset=e(this,y,m.offset,Ln,lr),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const d=typeof c=="function"?o(this,c):null;this._nativeConstantSourceNode.onended=d;const h=this._nativeConstantSourceNode.onended;this._onended=h!==null&&h===d?c:h}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){El(this);const d=()=>{this._nativeConstantSourceNode.removeEventListener("ended",d),ti(this)&&nd(this)};this._nativeConstantSourceNode.addEventListener("ended",d)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}},CY=(n,e,t,r,s)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(d,h)=>{let f=t(d);const m=Rn(f,h);if(!m){const y={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,offset:f.offset.value};f=e(h,y),o!==null&&f.start(o),a!==null&&f.stop(a)}return i.set(h,f),m?await n(h,d.offset,f.offset):await r(h,d.offset,f.offset),await s(d,h,f),f};return{set start(d){o=d},set stop(d){a=d},render(d,h){const f=i.get(h);return f!==void 0?Promise.resolve(f):c(d,h)}}},_Y=n=>e=>(n[0]=e,n[0]),TY={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},kY=(n,e,t,r,s,i)=>class extends n{constructor(a,c){const d=r(a),h={...TY,...c},f=t(d,h),y=s(d)?e():null;super(a,!1,f,y),this._isBufferNullified=!1,this._nativeConvolverNode=f,h.buffer!==null&&i(this,h.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},EY=(n,e,t)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Rn(a,o)){const d={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=n(o,d)}return r.set(o,a),Gl(a)?await t(i,o,a.inputs[0]):await t(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},NY=(n,e)=>(t,r,s)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,r,s)}catch(i){throw i.name==="SyntaxError"?n():i}},AY=()=>new DOMException("","DataCloneError"),Mk=n=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(r=>{const s=()=>{t.onmessage=null,e.close(),t.close(),r()};t.onmessage=()=>s();try{e.postMessage(n,[n])}catch{}finally{s()}})},MY=(n,e,t,r,s,i,o,a,c,d,h)=>(f,m)=>{const y=o(f)?f:i(f);if(s.has(m)){const v=t();return Promise.reject(v)}try{s.add(m)}catch{}return e(c,()=>c(y))?y.decodeAudioData(m).then(v=>(Mk(m).catch(()=>{}),e(a,()=>a(v))||h(v),n.add(v),v)):new Promise((v,w)=>{const S=async()=>{try{await Mk(m)}catch{}},C=T=>{w(T),S()};try{y.decodeAudioData(m,T=>{typeof T.copyFromChannel!="function"&&(d(T),Iw(T)),n.add(T),S().then(()=>v(T))},T=>{C(T===null?r():T)})}catch(T){C(T)}})},OY=(n,e,t,r,s,i,o,a)=>(c,d)=>{const h=e.get(c);if(h===void 0)throw new Error("Missing the expected cycle count.");const f=i(c.context),m=a(f);if(h===d){if(e.delete(c),!m&&o(c)){const y=r(c),{outputs:v}=t(c);for(const w of v)if(sd(w)){const S=r(w[0]);n(y,S,w[1],w[2])}else{const S=s(w[0]);y.connect(S,w[1])}}}else e.set(c,h-d)},PY={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},DY=(n,e,t,r,s,i,o)=>class extends n{constructor(c,d){const h=s(c),f={...PY,...d},m=r(h,f),y=i(h),v=y?t(f.maxDelayTime):null;super(c,!1,m,v),this._delayTime=e(this,y,m.delayTime),o(this,f.maxDelayTime)}get delayTime(){return this._delayTime}},RY=(n,e,t,r,s)=>i=>{const o=new WeakMap,a=async(c,d)=>{let h=t(c);const f=Rn(h,d);if(!f){const m={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,delayTime:h.delayTime.value,maxDelayTime:i};h=e(d,m)}return o.set(d,h),f?await n(d,c.delayTime,h.delayTime):await r(d,c.delayTime,h.delayTime),await s(c,d,h),h};return{render(c,d){const h=o.get(d);return h!==void 0?Promise.resolve(h):a(c,d)}}},IY=n=>(e,t,r,s)=>n(e[s],i=>i[0]===t&&i[1]===r),jY=n=>(e,t)=>{n(e).delete(t)},LY=n=>"delayTime"in n,FY=(n,e,t)=>function r(s,i){const o=Uf(i)?i:t(n,i);if(LY(o))return[];if(s[0]===o)return[s];if(s.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map(c=>r([...s,o],c[0])).reduce((c,d)=>c.concat(d),[])},$h=(n,e,t)=>{const r=e[t];if(r===void 0)throw n();return r},VY=n=>(e,t=void 0,r=void 0,s=0)=>t===void 0?e.forEach(i=>i.disconnect()):typeof t=="number"?$h(n,e,t).disconnect():Kf(t)?r===void 0?e.forEach(i=>i.disconnect(t)):s===void 0?$h(n,e,r).disconnect(t,0):$h(n,e,r).disconnect(t,0,s):r===void 0?e.forEach(i=>i.disconnect(t)):$h(n,e,r).disconnect(t,0),BY={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},zY=(n,e,t,r,s,i,o,a)=>class extends n{constructor(d,h){const f=i(d),m={...BY,...h},y=r(f,m),v=o(f),w=v?t():null;super(d,!1,y,w),this._attack=e(this,v,y.attack),this._knee=e(this,v,y.knee),this._nativeDynamicsCompressorNode=y,this._ratio=e(this,v,y.ratio),this._release=e(this,v,y.release),this._threshold=e(this,v,y.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(d){const h=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=d,d>2)throw this._nativeDynamicsCompressorNode.channelCount=h,s()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(d){const h=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=d,d==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=h,s()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},WY=(n,e,t,r,s)=>()=>{const i=new WeakMap,o=async(a,c)=>{let d=t(a);const h=Rn(d,c);if(!h){const f={attack:d.attack.value,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,knee:d.knee.value,ratio:d.ratio.value,release:d.release.value,threshold:d.threshold.value};d=e(c,f)}return i.set(c,d),h?(await n(c,a.attack,d.attack),await n(c,a.knee,d.knee),await n(c,a.ratio,d.ratio),await n(c,a.release,d.release),await n(c,a.threshold,d.threshold)):(await r(c,a.attack,d.attack),await r(c,a.knee,d.knee),await r(c,a.ratio,d.ratio),await r(c,a.release,d.release),await r(c,a.threshold,d.threshold)),await s(a,c,d),d};return{render(a,c){const d=i.get(c);return d!==void 0?Promise.resolve(d):o(a,c)}}},$Y=()=>new DOMException("","EncodingError"),HY=n=>e=>new Promise((t,r)=>{if(n===null){r(new SyntaxError);return}const s=n.document.head;if(s===null)r(new SyntaxError);else{const i=n.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),c=n.onerror,d=()=>{n.onerror=c,URL.revokeObjectURL(a)};n.onerror=(h,f,m,y,v)=>{if(f===a||f===n.location.href&&m===1&&y===1)return d(),r(v),!1;if(c!==null)return c(h,f,m,y,v)},i.onerror=()=>{d(),r(new SyntaxError)},i.onload=()=>{d(),t()},i.src=a,i.type="module",s.appendChild(i)}}),UY=n=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,r,s){if(r!==null){let i=this._listeners.get(r);i===void 0&&(i=n(this,r),typeof r=="function"&&this._listeners.set(r,i)),this._nativeEventTarget.addEventListener(t,i,s)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,r,s){const i=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(t,i===void 0?null:i,s)}},qY=n=>(e,t,r)=>{Object.defineProperties(n,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return r()}finally{n!==null&&(delete n.currentFrame,delete n.currentTime)}},GY=n=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw n()},KY={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},YY=(n,e,t,r,s,i)=>class extends n{constructor(a,c){const d=s(a),h={...KY,...c},f=r(d,h),m=i(d),y=m?t():null;super(a,!1,f,y),this._gain=e(this,m,f.gain,Ln,lr)}get gain(){return this._gain}},XY=(n,e,t,r,s)=>()=>{const i=new WeakMap,o=async(a,c)=>{let d=t(a);const h=Rn(d,c);if(!h){const f={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,gain:d.gain.value};d=e(c,f)}return i.set(c,d),h?await n(c,a.gain,d.gain):await r(c,a.gain,d.gain),await s(a,c,d),d};return{render(a,c){const d=i.get(c);return d!==void 0?Promise.resolve(d):o(a,c)}}},JY=(n,e)=>t=>e(n,t),ZY=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},QY=n=>e=>{var t;return(t=n.get(e))!==null&&t!==void 0?t:0},eX=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},tX=n=>e=>n.get(e),an=()=>new DOMException("","InvalidStateError"),nX=n=>e=>{const t=n.get(e);if(t===void 0)throw an();return t},rX=(n,e)=>t=>{let r=n.get(t);if(r!==void 0)return r;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),n.set(t,r),r},sX=n=>e=>{const t=n.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},Bp=()=>new DOMException("","InvalidAccessError"),iX=n=>{n.getFrequencyResponse=(e=>(t,r,s)=>{if(t.length!==r.length||r.length!==s.length)throw Bp();return e.call(n,t,r,s)})(n.getFrequencyResponse)},oX={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},aX=(n,e,t,r,s,i)=>class extends n{constructor(a,c){const d=r(a),h=s(d),f={...oX,...c},m=e(d,h?null:a.baseLatency,f),y=h?t(f.feedback,f.feedforward):null;super(a,!1,m,y),iX(m),this._nativeIIRFilterNode=m,i(this,1)}getFrequencyResponse(a,c,d){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,d)}},RR=(n,e,t,r,s,i,o,a,c,d,h)=>{const f=d.length;let m=a;for(let y=0;y<f;y+=1){let v=t[0]*d[y];for(let w=1;w<s;w+=1){const S=m-w&c-1;v+=t[w]*i[S],v-=n[w]*o[S]}for(let w=s;w<r;w+=1)v+=t[w]*i[m-w&c-1];for(let w=s;w<e;w+=1)v-=n[w]*o[m-w&c-1];i[m]=d[y],o[m]=v,m=m+1&c-1,h[y]=v}return m},lX=(n,e,t,r)=>{const s=t instanceof Float64Array?t:new Float64Array(t),i=r instanceof Float64Array?r:new Float64Array(r),o=s.length,a=i.length,c=Math.min(o,a);if(s[0]!==1){for(let v=0;v<o;v+=1)i[v]/=s[0];for(let v=1;v<a;v+=1)s[v]/=s[0]}const d=32,h=new Float32Array(d),f=new Float32Array(d),m=e.createBuffer(n.numberOfChannels,n.length,n.sampleRate),y=n.numberOfChannels;for(let v=0;v<y;v+=1){const w=n.getChannelData(v),S=m.getChannelData(v);h.fill(0),f.fill(0),RR(s,o,i,a,c,h,f,0,d,w,S)}return m},cX=(n,e,t,r,s)=>(i,o)=>{const a=new WeakMap;let c=null;const d=async(h,f)=>{let m=null,y=e(h);const v=Rn(y,f);if(f.createIIRFilter===void 0?m=n(f,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):v||(y=f.createIIRFilter(o,i)),a.set(f,m===null?y:m),m!==null){if(c===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const S=new t(h.context.destination.channelCount,h.context.length,f.sampleRate);c=(async()=>{await r(h,S,S.destination);const C=await s(S);return lX(C,f,i,o)})()}const w=await c;return m.buffer=w,m.start(0),m}return await r(h,f,y),y};return{render(h,f){const m=a.get(f);return m!==void 0?Promise.resolve(m):d(h,f)}}},uX=(n,e,t,r,s,i)=>o=>(a,c)=>{const d=n.get(a);if(d===void 0){if(!o&&i(a)){const h=r(a),{outputs:f}=t(a);for(const m of f)if(sd(m)){const y=r(m[0]);e(h,y,m[1],m[2])}else{const y=s(m[0]);h.disconnect(y,m[1])}}n.set(a,c)}else n.set(a,d+c)},dX=(n,e)=>t=>{const r=n.get(t);return e(r)||e(t)},hX=(n,e)=>t=>n.has(t)||e(t),fX=(n,e)=>t=>n.has(t)||e(t),pX=(n,e)=>t=>{const r=n.get(t);return e(r)||e(t)},mX=n=>e=>n!==null&&e instanceof n,gX=n=>e=>n!==null&&typeof n.AudioNode=="function"&&e instanceof n.AudioNode,yX=n=>e=>n!==null&&typeof n.AudioParam=="function"&&e instanceof n.AudioParam,vX=(n,e)=>t=>n(t)||e(t),xX=n=>e=>n!==null&&e instanceof n,wX=n=>n!==null&&n.isSecureContext,bX=(n,e,t,r)=>class extends n{constructor(i,o){const a=t(i),c=e(a,o);if(r(a))throw TypeError();super(i,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},SX={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},CX=(n,e,t,r)=>class extends n{constructor(i,o){const a=t(i);if(r(a))throw new TypeError;const c={...SX,...o},d=e(a,c);super(i,!1,d,null),this._nativeMediaStreamAudioDestinationNode=d}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},_X=(n,e,t,r)=>class extends n{constructor(i,o){const a=t(i),c=e(a,o);if(r(a))throw new TypeError;super(i,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},TX=(n,e,t)=>class extends n{constructor(s,i){const o=t(s),a=e(o,i);super(s,!0,a,null)}},kX=(n,e,t,r,s,i)=>class extends t{constructor(a,c){super(a),this._nativeContext=a,Fp.set(this,a),r(a)&&s.set(a,new Set),this._destination=new n(this,c),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const c=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=c;const d=this._nativeContext.onstatechange;this._onstatechange=d!==null&&d===c?a:d}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},ju=n=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=n.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},EX=(n,e)=>(t,r,s)=>{const i=new Set;return t.connect=(o=>(a,c=0,d=0)=>{const h=i.size===0;if(e(a))return o.call(t,a,c,d),n(i,[a,c,d],f=>f[0]===a&&f[1]===c&&f[2]===d,!0),h&&r(),a;o.call(t,a,c),n(i,[a,c],f=>f[0]===a&&f[1]===c,!0),h&&r()})(t.connect),t.disconnect=(o=>(a,c,d)=>{const h=i.size>0;if(a===void 0)o.apply(t),i.clear();else if(typeof a=="number"){o.call(t,a);for(const m of i)m[1]===a&&i.delete(m)}else{e(a)?o.call(t,a,c,d):o.call(t,a,c);for(const m of i)m[0]===a&&(c===void 0||m[1]===c)&&(d===void 0||m[2]===d)&&i.delete(m)}const f=i.size===0;h&&f&&s()})(t.disconnect),t},Et=(n,e,t)=>{const r=e[t];r!==void 0&&r!==n[t]&&(n[t]=r)},Zt=(n,e)=>{Et(n,e,"channelCount"),Et(n,e,"channelCountMode"),Et(n,e,"channelInterpretation")},Ok=n=>typeof n.getFloatTimeDomainData=="function",NX=n=>{n.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);n.getByteTimeDomainData(t);const r=Math.max(t.length,n.fftSize);for(let s=0;s<r;s+=1)e[s]=(t[s]-128)*.0078125;return e}},AX=(n,e)=>(t,r)=>{const s=t.createAnalyser();if(Zt(s,r),!(r.maxDecibels>r.minDecibels))throw e();return Et(s,r,"fftSize"),Et(s,r,"maxDecibels"),Et(s,r,"minDecibels"),Et(s,r,"smoothingTimeConstant"),n(Ok,()=>Ok(s))||NX(s),s},MX=n=>n===null?null:n.hasOwnProperty("AudioBuffer")?n.AudioBuffer:null,It=(n,e,t)=>{const r=e[t];r!==void 0&&r!==n[t].value&&(n[t].value=r)},OX=n=>{n.start=(e=>{let t=!1;return(r=0,s=0,i)=>{if(t)throw an();e.call(n,r,s,i),t=!0}})(n.start)},Fw=n=>{n.start=(e=>(t=0,r=0,s)=>{if(typeof s=="number"&&s<0||r<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(n,t,r,s)})(n.start)},Vw=n=>{n.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(n,t)})(n.stop)},PX=(n,e,t,r,s,i,o,a,c,d,h)=>(f,m)=>{const y=f.createBufferSource();return Zt(y,m),It(y,m,"playbackRate"),Et(y,m,"buffer"),Et(y,m,"loop"),Et(y,m,"loopEnd"),Et(y,m,"loopStart"),e(t,()=>t(f))||OX(y),e(r,()=>r(f))||c(y),e(s,()=>s(f))||d(y,f),e(i,()=>i(f))||Fw(y),e(o,()=>o(f))||h(y,f),e(a,()=>a(f))||Vw(y),n(f,y),y},DX=n=>n===null?null:n.hasOwnProperty("AudioContext")?n.AudioContext:n.hasOwnProperty("webkitAudioContext")?n.webkitAudioContext:null,RX=(n,e)=>(t,r,s)=>{const i=t.destination;if(i.channelCount!==r)try{i.channelCount=r}catch{}s&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:r});const o=n(t,{channelCount:r,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(o,"channelCount",a=>()=>a.call(o),a=>c=>{a.call(o,c);try{i.channelCount=c}catch(d){if(c>i.maxChannelCount)throw d}}),e(o,"channelCountMode",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelCountMode=c}),e(o,"channelInterpretation",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelInterpretation=c}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},IX=n=>n===null?null:n.hasOwnProperty("AudioWorkletNode")?n.AudioWorkletNode:null,jX=n=>{const{port1:e}=new MessageChannel;try{e.postMessage(n)}finally{e.close()}},LX=(n,e,t,r,s)=>(i,o,a,c,d,h)=>{if(a!==null)try{const f=new a(i,c,h),m=new Map;let y=null;if(Object.defineProperties(f,{channelCount:{get:()=>h.channelCount,set:()=>{throw n()}},channelCountMode:{get:()=>"explicit",set:()=>{throw n()}},onprocessorerror:{get:()=>y,set:v=>{typeof y=="function"&&f.removeEventListener("processorerror",y),y=typeof v=="function"?v:null,typeof y=="function"&&f.addEventListener("processorerror",y)}}}),f.addEventListener=(v=>(...w)=>{if(w[0]==="processorerror"){const S=typeof w[1]=="function"?w[1]:typeof w[1]=="object"&&w[1]!==null&&typeof w[1].handleEvent=="function"?w[1].handleEvent:null;if(S!==null){const C=m.get(w[1]);C!==void 0?w[1]=C:(w[1]=T=>{T.type==="error"?(Object.defineProperties(T,{type:{value:"processorerror"}}),S(T)):S(new ErrorEvent(w[0],{...T}))},m.set(S,w[1]))}}return v.call(f,"error",w[1],w[2]),v.call(f,...w)})(f.addEventListener),f.removeEventListener=(v=>(...w)=>{if(w[0]==="processorerror"){const S=m.get(w[1]);S!==void 0&&(m.delete(w[1]),w[1]=S)}return v.call(f,"error",w[1],w[2]),v.call(f,w[0],w[1],w[2])})(f.removeEventListener),h.numberOfOutputs!==0){const v=t(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return f.connect(v).connect(i.destination),s(f,()=>v.disconnect(),()=>v.connect(i.destination))}return f}catch(f){throw f.code===11?r():f}if(d===void 0)throw r();return jX(h),e(i,o,d,h)},IR=(n,e)=>n===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(n*e))))),FX=n=>new Promise((e,t)=>{const{port1:r,port2:s}=new MessageChannel;r.onmessage=({data:i})=>{r.close(),s.close(),e(i)},r.onmessageerror=({data:i})=>{r.close(),s.close(),t(i)},s.postMessage(n)}),VX=async(n,e)=>{const t=await FX(e);return new n(t)},BX=(n,e,t,r)=>{let s=y0.get(n);s===void 0&&(s=new WeakMap,y0.set(n,s));const i=VX(t,r);return s.set(e,i),i},zX=(n,e,t,r,s,i,o,a,c,d,h,f,m)=>(y,v,w,S)=>{if(S.numberOfInputs===0&&S.numberOfOutputs===0)throw c();const C=Array.isArray(S.outputChannelCount)?S.outputChannelCount:Array.from(S.outputChannelCount);if(C.some(X=>X<1))throw c();if(C.length!==S.numberOfOutputs)throw e();if(S.channelCountMode!=="explicit")throw c();const T=S.channelCount*S.numberOfInputs,k=C.reduce((X,Y)=>X+Y,0),M=w.parameterDescriptors===void 0?0:w.parameterDescriptors.length;if(T+M>6||k>6)throw c();const N=new MessageChannel,O=[],D=[];for(let X=0;X<S.numberOfInputs;X+=1)O.push(o(y,{channelCount:S.channelCount,channelCountMode:S.channelCountMode,channelInterpretation:S.channelInterpretation,gain:1})),D.push(s(y,{channelCount:S.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:S.channelCount}));const I=[];if(w.parameterDescriptors!==void 0)for(const{defaultValue:X,maxValue:Y,minValue:fe,name:_e}of w.parameterDescriptors){const se=i(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:S.parameterData[_e]!==void 0?S.parameterData[_e]:X===void 0?0:X});Object.defineProperties(se.offset,{defaultValue:{get:()=>X===void 0?0:X},maxValue:{get:()=>Y===void 0?Ln:Y},minValue:{get:()=>fe===void 0?lr:fe}}),I.push(se)}const L=r(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,T+M)}),A=IR(v,y.sampleRate),V=a(y,A,T+M,Math.max(1,k)),F=s(y,{channelCount:Math.max(1,k),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,k)}),U=[];for(let X=0;X<S.numberOfOutputs;X+=1)U.push(r(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:C[X]}));for(let X=0;X<S.numberOfInputs;X+=1){O[X].connect(D[X]);for(let Y=0;Y<S.channelCount;Y+=1)D[X].connect(L,Y,X*S.channelCount+Y)}const B=new PR(w.parameterDescriptors===void 0?[]:w.parameterDescriptors.map(({name:X},Y)=>{const fe=I[Y];return fe.connect(L,0,T+Y),fe.start(0),[X,fe.offset]}));L.connect(V);let q=S.channelInterpretation,K=null;const G=S.numberOfOutputs===0?[V]:U,$={get bufferSize(){return A},get channelCount(){return S.channelCount},set channelCount(X){throw t()},get channelCountMode(){return S.channelCountMode},set channelCountMode(X){throw t()},get channelInterpretation(){return q},set channelInterpretation(X){for(const Y of O)Y.channelInterpretation=X;q=X},get context(){return V.context},get inputs(){return O},get numberOfInputs(){return S.numberOfInputs},get numberOfOutputs(){return S.numberOfOutputs},get onprocessorerror(){return K},set onprocessorerror(X){typeof K=="function"&&$.removeEventListener("processorerror",K),K=typeof X=="function"?X:null,typeof K=="function"&&$.addEventListener("processorerror",K)},get parameters(){return B},get port(){return N.port2},addEventListener(...X){return V.addEventListener(X[0],X[1],X[2])},connect:n.bind(null,G),disconnect:d.bind(null,G),dispatchEvent(...X){return V.dispatchEvent(X[0])},removeEventListener(...X){return V.removeEventListener(X[0],X[1],X[2])}},z=new Map;N.port1.addEventListener=(X=>(...Y)=>{if(Y[0]==="message"){const fe=typeof Y[1]=="function"?Y[1]:typeof Y[1]=="object"&&Y[1]!==null&&typeof Y[1].handleEvent=="function"?Y[1].handleEvent:null;if(fe!==null){const _e=z.get(Y[1]);_e!==void 0?Y[1]=_e:(Y[1]=se=>{h(y.currentTime,y.sampleRate,()=>fe(se))},z.set(fe,Y[1]))}}return X.call(N.port1,Y[0],Y[1],Y[2])})(N.port1.addEventListener),N.port1.removeEventListener=(X=>(...Y)=>{if(Y[0]==="message"){const fe=z.get(Y[1]);fe!==void 0&&(z.delete(Y[1]),Y[1]=fe)}return X.call(N.port1,Y[0],Y[1],Y[2])})(N.port1.removeEventListener);let W=null;Object.defineProperty(N.port1,"onmessage",{get:()=>W,set:X=>{typeof W=="function"&&N.port1.removeEventListener("message",W),W=typeof X=="function"?X:null,typeof W=="function"&&(N.port1.addEventListener("message",W),N.port1.start())}}),w.prototype.port=N.port1;let P=null;BX(y,$,w,S).then(X=>P=X);const J=Xf(S.numberOfInputs,S.channelCount),te=Xf(S.numberOfOutputs,C),ne=w.parameterDescriptors===void 0?[]:w.parameterDescriptors.reduce((X,{name:Y})=>({...X,[Y]:new Float32Array(128)}),{});let ue=!0;const ce=()=>{S.numberOfOutputs>0&&V.disconnect(F);for(let X=0,Y=0;X<S.numberOfOutputs;X+=1){const fe=U[X];for(let _e=0;_e<C[X];_e+=1)F.disconnect(fe,Y+_e,_e);Y+=C[X]}},ae=new Map;V.onaudioprocess=({inputBuffer:X,outputBuffer:Y})=>{if(P!==null){const fe=f($);for(let _e=0;_e<A;_e+=128){for(let se=0;se<S.numberOfInputs;se+=1)for(let ge=0;ge<S.channelCount;ge+=1)Yf(X,J[se],ge,ge,_e);w.parameterDescriptors!==void 0&&w.parameterDescriptors.forEach(({name:se},ge)=>{Yf(X,ne,se,T+ge,_e)});for(let se=0;se<S.numberOfInputs;se+=1)for(let ge=0;ge<C[se];ge+=1)te[se][ge].byteLength===0&&(te[se][ge]=new Float32Array(128));try{const se=J.map((he,je)=>{if(fe[je].size>0)return ae.set(je,A/128),he;const mt=ae.get(je);return mt===void 0?[]:(he.every(Qt=>Qt.every(Lr=>Lr===0))&&(mt===1?ae.delete(je):ae.set(je,mt-1)),he)});ue=h(y.currentTime+_e/y.sampleRate,y.sampleRate,()=>P.process(se,te,ne));for(let he=0,je=0;he<S.numberOfOutputs;he+=1){for(let Je=0;Je<C[he];Je+=1)DR(Y,te[he],Je,je+Je,_e);je+=C[he]}}catch(se){ue=!1,$.dispatchEvent(new ErrorEvent("processorerror",{colno:se.colno,filename:se.filename,lineno:se.lineno,message:se.message}))}if(!ue){for(let se=0;se<S.numberOfInputs;se+=1){O[se].disconnect(D[se]);for(let ge=0;ge<S.channelCount;ge+=1)D[_e].disconnect(L,ge,se*S.channelCount+ge)}if(w.parameterDescriptors!==void 0){const se=w.parameterDescriptors.length;for(let ge=0;ge<se;ge+=1){const he=I[ge];he.disconnect(L,0,T+ge),he.stop()}}L.disconnect(V),V.onaudioprocess=null,xe?ce():ye();break}}}};let xe=!1;const ke=o(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),pe=()=>V.connect(ke).connect(y.destination),ye=()=>{V.disconnect(ke),ke.disconnect()},re=()=>{if(ue){ye(),S.numberOfOutputs>0&&V.connect(F);for(let X=0,Y=0;X<S.numberOfOutputs;X+=1){const fe=U[X];for(let _e=0;_e<C[X];_e+=1)F.connect(fe,Y+_e,_e);Y+=C[X]}}xe=!0},Q=()=>{ue&&(pe(),ce()),xe=!1};return pe(),m($,re,Q)},jR=(n,e)=>{const t=n.createBiquadFilter();return Zt(t,e),It(t,e,"Q"),It(t,e,"detune"),It(t,e,"frequency"),It(t,e,"gain"),Et(t,e,"type"),t},WX=(n,e)=>(t,r)=>{const s=t.createChannelMerger(r.numberOfInputs);return n!==null&&n.name==="webkitAudioContext"&&e(t,s),Zt(s,r),s},$X=n=>{const e=n.numberOfOutputs;Object.defineProperty(n,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw an()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw an()}}),Object.defineProperty(n,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw an()}})},id=(n,e)=>{const t=n.createChannelSplitter(e.numberOfOutputs);return Zt(t,e),$X(t),t},HX=(n,e,t,r,s)=>(i,o)=>{if(i.createConstantSource===void 0)return t(i,o);const a=i.createConstantSource();return Zt(a,o),It(a,o,"offset"),e(r,()=>r(i))||Fw(a),e(s,()=>s(i))||Vw(a),n(i,a),a},Kl=(n,e)=>(n.connect=e.connect.bind(e),n.disconnect=e.disconnect.bind(e),n),UX=(n,e,t,r)=>(s,{offset:i,...o})=>{const a=s.createBuffer(1,2,44100),c=e(s,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),d=t(s,{...o,gain:i}),h=a.getChannelData(0);h[0]=1,h[1]=1,c.buffer=a,c.loop=!0;const f={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(v){d.channelCount=v},get channelCountMode(){return d.channelCountMode},set channelCountMode(v){d.channelCountMode=v},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(v){d.channelInterpretation=v},get context(){return d.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get offset(){return d.gain},get onended(){return c.onended},set onended(v){c.onended=v},addEventListener(...v){return c.addEventListener(v[0],v[1],v[2])},dispatchEvent(...v){return c.dispatchEvent(v[0])},removeEventListener(...v){return c.removeEventListener(v[0],v[1],v[2])},start(v=0){c.start.call(c,v)},stop(v=0){c.stop.call(c,v)}},m=()=>c.connect(d),y=()=>c.disconnect(d);return n(s,c),r(Kl(f,d),m,y)},qX=(n,e)=>(t,r)=>{const s=t.createConvolver();if(Zt(s,r),r.disableNormalization===s.normalize&&(s.normalize=!r.disableNormalization),Et(s,r,"buffer"),r.channelCount>2||(e(s,"channelCount",i=>()=>i.call(s),i=>o=>{if(o>2)throw n();return i.call(s,o)}),r.channelCountMode==="max"))throw n();return e(s,"channelCountMode",i=>()=>i.call(s),i=>o=>{if(o==="max")throw n();return i.call(s,o)}),s},LR=(n,e)=>{const t=n.createDelay(e.maxDelayTime);return Zt(t,e),It(t,e,"delayTime"),t},GX=n=>(e,t)=>{const r=e.createDynamicsCompressor();if(Zt(r,t),t.channelCount>2||t.channelCountMode==="max")throw n();return It(r,t,"attack"),It(r,t,"knee"),It(r,t,"ratio"),It(r,t,"release"),It(r,t,"threshold"),r},nr=(n,e)=>{const t=n.createGain();return Zt(t,e),It(t,e,"gain"),t},KX=n=>(e,t,r)=>{if(e.createIIRFilter===void 0)return n(e,t,r);const s=e.createIIRFilter(r.feedforward,r.feedback);return Zt(s,r),s};function YX(n,e){const t=e[0]*e[0]+e[1]*e[1];return[(n[0]*e[0]+n[1]*e[1])/t,(n[1]*e[0]-n[0]*e[1])/t]}function XX(n,e){return[n[0]*e[0]-n[1]*e[1],n[0]*e[1]+n[1]*e[0]]}function Pk(n,e){let t=[0,0];for(let r=n.length-1;r>=0;r-=1)t=XX(t,e),t[0]+=n[r];return t}const JX=(n,e,t,r)=>(s,i,{channelCount:o,channelCountMode:a,channelInterpretation:c,feedback:d,feedforward:h})=>{const f=IR(i,s.sampleRate),m=d instanceof Float64Array?d:new Float64Array(d),y=h instanceof Float64Array?h:new Float64Array(h),v=m.length,w=y.length,S=Math.min(v,w);if(v===0||v>20)throw r();if(m[0]===0)throw e();if(w===0||w>20)throw r();if(y[0]===0)throw e();if(m[0]!==1){for(let I=0;I<w;I+=1)y[I]/=m[0];for(let I=1;I<v;I+=1)m[I]/=m[0]}const C=t(s,f,o,o);C.channelCount=o,C.channelCountMode=a,C.channelInterpretation=c;const T=32,k=[],M=[],N=[];for(let I=0;I<o;I+=1){k.push(0);const L=new Float32Array(T),A=new Float32Array(T);L.fill(0),A.fill(0),M.push(L),N.push(A)}C.onaudioprocess=I=>{const L=I.inputBuffer,A=I.outputBuffer,V=L.numberOfChannels;for(let F=0;F<V;F+=1){const U=L.getChannelData(F),B=A.getChannelData(F);k[F]=RR(m,v,y,w,S,M[F],N[F],k[F],T,U,B)}};const O=s.sampleRate/2;return Kl({get bufferSize(){return f},get channelCount(){return C.channelCount},set channelCount(I){C.channelCount=I},get channelCountMode(){return C.channelCountMode},set channelCountMode(I){C.channelCountMode=I},get channelInterpretation(){return C.channelInterpretation},set channelInterpretation(I){C.channelInterpretation=I},get context(){return C.context},get inputs(){return[C]},get numberOfInputs(){return C.numberOfInputs},get numberOfOutputs(){return C.numberOfOutputs},addEventListener(...I){return C.addEventListener(I[0],I[1],I[2])},dispatchEvent(...I){return C.dispatchEvent(I[0])},getFrequencyResponse(I,L,A){if(I.length!==L.length||L.length!==A.length)throw n();const V=I.length;for(let F=0;F<V;F+=1){const U=-Math.PI*(I[F]/O),B=[Math.cos(U),Math.sin(U)],q=Pk(y,B),K=Pk(m,B),G=YX(q,K);L[F]=Math.sqrt(G[0]*G[0]+G[1]*G[1]),A[F]=Math.atan2(G[1],G[0])}},removeEventListener(...I){return C.removeEventListener(I[0],I[1],I[2])}},C)},ZX=(n,e)=>n.createMediaElementSource(e.mediaElement),QX=(n,e)=>{const t=n.createMediaStreamDestination();return Zt(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},eJ=(n,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const r=t.slice(0,1),s=n.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(s,"mediaStream",{value:e}),s},tJ=(n,e)=>(t,{mediaStreamTrack:r})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(r);const s=new MediaStream([r]),i=t.createMediaStreamSource(s);if(r.kind!=="audio")throw n();if(e(t))throw new TypeError;return i},nJ=n=>n===null?null:n.hasOwnProperty("OfflineAudioContext")?n.OfflineAudioContext:n.hasOwnProperty("webkitOfflineAudioContext")?n.webkitOfflineAudioContext:null,rJ=(n,e,t,r,s,i)=>(o,a)=>{const c=o.createOscillator();return Zt(c,a),It(c,a,"detune"),It(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):Et(c,a,"type"),e(t,()=>t(o))||Fw(c),e(r,()=>r(o))||i(c,o),e(s,()=>s(o))||Vw(c),n(o,c),c},sJ=n=>(e,t)=>{const r=e.createPanner();return r.orientationX===void 0?n(e,t):(Zt(r,t),It(r,t,"orientationX"),It(r,t,"orientationY"),It(r,t,"orientationZ"),It(r,t,"positionX"),It(r,t,"positionY"),It(r,t,"positionZ"),Et(r,t,"coneInnerAngle"),Et(r,t,"coneOuterAngle"),Et(r,t,"coneOuterGain"),Et(r,t,"distanceModel"),Et(r,t,"maxDistance"),Et(r,t,"panningModel"),Et(r,t,"refDistance"),Et(r,t,"rolloffFactor"),r)},iJ=(n,e,t,r,s,i,o,a,c,d)=>(h,{coneInnerAngle:f,coneOuterAngle:m,coneOuterGain:y,distanceModel:v,maxDistance:w,orientationX:S,orientationY:C,orientationZ:T,panningModel:k,positionX:M,positionY:N,positionZ:O,refDistance:D,rolloffFactor:I,...L})=>{const A=h.createPanner();if(L.channelCount>2||L.channelCountMode==="max")throw o();Zt(A,L);const V={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},F=t(h,{...V,channelInterpretation:"speakers",numberOfInputs:6}),U=r(h,{...L,gain:1}),B=r(h,{...V,gain:1}),q=r(h,{...V,gain:0}),K=r(h,{...V,gain:0}),G=r(h,{...V,gain:0}),$=r(h,{...V,gain:0}),z=r(h,{...V,gain:0}),W=s(h,256,6,1),P=i(h,{...V,curve:new Float32Array([1,1]),oversample:"none"});let j=[S,C,T],J=[M,N,O];const te=new Float32Array(1);W.onaudioprocess=({inputBuffer:ae})=>{const xe=[c(ae,te,0),c(ae,te,1),c(ae,te,2)];xe.some((pe,ye)=>pe!==j[ye])&&(A.setOrientation(...xe),j=xe);const ke=[c(ae,te,3),c(ae,te,4),c(ae,te,5)];ke.some((pe,ye)=>pe!==J[ye])&&(A.setPosition(...ke),J=ke)},Object.defineProperty(q.gain,"defaultValue",{get:()=>0}),Object.defineProperty(K.gain,"defaultValue",{get:()=>0}),Object.defineProperty(G.gain,"defaultValue",{get:()=>0}),Object.defineProperty($.gain,"defaultValue",{get:()=>0}),Object.defineProperty(z.gain,"defaultValue",{get:()=>0});const ne={get bufferSize(){},get channelCount(){return A.channelCount},set channelCount(ae){if(ae>2)throw o();U.channelCount=ae,A.channelCount=ae},get channelCountMode(){return A.channelCountMode},set channelCountMode(ae){if(ae==="max")throw o();U.channelCountMode=ae,A.channelCountMode=ae},get channelInterpretation(){return A.channelInterpretation},set channelInterpretation(ae){U.channelInterpretation=ae,A.channelInterpretation=ae},get coneInnerAngle(){return A.coneInnerAngle},set coneInnerAngle(ae){A.coneInnerAngle=ae},get coneOuterAngle(){return A.coneOuterAngle},set coneOuterAngle(ae){A.coneOuterAngle=ae},get coneOuterGain(){return A.coneOuterGain},set coneOuterGain(ae){if(ae<0||ae>1)throw e();A.coneOuterGain=ae},get context(){return A.context},get distanceModel(){return A.distanceModel},set distanceModel(ae){A.distanceModel=ae},get inputs(){return[U]},get maxDistance(){return A.maxDistance},set maxDistance(ae){if(ae<0)throw new RangeError;A.maxDistance=ae},get numberOfInputs(){return A.numberOfInputs},get numberOfOutputs(){return A.numberOfOutputs},get orientationX(){return B.gain},get orientationY(){return q.gain},get orientationZ(){return K.gain},get panningModel(){return A.panningModel},set panningModel(ae){A.panningModel=ae},get positionX(){return G.gain},get positionY(){return $.gain},get positionZ(){return z.gain},get refDistance(){return A.refDistance},set refDistance(ae){if(ae<0)throw new RangeError;A.refDistance=ae},get rolloffFactor(){return A.rolloffFactor},set rolloffFactor(ae){if(ae<0)throw new RangeError;A.rolloffFactor=ae},addEventListener(...ae){return U.addEventListener(ae[0],ae[1],ae[2])},dispatchEvent(...ae){return U.dispatchEvent(ae[0])},removeEventListener(...ae){return U.removeEventListener(ae[0],ae[1],ae[2])}};f!==ne.coneInnerAngle&&(ne.coneInnerAngle=f),m!==ne.coneOuterAngle&&(ne.coneOuterAngle=m),y!==ne.coneOuterGain&&(ne.coneOuterGain=y),v!==ne.distanceModel&&(ne.distanceModel=v),w!==ne.maxDistance&&(ne.maxDistance=w),S!==ne.orientationX.value&&(ne.orientationX.value=S),C!==ne.orientationY.value&&(ne.orientationY.value=C),T!==ne.orientationZ.value&&(ne.orientationZ.value=T),k!==ne.panningModel&&(ne.panningModel=k),M!==ne.positionX.value&&(ne.positionX.value=M),N!==ne.positionY.value&&(ne.positionY.value=N),O!==ne.positionZ.value&&(ne.positionZ.value=O),D!==ne.refDistance&&(ne.refDistance=D),I!==ne.rolloffFactor&&(ne.rolloffFactor=I),(j[0]!==1||j[1]!==0||j[2]!==0)&&A.setOrientation(...j),(J[0]!==0||J[1]!==0||J[2]!==0)&&A.setPosition(...J);const ue=()=>{U.connect(A),n(U,P,0,0),P.connect(B).connect(F,0,0),P.connect(q).connect(F,0,1),P.connect(K).connect(F,0,2),P.connect(G).connect(F,0,3),P.connect($).connect(F,0,4),P.connect(z).connect(F,0,5),F.connect(W).connect(h.destination)},ce=()=>{U.disconnect(A),a(U,P,0,0),P.disconnect(B),B.disconnect(F),P.disconnect(q),q.disconnect(F),P.disconnect(K),K.disconnect(F),P.disconnect(G),G.disconnect(F),P.disconnect($),$.disconnect(F),P.disconnect(z),z.disconnect(F),F.disconnect(W),W.disconnect(h.destination)};return d(Kl(ne,A),ue,ce)},oJ=n=>(e,{disableNormalization:t,imag:r,real:s})=>{const i=r instanceof Float32Array?r:new Float32Array(r),o=s instanceof Float32Array?s:new Float32Array(s),a=e.createPeriodicWave(o,i,{disableNormalization:t});if(Array.from(r).length<2)throw n();return a},od=(n,e,t,r)=>n.createScriptProcessor(e,t,r),aJ=(n,e)=>(t,r)=>{const s=r.channelCountMode;if(s==="clamped-max")throw e();if(t.createStereoPanner===void 0)return n(t,r);const i=t.createStereoPanner();return Zt(i,r),It(i,r,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>s,set:o=>{if(o!==s)throw e()}}),i},lJ=(n,e,t,r,s,i)=>{const a=new Float32Array([1,1]),c=Math.PI/2,d={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},h={...d,oversample:"none"},f=(v,w,S,C)=>{const T=new Float32Array(16385),k=new Float32Array(16385);for(let L=0;L<16385;L+=1){const A=L/16384*c;T[L]=Math.cos(A),k[L]=Math.sin(A)}const M=t(v,{...d,gain:0}),N=r(v,{...h,curve:T}),O=r(v,{...h,curve:a}),D=t(v,{...d,gain:0}),I=r(v,{...h,curve:k});return{connectGraph(){w.connect(M),w.connect(O.inputs===void 0?O:O.inputs[0]),w.connect(D),O.connect(S),S.connect(N.inputs===void 0?N:N.inputs[0]),S.connect(I.inputs===void 0?I:I.inputs[0]),N.connect(M.gain),I.connect(D.gain),M.connect(C,0,0),D.connect(C,0,1)},disconnectGraph(){w.disconnect(M),w.disconnect(O.inputs===void 0?O:O.inputs[0]),w.disconnect(D),O.disconnect(S),S.disconnect(N.inputs===void 0?N:N.inputs[0]),S.disconnect(I.inputs===void 0?I:I.inputs[0]),N.disconnect(M.gain),I.disconnect(D.gain),M.disconnect(C,0,0),D.disconnect(C,0,1)}}},m=(v,w,S,C)=>{const T=new Float32Array(16385),k=new Float32Array(16385),M=new Float32Array(16385),N=new Float32Array(16385),O=Math.floor(16385/2);for(let G=0;G<16385;G+=1)if(G>O){const $=(G-O)/(16384-O)*c;T[G]=Math.cos($),k[G]=Math.sin($),M[G]=0,N[G]=1}else{const $=G/(16384-O)*c;T[G]=1,k[G]=0,M[G]=Math.cos($),N[G]=Math.sin($)}const D=e(v,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),I=t(v,{...d,gain:0}),L=r(v,{...h,curve:T}),A=t(v,{...d,gain:0}),V=r(v,{...h,curve:k}),F=r(v,{...h,curve:a}),U=t(v,{...d,gain:0}),B=r(v,{...h,curve:M}),q=t(v,{...d,gain:0}),K=r(v,{...h,curve:N});return{connectGraph(){w.connect(D),w.connect(F.inputs===void 0?F:F.inputs[0]),D.connect(I,0),D.connect(A,0),D.connect(U,1),D.connect(q,1),F.connect(S),S.connect(L.inputs===void 0?L:L.inputs[0]),S.connect(V.inputs===void 0?V:V.inputs[0]),S.connect(B.inputs===void 0?B:B.inputs[0]),S.connect(K.inputs===void 0?K:K.inputs[0]),L.connect(I.gain),V.connect(A.gain),B.connect(U.gain),K.connect(q.gain),I.connect(C,0,0),U.connect(C,0,0),A.connect(C,0,1),q.connect(C,0,1)},disconnectGraph(){w.disconnect(D),w.disconnect(F.inputs===void 0?F:F.inputs[0]),D.disconnect(I,0),D.disconnect(A,0),D.disconnect(U,1),D.disconnect(q,1),F.disconnect(S),S.disconnect(L.inputs===void 0?L:L.inputs[0]),S.disconnect(V.inputs===void 0?V:V.inputs[0]),S.disconnect(B.inputs===void 0?B:B.inputs[0]),S.disconnect(K.inputs===void 0?K:K.inputs[0]),L.disconnect(I.gain),V.disconnect(A.gain),B.disconnect(U.gain),K.disconnect(q.gain),I.disconnect(C,0,0),U.disconnect(C,0,0),A.disconnect(C,0,1),q.disconnect(C,0,1)}}},y=(v,w,S,C,T)=>{if(w===1)return f(v,S,C,T);if(w===2)return m(v,S,C,T);throw s()};return(v,{channelCount:w,channelCountMode:S,pan:C,...T})=>{if(S==="max")throw s();const k=n(v,{...T,channelCount:1,channelCountMode:S,numberOfInputs:2}),M=t(v,{...T,channelCount:w,channelCountMode:S,gain:1}),N=t(v,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:C});let{connectGraph:O,disconnectGraph:D}=y(v,w,M,N,k);Object.defineProperty(N.gain,"defaultValue",{get:()=>0}),Object.defineProperty(N.gain,"maxValue",{get:()=>1}),Object.defineProperty(N.gain,"minValue",{get:()=>-1});const I={get bufferSize(){},get channelCount(){return M.channelCount},set channelCount(F){M.channelCount!==F&&(L&&D(),{connectGraph:O,disconnectGraph:D}=y(v,F,M,N,k),L&&O()),M.channelCount=F},get channelCountMode(){return M.channelCountMode},set channelCountMode(F){if(F==="clamped-max"||F==="max")throw s();M.channelCountMode=F},get channelInterpretation(){return M.channelInterpretation},set channelInterpretation(F){M.channelInterpretation=F},get context(){return M.context},get inputs(){return[M]},get numberOfInputs(){return M.numberOfInputs},get numberOfOutputs(){return M.numberOfOutputs},get pan(){return N.gain},addEventListener(...F){return M.addEventListener(F[0],F[1],F[2])},dispatchEvent(...F){return M.dispatchEvent(F[0])},removeEventListener(...F){return M.removeEventListener(F[0],F[1],F[2])}};let L=!1;const A=()=>{O(),L=!0},V=()=>{D(),L=!1};return i(Kl(I,k),A,V)}},cJ=(n,e,t,r,s,i,o)=>(a,c)=>{const d=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return t(a,c);Zt(d,c);const h=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(h!==null&&h.length<2)throw e();Et(d,{curve:h},"curve"),Et(d,c,"oversample");let f=null,m=!1;return o(d,"curve",w=>()=>w.call(d),w=>S=>(w.call(d,S),m&&(r(S)&&f===null?f=n(a,d):!r(S)&&f!==null&&(f(),f=null)),S)),s(d,()=>{m=!0,r(d.curve)&&(f=n(a,d))},()=>{m=!1,f!==null&&(f(),f=null)})},uJ=(n,e,t,r,s)=>(i,{curve:o,oversample:a,...c})=>{const d=i.createWaveShaper(),h=i.createWaveShaper();Zt(d,c),Zt(h,c);const f=t(i,{...c,gain:1}),m=t(i,{...c,gain:-1}),y=t(i,{...c,gain:1}),v=t(i,{...c,gain:-1});let w=null,S=!1,C=null;const T={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(N){f.channelCount=N,m.channelCount=N,d.channelCount=N,y.channelCount=N,h.channelCount=N,v.channelCount=N},get channelCountMode(){return d.channelCountMode},set channelCountMode(N){f.channelCountMode=N,m.channelCountMode=N,d.channelCountMode=N,y.channelCountMode=N,h.channelCountMode=N,v.channelCountMode=N},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(N){f.channelInterpretation=N,m.channelInterpretation=N,d.channelInterpretation=N,y.channelInterpretation=N,h.channelInterpretation=N,v.channelInterpretation=N},get context(){return d.context},get curve(){return C},set curve(N){if(N!==null&&N.length<2)throw e();if(N===null)d.curve=N,h.curve=N;else{const O=N.length,D=new Float32Array(O+2-O%2),I=new Float32Array(O+2-O%2);D[0]=N[0],I[0]=-N[O-1];const L=Math.ceil((O+1)/2),A=(O+1)/2-1;for(let V=1;V<L;V+=1){const F=V/L*A,U=Math.floor(F),B=Math.ceil(F);D[V]=U===B?N[U]:(1-(F-U))*N[U]+(1-(B-F))*N[B],I[V]=U===B?-N[O-1-U]:-((1-(F-U))*N[O-1-U])-(1-(B-F))*N[O-1-B]}D[L]=O%2===1?N[L-1]:(N[L-2]+N[L-1])/2,d.curve=D,h.curve=I}C=N,S&&(r(C)&&w===null?w=n(i,f):w!==null&&(w(),w=null))},get inputs(){return[f]},get numberOfInputs(){return d.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get oversample(){return d.oversample},set oversample(N){d.oversample=N,h.oversample=N},addEventListener(...N){return f.addEventListener(N[0],N[1],N[2])},dispatchEvent(...N){return f.dispatchEvent(N[0])},removeEventListener(...N){return f.removeEventListener(N[0],N[1],N[2])}};o!==null&&(T.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==T.oversample&&(T.oversample=a);const k=()=>{f.connect(d).connect(y),f.connect(m).connect(h).connect(v).connect(y),S=!0,r(C)&&(w=n(i,f))},M=()=>{f.disconnect(d),d.disconnect(y),f.disconnect(m),m.disconnect(h),h.disconnect(v),v.disconnect(y),S=!1,w!==null&&(w(),w=null)};return s(Kl(T,y),k,M)},Un=()=>new DOMException("","NotSupportedError"),dJ={numberOfChannels:1},hJ=(n,e,t,r,s)=>class extends n{constructor(o,a,c){let d;if(typeof o=="number"&&a!==void 0&&c!==void 0)d={length:a,numberOfChannels:o,sampleRate:c};else if(typeof o=="object")d=o;else throw new Error("The given parameters are not valid.");const{length:h,numberOfChannels:f,sampleRate:m}={...dJ,...d},y=r(f,h,m);e(ju,()=>ju(y))||y.addEventListener("statechange",(()=>{let v=0;const w=S=>{this._state==="running"&&(v>0?(y.removeEventListener("statechange",w),S.stopImmediatePropagation(),this._waitForThePromiseToSettle(S)):v+=1)};return w})()),super(y,f),this._length=h,this._nativeOfflineAudioContext=y,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",s(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,NR(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},fJ={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},pJ=(n,e,t,r,s,i,o)=>class extends n{constructor(c,d){const h=s(c),f={...fJ,...d},m=t(h,f),y=i(h),v=y?r():null,w=c.sampleRate/2;super(c,!1,m,v),this._detune=e(this,y,m.detune,153600,-153600),this._frequency=e(this,y,m.frequency,w,-w),this._nativeOscillatorNode=m,this._onended=null,this._oscillatorNodeRenderer=v,this._oscillatorNodeRenderer!==null&&f.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=f.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const d=typeof c=="function"?o(this,c):null;this._nativeOscillatorNode.onended=d;const h=this._nativeOscillatorNode.onended;this._onended=h!==null&&h===d?c:h}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){El(this);const d=()=>{this._nativeOscillatorNode.removeEventListener("ended",d),ti(this)&&nd(this)};this._nativeOscillatorNode.addEventListener("ended",d)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}},mJ=(n,e,t,r,s)=>()=>{const i=new WeakMap;let o=null,a=null,c=null;const d=async(h,f)=>{let m=t(h);const y=Rn(m,f);if(!y){const v={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,detune:m.detune.value,frequency:m.frequency.value,periodicWave:o===null?void 0:o,type:m.type};m=e(f,v),a!==null&&m.start(a),c!==null&&m.stop(c)}return i.set(f,m),y?(await n(f,h.detune,m.detune),await n(f,h.frequency,m.frequency)):(await r(f,h.detune,m.detune),await r(f,h.frequency,m.frequency)),await s(h,f,m),m};return{set periodicWave(h){o=h},set start(h){a=h},set stop(h){c=h},render(h,f){const m=i.get(f);return m!==void 0?Promise.resolve(m):d(h,f)}}},gJ={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},yJ=(n,e,t,r,s,i,o)=>class extends n{constructor(c,d){const h=s(c),f={...gJ,...d},m=t(h,f),y=i(h),v=y?r():null;super(c,!1,m,v),this._nativePannerNode=m,this._orientationX=e(this,y,m.orientationX,Ln,lr),this._orientationY=e(this,y,m.orientationY,Ln,lr),this._orientationZ=e(this,y,m.orientationZ,Ln,lr),this._positionX=e(this,y,m.positionX,Ln,lr),this._positionY=e(this,y,m.positionY,Ln,lr),this._positionZ=e(this,y,m.positionZ,Ln,lr),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}},vJ=(n,e,t,r,s,i,o,a,c,d)=>()=>{const h=new WeakMap;let f=null;const m=async(y,v)=>{let w=null,S=i(y);const C={channelCount:S.channelCount,channelCountMode:S.channelCountMode,channelInterpretation:S.channelInterpretation},T={...C,coneInnerAngle:S.coneInnerAngle,coneOuterAngle:S.coneOuterAngle,coneOuterGain:S.coneOuterGain,distanceModel:S.distanceModel,maxDistance:S.maxDistance,panningModel:S.panningModel,refDistance:S.refDistance,rolloffFactor:S.rolloffFactor},k=Rn(S,v);if("bufferSize"in S)w=r(v,{...C,gain:1});else if(!k){const M={...T,orientationX:S.orientationX.value,orientationY:S.orientationY.value,orientationZ:S.orientationZ.value,positionX:S.positionX.value,positionY:S.positionY.value,positionZ:S.positionZ.value};S=s(v,M)}if(h.set(v,w===null?S:w),w!==null){if(f===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const V=new o(6,y.context.length,v.sampleRate),F=e(V,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});F.connect(V.destination),f=(async()=>{const U=await Promise.all([y.orientationX,y.orientationY,y.orientationZ,y.positionX,y.positionY,y.positionZ].map(async(B,q)=>{const K=t(V,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:q===0?1:0});return await a(V,B,K.offset),K}));for(let B=0;B<6;B+=1)U[B].connect(F,0,B),U[B].start(0);return d(V)})()}const M=await f,N=r(v,{...C,gain:1});await c(y,v,N);const O=[];for(let V=0;V<M.numberOfChannels;V+=1)O.push(M.getChannelData(V));let D=[O[0][0],O[1][0],O[2][0]],I=[O[3][0],O[4][0],O[5][0]],L=r(v,{...C,gain:1}),A=s(v,{...T,orientationX:D[0],orientationY:D[1],orientationZ:D[2],positionX:I[0],positionY:I[1],positionZ:I[2]});N.connect(L).connect(A.inputs[0]),A.connect(w);for(let V=128;V<M.length;V+=128){const F=[O[0][V],O[1][V],O[2][V]],U=[O[3][V],O[4][V],O[5][V]];if(F.some((B,q)=>B!==D[q])||U.some((B,q)=>B!==I[q])){D=F,I=U;const B=V/v.sampleRate;L.gain.setValueAtTime(0,B),L=r(v,{...C,gain:0}),A=s(v,{...T,orientationX:D[0],orientationY:D[1],orientationZ:D[2],positionX:I[0],positionY:I[1],positionZ:I[2]}),L.gain.setValueAtTime(1,B),N.connect(L).connect(A.inputs[0]),A.connect(w)}}return w}return k?(await n(v,y.orientationX,S.orientationX),await n(v,y.orientationY,S.orientationY),await n(v,y.orientationZ,S.orientationZ),await n(v,y.positionX,S.positionX),await n(v,y.positionY,S.positionY),await n(v,y.positionZ,S.positionZ)):(await a(v,y.orientationX,S.orientationX),await a(v,y.orientationY,S.orientationY),await a(v,y.orientationZ,S.orientationZ),await a(v,y.positionX,S.positionX),await a(v,y.positionY,S.positionY),await a(v,y.positionZ,S.positionZ)),Gl(S)?await c(y,v,S.inputs[0]):await c(y,v,S),S};return{render(y,v){const w=h.get(v);return w!==void 0?Promise.resolve(w):m(y,v)}}},xJ={disableNormalization:!1},wJ=(n,e,t,r)=>class FR{constructor(i,o){const a=e(i),c=r({...xJ,...o}),d=n(a,c);return t.add(d),d}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===FR.prototype||t.has(i)}},bJ=(n,e)=>(t,r,s)=>(n(r).replay(s),e(r,t,s)),SJ=(n,e,t)=>async(r,s,i)=>{const o=n(r);await Promise.all(o.activeInputs.map((a,c)=>Array.from(a).map(async([d,h])=>{const m=await e(d).render(d,s),y=r.context.destination;!t(d)&&(r!==y||!t(r))&&m.connect(i,h,c)})).reduce((a,c)=>[...a,...c],[]))},CJ=(n,e,t)=>async(r,s,i)=>{const o=e(r);await Promise.all(Array.from(o.activeInputs).map(async([a,c])=>{const h=await n(a).render(a,s);t(a)||h.connect(i,c)}))},_J=(n,e,t,r)=>s=>n(ju,()=>ju(s))?Promise.resolve(n(r,r)).then(i=>{if(!i){const o=t(s,512,0,1);s.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>s.currentTime,o.connect(s.destination)}return s.startRendering()}):new Promise(i=>{const o=e(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});s.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(s.destination),s.startRendering()}),TJ=n=>(e,t)=>{n.set(e,t)},kJ=n=>(e,t)=>n.set(e,t),EJ=(n,e,t,r,s,i,o,a)=>(c,d)=>t(c).render(c,d).then(()=>Promise.all(Array.from(r(d)).map(h=>t(h).render(h,d)))).then(()=>s(d)).then(h=>(typeof h.copyFromChannel!="function"?(o(h),Iw(h)):e(i,()=>i(h))||a(h),n.add(h),h)),NJ={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},AJ=(n,e,t,r,s,i)=>class extends n{constructor(a,c){const d=s(a),h={...NJ,...c},f=t(d,h),m=i(d),y=m?r():null;super(a,!1,f,y),this._pan=e(this,m,f.pan)}get pan(){return this._pan}},MJ=(n,e,t,r,s)=>()=>{const i=new WeakMap,o=async(a,c)=>{let d=t(a);const h=Rn(d,c);if(!h){const f={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,pan:d.pan.value};d=e(c,f)}return i.set(c,d),h?await n(c,a.pan,d.pan):await r(c,a.pan,d.pan),Gl(d)?await s(a,c,d.inputs[0]):await s(a,c,d),d};return{render(a,c){const d=i.get(c);return d!==void 0?Promise.resolve(d):o(a,c)}}},OJ=n=>()=>{if(n===null)return!1;try{new n({length:1,sampleRate:44100})}catch{return!1}return!0},PJ=(n,e)=>async()=>{if(n===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),s=URL.createObjectURL(t);let i=!1,o=!1;try{await r.audioWorklet.addModule(s);const a=new n(r,"a",{numberOfOutputs:0}),c=r.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,c.connect(a),c.start(0),await r.startRendering(),await new Promise(d=>setTimeout(d))}catch{}finally{URL.revokeObjectURL(s)}return i&&!o},DJ=(n,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),r=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(s=>{t.oncomplete=()=>{r.disconnect(),s(t.currentTime!==0)},t.startRendering()})},RJ=()=>new DOMException("","UnknownError"),IJ={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},jJ=(n,e,t,r,s,i,o)=>class extends n{constructor(c,d){const h=s(c),f={...IJ,...d},m=t(h,f),v=i(h)?r():null;super(c,!0,m,v),this._isCurveNullified=!1,this._nativeWaveShaperNode=m,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}},LJ=(n,e,t)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Rn(a,o)){const d={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=n(o,d)}return r.set(o,a),Gl(a)?await t(i,o,a.inputs[0]):await t(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},FJ=()=>typeof window>"u"?null:window,VJ=(n,e)=>t=>{t.copyFromChannel=(r,s,i=0)=>{const o=n(i),a=n(s);if(a>=t.numberOfChannels)throw e();const c=t.length,d=t.getChannelData(a),h=r.length;for(let f=o<0?-o:0;f+o<c&&f<h;f+=1)r[f]=d[f+o]},t.copyToChannel=(r,s,i=0)=>{const o=n(i),a=n(s);if(a>=t.numberOfChannels)throw e();const c=t.length,d=t.getChannelData(a),h=r.length;for(let f=o<0?-o:0;f+o<c&&f<h;f+=1)d[f+o]=r[f]}},BJ=n=>e=>{e.copyFromChannel=(t=>(r,s,i=0)=>{const o=n(i),a=n(s);if(o<e.length)return t.call(e,r,a,o)})(e.copyFromChannel),e.copyToChannel=(t=>(r,s,i=0)=>{const o=n(i),a=n(s);if(o<e.length)return t.call(e,r,a,o)})(e.copyToChannel)},zJ=n=>(e,t)=>{const r=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=r),n(e,"buffer",s=>()=>{const i=s.call(e);return i===r?null:i},s=>i=>s.call(e,i===null?r:i))},WJ=(n,e)=>(t,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw n()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw n()}});const s=t.createBufferSource();e(r,()=>{const a=r.numberOfInputs;for(let c=0;c<a;c+=1)s.connect(r,0,c)},()=>s.disconnect(r))},VR=(n,e,t)=>n.copyFromChannel===void 0?n.getChannelData(t)[0]:(n.copyFromChannel(e,t),e[0]),BR=n=>{if(n===null)return!1;const e=n.length;return e%2!==0?n[Math.floor(e/2)]!==0:n[e/2-1]+n[e/2]!==0},ad=(n,e,t,r)=>{let s=n;for(;!s.hasOwnProperty(e);)s=Object.getPrototypeOf(s);const{get:i,set:o}=Object.getOwnPropertyDescriptor(s,e);Object.defineProperty(n,e,{get:t(i),set:r(o)})},$J=n=>({...n,outputChannelCount:n.outputChannelCount!==void 0?n.outputChannelCount:n.numberOfInputs===1&&n.numberOfOutputs===1?[n.channelCount]:Array.from({length:n.numberOfOutputs},()=>1)}),HJ=n=>({...n,channelCount:n.numberOfOutputs}),UJ=n=>{const{imag:e,real:t}=n;return e===void 0?t===void 0?{...n,imag:[0,0],real:[0,0]}:{...n,imag:Array.from(t,()=>0),real:t}:t===void 0?{...n,imag:e,real:Array.from(e,()=>0)}:{...n,imag:e,real:t}},zR=(n,e,t)=>{try{n.setValueAtTime(e,t)}catch(r){if(r.code!==9)throw r;zR(n,e,t+1e-7)}},qJ=n=>{const e=n.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},GJ=n=>{const e=n.createBufferSource(),t=n.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},KJ=n=>{const e=n.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},Bw=n=>{const e=n.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},WR=n=>{const e=n.createBuffer(1,1,44100),t=n.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},zw=n=>{const e=n.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},YJ=n=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(n)}finally{e.close(),t.close()}},XJ=n=>{n.start=(e=>(t=0,r=0,s)=>{const i=n.buffer,o=i===null?r:Math.min(i.duration,r);i!==null&&o>i.duration-.5/n.context.sampleRate?e.call(n,t,0,0):e.call(n,t,o,s)})(n.start)},$R=(n,e)=>{const t=e.createGain();n.connect(t);const r=(s=>()=>{s.call(n,t),n.removeEventListener("ended",r)})(n.disconnect);n.addEventListener("ended",r),Kl(n,t),n.stop=(s=>{let i=!1;return(o=0)=>{if(i)try{s.call(n,o)}catch{t.gain.setValueAtTime(0,o)}else s.call(n,o),i=!0}})(n.stop)},Yl=(n,e)=>t=>{const r={value:n};return Object.defineProperties(t,{currentTarget:r,target:r}),typeof e=="function"?e.call(n,t):e.handleEvent.call(n,t)},JJ=y7(la),ZJ=C7(la),QJ=IY(Vp),HR=new WeakMap,eZ=QY(HR),as=dY(new Map,new WeakMap),ks=FJ(),UR=AX(as,Os),Ww=ZY(Vn),wn=SJ(Vn,Ww,ea),tZ=N7(UR,_t,wn),vt=nX(Fp),li=nJ(ks),dt=xX(li),qR=new WeakMap,GR=UY(Yl),ld=DX(ks),$w=mX(ld),Hw=gX(ks),KR=yX(ks),Lu=IX(ks),zt=Q7(v7(bR),S7(JJ,ZJ,qf,QJ,Gf,Vn,eZ,td,_t,la,ti,ea,af),as,uX(m0,Gf,Vn,_t,Iu,ti),Os,Bp,Un,OY(qf,m0,Vn,_t,Iu,vt,ti,dt),FY(qR,Vn,ts),GR,vt,$w,Hw,KR,dt,Lu),nZ=E7(zt,tZ,Os,UR,vt,dt),Uw=new WeakSet,Dk=MX(ks),YR=_Y(new Uint32Array(1)),qw=VJ(YR,Os),Gw=BJ(YR),XR=M7(Uw,as,Un,Dk,li,OJ(Dk),qw,Gw),zp=_7(nr),JR=CJ(Ww,rd,ea),Ps=vY(JR),Xl=PX(zp,as,qJ,GJ,KJ,Bw,WR,zw,XJ,zJ(ad),$R),Ds=bJ(eX(rd),JR),rZ=D7(Ps,Xl,_t,Ds,wn),ls=eY(x7(SR),qR,Rw,tY,d7,h7,f7,p7,m7,h0,xR,ld,zR),sZ=P7(zt,rZ,ls,an,Xl,vt,dt,Yl),iZ=W7(zt,$7,Os,an,RX(nr,ad),vt,dt,wn),oZ=uY(Ps,jR,_t,Ds,wn),ca=kJ(HR),aZ=cY(zt,ls,oZ,Bp,jR,vt,dt,ca),yo=EX(la,Hw),lZ=WJ(an,yo),vo=WX(ld,lZ),cZ=pY(vo,_t,wn),uZ=fY(zt,cZ,vo,vt,dt),dZ=yY(id,_t,wn),hZ=gY(zt,dZ,id,vt,dt,HJ),fZ=UX(zp,Xl,nr,yo),Jl=HX(zp,as,fZ,Bw,zw),pZ=CY(Ps,Jl,_t,Ds,wn),mZ=SY(zt,ls,pZ,Jl,vt,dt,Yl),ZR=qX(Un,ad),gZ=EY(ZR,_t,wn),yZ=kY(zt,gZ,ZR,vt,dt,ca),vZ=RY(Ps,LR,_t,Ds,wn),xZ=DY(zt,ls,vZ,LR,vt,dt,ca),QR=GX(Un),wZ=WY(Ps,QR,_t,Ds,wn),bZ=zY(zt,ls,wZ,QR,Un,vt,dt,ca),SZ=XY(Ps,nr,_t,Ds,wn),CZ=YY(zt,ls,SZ,nr,vt,dt),_Z=JX(Bp,an,od,Un),Wp=_J(as,nr,od,DJ(nr,li)),TZ=cX(Xl,_t,li,wn,Wp),kZ=KX(_Z),EZ=aX(zt,kZ,TZ,vt,dt,ca),NZ=H7(ls,vo,Jl,od,Un,VR,dt,ad),eI=new WeakMap,AZ=kX(iZ,NZ,GR,dt,eI,Yl),tI=rJ(zp,as,Bw,WR,zw,$R),MZ=mJ(Ps,tI,_t,Ds,wn),OZ=pJ(zt,ls,tI,MZ,vt,dt,Yl),nI=wY(Xl),PZ=uJ(nI,an,nr,BR,yo),$p=cJ(nI,an,PZ,BR,yo,ld,ad),DZ=iJ(qf,an,vo,nr,od,$p,Un,Gf,VR,yo),rI=sJ(DZ),RZ=vJ(Ps,vo,Jl,nr,rI,_t,li,Ds,wn,Wp),IZ=yJ(zt,ls,rI,RZ,vt,dt,ca),jZ=oJ(Os),LZ=wJ(jZ,vt,new WeakSet,UJ),FZ=lJ(vo,id,nr,$p,Un,yo),sI=aJ(FZ,Un),VZ=MJ(Ps,sI,_t,Ds,wn),BZ=AJ(zt,ls,sI,VZ,vt,dt),zZ=LJ($p,_t,wn),WZ=jJ(zt,an,$p,zZ,vt,dt,ca),iI=wX(ks),Kw=qY(ks),oI=new WeakMap,$Z=rX(oI,li),HZ=iI?b7(as,Un,HY(ks),Kw,GY(g7),vt,$Z,dt,Lu,new WeakMap,new WeakMap,PJ(Lu,li),ks):void 0,UZ=vX($w,dt),qZ=MY(Uw,as,AY,$Y,new WeakSet,vt,UZ,Hf,ju,qw,Gw),aI=aY(HZ,nZ,XR,sZ,aZ,uZ,hZ,mZ,yZ,qZ,xZ,bZ,CZ,EZ,AZ,OZ,IZ,LZ,BZ,WZ),GZ=bX(zt,ZX,vt,dt),KZ=CX(zt,QX,vt,dt),YZ=_X(zt,eJ,vt,dt),XZ=tJ(an,dt),JZ=TX(zt,XZ,vt),ZZ=z7(aI,an,Un,RJ,GZ,KZ,YZ,JZ,ld),Yw=sX(eI),QZ=T7(Yw),lI=xY(Os),eQ=jY(Yw),cI=VY(Os),uI=new WeakMap,tQ=JY(uI,ts),nQ=zX(lI,Os,an,vo,id,Jl,nr,od,Un,cI,Kw,tQ,yo),rQ=LX(an,nQ,nr,Un,yo),sQ=oY(Ps,lI,Xl,vo,id,Jl,nr,eQ,cI,Kw,_t,Lu,li,Ds,wn,Wp),iQ=tX(oI),oQ=TJ(uI),Rk=iI?rY(QZ,zt,ls,sQ,rQ,Vn,iQ,vt,dt,Lu,$J,oQ,YJ,Yl):void 0,aQ=NY(Un,li),lQ=EJ(Uw,as,Ww,Yw,Wp,Hf,qw,Gw),cQ=hJ(aI,as,an,aQ,lQ),uQ=dX(Fp,$w),dQ=hX(Dw,Hw),hQ=fX(Rw,KR),fQ=pX(Fp,dt);function Dr(n){return n===void 0}function rt(n){return n!==void 0}function pQ(n){return typeof n=="function"}function ta(n){return typeof n=="number"}function Go(n){return Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object}function mQ(n){return typeof n=="boolean"}function Jr(n){return Array.isArray(n)}function oi(n){return typeof n=="string"}function Hh(n){return oi(n)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(n)}function Ze(n,e){if(!n)throw new Error(e)}function ao(n,e,t=1/0){if(!(e<=n&&n<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${n}`)}function dI(n){!n.isOffline&&n.state!=="running"&&Xw('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let hI=!1,Ik=!1;function jk(n){hI=n}function gQ(n){Dr(n)&&hI&&!Ik&&(Ik=!0,Xw("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let fI=console;function yQ(...n){fI.log(...n)}function Xw(...n){fI.warn(...n)}function vQ(n){return new ZZ(n)}function xQ(n,e,t){return new cQ(n,e,t)}const cr=typeof self=="object"?self:null,wQ=cr&&(cr.hasOwnProperty("AudioContext")||cr.hasOwnProperty("webkitAudioContext"));function bQ(n,e,t){return Ze(rt(Rk),"AudioWorkletNode only works in a secure context (https or localhost)"),new(n instanceof(cr==null?void 0:cr.BaseAudioContext)?cr==null?void 0:cr.AudioWorkletNode:Rk)(n,e,t)}class SQ{constructor(e,t,r,s){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(s||44100),.001),this.updateInterval=r,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),r=new Worker(t);r.onmessage=this._callback.bind(this),this._worker=r}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((t=this._worker)===null||t===void 0||t.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function na(n){return hQ(n)}function Qi(n){return dQ(n)}function lf(n){return fQ(n)}function Wa(n){return uQ(n)}function CQ(n){return n instanceof XR}function _Q(n,e){return n==="value"||na(e)||Qi(e)||CQ(e)}function cl(n,...e){if(!e.length)return n;const t=e.shift();if(Go(n)&&Go(t))for(const r in t)_Q(r,t[r])?n[r]=t[r]:Go(t[r])?(n[r]||Object.assign(n,{[r]:{}}),cl(n[r],t[r])):Object.assign(n,{[r]:t[r]});return cl(n,...e)}function TQ(n,e){return n.length===e.length&&n.every((t,r)=>e[r]===t)}function Xe(n,e,t=[],r){const s={},i=Array.from(e);if(Go(i[0])&&r&&!Reflect.has(i[0],r)&&(Object.keys(i[0]).some(a=>Reflect.has(n,a))||(cl(s,{[r]:i[0]}),t.splice(t.indexOf(r),1),i.shift())),i.length===1&&Go(i[0]))cl(s,i[0]);else for(let o=0;o<t.length;o++)rt(i[o])&&(s[t[o]]=i[o]);return cl(n,s)}function kQ(n){return n.constructor.getDefaults()}function ul(n,e){return Dr(n)?e:n}function Lk(n,e){return e.forEach(t=>{Reflect.has(n,t)&&delete n[t]}),n}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class ci{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||cr&&this.toString()===cr.TONE_DEBUG_CLASS)&&yQ(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}ci.version=vR;const Jw=1e-6;function Nl(n,e){return n>e+Jw}function w0(n,e){return Nl(n,e)||Gr(n,e)}function Jf(n,e){return n+Jw<e}function Gr(n,e){return Math.abs(n-e)<Jw}function EQ(n,e,t){return Math.max(Math.min(n,t),e)}class Rr extends ci{constructor(){super(),this.name="Timeline",this._timeline=[];const e=Xe(Rr.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(Ze(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];Ze(w0(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const r=this._search(e,t);return r!==-1?this._timeline[r]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const r=this._search(e,t);return r+1<this._timeline.length?this._timeline[r+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const r=this._search(e);return r-1>=0?this._timeline[r-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(Gr(this._timeline[t].time,e)){for(let r=t;r>=0&&Gr(this._timeline[r].time,e);r--)t=r;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&w0(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let r=0;const s=this._timeline.length;let i=s;if(s>0&&this._timeline[s-1][t]<=e)return s-1;for(;r<i;){let o=Math.floor(r+(i-r)/2);const a=this._timeline[o],c=this._timeline[o+1];if(Gr(a[t],e)){for(let d=o;d<this._timeline.length;d++){const h=this._timeline[d];if(Gr(h[t],e))o=d;else break}return o}else{if(Jf(a[t],e)&&Nl(c[t],e))return o;Nl(a[t],e)?i=o:r=o+1}}return-1}_iterate(e,t=0,r=this._timeline.length-1){this._timeline.slice(t,r+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const r=this._search(e);return r!==-1&&this._iterate(t,0,r),this}forEachAfter(e,t){const r=this._search(e);return this._iterate(t,r+1),this}forEachBetween(e,t,r){let s=this._search(e),i=this._search(t);return s!==-1&&i!==-1?(this._timeline[s].time!==e&&(s+=1),this._timeline[i].time===t&&(i-=1),this._iterate(r,s,i)):s===-1&&this._iterate(r,0,i),this}forEachFrom(e,t){let r=this._search(e);for(;r>=0&&this._timeline[r].time>=e;)r--;return this._iterate(t,r+1),this}forEachAtTime(e,t){const r=this._search(e);if(r!==-1&&Gr(this._timeline[r].time,e)){let s=r;for(let i=r;i>=0&&Gr(this._timeline[i].time,e);i--)s=i;this._iterate(i=>{t(i)},s,r)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const pI=[];function Hp(n){pI.push(n)}function NQ(n){pI.forEach(e=>e(n))}const mI=[];function Up(n){mI.push(n)}function AQ(n){mI.forEach(e=>e(n))}class cd extends ci{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(s=>{Dr(this._events)&&(this._events={}),this._events.hasOwnProperty(s)||(this._events[s]=[]),this._events[s].push(t)}),this}once(e,t){const r=(...s)=>{t(...s),this.off(e,r)};return this.on(e,r),this}off(e,t){return e.split(/\W+/).forEach(s=>{if(Dr(this._events)&&(this._events={}),this._events.hasOwnProperty(s))if(Dr(t))this._events[s]=[];else{const i=this._events[s];for(let o=i.length-1;o>=0;o--)i[o]===t&&i.splice(o,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const r=this._events[e].slice(0);for(let s=0,i=r.length;s<i;s++)r[s].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const r=Object.getOwnPropertyDescriptor(cd.prototype,t);Object.defineProperty(e.prototype,t,r)})}dispose(){return super.dispose(),this._events=void 0,this}}class gI extends cd{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class ud extends gI{constructor(){var e,t;super(),this.name="Context",this._constants=new Map,this._timeouts=new Rr,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const r=Xe(ud.getDefaults(),arguments,["context"]);r.context?(this._context=r.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=vQ({latencyHint:r.latencyHint}),this._latencyHint=r.latencyHint),this._ticker=new SQ(this.emit.bind(this,"tick"),r.clockSource,r.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((t=arguments[0])===null||t===void 0)&&t.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=r.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(NQ(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,r){return this._context.createBuffer(e,t,r)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,r){return this._context.createPeriodicWave(e,t,r)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return Ze(Wa(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return Ze(Wa(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return Ze(Wa(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){Ze(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){Ze(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){Ze(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){Ze(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return bQ(this.rawContext,e,t)}addAudioWorkletModule(e){return Kt(this,void 0,void 0,function*(){Ze(rt(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return Kt(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return Wa(this._context)?this._context.resume():Promise.resolve()}close(){return Kt(this,void 0,void 0,function*(){Wa(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&AQ(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),r=t.getChannelData(0);for(let i=0;i<r.length;i++)r[i]=e;const s=this._context.createBufferSource();return s.channelCount=1,s.channelCountMode="explicit",s.buffer=t,s.loop=!0,s.start(0),this._constants.set(e,s),s}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();let t=this._timeouts.peek();for(;this._timeouts.length&&t&&t.time<=e;)t.callback(),this._timeouts.shift(),t=this._timeouts.peek()}setTimeout(e,t){this._timeoutIds++;const r=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:r+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const r=++this._timeoutIds,s=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),s()},id:r,time:i+t})};return s(),r}}class MQ extends gI{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,r){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,r){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return Kt(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function jt(n,e){Jr(e)?e.forEach(t=>jt(n,t)):Object.defineProperty(n,e,{enumerable:!0,writable:!1})}function yI(n,e){Jr(e)?e.forEach(t=>yI(n,t)):Object.defineProperty(n,e,{writable:!0})}const ct=()=>{};class St extends ci{constructor(){super(),this.name="ToneAudioBuffer",this.onload=ct;const e=Xe(St.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,oi(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:ct,onload:ct,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Yr().sampleRate}set(e){return e instanceof St?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return Kt(this,void 0,void 0,function*(){const t=St.load(e).then(r=>{this.set(r),this.onload(this)});St.downloads.push(t);try{yield t}finally{const r=St.downloads.indexOf(t);St.downloads.splice(r,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=Jr(e)&&e[0].length>0,r=t?e.length:1,s=t?e[0].length:e.length,i=Yr(),o=i.createBuffer(r,s,i.sampleRate),a=!t&&r===1?[e]:e;for(let c=0;c<r;c++)o.copyToChannel(a[c],c);return this._buffer=o,this}toMono(e){if(ta(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const r=this.numberOfChannels;for(let s=0;s<r;s++){const i=this.toArray(s);for(let o=0;o<i.length;o++)t[o]+=i[o]}t=t.map(s=>s/r),this.fromArray(t)}return this}toArray(e){if(ta(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let r=0;r<this.numberOfChannels;r++)t[r]=this.getChannelData(r);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){Ze(this.loaded,"Buffer is not loaded");const r=Math.floor(e*this.sampleRate),s=Math.floor(t*this.sampleRate);Ze(r<s,"The start time must be less than the end time");const i=s-r,o=Yr().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(r,s),a);return new St(o)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new St().fromArray(e)}static fromUrl(e){return Kt(this,void 0,void 0,function*(){return yield new St().load(e)})}static load(e){return Kt(this,void 0,void 0,function*(){const t=e.match(/\[([^\]\[]+\|.+)\]$/);if(t){const c=t[1].split("|");let d=c[0];for(const h of c)if(St.supportsType(h)){d=h;break}e=e.replace(t[0],d)}const r=St.baseUrl===""||St.baseUrl.endsWith("/")?St.baseUrl:St.baseUrl+"/",s=document.createElement("a");s.href=r+e,s.pathname=(s.pathname+s.hash).split("/").map(encodeURIComponent).join("/");const i=yield fetch(s.href);if(!i.ok)throw new Error(`could not load url: ${e}`);const o=yield i.arrayBuffer();return yield Yr().decodeAudioData(o)})}static supportsType(e){const t=e.split("."),r=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+r)!==""}static loaded(){return Kt(this,void 0,void 0,function*(){for(yield Promise.resolve();St.downloads.length;)yield St.downloads[0]})}}St.baseUrl="";St.downloads=[];class Zw extends ud{constructor(){super({clockSource:"offline",context:lf(arguments[0])?arguments[0]:xQ(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:lf(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=lf(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return Kt(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const r=Math.floor(this.sampleRate/128);e&&t%r===0&&(yield new Promise(s=>setTimeout(s,1)))}})}render(){return Kt(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new St(t)})}close(){return Promise.resolve()}}const vI=new MQ;let Za=vI;function Yr(){return Za===vI&&wQ&&OQ(new ud),Za}function OQ(n,e=!1){e&&Za.dispose(),Wa(n)?Za=new ud(n):lf(n)?Za=new Zw(n):Za=n}if(cr&&!cr.TONE_SILENCE_LOGGING){const e=` * Tone.js v${vR} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function PQ(n){return Math.pow(10,n/20)}function DQ(n){return 20*(Math.log(n)/Math.LN10)}function xI(n){return Math.pow(2,n/12)}let qp=440;function RQ(){return qp}function IQ(n){qp=n}function b0(n){return Math.round(wI(n))}function wI(n){return 69+12*Math.log2(n/qp)}function jQ(n){return qp*Math.pow(2,(n-69)/12)}class Qw extends ci{constructor(e,t,r){super(),this.defaultUnits="s",this._val=t,this._units=r,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const r=parseInt(e,10),s=t==="."?1.5:1;return r===1?this._beatsToUnits(this._getTimeSignature())*s:this._beatsToUnits(4/r)*s},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,r)=>{let s=0;return e&&e!=="0"&&(s+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(s+=this._beatsToUnits(parseFloat(t))),r&&r!=="0"&&(s+=this._beatsToUnits(parseFloat(r)/4)),s},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Qw&&this.fromType(this._val),Dr(this._val))return this._noArg();if(oi(this._val)&&Dr(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(Go(this._val)){let e=0;for(const t in this._val)if(rt(this._val[t])){const r=this._val[t],s=new this.constructor(this.context,t).valueOf()*r;e+=s}return e}if(rt(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return oi(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class Xr extends Qw{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new Xr(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const r=new this.constructor(this.context,e).valueOf(),s=this.valueOf(),a=Math.round(s/r)*r-s;return s+a*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);t.push(o+"n."),t.push(o+"n"),t.push(o+"t")}t.push("0");let r=t[0],s=new Xr(this.context,t[0]).toSeconds();return t.forEach(i=>{const o=new Xr(this.context,i).toSeconds();Math.abs(o-e)<Math.abs(s-e)&&(r=i,s=o)}),r}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const r=Math.floor(t/this._getTimeSignature());let s=t%1*4;t=Math.floor(t)%this._getTimeSignature();const i=s.toString();return i.length>3&&(s=parseFloat(parseFloat(i).toFixed(3))),[r,t,s].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return b0(this.toFrequency())}_now(){return this.context.now()}}class Mr extends Xr{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return RQ()}static set A4(e){IQ(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:Mr.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){const s=LQ[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?s:Mr.mtof(s)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,r){let s=1;return e&&e!=="0"&&(s*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(s*=this._beatsToUnits(parseFloat(t))),r&&r!=="0"&&(s*=this._beatsToUnits(parseFloat(r)/4)),s}}})}transpose(e){return new Mr(this.context,this.valueOf()*xI(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return b0(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/Mr.A4);let r=Math.round(12*t)+57;const s=Math.floor(r/12);return s<0&&(r+=-12*s),FQ[r%12]+s.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return jQ(e)}static ftom(e){return b0(e)}}const LQ={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},FQ=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class cu extends Xr{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class tr extends ci{constructor(){super();const e=Xe(tr.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:Yr()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return gQ(e),new Xr(this.context,e).toSeconds()}toFrequency(e){return new Mr(this.context,e).toFrequency()}toTicks(e){return new cu(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(r=>{Dr(e[r])&&delete t[r]}),t}get(){const e=kQ(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const r=this[t];rt(r)&&rt(r.value)&&rt(r.setValueAtTime)?e[t]=r.value:r instanceof tr?e[t]=r._getPartialProperties(e[t]):Jr(r)||ta(r)||oi(r)||mQ(r)?e[t]=r:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&rt(this[t])&&(this[t]&&rt(this[t].value)&&rt(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof tr?this[t].set(e[t]):this[t]=e[t])}),this}}class eb extends Rr{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,r){return ao(t,0),this.add(Object.assign({},r,{state:e,time:t})),this}getLastState(e,t){const r=this._search(t);for(let s=r;s>=0;s--){const i=this._timeline[s];if(i.state===e)return i}}getNextState(e,t){const r=this._search(t);if(r!==-1)for(let s=r;s<this._timeline.length;s++){const i=this._timeline[s];if(i.state===e)return i}}}class Mt extends tr{constructor(){const e=Xe(Mt.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,Ze(rt(e.param)&&(na(e.param)||e.param instanceof Mt),"param must be an AudioParam");!na(e.param);)e.param=e.param._param;this._swappable=rt(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Rr(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,rt(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(tr.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return rt(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return rt(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return rt(this.maxValue)&&rt(this.minValue)&&ao(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?PQ(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?DQ(e):e}setValueAtTime(e,t){const r=this.toSeconds(t),s=this._fromType(e);return Ze(isFinite(s)&&isFinite(r),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(s),this.log(this.units,"setValueAtTime",e,r),this._events.add({time:r,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,r),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),r=this._events.getAfter(t),s=this._events.get(t);let i=this._initialValue;if(s===null)i=this._initialValue;else if(s.type==="setTargetAtTime"&&(r===null||r.type==="setValueAtTime")){const o=this._events.getBefore(s.time);let a;o===null?a=this._initialValue:a=o.value,s.type==="setTargetAtTime"&&(i=this._exponentialApproach(s.time,a,s.value,s.constant,t))}else if(r===null)i=s.value;else if(r.type==="linearRampToValueAtTime"||r.type==="exponentialRampToValueAtTime"){let o=s.value;if(s.type==="setTargetAtTime"){const a=this._events.getBefore(s.time);a===null?o=this._initialValue:o=a.value}r.type==="linearRampToValueAtTime"?i=this._linearInterpolate(s.time,o,r.time,r.value,t):i=this._exponentialInterpolate(s.time,o,r.time,r.value,t)}else i=s.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const r=this._fromType(e),s=this.toSeconds(t);return Ze(isFinite(r)&&isFinite(s),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(r),this._events.add({time:s,type:"linearRampToValueAtTime",value:r}),this.log(this.units,"linearRampToValueAtTime",e,s),this._param.linearRampToValueAtTime(r,s),this}exponentialRampToValueAtTime(e,t){let r=this._fromType(e);r=Gr(r,0)?this._minOutput:r,this._assertRange(r);const s=this.toSeconds(t);return Ze(isFinite(r)&&isFinite(s),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:s,type:"exponentialRampToValueAtTime",value:r}),this.log(this.units,"exponentialRampToValueAtTime",e,s),this._param.exponentialRampToValueAtTime(r,s),this}exponentialRampTo(e,t,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialRampToValueAtTime(e,r+this.toSeconds(t)),this}linearRampTo(e,t,r){return r=this.toSeconds(r),this.setRampPoint(r),this.linearRampToValueAtTime(e,r+this.toSeconds(t)),this}targetRampTo(e,t,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialApproachValueAtTime(e,r,t),this}exponentialApproachValueAtTime(e,t,r){t=this.toSeconds(t),r=this.toSeconds(r);const s=Math.log(r+1)/Math.log(200);return this.setTargetAtTime(e,t,s),this.cancelAndHoldAtTime(t+r*.9),this.linearRampToValueAtTime(e,t+r),this}setTargetAtTime(e,t,r){const s=this._fromType(e);Ze(isFinite(r)&&r>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(t);return this._assertRange(s),Ze(isFinite(s)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:r,time:i,type:"setTargetAtTime",value:s}),this.log(this.units,"setTargetAtTime",e,i,r),this._param.setTargetAtTime(s,i,r),this}setValueCurveAtTime(e,t,r,s=1){r=this.toSeconds(r),t=this.toSeconds(t);const i=this._fromType(e[0])*s;this.setValueAtTime(this._toType(i),t);const o=r/(e.length-1);for(let a=1;a<e.length;a++){const c=this._fromType(e[a])*s;this.linearRampToValueAtTime(this._toType(c),t+a*o)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return Ze(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),r=this._fromType(this.getValueAtTime(t));Ze(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+r);const s=this._events.get(t),i=this._events.getAfter(t);return s&&Gr(s.time,t)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(r),t):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(r),t)),this._events.add({time:t,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,t),this}rampTo(e,t=.1,r){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,r):this.linearRampTo(e,t,r),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const r=this._events.get(t);if(r&&r.type==="setTargetAtTime"){const s=this._events.getAfter(r.time),i=s?s.time:t+2,o=(i-t)/10;for(let a=t;a<i;a+=o)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,s=>{s.type==="cancelScheduledValues"?e.cancelScheduledValues(s.time):s.type==="setTargetAtTime"?e.setTargetAtTime(s.value,s.time,s.constant):e[s.type](s.value,s.time)}),this}setParam(e){Ze(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,r,s,i){return r+(t-r)*Math.exp(-(i-e)/s)}_linearInterpolate(e,t,r,s,i){return t+(s-t)*((i-e)/(r-e))}_exponentialInterpolate(e,t,r,s,i){return t*Math.pow(s/t,(i-e)/(r-e))}}class nt extends tr{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return rt(this.input)?na(this.input)||this.input instanceof Mt?1:this.input.numberOfInputs:0}get numberOfOutputs(){return rt(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return rt(e)&&(e instanceof nt||Qi(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(r=>{r.channelCount=e.channelCount,r.channelCountMode=e.channelCountMode,r.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();Ze(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,r=0){return Zl(this,e,t,r),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Xw("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,r=0){return VQ(this,e,t,r),this}chain(...e){return S0(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),rt(this.input)&&(this.input instanceof nt?this.input.dispose():Qi(this.input)&&this.input.disconnect()),rt(this.output)&&(this.output instanceof nt?this.output.dispose():Qi(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function S0(...n){const e=n.shift();n.reduce((t,r)=>(t instanceof nt?t.connect(r):Qi(t)&&Zl(t,r),r),e)}function Zl(n,e,t=0,r=0){for(Ze(rt(n),"Cannot connect from undefined node"),Ze(rt(e),"Cannot connect to undefined node"),(e instanceof nt||Qi(e))&&Ze(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Ze(n.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof nt||e instanceof Mt;)rt(e.input)&&(e=e.input);for(;n instanceof nt;)rt(n.output)&&(n=n.output);na(e)?n.connect(e,t):n.connect(e,t,r)}function VQ(n,e,t=0,r=0){if(rt(e))for(;e instanceof nt;)e=e.input;for(;!Qi(n);)rt(n.output)&&(n=n.output);na(e)?n.disconnect(e,t):Qi(e)?n.disconnect(e,t,r):n.disconnect()}class Mn extends nt{constructor(){const e=Xe(Mn.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new Mt({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),jt(this,"gain")}static getDefaults(){return Object.assign(nt.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Al extends nt{constructor(e){super(e),this.onended=ct,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Mn({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const r=this.toSeconds(t);return this._startTime!==-1&&r>=this._startTime&&(this._stopTime===-1||r<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(nt.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:ct})}_startGain(e,t=1){Ze(this._startTime===-1,"Source cannot be started more than once");const r=this.toSeconds(this._fadeIn);return this._startTime=e+r,this._startTime=Math.max(this._startTime,this.context.currentTime),r>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+r):this._gainNode.gain.exponentialApproachValueAtTime(t,e,r)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){Ze(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const r=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+r),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==ct&&(this.onended(this),this.onended=ct,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Ze(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=ct,this}}class tb extends Al{constructor(){const e=Xe(tb.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),Zl(this._source,this._gainNode),this.offset=new Mt({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Al.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class un extends nt{constructor(){const e=Xe(un.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new tb({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(nt.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,r=0){return nb(this,e,t,r),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,r){return this._param.exponentialRampTo(e,t,r),this}linearRampTo(e,t,r){return this._param.linearRampTo(e,t,r),this}targetRampTo(e,t,r){return this._param.targetRampTo(e,t,r),this}exponentialApproachValueAtTime(e,t,r){return this._param.exponentialApproachValueAtTime(e,t,r),this}setTargetAtTime(e,t,r){return this._param.setTargetAtTime(e,t,r),this}setValueCurveAtTime(e,t,r,s){return this._param.setValueCurveAtTime(e,t,r,s),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,r){return this._param.rampTo(e,t,r),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function nb(n,e,t,r){(e instanceof Mt||na(e)||e instanceof un&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof un&&(e.overridden=!0)),Zl(n,e,t,r)}class rb extends Mt{constructor(){const e=Xe(rb.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new Rr(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Mt.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,r){t=this.toSeconds(t),this.setRampPoint(t);const s=this._fromType(e),i=this._events.get(t),o=Math.round(Math.max(1/r,1));for(let a=0;a<=o;a++){const c=r*a+t,d=this._exponentialApproach(i.time,i.value,s,r,c);this.linearRampToValueAtTime(this._toType(d),c)}return this}setValueAtTime(e,t){const r=this.toSeconds(t);super.setValueAtTime(e,t);const s=this._events.get(r),i=this._events.previousEvent(s),o=this._getTicksUntilEvent(i,r);return s.ticks=Math.max(o,0),this}linearRampToValueAtTime(e,t){const r=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const s=this._events.get(r),i=this._events.previousEvent(s),o=this._getTicksUntilEvent(i,r);return s.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const r=this._fromType(e),s=this._events.get(t),i=Math.round(Math.max((t-s.time)*10,1)),o=(t-s.time)/i;for(let a=0;a<=i;a++){const c=o*a+s.time,d=this._exponentialInterpolate(s.time,s.value,t,r,c);this.linearRampToValueAtTime(this._toType(d),c)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Dr(e.ticks)){const o=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(o,e.time)}const r=this._fromType(this.getValueAtTime(e.time));let s=this._fromType(this.getValueAtTime(t));const i=this._events.get(t);return i&&i.time===t&&i.type==="setValueAtTime"&&(s=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(r+s)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),r=this._events.get(t);return Math.max(this._getTicksUntilEvent(r,t),0)}getDurationOfTicks(e,t){const r=this.toSeconds(t),s=this.getTicksAtTime(t);return this.getTimeOfTick(s+e)-r}getTimeOfTick(e){const t=this._events.get(e,"ticks"),r=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&r&&r.type==="linearRampToValueAtTime"&&t.value!==r.value){const s=this._fromType(this.getValueAtTime(t.time)),o=(this._fromType(this.getValueAtTime(r.time))-s)/(r.time-t.time),a=Math.sqrt(Math.pow(s,2)-2*o*(t.ticks-e)),c=(-s+a)/o,d=(-s-a)/o;return(c>0?c:d)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const r=this.toSeconds(t),s=this.toSeconds(e),i=this.getTicksAtTime(r);return this.getTicksAtTime(r+s)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class sb extends un{constructor(){const e=Xe(sb.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new rb({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(un.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class ib extends tr{constructor(){const e=Xe(ib.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new eb,this._tickOffset=new Rr,this._ticksAtTime=new Rr,this._secondsAtTime=new Rr,this.frequency=new sb({context:this.context,units:e.units,value:e.frequency}),jt(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},tr.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const r=this.toSeconds(e);return this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),rt(t)&&this.setTicksAtTime(t,r),this._ticksAtTime.cancel(r),this._secondsAtTime.cancel(r)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const r=this._state.get(t);r&&r.time>0&&(this._tickOffset.cancel(r.time),this._state.cancel(r.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),r=this._state.getLastState("stopped",t),s=this._ticksAtTime.get(t),i={state:"paused",time:t};this._state.add(i);let o=s||r,a=s?s.ticks:0,c=null;return this._state.forEachBetween(o.time,t+this.sampleTime,d=>{let h=o.time;const f=this._tickOffset.get(d.time);f&&f.time>=o.time&&(a=f.ticks,h=f.time),o.state==="started"&&d.state!=="started"&&(a+=this.frequency.getTicksAtTime(d.time)-this.frequency.getTicksAtTime(h),d.time!==i.time&&(c={state:d.state,time:d.time,ticks:a})),o=d}),this._state.remove(i),c&&this._ticksAtTime.add(c),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),r=this.frequency.timeToTicks(e,t);this.setTicksAtTime(r,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),r={state:"paused",time:e};this._state.add(r);const s=this._secondsAtTime.get(e);let i=s||t,o=s?s.seconds:0,a=null;return this._state.forEachBetween(i.time,e+this.sampleTime,c=>{let d=i.time;const h=this._tickOffset.get(c.time);h&&h.time>=i.time&&(o=h.seconds,d=h.time),i.state==="started"&&c.state!=="started"&&(o+=c.time-d,c.time!==r.time&&(a={state:c.state,time:c.time,seconds:o})),i=c}),this._state.remove(r),a&&this._secondsAtTime.add(a),o}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const r=this._tickOffset.get(t),s=this._state.get(t),i=Math.max(r.time,s.time),o=this.frequency.getTicksAtTime(i)+e-r.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(e,t,r){let s=this._state.get(e);this._state.forEachBetween(e,t,o=>{s&&s.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(s.time,e),o.time-this.sampleTime,r),s=o});let i=null;if(s&&s.state==="started"){const o=Math.max(s.time,e),a=this.frequency.getTicksAtTime(o),c=this.frequency.getTicksAtTime(s.time),d=a-c;let h=Math.ceil(d)-d;h=Gr(h,1)?0:h;let f=this.frequency.getTimeOfTick(a+h);for(;f<t;){try{r(f,Math.round(this.getTicksAtTime(f)))}catch(m){i=m;break}f+=this.frequency.getDurationOfTicks(1,f)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}let bI=class SI extends tr{constructor(){const e=Xe(SI.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=ct,this._lastUpdate=0,this._state=new eb("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new ib({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,jt(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(tr.getDefaults(),{callback:ct,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){dI(this.context);const r=this.toSeconds(e);return this.log("start",r),this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),this._tickSource.start(r,t),r<this._lastUpdate&&this.emit("start",r,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const r=this.toSeconds(t),s=this.getTicksAtTime(r);return this._tickSource.getTimeOfTick(s+e,r)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,r=>{switch(r.state){case"started":const s=this._tickSource.getTicksAtTime(r.time);this.emit("start",r.time,s);break;case"stopped":r.time!==0&&this.emit("stop",r.time);break;case"paused":this.emit("pause",r.time);break}}),this._tickSource.forEachTickBetween(e,t,(r,s)=>{this.callback(r,s)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}};cd.mixin(bI);class Ql extends nt{constructor(){const e=Xe(Ql.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new Mn({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,jt(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(nt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class ob extends nt{constructor(){const e=Xe(ob.getDefaults(),arguments);super(e),this.name="Destination",this.input=new Ql({context:this.context}),this.output=new Mn({context:this.context}),this.volume=this.input.volume,S0(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(nt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),S0(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Hp(n=>{n.destination=new ob({context:n})});Up(n=>{n.destination.dispose()});class BQ extends nt{constructor(){super(...arguments),this.name="Listener",this.positionX=new Mt({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Mt({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Mt({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Mt({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Mt({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Mt({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Mt({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Mt({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Mt({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(nt.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Hp(n=>{n.listener=new BQ({context:n})});Up(n=>{n.listener.dispose()});class ab extends ci{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=Xe(ab.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const r=e.urls[t];this.add(t,r,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:ct,onload:ct,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return Ze(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,r=ct,s=ct){return oi(t)?(this.baseUrl&&t.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new St(this.baseUrl+t,r,s))):this._buffers.set(e.toString(),new St(t,r,s)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class Qa extends cu{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class zQ extends tr{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Rr,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const t=this._events.shift();t&&e-t.time<=this.expiration&&t.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Hp(n=>{n.draw=new zQ({context:n})});Up(n=>{n.draw.dispose()});class WQ extends ci{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){Ze(rt(e.time),"Events must have a time property"),Ze(rt(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new $Q(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const r of t)if(r.event===e){this._removeNode(r),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let r,s=null;if(t>0)if(e.left.right===null)r=e.left,r.right=e.right,s=r;else{for(r=e.left.right;r.right!==null;)r=r.right;r.parent&&(r.parent.right=r.left,s=r.parent,r.left=e.left,r.right=e.right)}else if(e.right.left===null)r=e.right,r.left=e.left,s=r;else{for(r=e.right.left;r.left!==null;)r=r.left;r.parent&&(r.parent.left=r.right,s=r.parent,r.left=e.left,r.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=r:e.parent.right=r:this._setRoot(r),s&&this._rebalance(s)}e.dispose()}_rotateLeft(e){const t=e.parent,r=e.isLeftChild(),s=e.right;s&&(e.right=s.left,s.left=e),t!==null?r?t.left=s:t.right=s:this._setRoot(s)}_rotateRight(e){const t=e.parent,r=e.isLeftChild(),s=e.left;s&&(e.left=s.right,s.right=e),t!==null?r?t.left=s:t.right=s:this._setRoot(s)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let r=t[0];for(let s=1;s<t.length;s++)t[s].low>r.low&&(r=t[s]);return r.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(r=>t.push(r)),t.forEach(r=>{r.event&&e(r.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const r=[];this._root.search(e,r),r.forEach(s=>{s.event&&t(s.event)})}return this}forEachFrom(e,t){if(this._root!==null){const r=[];this._root.searchAfter(e,r),r.forEach(s=>{s.event&&t(s.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class $Q{constructor(e,t,r){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=r,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class HQ extends ci{constructor(e){super(),this.name="TimelineValue",this._timeline=new Rr({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class Ml extends nt{constructor(){super(Xe(Ml.getDefaults(),arguments,["context"]))}connect(e,t=0,r=0){return nb(this,e,t,r),this}}class dd extends Ml{constructor(){const e=Xe(dd.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,Jr(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):pQ(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(un.getDefaults(),{length:1024})}setMap(e,t=1024){const r=new Float32Array(t);for(let s=0,i=t;s<i;s++){const o=s/(i-1)*2-1;r[s]=e(o,s)}return this.curve=r,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(r=>r.includes(e));Ze(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class lb extends Ml{constructor(){const e=Xe(lb.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new dd({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Ml.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class lo{constructor(e,t){this.id=lo._eventId++,this._remainderTime=0;const r=Object.assign(lo.getDefaults(),t);this.transport=e,this.callback=r.callback,this._once=r.once,this.time=Math.floor(r.time),this._remainderTime=r.time-this.time}static getDefaults(){return{callback:ct,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}lo._eventId=0;class cb extends lo{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const r=Object.assign(cb.getDefaults(),t);this.duration=r.duration,this._interval=r.interval,this._nextTick=r.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},lo.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return Jf(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Qa(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){Jf(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Qa(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const t=this.transport.getTicksAtTime(e);Nl(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Gp extends tr{constructor(){const e=Xe(Gp.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new HQ(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Rr,this._repeatedEvents=new WQ,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new bI({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),jt(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(tr.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const r=t%(this._swingTicks*2)/(this._swingTicks*2),s=Math.sin(r*Math.PI)*this._swingAmount;e+=new Qa(this.context,this._swingTicks*2/3).toSeconds()*s}jk(!0),this._timeline.forEachAtTime(t,r=>r.invoke(e)),jk(!1)}schedule(e,t){const r=new lo(this,{callback:e,time:new cu(this.context,t).toTicks()});return this._addEvent(r,this._timeline)}scheduleRepeat(e,t,r,s=1/0){const i=new cb(this,{callback:e,duration:new Xr(this.context,s).toTicks(),interval:new Xr(this.context,t).toTicks(),time:new cu(this.context,r).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,t){const r=new lo(this,{callback:e,once:!0,time:new cu(this.context,t).toTicks()});return this._addEvent(r,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,r=>this.clear(r.id)),this._repeatedEvents.forEachFrom(t,r=>this.clear(r.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new Qa(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){this.context.resume();let r;return rt(t)&&(r=this.toTicks(t)),this._clock.start(e,r),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){Jr(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new Xr(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new Xr(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Qa(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new Qa(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),r=this._clock.frequency.timeToTicks(e,t);this.ticks=r}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const r=this._clock.getTicksAtTime(t),s=this._clock.frequency.getDurationOfTicks(Math.ceil(r)-r,t),i=t+s;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),r=this.getTicksAtTime(t),s=e-r%e;return this._clock.nextTickTime(s,t)}}syncSignal(e,t){const r=this.now();let s=this.bpm,i=1/(60/s.getValueAtTime(r)/this.PPQ),o=[];if(e.units==="time"){const c=.015625/i,d=new Mn(c),h=new lb(-1),f=new Mn(c);s.chain(d,h,f),s=f,i=1/i,o=[d,h,f]}t||(e.getValueAtTime(r)!==0?t=e.getValueAtTime(r)/i:t=0);const a=new Mn(t);return s.connect(a),a.connect(e._param),o.push(a),this._syncedSignals.push({initial:e.value,nodes:o,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const r=this._syncedSignals[t];r.signal===e&&(r.nodes.forEach(s=>s.dispose()),r.signal.value=r.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),yI(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}cd.mixin(Gp);Hp(n=>{n.transport=new Gp({context:n})});Up(n=>{n.transport.dispose()});class gr extends nt{constructor(e){super(e),this.input=void 0,this._state=new eb("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=ct,this._syncedStop=ct,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Ql({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,jt(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(nt.getDefaults(),{mute:!1,onstop:ct,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,r){let s=Dr(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(s=this._clampToCurrentTime(s),!this._synced&&this._state.getValueAtTime(s)==="started")Ze(Nl(s,this._state.get(s).time),"Start time must be strictly greater than previous start time"),this._state.cancel(s),this._state.setStateAtTime("started",s),this.log("restart",s),this.restart(s,t,r);else if(this.log("start",s),this._state.setStateAtTime("started",s),this._synced){const i=this._state.get(s);i&&(i.offset=this.toSeconds(ul(t,0)),i.duration=r?this.toSeconds(r):void 0);const o=this.context.transport.schedule(a=>{this._start(a,t,r)},s);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>s&&this._syncedStart(this.now(),this.context.transport.seconds)}else dI(this.context),this._start(s,t,r);return this}stop(e){let t=Dr(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||rt(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const r=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(r)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,r){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,r)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(Nl(t,0)){const r=this._state.get(t);if(r&&r.state==="started"&&r.time!==t){const s=t-this.toSeconds(r.time);let i;r.duration&&(i=this.toSeconds(r.duration)-s),this._start(e,this.toSeconds(r.offset)+s,i)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=ct,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Kp extends Al{constructor(){const e=Xe(Kp.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,Zl(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Mt({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new St(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Al.getDefaults(),{url:new St,loop:!1,loopEnd:0,loopStart:0,onload:ct,onerror:ct,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,r,s=1){Ze(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,s),this.loop?t=ul(t,this.loopStart):t=ul(t,0);let o=Math.max(this.toSeconds(t),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),d=a-c;w0(o,a)&&(o=(o-c)%d+c),Gr(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Jf(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),rt(r)){let a=this.toSeconds(r);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function ua(n,e){return Kt(this,void 0,void 0,function*(){const t=e/n.context.sampleRate,r=new Zw(1,t,n.context.sampleRate);return new n.constructor(Object.assign(n.get(),{frequency:2/t,detune:0,context:r})).toDestination().start(0),(yield r.render()).getChannelData(0)})}class ub extends Al{constructor(){const e=Xe(ub.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],Zl(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Mt({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Mt({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),jt(this,["frequency","detune"])}static getDefaults(){return Object.assign(Al.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Ut extends gr{constructor(){const e=Xe(Ut.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new un({context:this.context,units:"frequency",value:e.frequency}),jt(this,"frequency"),this.detune=new un({context:this.context,units:"cents",value:e.detune}),jt(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(gr.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),r=new ub({context:this.context,onended:()=>this.onstop(this)});this._oscillator=r,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Ut._periodicWaveCache.find(t=>t.phase===this._phase&&TQ(t.partials,this._partials));{const e=Ut._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const r=this._getCachedPeriodicWave();if(rt(r)){const{partials:s,wave:i}=r;this._wave=i,this._partials=s,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[s,i]=this._getRealImaginary(e,this._phase),o=this.context.createPeriodicWave(s,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Ut._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:s,type:this._type,wave:this._wave}),Ut._periodicWaveCache.length>100&&Ut._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){ao(e,0);let t=this._type;const r=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(r&&(t=r[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const s=new Float32Array(e);this._partials.forEach((i,o)=>s[o]=i),this._partials=Array.from(s),this.type=this._type}}_getRealImaginary(e,t){let s=2048;const i=new Float32Array(s),o=new Float32Array(s);let a=1;if(e==="custom"){if(a=this._partials.length+1,this._partialCount=this._partials.length,s=a,this._partials.length===0)return[i,o]}else{const c=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);c?(a=parseInt(c[2],10)+1,this._partialCount=parseInt(c[2],10),e=c[1],a=Math.max(a,2),s=a):this._partialCount=0,this._partials=[]}for(let c=1;c<s;++c){const d=2/(c*Math.PI);let h;switch(e){case"sine":h=c<=a?1:0,this._partials[c-1]=h;break;case"square":h=c&1?2*d:0,this._partials[c-1]=h;break;case"sawtooth":h=d*(c&1?1:-1),this._partials[c-1]=h;break;case"triangle":c&1?h=2*(d*d)*(c-1>>1&1?-1:1):h=0,this._partials[c-1]=h;break;case"custom":h=this._partials[c-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}h!==0?(i[c]=-h*Math.sin(t*c),o[c]=h*Math.cos(t*c)):(i[c]=0,o[c]=0)}return[i,o]}_inverseFFT(e,t,r){let s=0;const i=e.length;for(let o=0;o<i;o++)s+=e[o]*Math.cos(o*r)+t[o]*Math.sin(o*r);return s}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let r=0;const s=Math.PI*2,i=32;for(let o=0;o<i;o++)r=Math.max(this._inverseFFT(e,t,o/i*s),r);return EQ(-this._inverseFFT(e,t,this._phase)/r,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return Kt(this,arguments,void 0,function*(e=1024){return ua(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Ut._periodicWaveCache=[];class UQ extends Ml{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new dd({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Ol extends un{constructor(){const e=Xe(Ol.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new Mn({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(un.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Yp extends gr{constructor(){const e=Xe(Yp.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new UQ({context:this.context}),this._modulationNode=new Mn({context:this.context}),this._carrier=new Ut({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Ut({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Ol({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),jt(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ut.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return Kt(this,arguments,void 0,function*(e=1024){return ua(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Xp extends gr{constructor(){const e=Xe(Xp.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new Mn({context:this.context,gain:0}),this._carrier=new Ut({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new un({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new Ut({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Ol({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Ol({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),jt(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ut.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return Kt(this,arguments,void 0,function*(e=1024){return ua(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class hd extends gr{constructor(){const e=Xe(hd.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new Mn({context:this.context,gain:0}),this._thresh=new dd({context:this.context,mapping:t=>t<=0?-1:1}),this.width=new un({context:this.context,units:"audioRange",value:e.width}),this._triangle=new Ut({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),jt(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(gr.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return Kt(this,arguments,void 0,function*(e=1024){return ua(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Jp extends gr{constructor(){const e=Xe(Jp.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new un({context:this.context,units:"frequency",value:e.frequency}),this.detune=new un({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,jt(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ut.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,r=e/(this._oscillators.length-1);this._forEach((s,i)=>s.detune.value=t+r*i)}}get count(){return this._oscillators.length}set count(e){if(ao(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const r=new Ut({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):ct});this.type==="custom"&&(r.partials=this._partials),this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.detune.overridden=!1,r.connect(this.output),this._oscillators[t]=r}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,r)=>t.phase=this._phase+r/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(){return Kt(this,arguments,void 0,function*(e=1024){return ua(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class Zp extends gr{constructor(){const e=Xe(Zp.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Ol({context:this.context,value:2}),this._pulse=new hd({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Ut({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),jt(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(gr.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return Kt(this,arguments,void 0,function*(e=1024){return ua(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Fk={am:Yp,fat:Jp,fm:Xp,oscillator:Ut,pulse:hd,pwm:Zp};class Zf extends gr{constructor(){const e=Xe(Zf.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new un({context:this.context,units:"frequency",value:e.frequency}),this.detune=new un({context:this.context,units:"cents",value:e.detune}),jt(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(Ut.getDefaults(),Xp.getDefaults(),Yp.getDefaults(),Jp.getDefaults(),hd.getDefaults(),Zp.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=Fk[e],r=this.now();if(this._oscillator){const s=this._oscillator;s.stop(r),this.context.setTimeout(()=>s.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(r)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof Fk[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&ta(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&ta(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&oi(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return Kt(this,arguments,void 0,function*(e=1024){return ua(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function CI(n,e=1/0){const t=new WeakMap;return function(r,s){Reflect.defineProperty(r,s,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){ao(i,n,e),t.set(this,i)}})}}function ui(n,e=1/0){const t=new WeakMap;return function(r,s){Reflect.defineProperty(r,s,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){ao(this.toSeconds(i),n,e),t.set(this,i)}})}}class Qp extends gr{constructor(){const e=Xe(Qp.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new St({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(gr.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:ct,onerror:ct,playbackRate:1,reverse:!1})}load(e){return Kt(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=ct){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,r){return super.start(e,t,r),this}_start(e,t,r){this._loop?t=ul(t,this._loopStart):t=ul(t,0);const s=this.toSeconds(t),i=r;r=ul(r,Math.max(this._buffer.duration-s,0));let o=this.toSeconds(r);o=o/this._playbackRate,e=this.toSeconds(e);const a=new Kp({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+o),this._state.setStateAtTime("stopped",e+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&Dr(i)?a.start(e,s):a.start(e,s,o-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(r=>r.stop(t))}restart(e,t,r){return super.restart(e,t,r),this}_restart(e,t,r){var s;(s=[...this._activeSources].pop())===null||s===void 0||s.stop(e),this._start(e,t,r)}seek(e,t){const r=this.toSeconds(t);if(this._state.getValueAtTime(r)==="started"){const s=this.toSeconds(e);this._stop(r),this._start(r,s)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&ao(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&ao(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),r=this._state.getNextState("stopped",t);r&&r.implicitEnd&&(this._state.cancel(r.time),this._activeSources.forEach(s=>s.cancelStop())),this._activeSources.forEach(s=>{s.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}rs([ui(0)],Qp.prototype,"fadeIn",void 0);rs([ui(0)],Qp.prototype,"fadeOut",void 0);class xo extends nt{constructor(){const e=Xe(xo.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new un({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(nt.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(oi(e))return e;{let r;for(r in Uh)if(Uh[r][t]===e)return r;return e}}_setCurve(e,t,r){if(oi(r)&&Reflect.has(Uh,r)){const s=Uh[r];Go(s)?e!=="_decayCurve"&&(this[e]=s[t]):this[e]=s}else if(Jr(r)&&e!=="_decayCurve")this[e]=r;else throw new Error("Envelope: invalid curve: "+r)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let s=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0){const a=1/s;s=(1-o)/a}if(s<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,s,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,s,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let c=1;c<a.length;c++)if(a[c-1]<=o&&o<=a[c]){a=this._attackCurve.slice(c),a[0]=o;break}this._sig.setValueCurveAtTime(a,e,s,t)}if(i&&this.sustain<1){const a=t*this.sustain,c=e+s;this.log("decay",c),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+c):this._sig.exponentialApproachValueAtTime(a,c,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const r=this.toSeconds(this.release);r<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,r,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,r,e):(Ze(Jr(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,r,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,r=1){return t=this.toSeconds(t),this.triggerAttack(t,r),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,r=0){return nb(this,e,t,r),this}asArray(){return Kt(this,arguments,void 0,function*(e=1024){const t=e/this.context.sampleRate,r=new Zw(1,t,this.context.sampleRate),s=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=s+this.toSeconds(this.release),o=i*.1,a=i+o,c=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/a,decay:t*this.toSeconds(this.decay)/a,release:t*this.toSeconds(this.release)/a,context:r}));return c._sig.toDestination(),c.triggerAttackRelease(t*(s+o)/a,0),(yield r.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}rs([ui(0)],xo.prototype,"attack",void 0);rs([ui(0)],xo.prototype,"decay",void 0);rs([CI(0,1)],xo.prototype,"sustain",void 0);rs([ui(0)],xo.prototype,"release",void 0);const Uh=(()=>{let e,t;const r=[];for(e=0;e<128;e++)r[e]=Math.sin(e/127*(Math.PI/2));const s=[],i=6.4;for(e=0;e<127;e++){t=e/127;const m=Math.sin(t*(Math.PI*2)*i-Math.PI/2)+1;s[e]=m/10+t*.83}s[127]=1;const o=[],a=5;for(e=0;e<128;e++)o[e]=Math.ceil(e/127*a)/a;const c=[];for(e=0;e<128;e++)t=e/127,c[e]=.5*(1-Math.cos(Math.PI*t));const d=[];for(e=0;e<128;e++){t=e/127;const m=Math.pow(t,3)*4+.2,y=Math.cos(m*Math.PI*2*t);d[e]=Math.abs(y*(1-t))}function h(m){const y=new Array(m.length);for(let v=0;v<m.length;v++)y[v]=1-m[v];return y}function f(m){return m.slice(0).reverse()}return{bounce:{In:h(d),Out:d},cosine:{In:r,Out:f(r)},exponential:"exponential",linear:"linear",ripple:{In:s,Out:h(s)},sine:{In:c,Out:h(c)},step:{In:o,Out:h(o)}}})();class Pl extends nt{constructor(){const e=Xe(Pl.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t),this._volume=this.output=new Ql({context:this.context,volume:e.volume}),this.volume=this._volume.volume,jt(this,"volume")}static getDefaults(){return Object.assign(nt.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const r=this["_original_"+e]=this[e];this[e]=(...s)=>{const i=s[t],o=this.context.transport.schedule(a=>{s[t]=a,r.apply(this,s)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,r,s){const i=this.toSeconds(r),o=this.toSeconds(t);return this.triggerAttack(e,i,s),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Dl extends Pl{constructor(){const e=Xe(Dl.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Pl.getDefaults(),{detune:0,onsilence:ct,portamento:0})}triggerAttack(e,t,r=1){this.log("triggerAttack",e,t,r);const s=this.toSeconds(t);return this._triggerEnvelopeAttack(s,r),this.setNote(e,s),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const r=this.toSeconds(t),s=e instanceof Mr?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(r)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(s,i,r)}else this.frequency.setValueAtTime(s,r);return this}}rs([ui(0)],Dl.prototype,"portamento",void 0);class db extends xo{constructor(){super(Xe(db.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Mn({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Qf extends Dl{constructor(){const e=Xe(Qf.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new Zf(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new db(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),jt(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Dl.getDefaults(),{envelope:Object.assign(Lk(xo.getDefaults(),Object.keys(nt.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Lk(Zf.getDefaults(),[...Object.keys(gr.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const r=this.toSeconds(this.envelope.attack),s=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+r+s)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class em extends Qf{constructor(){const e=Xe(em.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,jt(this,["oscillator","envelope"])}static getDefaults(){return cl(Dl.getDefaults(),Qf.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const r=this.toSeconds(t),s=this.toFrequency(e instanceof Mr?e.toFrequency():e),i=s*this.octaves;return this.oscillator.frequency.setValueAtTime(i,r),this.oscillator.frequency.exponentialRampToValueAtTime(s,r+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}rs([CI(0)],em.prototype,"octaves",void 0);rs([ui(0)],em.prototype,"pitchDecay",void 0);const _I=new Set;function hb(n){_I.add(n)}function TI(n,e){const t=`registerProcessor("${n}", ${e})`;_I.add(t)}const qQ=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;hb(qQ);const GQ=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;hb(GQ);const KQ=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;hb(KQ);const YQ="feedback-comb-filter",XQ=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;TI(YQ,XQ);class tm extends Pl{constructor(){const e=Xe(tm.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const t={};Object.keys(e.urls).forEach(r=>{const s=parseInt(r,10);if(Ze(Hh(r)||ta(s)&&isFinite(s),`url key is neither a note or midi pitch: ${r}`),Hh(r)){const i=new Mr(this.context,r).toMidi();t[i]=e.urls[r]}else ta(s)&&isFinite(s)&&(t[s]=e.urls[s])}),this._buffers=new ab({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Pl.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:ct,onerror:ct,release:.1,urls:{}})}_findClosest(e){let r=0;for(;r<96;){if(this._buffers.has(e+r))return-r;if(this._buffers.has(e-r))return r;r++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,r=1){return this.log("triggerAttack",e,t,r),Array.isArray(e)||(e=[e]),e.forEach(s=>{const i=wI(new Mr(this.context,s).toFrequency()),o=Math.round(i),a=i-o,c=this._findClosest(o),d=o-c,h=this._buffers.get(d),f=xI(c+a),m=new Kp({url:h,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:f}).connect(this.output);m.start(t,0,h.duration/f,r),Jr(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(m),m.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const y=this._activeSources.get(o),v=y.indexOf(m);v!==-1&&y.splice(v,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(r=>{const s=new Mr(this.context,r).toMidi();if(this._activeSources.has(s)&&this._activeSources.get(s).length){const i=this._activeSources.get(s);t=this.toSeconds(t),i.forEach(o=>{o.stop(t)}),this._activeSources.set(s,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(r=>{for(;r.length;)r.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,r,s=1){const i=this.toSeconds(r);return this.triggerAttack(e,i,s),Jr(t)?(Ze(Jr(e),"notes must be an array when duration is array"),e.forEach((o,a)=>{const c=t[Math.min(a,t.length-1)];this.triggerRelease(o,i+this.toSeconds(c))})):this.triggerRelease(e,i+this.toSeconds(t)),this}add(e,t,r){if(Ze(Hh(e)||isFinite(e),`note must be a pitch or midi: ${e}`),Hh(e)){const s=new Mr(this.context,e).toMidi();this._buffers.add(s,t,r)}else this._buffers.add(e,t,r);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}rs([ui(0)],tm.prototype,"attack",void 0);rs([ui(0)],tm.prototype,"release",void 0);class fb extends nt{constructor(){const e=Xe(fb.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new Mt({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",jt(this,"pan")}static getDefaults(){return Object.assign(nt.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const JQ="bit-crusher",ZQ=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;TI(JQ,ZQ);class $t extends nt{constructor(){const e=Xe($t.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new Mn({context:this.context}),$t._allSolos.has(this.context)||$t._allSolos.set(this.context,new Set),$t._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(nt.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),$t._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){$t._soloed.has(this.context)||$t._soloed.set(this.context,new Set),$t._soloed.get(this.context).add(this)}_removeSolo(){$t._soloed.has(this.context)&&$t._soloed.get(this.context).delete(this)}_isSoloed(){return $t._soloed.has(this.context)&&$t._soloed.get(this.context).has(this)}_noSolos(){return!$t._soloed.has(this.context)||$t._soloed.has(this.context)&&$t._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),$t._allSolos.get(this.context).delete(this),this._removeSolo(),this}}$t._allSolos=new Map;$t._soloed=new Map;class pb extends nt{constructor(){const e=Xe(pb.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new fb({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Ql({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,jt(this,["pan","volume"])}static getDefaults(){return Object.assign(nt.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class el extends nt{constructor(){const e=Xe(el.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new $t({solo:e.solo,context:this.context}),this._panVol=this.output=new pb({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),jt(this,["pan","volume"])}static getDefaults(){return Object.assign(nt.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return el.buses.has(e)||el.buses.set(e,new Mn({context:this.context})),el.buses.get(e)}send(e,t=0){const r=this._getBus(e),s=new Mn({context:this.context,units:"decibels",gain:t});return this.connect(s),s.connect(r),s}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}el.buses=new Map;Yr().transport;Yr().destination;Yr().destination;Yr().listener;Yr().draw;Yr();const QQ={classic:{name:"Classic",oscillator:{type:"triangle"},envelope:{attack:.01,decay:.2,sustain:.2,release:.3},effects:{filter:{frequency:2e3,rolloff:-12},tremolo:{frequency:.8,depth:.3},reverb:{decay:1.5,wet:.6}}},ethereal:{name:"Ethereal",oscillator:{type:"sine"},envelope:{attack:.1,decay:.4,sustain:.4,release:.8},effects:{filter:{frequency:3e3,rolloff:-24},tremolo:{frequency:.5,depth:.5},reverb:{decay:2.5,wet:.8}}},digital:{name:"Digital",oscillator:{type:"square"},envelope:{attack:.005,decay:.1,sustain:.1,release:.1},effects:{filter:{frequency:4e3,rolloff:-12},tremolo:{frequency:1.2,depth:.2},reverb:{decay:.8,wet:.3}}},retro:{name:"Retro",oscillator:{type:"sawtooth"},envelope:{attack:.02,decay:.3,sustain:.3,release:.4},effects:{filter:{frequency:1500,rolloff:-24},tremolo:{frequency:.6,depth:.4},reverb:{decay:1.2,wet:.5}}}},Vk={"3d_graphics":["capsule","capsule_azul","capsule_pistachio","tub","tub_azul","tub_bondi","ufo_1","ufo_2","ufo_3"],convergency:Array.from({length:15},(n,e)=>`convergence_${e+1}`),foliage:["blue_flowers","cactus","golden_poppy","red_cyclamens","red_tulips","rose","spider_lily","waterdrops_on_leaf","yellow_tulips"],landscapes:["beach","clouds","french_alps","ganges_river","golden_gate_at_dusk","mono_lake","palace_on_lake_in_jaipur","rain_god_mesa","refuge-col_de_la_grasse-alps","zabriskie_point"],nostalgia:["acropolis","beach_on_ko_samui","birds_in_flight","cancun_sunset","cliffs_of_moher","fish_eagle","galway_bay","glacier_national_park","highway_395","hong_kong_at_night","islamorada_sunrise","lily_pad","long_island_sound","mac_os_background","midsummer_night","moraine_lake","oasis_in_baja","red_clouds","toronto_skyline","tuolumne_meadows","yosemite_valley","yucatan"],objects:["alpine_granite","bicycles","bottles","burmese_claypots","burning_candle","chairs","faucet_handle","neon","salt_shaker_top","shamus"],structures:["gate","gate_lock","glass_door_knob","padlock","rusty_lock","shutters","stone_wall","wall_of_stones"]};Object.entries(Vk).forEach(([n,e])=>{Vk[n]=e.map(t=>`/wallpapers/photos/${n}/${t}.jpg`)});function eee({isWindowOpen:n,onClose:e,isForeground:t}){const[r,s]=b.useState(!1),[i,o]=b.useState(!1),[a,c]=b.useState(!1),[d,h]=b.useState(!1),[f,m]=b.useState(!0),[y,v]=b.useState(!1),[w,S]=b.useState("classic"),C=b.useRef(null),{formatFileSystem:T}=Ep();b.useEffect(()=>{m(bj()),v(dne()),S(pne()||"classic")},[]);const k=A=>{m(A),une(A)},M=A=>{v(A),hne(A)},N=A=>{S(A),mne(A),window.location.reload()},O=()=>{c(!0)},D=()=>{fne(),window.location.reload()},I=async()=>{const A={localStorage:{},timestamp:new Date().toISOString()};for(let K=0;K<localStorage.length;K++){const G=localStorage.key(K);G&&(A.localStorage[G]=localStorage.getItem(G))}const V=JSON.stringify(A),F=await new Blob([V]).arrayBuffer().then(K=>{const $=new Blob([K]).stream().pipeThrough(new CompressionStream("gzip"));return new Response($).blob()}),U=URL.createObjectURL(F),B=document.createElement("a");B.href=U;const q=new Date().toISOString().replace(/[:.]/g,"-").split("T").join("-").slice(0,-5);B.download=`ryOS-backup-${q}.gz`,document.body.appendChild(B),B.click(),document.body.removeChild(B),URL.revokeObjectURL(U)},L=A=>{var U;const V=(U=A.target.files)==null?void 0:U[0];if(!V)return;const F=new FileReader;F.onload=async B=>{var q,K,G;try{let $;if(V.name.endsWith(".gz")){const W=(q=B.target)==null?void 0:q.result,P=(K=new Response(W).body)==null?void 0:K.pipeThrough(new DecompressionStream("gzip"));if(!P)throw new Error("Failed to decompress backup file");$=await new Response(P).text()}else $=(G=B.target)==null?void 0:G.result;const z=JSON.parse($);z.localStorage&&Object.entries(z.localStorage).forEach(([W,P])=>{P!==null&&localStorage.setItem(W,P)}),window.location.reload()}catch($){alert("Failed to restore backup. Invalid backup file."),console.error("Backup restore failed:",$)}},V.name.endsWith(".gz")?F.readAsArrayBuffer(V):F.readAsText(V)};return n?g.jsxs(g.Fragment,{children:[g.jsx(IK,{onClose:e,onShowHelp:()=>s(!0),onShowAbout:()=>o(!0)}),g.jsxs(ai,{title:"Control Panels",onClose:e,isForeground:t,appId:"control-panels",children:[g.jsx("div",{className:"flex flex-col h-full bg-[#E3E3E3] p-4 w-full",children:g.jsxs(qK,{defaultValue:"appearance",className:"w-full h-full",children:[g.jsxs(tR,{className:"flex w-full h-6 space-x-0.5 bg-[#E3E3E3] border-b border-[#808080] shadow-none",children:[g.jsx(sf,{value:"appearance",className:"relative flex-1 h-6 px-2 -mb-[1px] rounded-t bg-[#D4D4D4] data-[state=active]:bg-[#E3E3E3] border border-[#808080] data-[state=active]:border-b-[#E3E3E3] data-[state=active]:border-b-0 shadow-none! text-[16px]",children:"Appearance"}),g.jsx(sf,{value:"sound",className:"relative flex-1 h-6 px-2 -mb-[1px] rounded-t bg-[#D4D4D4] data-[state=active]:bg-[#E3E3E3] border border-[#808080] data-[state=active]:border-b-[#E3E3E3] data-[state=active]:border-b-0 shadow-none! text-[16px]",children:"Sound"}),g.jsx(sf,{value:"system",className:"relative flex-1 h-6 px-2 -mb-[1px] rounded-t bg-[#D4D4D4] data-[state=active]:bg-[#E3E3E3] border border-[#808080] data-[state=active]:border-b-[#E3E3E3] data-[state=active]:border-b-0 shadow-none! text-[16px]",children:"System"})]}),g.jsx(of,{value:"appearance",className:"mt-0 p-4 bg-[#E3E3E3] border border-t-0 border-[#808080] h-[calc(100%-2rem)]",children:g.jsx("div",{className:"space-y-4 h-full",children:g.jsx(a7,{})})}),g.jsx(of,{value:"sound",className:"mt-0 p-4 bg-[#E3E3E3] border border-t-0 border-[#808080] h-[calc(100%-2rem)]",children:g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx(Qc,{children:"UI Sounds"}),g.jsx(d0,{checked:f,onCheckedChange:k,className:"data-[state=checked]:bg-[#000000]"})]}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx(Qc,{children:"Typing Synth"}),g.jsx(d0,{checked:y,onCheckedChange:M,className:"data-[state=checked]:bg-[#000000]"})]}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex flex-col gap-1",children:[g.jsx(Qc,{children:"Chat synth"}),g.jsx(Qc,{className:"text-[11px] text-gray-600 font-geneva-12 pr-1",children:"ryOS will restart to apply new settings"})]}),g.jsxs(Pu,{value:w,onValueChange:N,children:[g.jsx(Cl,{className:"w-[120px]",children:g.jsx(Du,{placeholder:"Select a preset"})}),g.jsx(_l,{children:Object.entries(QQ).map(([A,V])=>g.jsx(Qn,{value:A,children:V.name},A))})]})]})]})}),g.jsx(of,{value:"system",className:"mt-0 p-4 bg-[#E3E3E3] border border-t-0 border-[#808080] h-[calc(100%-2rem)]",children:g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex gap-2",children:[g.jsx(Re,{variant:"retro",onClick:I,className:"flex-1",children:"Backup"}),g.jsx(Re,{variant:"retro",onClick:()=>{var A;return(A=C.current)==null?void 0:A.click()},className:"flex-1",children:"Restore"}),g.jsx("input",{type:"file",ref:C,onChange:L,accept:".json,.gz",className:"hidden"})]}),g.jsx("p",{className:"text-[11px] text-gray-600 font-geneva-12",children:"Backup or restore all app settings and documents."})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Re,{variant:"retro",onClick:O,className:"w-full",children:"Reset All Settings"}),g.jsx("p",{className:"text-[11px] text-gray-600 font-geneva-12",children:"This will clear all saved settings and restore default states."})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Re,{variant:"retro",onClick:()=>h(!0),className:"w-full",children:"Format File System"}),g.jsx("p",{className:"text-[11px] text-gray-600 font-geneva-12",children:"This will clear all documents (except sample documents) and images. ryOS will restart after format."})]})]})})]})}),g.jsx(Ns,{isOpen:r,onOpenChange:s,helpItems:kI,appName:"Control Panels"}),g.jsx(As,{isOpen:i,onOpenChange:o,metadata:EI}),g.jsx(Ts,{isOpen:a,onOpenChange:c,onConfirm:D,title:"Reset All Settings",description:"Are you sure you want to reset all settings? This will clear all saved settings and restore default states. ryOS will restart after reset."}),g.jsx(Ts,{isOpen:d,onOpenChange:h,onConfirm:async()=>{await T(),window.location.reload()},title:"Format File System",description:"Are you sure you want to format the file system? This will permanently delete all documents (except sample documents) and images. ryOS will restart after format."})]})]}):null}const kI=[{icon:"",title:"Appearance",description:"Customize your desktop wallpaper with a variety of beautiful photos and patterns"},{icon:"",title:"Sound",description:"Configure UI sounds, typing synth, and chat synthesizer settings"},{icon:"",title:"System",description:"Backup/restore settings, reset preferences, or format the virtual file system"}],EI={name:"Control Panels",version:"1.0.0",creator:{name:"System",url:"https://github.com/ryokun6"},github:"https://github.com/ryokun6/ryos",icon:"/icons/control-panels/appearance-manager/app.png"},Bk={id:"control-panels",name:"Control Panels",icon:{type:"image",src:"/icons/control-panels/appearance-manager/app.png"},description:"System settings and configuration",component:eee,helpItems:kI,metadata:EI};function tee({onClose:n,onShowHelp:e,onShowAbout:t,onNewGame:r}){return g.jsxs(Rs,{children:[g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 text-md px-2 py-1 border-none hover:bg-gray-200 active:bg-gray-900 active:text-white focus-visible:ring-0",children:"File"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{onClick:r,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"New Game"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:n,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Close"})]})]}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 px-2 py-1 text-md focus-visible:ring-0 hover:bg-gray-200 active:bg-gray-900 active:text-white",children:"Help"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{onClick:e,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Minesweeper Help"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:t,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"About Minesweeper"})]})]})]})}const Tn=9,qh=10;function nee(n,e,{shouldPreventDefault:t=!0,delay:r=500}={}){const[s,i]=b.useState(!1),[o,a]=b.useState(),c=b.useCallback(h=>{t&&h.target&&h.preventDefault();const f=setTimeout(()=>{n(h),i(!0)},r);a(f)},[n,r,t]),d=b.useCallback((h,f=!0)=>{o&&clearTimeout(o),a(void 0),f&&!s&&e&&e(),i(!1)},[e,o,s]);return{onMouseDown:h=>c(h),onTouchStart:h=>c(h),onMouseUp:h=>d(h),onMouseLeave:h=>d(h,!1),onTouchEnd:h=>d(h)}}function ree({cell:n,rowIndex:e,colIndex:t,onCellClick:r,onCellRightClick:s,disabled:i}){const o=nee(c=>s(c,e,t),()=>r(e,t,!1),{delay:500}),a=c=>{c.preventDefault(),n.isRevealed&&n.neighborMines>0&&r(e,t,!0)};return g.jsx("button",{className:`w-7 h-7 flex items-center justify-center text-sm font-bold rounded-none select-none touch-none
        ${n.isRevealed?"bg-[#d1d1d1] border border-t-gray-600 border-l-gray-600 border-r-[#f0f0f0] border-b-[#f0f0f0]":"bg-[#c0c0c0] border-2 border-t-white border-l-white border-r-gray-800 border-b-gray-800 hover:bg-[#d0d0d0] active:border active:border-gray-600"}`,...o,onContextMenu:c=>s(c,e,t),onDoubleClick:a,disabled:i,children:n.isRevealed?n.isMine?"":n.neighborMines>0?g.jsx("span",{className:`text-${iee(n.neighborMines)} text-lg`,children:n.neighborMines}):null:n.isFlagged?"":null},`${e}-${t}`)}function see({isWindowOpen:n,onClose:e,isForeground:t}){const[r,s]=b.useState(!1),[i,o]=b.useState(!1),[a,c]=b.useState(!1),[d,h]=b.useState(()=>N()),[f,m]=b.useState(!1),[y,v]=b.useState(!1),[w,S]=b.useState(qh),{play:C}=pt(ut.CLICK,.3),{play:T}=pt(ut.ALERT_BONK,.3),{play:k}=pt(ut.ALERT_INDIGO,.3),{play:M}=pt(ut.BUTTON_CLICK,.3);function N(){const F=Array(Tn).fill(null).map(()=>Array(Tn).fill(null).map(()=>({isMine:!1,isRevealed:!1,isFlagged:!1,neighborMines:0})));let U=0;for(;U<qh;){const B=Math.floor(Math.random()*Tn),q=Math.floor(Math.random()*Tn);F[B][q].isMine||(F[B][q].isMine=!0,U++)}for(let B=0;B<Tn;B++)for(let q=0;q<Tn;q++)if(!F[B][q].isMine){let K=0;for(let G=-1;G<=1;G++)for(let $=-1;$<=1;$++){const z=B+G,W=q+$;z>=0&&z<Tn&&W>=0&&W<Tn&&F[z][W].isMine&&K++}F[B][q].neighborMines=K}return F}function O(F,U,B=!1){if(f||y||d[F][U].isFlagged)return;const q=[...d.map(K=>[...K])];if(B&&q[F][U].isRevealed&&q[F][U].neighborMines>0){let K=0;for(let G=-1;G<=1;G++)for(let $=-1;$<=1;$++){const z=F+G,W=U+$;z>=0&&z<Tn&&W>=0&&W<Tn&&q[z][W].isFlagged&&K++}if(K===q[F][U].neighborMines){C();let G=!1;for(let $=-1;$<=1;$++)for(let z=-1;z<=1;z++){const W=F+$,P=U+z;W>=0&&W<Tn&&P>=0&&P<Tn&&!q[W][P].isFlagged&&!q[W][P].isRevealed&&(q[W][P].isMine&&(G=!0),I(q,W,P))}if(G){T(),L(q),m(!0);return}}h(q),A(q);return}if(q[F][U].isMine){T(),L(q),m(!0);return}C(),I(q,F,U),h(q),A(q)}function D(F,U,B){if((F instanceof MouseEvent||"button"in F)&&F.preventDefault(),f||y||d[U][B].isRevealed)return;M();const q=[...d.map(K=>[...K])];q[U][B].isFlagged=!q[U][B].isFlagged,h(q),S(K=>q[U][B].isFlagged?K-1:K+1)}function I(F,U,B){if(!(U<0||U>=Tn||B<0||B>=Tn||F[U][B].isRevealed||F[U][B].isFlagged)&&(F[U][B].isRevealed=!0,F[U][B].neighborMines===0))for(let q=-1;q<=1;q++)for(let K=-1;K<=1;K++)I(F,U+q,B+K)}function L(F){for(let U=0;U<Tn;U++)for(let B=0;B<Tn;B++)F[U][B].isMine&&(F[U][B].isRevealed=!0);h(F)}function A(F){F.every(B=>B.every(q=>q.isMine||q.isRevealed))&&(k(),v(!0))}function V(){h(N()),m(!1),v(!1),c(!1),S(qh)}return n?g.jsxs(g.Fragment,{children:[g.jsx(tee,{onClose:e,onShowHelp:()=>s(!0),onShowAbout:()=>o(!0),onNewGame:()=>c(!0)}),g.jsxs(ai,{title:"Minesweeper",onClose:e,isForeground:t,appId:"minesweeper",windowConstraints:{minWidth:270,maxWidth:270,minHeight:360},children:[g.jsxs("div",{className:"flex flex-col h-full bg-[#c0c0c0] p-1.5 w-full",children:[g.jsx("div",{className:"mb-1.5 flex justify-between items-center gap-2 py-1 bg-[#c0c0c0]",children:g.jsx("div",{className:"flex-1 bg-[#8a9a8a] text-[#1a2a1a] text-lg px-2 py-0.5 border border-t-gray-800 border-l-gray-800 border-r-white border-b-white shadow-inner [text-shadow:1px_1px_0px_rgba(0,0,0,0.2)] h-[48px] flex items-center",children:g.jsxs("div",{className:"flex items-center justify-between text-sm relative w-full",children:[g.jsxs("div",{className:"flex flex-col items-start w-[80px]",children:[g.jsx("span",{className:"font-[ChicagoKare] text-lg leading-none mt-1",children:w}),g.jsx("span",{className:"font-[Geneva-9] text-[16px] mt-[-6px]",children:"Left"})]}),g.jsx("div",{className:"flex flex-col items-center absolute left-1/2 -translate-x-1/2",children:g.jsx(Re,{variant:"default",size:"sm",onClick:()=>f||y?V():c(!0),className:"aspect-square h-[34px] flex items-center justify-center text-xl leading-none bg-[#c0c0c0] hover:bg-[#d0d0d0] border-2 border-t-white border-l-white border-r-gray-800 border-b-gray-800 active:border active:border-gray-600 shadow-none p-0",children:f?"":y?"":""})}),g.jsxs("div",{className:"flex flex-col items-end w-[80px]",children:[g.jsx("span",{className:"font-[ChicagoKare] text-lg leading-none mt-1",children:qh}),g.jsx("span",{className:"font-[Geneva-9] text-[16px] mt-[-6px]",children:"Total"})]})]})})}),g.jsx("div",{className:"grid grid-cols-9 gap-0 bg-gray-800 p-[1px] border border-t-gray-800 border-l-gray-800 border-r-white border-b-white  max-w-[250px] m-auto",children:d.map((F,U)=>F.map((B,q)=>g.jsx(ree,{cell:B,rowIndex:U,colIndex:q,onCellClick:O,onCellRightClick:D,disabled:f||y},`${U}-${q}`)))})]}),g.jsx(Ns,{isOpen:r,onOpenChange:s,helpItems:AI||[],appName:"Minesweeper"}),g.jsx(As,{isOpen:i,onOpenChange:o,metadata:NI||{name:"Minesweeper",version:"1.0.0",creator:{name:"Ryo",url:"https://github.com/ryokun6"},github:"https://github.com/ryokun6/ryos",icon:"/icons/minesweeper.png"}}),g.jsx(Ts,{isOpen:a,onOpenChange:c,onConfirm:V,title:"New Game",description:"Are you sure you want to start a new game?"})]})]}):null}function iee(n){return["","blue-600","green-600","red-600","purple-600","red-800","cyan-600","black","gray-600"][n]||"black"}const NI={name:"Minesweeper",version:"1.0.0",creator:{name:"Ryo",url:"https://github.com/ryokun6"},github:"https://github.com/ryokun6/ryos",icon:"/icons/minesweeper.png"},AI=[{icon:"",title:"Desktop Controls",description:"Left click to reveal, right click to flag, double click numbers to reveal adjacent cells."},{icon:"",title:"Mobile Controls",description:"Tap to reveal, long press to flag."},{icon:"",title:"Game Rules",description:"Numbers show adjacent mines. Flag all mines to win. Double click numbers after flagging neighbors."}],zk={id:"minesweeper",name:"Minesweeper",icon:{type:"image",src:"/icons/minesweeper.png"},description:"Classic Minesweeper game",component:see,helpItems:AI,metadata:NI};function oee({boards:n,activeBoardId:e,onBoardSelect:t,onNewBoard:r,selectedDeviceId:s,onDeviceSelect:i,audioDevices:o,micPermissionGranted:a}){return g.jsx("div",{className:"w-full md:w-56 bg-gray-100 md:border-r border-b md:border-b-0 flex flex-col md:h-full max-h-35 md:max-h-none",children:g.jsxs("div",{className:"py-2 md:py-3 px-4 flex flex-col h-full",children:[g.jsxs("div",{className:"flex justify-between items-center md:mb-4",children:[g.jsx("h2",{className:"text-lg",children:"Soundboards"}),g.jsx(Re,{variant:"ghost",size:"icon",onClick:r,children:g.jsx(O4,{className:"w-4 h-4"})})]}),g.jsx("div",{className:"flex-1 overflow-auto md:space-y-2",children:n.map(c=>g.jsx(Re,{variant:c.id===e?"default":"ghost",className:"w-full justify-start text-lg",onClick:()=>t(c.id),children:c.name},c.id))}),a&&g.jsx("div",{className:"mt-auto py-4 pb-8",children:g.jsxs(Pu,{value:s,onValueChange:i,children:[g.jsx(Cl,{className:"w-full",children:g.jsx(Du,{placeholder:"Select microphone"})}),g.jsx(_l,{children:o.map(c=>g.jsx(Qn,{value:c.deviceId,children:c.label||`Microphone ${c.deviceId.slice(0,4)}...`},c.deviceId))})]})})]})})}const MI=b.forwardRef(({className:n="",audioData:e,onWaveformCreate:t,isPlaying:r},s)=>{const i=b.useRef(),o=b.useRef(null);return b.useEffect(()=>!e||!o.current?void 0:((async()=>{i.current&&i.current.destroy();const c=o.current;if(!c)return;c.innerHTML="";const d=await p5(c,e);d.setMuted(!0),i.current=d,t==null||t(d)})(),()=>{var c;(c=i.current)==null||c.destroy()}),[e,t]),b.useEffect(()=>{i.current&&(r?i.current.play():(i.current.stop(),i.current.seekTo(0)))},[r]),g.jsx("div",{ref:a=>{a&&(o.current=a,s&&typeof s=="function"&&s(a))},className:`w-full h-12 flex-shrink-0 ${n}`})});MI.displayName="Waveform";function aee({slot:n,isRecording:e,isPlaying:t,waveformRef:r,onSlotClick:s,onDelete:i,onEmojiClick:o,onTitleClick:a,onWaveformCreate:c,showWaveform:d,showEmoji:h}){return g.jsx("div",{className:"flex flex-col gap-2 min-h-0",children:g.jsxs(Re,{variant:"retro",className:`h-full w-full flex flex-col items-stretch justify-between relative p-2 md:p-2 group min-h-[106px] md:min-h-[110px] focus:outline-none focus:ring-0 ${e?"bg-destructive animate-pulse":""} ${t?"[border-image:url('/button-default.svg')_60_stretch]":""}`,onClick:s,children:[n.audioData&&d&&g.jsxs(g.Fragment,{children:[g.jsx(MI,{ref:r,audioData:n.audioData,isPlaying:t,onWaveformCreate:c,className:"z-10"}),g.jsx("div",{className:"absolute top-1 right-1 flex gap-1 z-10",children:g.jsx("div",{role:"button",className:"hidden md:flex opacity-0 group-hover:opacity-100 transition-opacity h-5 w-5 md:h-6 md:w-6 hover:bg-white/50 rounded-md items-center justify-center cursor-pointer",onClick:f=>{f.stopPropagation(),i()},children:g.jsx(D4,{className:"w-3 h-3 md:w-4 md:h-4"})})})]}),g.jsxs("div",{className:`mb-[-4px] left-2 flex items-center gap-1 md:gap-2 transition-all duration-300 ease-in-out transform origin-left ${t?"opacity-100 scale-100":"opacity-60 scale-80"}`,children:[h&&(n.emoji?g.jsx("span",{className:"text-xl md:text-2xl cursor-pointer hover:opacity-80",onClick:f=>{f.stopPropagation(),o()},children:n.emoji}):g.jsx("span",{role:"button",className:"opacity-0 group-hover:opacity-100 transition-opacity text-xl md:text-2xl cursor-pointer hover:opacity-80",onClick:f=>{f.stopPropagation(),o()},children:n.audioData?"":""})),g.jsx("span",{className:"text-[14px] truncate max-w-[80px] md:max-w-[120px] cursor-text hover:bg-white/20 px-1 rounded select-text font-geneva-12",onClick:f=>{f.stopPropagation(),a()},title:n.title?"Edit title":"Add title",children:e?"Recording...":n.title||g.jsx("span",{className:"opacity-0 group-hover:opacity-60",children:n.audioData?"Add title...":"Record"})})]})]})})}function lee({board:n,playbackStates:e,waveformRefs:t,isEditingTitle:r,onTitleChange:s,onTitleBlur:i,onTitleKeyDown:o,onSlotClick:a,onSlotDelete:c,onSlotEmojiClick:d,onSlotTitleClick:h,onWaveformCreate:f,setIsEditingTitle:m,showWaveforms:y,showEmojis:v}){return g.jsx("div",{className:"flex-1 overflow-auto",children:g.jsx("div",{className:"py-6 px-4 md:py-2 md:p-8 md:py-4",children:g.jsxs("div",{className:"max-w-2xl mx-auto flex flex-col",children:[r?g.jsx(Ku,{className:"text-3xl font-bold mb-4 text-left select-text",value:n.name,autoFocus:!0,onChange:w=>s(w.target.value),onBlur:w=>i(w.target.value),onKeyDown:o}):g.jsx("h1",{className:"text-3xl font-bold mb-4 text-left cursor-text hover:opacity-80 select-text",onClick:()=>m(!0),children:n.name}),g.jsx("div",{className:"grid grid-cols-3 gap-2 md:gap-4 flex-1",children:n.slots.map((w,S)=>g.jsx(aee,{slot:w,isRecording:e[S].isRecording,isPlaying:e[S].isPlaying,waveformRef:t[S],onSlotClick:()=>a(S),onDelete:()=>c(S),onEmojiClick:()=>d(S),onTitleClick:()=>h(S),onWaveformCreate:f?C=>f(S,C):void 0,showWaveform:y,showEmoji:v},S))})]})})})}const cee=()=>{const[n,e]=b.useState([]),[t,r]=b.useState(""),[s,i]=b.useState(Array(9).fill({isRecording:!1,isPlaying:!1})),o=b.useRef(Array(9).fill(null)),a=b.useRef(Array(9).fill(null));b.useEffect(()=>{Xte().then(T=>{var k;e(T),r(((k=T[0])==null?void 0:k.id)||"default")})},[]);const c=n.find(T=>T.id===t)||P0(),d=b.useCallback(()=>{const T=P0();T.id=Date.now().toString();const k=[...n,T];ys(k),e(k),r(T.id)},[n]),h=b.useCallback(T=>{const k=n.map(M=>M.id===t?{...M,name:T}:M);ys(k),e(k)},[n,t]),f=b.useCallback(()=>{if(n.length<=1)return;const T=n.filter(k=>k.id!==t);ys(T),e(T),r(T[0].id)},[n,t]),m=b.useCallback((T,k)=>{const M=n.map(N=>{if(N.id===t){const O=[...N.slots];return O[T]={...O[T],...k},{...N,slots:O}}return N});ys(M),e(M)},[n,t]),y=b.useCallback(T=>{m(T,{audioData:null,emoji:void 0,title:void 0})},[m]),v=b.useCallback((T,k)=>{i(M=>{const N=[...M];return N[T]={...N[T],isPlaying:k},N})},[]),w=b.useCallback(T=>{const k=c.slots[T];if(!k.audioData)return;const M=m5(k.audioData);o.current[T]=M,v(T,!0),M.play(),M.onended=()=>{v(T,!1),o.current[T]=null}},[c,v]),S=b.useCallback(T=>{const k=o.current[T];k&&(k.pause(),k.currentTime=0,o.current[T]=null,v(T,!1))},[v]),C=b.useCallback((T,k)=>{c.slots[T].audioData&&m(T,{waveform:k})},[c,m]);return{boards:n,activeBoard:c,activeBoardId:t,playbackStates:s,waveformRefs:a,setActiveBoardId:r,addNewBoard:d,updateBoardName:h,deleteCurrentBoard:f,updateSlot:m,deleteSlot:y,playSound:w,stopSound:S,handleWaveformCreate:C,setBoards:e,setPlaybackStates:i}},uee=({onRecordingComplete:n,selectedDeviceId:e,setRecordingState:t})=>{const[r,s]=b.useState(!1),[i,o]=b.useState(!1),a=b.useRef(null),c=b.useRef([]),d=b.useCallback(async()=>{try{const f=await navigator.mediaDevices.getUserMedia({audio:e?{deviceId:{exact:e}}:!0});o(!0);const m=Cu(),y=new MediaRecorder(f,{mimeType:m});c.current=[],y.ondataavailable=v=>{c.current.push(v.data)},y.onstop=async()=>{const v=new Blob(c.current,{type:m}),w=await g5(v);n(w),f.getTracks().forEach(S=>S.stop()),a.current=null,s(!1),t(!1)},a.current=y,s(!0),t(!0),y.start(200)}catch(f){console.error("Error accessing microphone:",f),o(!1),s(!1),t(!1)}},[e,n,t]),h=b.useCallback(()=>{var f;((f=a.current)==null?void 0:f.state)==="recording"&&a.current.stop()},[]);return{isRecording:r,micPermissionGranted:i,startRecording:d,stopRecording:h}},dee=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];function hee({isOpen:n,onOpenChange:e,onEmojiSelect:t}){return g.jsx(Wl,{open:n,onOpenChange:e,children:g.jsxs(ia,{className:"bg-system7-window-bg border-2 border-black rounded-lg shadow-[2px_2px_0px_0px_rgba(0,0,0,0.5)]",children:[g.jsx(oa,{children:"Set Emoji"}),g.jsxs("div",{className:"p-4 pt-0",children:[g.jsx("p",{className:"text-gray-500 mb-4",children:"Choose an emoji for this sound slot"}),g.jsx("div",{className:"grid grid-cols-10 gap-1 max-h-[300px] overflow-y-auto",children:dee.map((r,s)=>g.jsx("button",{className:"p-1 text-2xl hover:bg-white/20 rounded cursor-pointer font-['SerenityOS-Emoji']",onClick:()=>{t(r),e(!1)},children:r},s))})]})]})})}function fee({onNewBoard:n,onImportBoard:e,onExportBoard:t,onReloadBoard:r,onReloadAllSounds:s,onRenameBoard:i,onDeleteBoard:o,canDeleteBoard:a,onShowHelp:c,onShowAbout:d,showWaveforms:h,onToggleWaveforms:f,showEmojis:m,onToggleEmojis:y,onClose:v}){const[w,S]=b.useState(!1);return b.useEffect(()=>{const C=k=>{k.key==="Alt"&&S(!0)},T=k=>{k.key==="Alt"&&S(!1)};return window.addEventListener("keydown",C),window.addEventListener("keyup",T),()=>{window.removeEventListener("keydown",C),window.removeEventListener("keyup",T)}},[]),g.jsxs(Rs,{children:[g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 text-md px-2 py-1 border-none hover:bg-gray-200 active:bg-gray-900 active:text-white focus-visible:ring-0",children:"File"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{onClick:n,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"New Soundboard"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:e,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Import Soundboards..."}),g.jsx(de,{onClick:t,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Export Soundboards..."}),g.jsx(de,{onClick:r,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Reset Soundboards"}),w&&g.jsx(de,{onClick:s,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Load Special Soundboards"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:v,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Close"})]})]}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 px-2 py-1 text-md focus-visible:ring-0 hover:bg-gray-200 active:bg-gray-900 active:text-white",children:"Edit"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{onClick:i,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Rename Soundboard"}),g.jsx(de,{onClick:o,disabled:!a,className:a?"text-md h-6 px-3 active:bg-gray-900 active:text-white":"text-gray-400 text-md h-6 px-3",children:"Delete Soundboard"})]})]}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 px-2 py-1 text-md focus-visible:ring-0 hover:bg-gray-200 active:bg-gray-900 active:text-white",children:"View"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(at,{checked:h,onCheckedChange:f,className:"text-md h-6 px-3 pl-8 active:bg-gray-900 active:text-white flex justify-between items-center",children:g.jsx("span",{children:"Waveforms"})}),g.jsx(at,{checked:m,onCheckedChange:y,className:"text-md h-6 px-3 pl-8 active:bg-gray-900 active:text-white flex justify-between items-center",children:g.jsx("span",{children:"Emojis"})})]})]}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 px-2 py-1 text-md focus-visible:ring-0 hover:bg-gray-200 active:bg-gray-900 active:text-white",children:"Help"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{onClick:c,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Soundboard Help"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:d,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"About Soundboard"})]})]})]})}function pee({onClose:n,isWindowOpen:e,isForeground:t,helpItems:r=[]}){const{boards:s,activeBoard:i,activeBoardId:o,playbackStates:a,waveformRefs:c,setActiveBoardId:d,addNewBoard:h,updateBoardName:f,updateSlot:m,deleteSlot:y,playSound:v,stopSound:w,setBoards:S,setPlaybackStates:C}=cee(),[T,k]=b.useState(!1),[M,N]=b.useState({type:null,isOpen:!1,slotIndex:-1,value:""}),[O,D]=b.useState(!1),[I,L]=b.useState(!1),[A,V]=b.useState(Jte),[F,U]=b.useState([]),B=b.useRef(null),[q,K]=b.useState(!0),[G,$]=b.useState(!0),z=b.useRef(null),W=pe=>{const ye=z.current;ye!==null&&m(ye,{audioData:pe})},{micPermissionGranted:P,startRecording:j,stopRecording:J}=uee({onRecordingComplete:W,selectedDeviceId:A,setRecordingState:pe=>{const ye=z.current;ye!==null&&C(re=>{const Q=[...re];return Q[ye]={...Q[ye],isRecording:pe},Q})}});b.useEffect(()=>{P&&navigator.mediaDevices.enumerateDevices().then(pe=>{const ye=pe.filter(Q=>Q.kind==="audioinput");U(ye);const re=ye.find(Q=>Q.deviceId==="default"||Q.deviceId===A);re&&V(re.deviceId)})},[P,A]),b.useEffect(()=>{Zte(A)},[A]),b.useEffect(()=>{Qte()||(D(!0),ene())},[]);const te=pe=>{z.current=pe,j()},ne=pe=>{const ye=i.slots[pe];a[pe].isRecording?J():ye.audioData?a[pe].isPlaying?w(pe):v(pe):te(pe)},ue=()=>{M.type&&(m(M.slotIndex,{[M.type]:M.value}),N(pe=>({...pe,isOpen:!1})))},ce=pe=>{var Q;const ye=(Q=pe.target.files)==null?void 0:Q[0];if(!ye)return;const re=new FileReader;re.onload=X=>{var Y;try{const fe=JSON.parse((Y=X.target)==null?void 0:Y.result),se=(fe.boards||[fe]).map(ge=>({...ge,id:Date.now().toString()+Math.random().toString(36).slice(2),slots:ge.slots.map(he=>({audioData:he.audioData,emoji:he.emoji,title:he.title}))}));S([...s,...se]),d(se[0].id),ys(se)}catch(fe){console.error("Failed to import soundboards:",fe)}},re.readAsText(ye)},ae=()=>{const pe={boards:s.map(X=>({...X,slots:X.slots.map(Y=>({audioData:Y.audioData,emoji:Y.emoji,title:Y.title}))}))},ye=new Blob([JSON.stringify(pe)],{type:"application/json"}),re=URL.createObjectURL(ye),Q=document.createElement("a");Q.href=re,Q.download="soundboards.json",Q.click(),URL.revokeObjectURL(re)},xe=async()=>{try{const ye=await(await fetch("/soundboards.json")).json(),Q=(ye.boards||[ye]).map(X=>({...X,id:Date.now().toString()+Math.random().toString(36).slice(2),slots:X.slots.map(Y=>({audioData:Y.audioData,emoji:Y.emoji,title:Y.title}))}));S(Q),d(Q[0].id),ys(Q)}catch(pe){console.error("Failed to reload soundboards.json:",pe)}},ke=async()=>{try{const ye=await(await fetch("/all-sounds.json")).json(),Q=(ye.boards||[ye]).map(X=>({...X,id:Date.now().toString()+Math.random().toString(36).slice(2),slots:X.slots.map(Y=>({audioData:Y.audioData,emoji:Y.emoji,title:Y.title}))}));S(Q),d(Q[0].id),ys(Q)}catch(pe){console.error("Failed to reload all-sounds.json:",pe)}};return b.useEffect(()=>{const pe=ye=>{const re=ye.keyCode>=97?ye.keyCode-97:ye.keyCode-49;(ye.keyCode>=97&&ye.keyCode<=105||ye.keyCode>=49&&ye.keyCode<=57)&&i.slots[re].audioData&&(a[re].isPlaying?w(re):v(re))};return window.addEventListener("keydown",pe),()=>{window.removeEventListener("keydown",pe)}},[i.slots,a,v,w]),g.jsxs(g.Fragment,{children:[g.jsx(fee,{onClose:n,isWindowOpen:e,onNewBoard:h,onImportBoard:()=>{var pe;return(pe=B.current)==null?void 0:pe.click()},onExportBoard:ae,onReloadBoard:xe,onReloadAllSounds:ke,onRenameBoard:()=>k(!0),onDeleteBoard:()=>{const pe=s.filter(ye=>ye.id!==o);pe.length>0&&(S(pe),d(pe[0].id),ys(pe))},canDeleteBoard:s.length>1,onShowHelp:()=>D(!0),onShowAbout:()=>L(!0),showWaveforms:q,onToggleWaveforms:K,showEmojis:G,onToggleEmojis:$}),g.jsxs(ai,{title:"Soundboard",onClose:n,isForeground:t,appId:"soundboard",windowConstraints:{minHeight:window.innerWidth>=768?475:625},children:[g.jsx("input",{type:"file",ref:B,className:"hidden",accept:"application/json",onChange:ce}),g.jsx(oee,{boards:s,activeBoardId:o,onBoardSelect:d,onNewBoard:h,selectedDeviceId:A,onDeviceSelect:V,audioDevices:F,micPermissionGranted:P}),g.jsx(lee,{board:i,playbackStates:a,waveformRefs:c.current,isEditingTitle:T,onTitleChange:pe=>f(pe),onTitleBlur:pe=>{f(pe),k(!1)},onTitleKeyDown:pe=>{pe.key==="Enter"&&(f(pe.currentTarget.value),k(!1))},onSlotClick:ne,onSlotDelete:y,onSlotEmojiClick:pe=>N({type:"emoji",isOpen:!0,slotIndex:pe,value:i.slots[pe].emoji||""}),onSlotTitleClick:pe=>N({type:"title",isOpen:!0,slotIndex:pe,value:i.slots[pe].title||""}),setIsEditingTitle:k,showWaveforms:q,showEmojis:G}),g.jsx(hee,{isOpen:M.isOpen&&M.type==="emoji",onOpenChange:pe=>N(ye=>({...ye,isOpen:pe})),onEmojiSelect:pe=>{m(M.slotIndex,{emoji:pe}),N(ye=>({...ye,isOpen:!1}))}}),g.jsx($l,{isOpen:M.isOpen&&M.type==="title",onOpenChange:pe=>N(ye=>({...ye,isOpen:pe})),onSubmit:ue,title:"Set Title",description:"Enter a title for this sound slot",value:M.value,onChange:pe=>N(ye=>({...ye,value:pe}))}),g.jsx(Ns,{isOpen:O,onOpenChange:D,helpItems:r,appName:"Soundboard"}),g.jsx(As,{isOpen:I,onOpenChange:L,metadata:C0})]})]})}const mee=[{icon:"",title:"Record",description:"Click slot to record, click again to stop"},{icon:"",title:"Play",description:"Click or push numbers 1-9 to play"},{icon:"",title:"Customize",description:"Add emojis and name your sounds"},{icon:"",title:"Organize",description:"Make multiple soundboards"},{icon:"",title:"Export & share",description:"Or import from file downloaded"},{icon:"",title:"Modern GUI",description:"System 7 style aesthetics"}],C0={name:"Soundboard",version:"0.2",creator:{name:"Ryo Lu",url:"https://ryo.lu"},github:"https://github.com/ryokun6/ryos",icon:"/icons/cdrom.png"},Wk={id:"soundboard",name:"Soundboard",icon:{type:"image",src:C0.icon},description:"A simple soundboard app",component:pee,helpItems:mee,metadata:C0};function gee({onClose:n,onShowHelp:e,onShowAbout:t,viewType:r,onViewTypeChange:s,sortType:i,onSortTypeChange:o,selectedFile:a,onMoveToTrash:c,onEmptyTrash:d,onRestore:h,isTrashEmpty:f,isInTrash:m,onNavigateBack:y,onNavigateForward:v,canNavigateBack:w=!1,canNavigateForward:S=!1,onNavigateToPath:C,onImportFile:T,onRename:k,onDuplicate:M}){const N=a&&a.path!=="/Trash"&&!a.path.startsWith("/Trash/")&&a.path!=="/Applications"&&a.path!=="/Documents"&&!a.path.startsWith("/Applications/"),O=a&&k&&N,D=a&&M&&!a.isDirectory;return g.jsxs(Rs,{children:[g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 text-md px-2 py-1 border-none hover:bg-gray-200 active:bg-gray-900 active:text-white focus-visible:ring-0",children:"File"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"New Finder Window"}),g.jsx(de,{className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"New Folder"}),g.jsx(de,{onClick:T,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Import from Device..."}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:k,disabled:!O,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:"Rename..."}),g.jsx(de,{onClick:M,disabled:!D,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:"Duplicate"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),m?g.jsx(de,{onClick:h,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Put Back"}):g.jsx(de,{onClick:()=>N&&c(a),disabled:!N,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:"Move to Trash"}),g.jsx(de,{onClick:d,disabled:f,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:"Empty Trash..."}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:n,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Close"})]})]}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 text-md px-2 py-1 border-none hover:bg-gray-200 active:bg-gray-900 active:text-white focus-visible:ring-0",children:"Edit"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Undo"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Cut"}),g.jsx(de,{className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Copy"}),g.jsx(de,{className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Paste"}),g.jsx(de,{className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Clear"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Select All"})]})]}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 text-md px-2 py-1 border-none hover:bg-gray-200 active:bg-gray-900 active:text-white focus-visible:ring-0",children:"View"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(at,{checked:r==="small",onCheckedChange:()=>s("small"),className:"text-md h-6 px-3 pl-8 active:bg-gray-900 active:text-white flex justify-between items-center",children:g.jsx("span",{children:"by Small Icon"})}),g.jsx(at,{checked:r==="large",onCheckedChange:()=>s("large"),className:"text-md h-6 px-3 pl-8 active:bg-gray-900 active:text-white flex justify-between items-center",children:g.jsx("span",{children:"by Icon"})}),g.jsx(at,{checked:r==="list",onCheckedChange:()=>s("list"),className:"text-md h-6 px-3 pl-8 active:bg-gray-900 active:text-white flex justify-between items-center",children:g.jsx("span",{children:"by List"})}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(at,{checked:i==="name",onCheckedChange:()=>o("name"),className:"text-md h-6 px-3 pl-8 active:bg-gray-900 active:text-white flex justify-between items-center",children:g.jsx("span",{children:"by Name"})}),g.jsx(at,{checked:i==="date",onCheckedChange:()=>o("date"),className:"text-md h-6 px-3 pl-8 active:bg-gray-900 active:text-white flex justify-between items-center",children:g.jsx("span",{children:"by Date"})}),g.jsx(at,{checked:i==="size",onCheckedChange:()=>o("size"),className:"text-md h-6 px-3 pl-8 active:bg-gray-900 active:text-white flex justify-between items-center",children:g.jsx("span",{children:"by Size"})}),g.jsx(at,{checked:i==="kind",onCheckedChange:()=>o("kind"),className:"text-md h-6 px-3 pl-8 active:bg-gray-900 active:text-white flex justify-between items-center",children:g.jsx("span",{children:"by Kind"})})]})]}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 text-md px-2 py-1 border-none hover:bg-gray-200 active:bg-gray-900 active:text-white focus-visible:ring-0",children:"Go"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{onClick:y,disabled:!w,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:"Back"}),g.jsx(de,{onClick:v,disabled:!S,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:"Forward"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsxs(de,{onClick:()=>C==null?void 0:C("/Documents"),className:"text-md h-6 px-3 active:bg-gray-900 active:text-white flex items-center gap-2",children:[g.jsx("img",{src:"/icons/documents.png",alt:"",className:"w-4 h-4 [image-rendering:pixelated]"}),"Documents"]}),g.jsxs(de,{onClick:()=>C==null?void 0:C("/Applications"),className:"text-md h-6 px-3 active:bg-gray-900 active:text-white flex items-center gap-2",children:[g.jsx("img",{src:"/icons/applications.png",alt:"",className:"w-4 h-4 [image-rendering:pixelated]"}),"Applications"]}),g.jsxs(de,{onClick:()=>C==null?void 0:C("/Trash"),className:"text-md h-6 px-3 active:bg-gray-900 active:text-white flex items-center gap-2",children:[g.jsx("img",{src:f?"/icons/trash-empty.png":"/icons/trash-full.png",alt:"",className:"w-4 h-4 [image-rendering:pixelated]"}),"Trash"]})]})]}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 text-md px-2 py-1 border-none hover:bg-gray-200 active:bg-gray-900 active:text-white focus-visible:ring-0",children:"Help"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{onClick:e,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Finder Help"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:t,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"About Finder"})]})]})]})}function _0({name:n,isDirectory:e,icon:t,onDoubleClick:r,isSelected:s,onClick:i,size:o="small",className:a}){const{play:c}=pt(ut.BUTTON_CLICK,.3),d=()=>t||(e?"/icons/directory.png":n.endsWith(".txt")||n.endsWith(".md")?"/icons/file-text.png":"/icons/file.png"),f={small:{container:"w-[80px]",icon:"w-12 h-12",image:"w-[32px] h-[32px]",text:"text-[10px] max-w-[90px]"},large:{container:"w-24",icon:"w-16 h-16",image:"w-12 h-12",text:"text-[12px] max-w-[96px]"}}[o];return g.jsxs("div",{className:`flex flex-col items-center justify-start cursor-pointer gap-1 ${f.container} ${a}`,onDoubleClick:r,onClick:m=>{c(),i==null||i(m)},children:[g.jsx("div",{className:`flex items-center justify-center ${f.icon} ${s?"brightness-65 contrast-100":""}`,children:g.jsx("img",{src:d(),alt:e?"Directory":"File",className:`object-contain ${f.image}`,style:{imageRendering:"pixelated"}})}),g.jsx("span",{className:`text-center px-1 font-geneva-12 break-words truncate ${f.text} ${s?"bg-black text-white":"bg-white text-black"}`,children:n})]})}const OI=b.forwardRef(({className:n,...e},t)=>g.jsx("div",{className:"relative w-full overflow-auto",children:g.jsx("table",{ref:t,className:Pe("w-full caption-bottom text-sm",n),...e})}));OI.displayName="Table";const PI=b.forwardRef(({className:n,...e},t)=>g.jsx("thead",{ref:t,className:Pe("[&_tr]:border-b",n),...e}));PI.displayName="TableHeader";const DI=b.forwardRef(({className:n,...e},t)=>g.jsx("tbody",{ref:t,className:Pe("[&_tr:last-child]:border-0",n),...e}));DI.displayName="TableBody";const yee=b.forwardRef(({className:n,...e},t)=>g.jsx("tfoot",{ref:t,className:Pe("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...e}));yee.displayName="TableFooter";const T0=b.forwardRef(({className:n,...e},t)=>g.jsx("tr",{ref:t,className:Pe("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...e}));T0.displayName="TableRow";const eu=b.forwardRef(({className:n,...e},t)=>g.jsx("th",{ref:t,className:Pe("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...e}));eu.displayName="TableHead";const tu=b.forwardRef(({className:n,...e},t)=>g.jsx("td",{ref:t,className:Pe("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...e}));tu.displayName="TableCell";const vee=b.forwardRef(({className:n,...e},t)=>g.jsx("caption",{ref:t,className:Pe("mt-4 text-sm text-muted-foreground",n),...e}));vee.displayName="TableCaption";function xee(n){if(n.isDirectory)return"Folder";if(n.appId)return"Application";if(!n.type)return"Document";switch(n.type){case"image":return"Image";case"markdown":return"Markdown Document";case"text":return"Text Document";case"application":return"Application";case"directory":return"Folder";default:return n.type.charAt(0).toUpperCase()+n.type.slice(1)}}function wee({files:n,onFileOpen:e,onFileSelect:t,selectedFile:r,viewType:s="small"}){const{play:i}=pt(ut.BUTTON_CLICK,.3),o=c=>{i(),e(c),t(null)},a=c=>{i(),t(c)};return s==="list"?g.jsx("div",{className:"font-geneva-12",children:g.jsxs(OI,{children:[g.jsx(PI,{children:g.jsxs(T0,{className:"text-[9px] border-none font-normal",children:[g.jsx(eu,{className:"font-normal bg-gray-100/50 h-[28px]",children:"Name"}),g.jsx(eu,{className:"font-normal bg-gray-100/50 h-[28px]",children:"Type"}),g.jsx(eu,{className:"font-normal bg-gray-100/50 h-[28px]",children:"Size"}),g.jsx(eu,{className:"font-normal bg-gray-100/50 h-[28px]",children:"Modified"})]})}),g.jsx(DI,{className:"text-[10px]",children:n.map(c=>g.jsxs(T0,{className:`border-none hover:bg-gray-100/50 transition-colors cursor-default ${(r==null?void 0:r.path)===c.path?"bg-black text-white hover:bg-black":"odd:bg-gray-200/50"}`,onClick:()=>a(c),onDoubleClick:()=>o(c),children:[g.jsxs(tu,{className:"flex items-center gap-2",children:[g.jsx("img",{src:c.icon,alt:c.isDirectory?"Directory":"File",className:`w-4 h-4 ${(r==null?void 0:r.path)===c.path?"invert":""}`,style:{imageRendering:"pixelated"}}),c.name]}),g.jsx(tu,{children:xee(c)}),g.jsx(tu,{children:c.size?c.size<1024?`${c.size} B`:c.size<1024*1024?`${(c.size/1024).toFixed(1)} KB`:`${(c.size/(1024*1024)).toFixed(1)} MB`:"--"}),g.jsx(tu,{children:c.modifiedAt?new Date(c.modifiedAt).toLocaleDateString():"--"})]},c.path))})]})}):g.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(80px,1fr))] gap-2 p-2",children:n.map(c=>g.jsx(_0,{name:c.name,isDirectory:c.isDirectory,icon:c.icon,onDoubleClick:()=>o(c),onClick:()=>a(c),isSelected:(r==null?void 0:r.path)===c.path,size:s==="large"?"large":"small"},c.path))})}function bee({onClose:n,isWindowOpen:e,isForeground:t=!0}){const[r,s]=b.useState(!1),[i,o]=b.useState(!1),[a,c]=b.useState(!1),[d,h]=b.useState(!1),[f,m]=b.useState(""),[y,v]=b.useState(!1),[w,S]=b.useState(localStorage.getItem("finder_view_type")||"list"),[C,T]=b.useState(localStorage.getItem("finder_sort_type")||"name"),k=b.useRef(null),M=b.useRef(null),[N,O]=b.useState(pE()),{currentPath:D,files:I,selectedFile:L,isLoading:A,error:V,handleFileOpen:F,handleFileSelect:U,navigateUp:B,navigateToPath:q,moveToTrash:K,restoreFromTrash:G,emptyTrash:$,trashItems:z,navigateBack:W,navigateForward:P,canNavigateBack:j,canNavigateForward:J,saveFile:te,renameFile:ne}=Ep();b.useEffect(()=>{const Y=setInterval(()=>{O(pE())},5e3);return()=>clearInterval(Y)},[]),b.useEffect(()=>{const Y=localStorage.getItem("app_finder_initialPath");Y&&(q(Y),localStorage.removeItem("app_finder_initialPath"))},[q]),b.useEffect(()=>{localStorage.setItem("finder_view_type",w)},[w]),b.useEffect(()=>{localStorage.setItem("finder_sort_type",C)},[C]);const ue=[...I].sort((Y,fe)=>{switch(C){case"name":return Y.name.localeCompare(fe.name);case"kind":{if(Y.isDirectory&&!fe.isDirectory)return-1;if(!Y.isDirectory&&fe.isDirectory)return 1;const _e=Y.name.split(".").pop()||"",se=fe.name.split(".").pop()||"";return _e.localeCompare(se)||Y.name.localeCompare(fe.name)}case"size":return Y.isDirectory&&!fe.isDirectory?-1:!Y.isDirectory&&fe.isDirectory?1:0;case"date":return 0;default:return 0}}),ce=()=>{c(!0)},ae=()=>{$(),c(!1)},xe=async Y=>{if(Y.preventDefault(),Y.stopPropagation(),v(!1),D!=="/Documents")return;const fe=Y.dataTransfer.files[0];if(fe){if(!fe.type.startsWith("text/")&&!fe.name.endsWith(".md"))return;const _e=await fe.text();te({name:fe.name,path:`/Documents/${fe.name}`,content:_e,icon:"/icons/file-text.png",isDirectory:!1})}},ke=()=>{var Y;(Y=M.current)==null||Y.click()},pe=async Y=>{var _e;const fe=(_e=Y.target.files)==null?void 0:_e[0];if(fe){if(!fe.type.startsWith("text/")&&!fe.name.endsWith(".md"))return;const se=await fe.text();te({name:fe.name,path:`${D}/${fe.name}`,content:se,icon:"/icons/file-text.png",isDirectory:!1}),Y.target.value=""}},ye=()=>{L&&(m(L.name),h(!0))},re=Y=>{if(!(!L||!Y)){if(L.name===Y){h(!1);return}ne(L.name,Y),h(!1)}},Q=()=>{if(!L)return;const Y=L.name.includes(".")?`.${L.name.split(".").pop()}`:"",_e=`${L.name.replace(Y,"")} (copy)${Y}`;te({...L,name:_e,path:`${D}/${_e}`})},X=()=>{L&&G(L)};return e?g.jsxs(g.Fragment,{children:[g.jsx(gee,{onClose:n,onShowHelp:()=>s(!0),onShowAbout:()=>o(!0),viewType:w,onViewTypeChange:S,sortType:C,onSortTypeChange:T,selectedFile:L,onMoveToTrash:K,onEmptyTrash:ce,onRestore:X,isTrashEmpty:z.length===0,isInTrash:!!((L==null?void 0:L.path)==="/Trash"||L!=null&&L.path.startsWith("/Trash/")),onNavigateBack:W,onNavigateForward:P,canNavigateBack:j(),canNavigateForward:J(),onNavigateToPath:q,onImportFile:ke,onRename:ye,onDuplicate:Q}),g.jsx("input",{type:"file",ref:M,className:"hidden",accept:".txt,.md,text/*",onChange:pe}),g.jsx(ai,{appId:"finder",title:D==="/"?"Macintosh HD":D.split("/").filter(Boolean).pop()||"Finder",onClose:n,isForeground:t,children:g.jsxs("div",{className:`flex flex-col h-full w-full bg-white relative ${y&&D==="/Documents"?"after:absolute after:inset-0 after:bg-black/20":""}`,onDragOver:Y=>{Y.preventDefault(),Y.stopPropagation(),!y&&D==="/Documents"&&v(!0)},onDragLeave:Y=>{Y.preventDefault(),Y.stopPropagation();const fe=Y.relatedTarget;Y.currentTarget.contains(fe)||v(!1)},onDragEnd:()=>v(!1),onMouseLeave:()=>v(!1),onDrop:xe,children:[g.jsx("div",{className:"flex flex-col gap-1 p-1 bg-gray-100 border-b border-black",children:g.jsxs("div",{className:"flex gap-2 items-center",children:[g.jsxs("div",{className:"flex gap-1",children:[g.jsx(Re,{variant:"ghost",size:"icon",onClick:W,disabled:!j(),className:"h-8 w-8",children:g.jsx(Bv,{className:"h-4 w-4"})}),g.jsx(Re,{variant:"ghost",size:"icon",onClick:P,disabled:!J(),className:"h-8 w-8",children:g.jsx(nO,{className:"h-4 w-4"})}),g.jsx(Re,{variant:"ghost",size:"icon",onClick:B,disabled:D==="/",className:"h-8 w-8",children:g.jsx(Bv,{className:"h-4 w-4 rotate-90"})})]}),g.jsx(Ku,{ref:k,value:D,onChange:Y=>q(Y.target.value),onKeyDown:Y=>{Y.key==="Enter"&&q(Y.target.value)},className:"flex-1",placeholder:"Enter path"})]})}),g.jsx("div",{className:"flex-1 overflow-auto",children:A?g.jsx("div",{className:"flex items-center justify-center h-full",children:"Loading..."}):V?g.jsx("div",{className:"flex items-center justify-center h-full text-red-500",children:V}):g.jsx(wee,{files:ue,onFileOpen:F,onFileSelect:U,selectedFile:L,viewType:w})}),g.jsxs("div",{className:"flex items-center justify-between px-2 py-1 text-[10px] font-geneva-12 bg-gray-100 border-t border-gray-300",children:[g.jsxs("span",{children:[ue.length," item",ue.length!==1?"s":""]}),g.jsxs("span",{children:[Math.round(N.available/1024/1024*10)/10," MB available"]})]})]})}),g.jsx(Ns,{isOpen:r,onOpenChange:s,appName:"Finder",helpItems:II}),g.jsx(As,{isOpen:i,onOpenChange:o,metadata:RI}),g.jsx(Ts,{isOpen:a,onOpenChange:c,onConfirm:ae,title:"Empty Trash",description:"Are you sure you want to empty the Trash? This action cannot be undone."}),g.jsx($l,{isOpen:d,onOpenChange:h,onSubmit:re,title:"Rename File",description:"Enter a new name for the file",value:f,onChange:m})]}):null}const RI={name:"Finder",version:"1.0.0",creator:{name:"Ryo",url:"https://github.com/ryokun6"},github:"https://github.com/ryokun6/ryos",icon:"/icons/mac.png"},II=[{icon:"",title:"Browse & Navigate",description:"Navigate files using Back/Forward buttons and access quick locations from the Go menu"},{icon:"",title:"File Management",description:"Create new folders, move files to Trash, and organize your content"},{icon:"",title:"View & Sort",description:"Switch between Icon views and sort files by name, kind, size, or date"},{icon:"",title:"Quick Access",description:"Quickly access Documents, Applications, and Trash from the Go menu"},{icon:"",title:"Trash",description:"Move unwanted files to Trash and permanently delete them when emptying"},{icon:"",title:"Storage Info",description:"View available storage space and item count at the bottom of the window"}],$k={id:"finder",name:"Finder",description:"Browse and manage files",icon:{type:"image",src:"/icons/mac.png"},component:bee,helpItems:II,metadata:RI};var[nm,Cre]=Ir("Tooltip",[zl]),rm=zl(),jI="TooltipProvider",See=700,k0="tooltip.open",[Cee,mb]=nm(jI),LI=n=>{const{__scopeTooltip:e,delayDuration:t=See,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=n,[o,a]=b.useState(!0),c=b.useRef(!1),d=b.useRef(0);return b.useEffect(()=>{const h=d.current;return()=>window.clearTimeout(h)},[]),g.jsx(Cee,{scope:e,isOpenDelayed:o,delayDuration:t,onOpen:b.useCallback(()=>{window.clearTimeout(d.current),a(!1)},[]),onClose:b.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:b.useCallback(h=>{c.current=h},[]),disableHoverableContent:s,children:i})};LI.displayName=jI;var sm="Tooltip",[_ee,fd]=nm(sm),FI=n=>{const{__scopeTooltip:e,children:t,open:r,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:a}=n,c=mb(sm,n.__scopeTooltip),d=rm(e),[h,f]=b.useState(null),m=fr(),y=b.useRef(0),v=o??c.disableHoverableContent,w=a??c.delayDuration,S=b.useRef(!1),[C=!1,T]=Cs({prop:r,defaultProp:s,onChange:D=>{D?(c.onOpen(),document.dispatchEvent(new CustomEvent(k0))):c.onClose(),i==null||i(D)}}),k=b.useMemo(()=>C?S.current?"delayed-open":"instant-open":"closed",[C]),M=b.useCallback(()=>{window.clearTimeout(y.current),y.current=0,S.current=!1,T(!0)},[T]),N=b.useCallback(()=>{window.clearTimeout(y.current),y.current=0,T(!1)},[T]),O=b.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{S.current=!0,T(!0),y.current=0},w)},[w,T]);return b.useEffect(()=>()=>{y.current&&(window.clearTimeout(y.current),y.current=0)},[]),g.jsx(wp,{...d,children:g.jsx(_ee,{scope:e,contentId:m,open:C,stateAttribute:k,trigger:h,onTriggerChange:f,onTriggerEnter:b.useCallback(()=>{c.isOpenDelayed?O():M()},[c.isOpenDelayed,O,M]),onTriggerLeave:b.useCallback(()=>{v?N():(window.clearTimeout(y.current),y.current=0)},[N,v]),onOpen:M,onClose:N,disableHoverableContent:v,children:t})})};FI.displayName=sm;var E0="TooltipTrigger",VI=b.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=fd(E0,t),i=mb(E0,t),o=rm(t),a=b.useRef(null),c=Ye(e,a,s.onTriggerChange),d=b.useRef(!1),h=b.useRef(!1),f=b.useCallback(()=>d.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),g.jsx(xx,{asChild:!0,...o,children:g.jsx(We.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:Te(n.onPointerMove,m=>{m.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:Te(n.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:Te(n.onPointerDown,()=>{d.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Te(n.onFocus,()=>{d.current||s.onOpen()}),onBlur:Te(n.onBlur,s.onClose),onClick:Te(n.onClick,s.onClose)})})});VI.displayName=E0;var gb="TooltipPortal",[Tee,kee]=nm(gb,{forceMount:void 0}),BI=n=>{const{__scopeTooltip:e,forceMount:t,children:r,container:s}=n,i=fd(gb,e);return g.jsx(Tee,{scope:e,forceMount:t,children:g.jsx(Hn,{present:t||i.open,children:g.jsx(Hu,{asChild:!0,container:s,children:r})})})};BI.displayName=gb;var Rl="TooltipContent",zI=b.forwardRef((n,e)=>{const t=kee(Rl,n.__scopeTooltip),{forceMount:r=t.forceMount,side:s="top",...i}=n,o=fd(Rl,n.__scopeTooltip);return g.jsx(Hn,{present:r||o.open,children:o.disableHoverableContent?g.jsx(WI,{side:s,...i,ref:e}):g.jsx(Eee,{side:s,...i,ref:e})})}),Eee=b.forwardRef((n,e)=>{const t=fd(Rl,n.__scopeTooltip),r=mb(Rl,n.__scopeTooltip),s=b.useRef(null),i=Ye(e,s),[o,a]=b.useState(null),{trigger:c,onClose:d}=t,h=s.current,{onPointerInTransitChange:f}=r,m=b.useCallback(()=>{a(null),f(!1)},[f]),y=b.useCallback((v,w)=>{const S=v.currentTarget,C={x:v.clientX,y:v.clientY},T=Oee(C,S.getBoundingClientRect()),k=Pee(C,T),M=Dee(w.getBoundingClientRect()),N=Iee([...k,...M]);a(N),f(!0)},[f]);return b.useEffect(()=>()=>m(),[m]),b.useEffect(()=>{if(c&&h){const v=S=>y(S,h),w=S=>y(S,c);return c.addEventListener("pointerleave",v),h.addEventListener("pointerleave",w),()=>{c.removeEventListener("pointerleave",v),h.removeEventListener("pointerleave",w)}}},[c,h,y,m]),b.useEffect(()=>{if(o){const v=w=>{const S=w.target,C={x:w.clientX,y:w.clientY},T=(c==null?void 0:c.contains(S))||(h==null?void 0:h.contains(S)),k=!Ree(C,o);T?m():k&&(m(),d())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,h,o,d,m]),g.jsx(WI,{...n,ref:i})}),[Nee,Aee]=nm(sm,{isInside:!1}),WI=b.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=n,c=fd(Rl,t),d=rm(t),{onClose:h}=c;return b.useEffect(()=>(document.addEventListener(k0,h),()=>document.removeEventListener(k0,h)),[h]),b.useEffect(()=>{if(c.trigger){const f=m=>{const y=m.target;y!=null&&y.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),g.jsx(Wu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:g.jsxs(wx,{"data-state":c.stateAttribute,...d,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[g.jsx(bE,{children:r}),g.jsx(Nee,{scope:t,isInside:!0,children:g.jsx(iK,{id:c.contentId,role:"tooltip",children:s||r})})]})})});zI.displayName=Rl;var $I="TooltipArrow",Mee=b.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=rm(t);return Aee($I,t).isInside?null:g.jsx(bx,{...s,...r,ref:e})});Mee.displayName=$I;function Oee(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),s=Math.abs(e.right-n.x),i=Math.abs(e.left-n.x);switch(Math.min(t,r,s,i)){case i:return"left";case s:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Pee(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function Dee(n){const{top:e,right:t,bottom:r,left:s}=n;return[{x:s,y:e},{x:t,y:e},{x:t,y:r},{x:s,y:r}]}function Ree(n,e){const{x:t,y:r}=n;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,c=e[i].y,d=e[o].x,h=e[o].y;c>r!=h>r&&t<(d-a)*(r-c)/(h-c)+a&&(s=!s)}return s}function Iee(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),jee(e)}function jee(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const s=n[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const s=n[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var Lee=LI,Fee=FI,Vee=VI,Bee=BI,HI=zI;const zee=Lee,Wee=Fee,$ee=Vee,UI=b.forwardRef(({className:n,sideOffset:e=4,...t},r)=>g.jsx(Bee,{children:g.jsx(HI,{ref:r,sideOffset:e,className:Pe("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 font-geneva-12 text-[12px]",n),...t})}));UI.displayName=HI.displayName;const Hee=[{id:"select",icon:"/icons/macpaint/lasso.png",label:"Select"},{id:"rect-select",icon:"/icons/macpaint/select.png",label:"Rectangle Select"},{id:"hand",icon:"/icons/macpaint/hand.png",label:"Hand"},{id:"text",icon:"/icons/macpaint/text.png",label:"Text"},{id:"bucket",icon:"/icons/macpaint/bucket.png",label:"Fill Color"},{id:"spray",icon:"/icons/macpaint/spray.png",label:"Spray"},{id:"brush",icon:"/icons/macpaint/brush.png",label:"Brush"},{id:"pencil",icon:"/icons/macpaint/pencil.png",label:"Pencil"},{id:"line",icon:"/icons/macpaint/line.png",label:"Line"},{id:"eraser",icon:"/icons/macpaint/eraser.png",label:"Eraser"},{id:"rectangle",icon:"/icons/macpaint/rectangle.png",label:"Rectangle"},{id:"oval",icon:"/icons/macpaint/oval.png",label:"Oval"}],Uee=({selectedTool:n,onToolSelect:e})=>g.jsx(zee,{children:g.jsx("div",{className:"grid grid-cols-2 gap-0",children:Hee.map(t=>g.jsxs(Wee,{children:[g.jsx($ee,{asChild:!0,children:g.jsx(Re,{variant:n===t.id?"secondary":"ghost",className:`p-1 border-1 transition-none ${n===t.id?"invert border-white":""}`,onClick:()=>e(t.id),children:g.jsx("img",{src:t.icon,alt:t.label,className:"w-[36px] h-[36px] object-contain mix-blend-multiply"})})}),g.jsx(UI,{side:"right",sideOffset:2,children:g.jsx("p",{children:t.label})})]},t.id))})}),qee=b.forwardRef(({selectedTool:n,selectedPattern:e,strokeWidth:t,onCanUndoChange:r,onCanRedoChange:s,onContentChange:i,canvasWidth:o=589,canvasHeight:a=418},c)=>{const d=b.useRef(null),h=b.useRef(null),f=b.useRef(!1),m=b.useRef([]),y=b.useRef(-1),v=b.useRef(null),w=b.useRef(null),S=b.useRef(null),[C,T]=b.useState(!1),[k,M]=b.useState(null),N=b.useRef(null),[O,D]=b.useState(null),[I,L]=b.useState(!1),A=b.useRef(null),V=b.useRef(0),F=b.useRef(),U=b.useRef(null),[B]=b.useState(!1),q=b.useRef(null);b.useEffect(()=>{const re=d.current;if(!re)return;const Q=new ResizeObserver(X=>{for(const Y of X){const{width:fe,height:_e}=Y.contentRect,se=document.createElement("canvas"),ge=se.getContext("2d",{willReadFrequently:!0});ge&&h.current&&(se.width=re.width,se.height=re.height,ge.drawImage(re,0,0)),re.width=fe,re.height=_e;const he=re.getContext("2d",{willReadFrequently:!0});if(he){if(he.lineCap="round",he.lineJoin="round",he.lineWidth=t,h.current=he,v.current){const je=he.createPattern(v.current,"repeat");je&&(he.strokeStyle=je,he.fillStyle=je)}ge&&he.drawImage(se,0,0,se.width,se.height,0,0,fe,_e)}}});return Q.observe(re),()=>Q.disconnect()},[t]);const K=b.useCallback(re=>{if(re.key==="Escape"&&O){S.current&&h.current&&h.current.putImageData(S.current,0,0),D(null);return}if((navigator.platform.toUpperCase().indexOf("MAC")>=0?re.metaKey:re.ctrlKey)&&!re.altKey){if(re.key.toLowerCase()==="z"){if(re.preventDefault(),re.shiftKey){if(y.current<m.current.length-1){y.current++;const Y=m.current[y.current];h.current&&Y&&(h.current.putImageData(Y,0,0),r(!0),s(y.current<m.current.length-1))}}else if(y.current>0){y.current--;const Y=m.current[y.current];h.current&&Y&&(h.current.putImageData(Y,0,0),r(y.current>0),s(!0))}}else if(re.key.toLowerCase()==="y"&&!re.shiftKey&&(re.preventDefault(),y.current<m.current.length-1)){y.current++;const Y=m.current[y.current];h.current&&Y&&(h.current.putImageData(Y,0,0),r(!0),s(y.current<m.current.length-1))}}},[O,r,s]);b.useEffect(()=>(window.addEventListener("keydown",K),()=>window.removeEventListener("keydown",K)),[K]),b.useEffect(()=>{if(!O){F.current&&cancelAnimationFrame(F.current),S.current&&h.current&&h.current.putImageData(S.current,0,0);return}const re=()=>{!h.current||!d.current||!O||!S.current||(h.current.putImageData(S.current,0,0),h.current.save(),h.current.strokeStyle="#000",h.current.lineWidth=1,h.current.setLineDash([5,5]),h.current.lineDashOffset=V.current,h.current.strokeRect(O.startX,O.startY,O.width,O.height),h.current.restore(),V.current=(V.current+1)%10,F.current=requestAnimationFrame(re))};return re(),()=>{F.current&&cancelAnimationFrame(F.current)}},[O]),b.useEffect(()=>{const re=d.current;if(!re)return;if(!h.current){re.width=o,re.height=a;const Y=re.getContext("2d",{willReadFrequently:!0});if(!Y)return;Y.lineCap="round",Y.lineJoin="round",Y.lineWidth=t,h.current=Y,Y.fillStyle="#FFFFFF",Y.fillRect(0,0,re.width,re.height),G()}const Q=e.split("-")[1],X=new Image;X.crossOrigin="anonymous",X.onload=()=>{const Y=document.createElement("canvas"),fe=Y.getContext("2d");if(!fe||!h.current)return;Y.width=X.width,Y.height=X.height,fe.drawImage(X,0,0),v.current=Y;const _e=h.current.createPattern(Y,"repeat");_e&&(h.current.strokeStyle=_e,h.current.fillStyle=_e)},X.onerror=Y=>{console.error("Error loading pattern:",Y)},X.src=`/patterns/Property 1=${Q}.svg`},[e]),b.useEffect(()=>{h.current&&(h.current.lineWidth=t)},[t]);const G=b.useCallback(()=>{const re=d.current;if(!re||!h.current)return;const Q=h.current.getImageData(0,0,re.width,re.height);m.current=m.current.slice(0,y.current+1),m.current.push(Q),y.current++,m.current.length>50&&(m.current=m.current.slice(-50),y.current=Math.min(y.current,49)),r(y.current>0),s(y.current<m.current.length-1),B||i==null||i()},[r,s,i,B]),$=b.useCallback(()=>{if(!h.current||!d.current)return;let re;O&&O.imageData?re=O.imageData:re=h.current.getImageData(0,0,d.current.width,d.current.height);const Q=document.createElement("canvas");Q.width=re.width,Q.height=re.height;const X=Q.getContext("2d");X&&(X.putImageData(re,0,0),Q.toBlob(Y=>{if(Y){const fe=new ClipboardItem({"image/png":Y});navigator.clipboard.write([fe]).catch(console.error)}}))},[O]),z=b.useCallback(async()=>{if(!(!h.current||!d.current))try{const re=await navigator.clipboard.read();for(const Q of re)for(const X of Q.types)if(X.startsWith("image/")){const Y=await Q.getType(X),fe=new Image;fe.src=URL.createObjectURL(Y),await new Promise(_e=>{fe.onload=()=>{if(!(!h.current||!d.current)){if(O)h.current.drawImage(fe,O.startX,O.startY,O.width,O.height);else{const se=(d.current.width-fe.width)/2,ge=(d.current.height-fe.height)/2;h.current.drawImage(fe,se,ge)}G(),i&&i(),_e(null)}}}),URL.revokeObjectURL(fe.src);break}}catch(re){console.error("Failed to read clipboard contents: ",re)}},[O,G,i]),W=b.useCallback(()=>{!h.current||!O||(h.current.save(),h.current.fillStyle="#FFFFFF",h.current.fillRect(O.startX,O.startY,O.width,O.height),h.current.restore(),G(),i&&i())},[O,G,i]);b.useImperativeHandle(c,()=>({undo:()=>{if(y.current>0){y.current--;const re=m.current[y.current];h.current&&re&&(h.current.putImageData(re,0,0),r(y.current>0),s(!0))}},redo:()=>{if(y.current<m.current.length-1){y.current++;const re=m.current[y.current];h.current&&re&&(h.current.putImageData(re,0,0),r(!0),s(y.current<m.current.length-1))}},clear:()=>{!h.current||!d.current||(h.current.fillStyle="#FFFFFF",h.current.fillRect(0,0,d.current.width,d.current.height),G())},exportCanvas:()=>{var re;return((re=d.current)==null?void 0:re.toDataURL())||""},importImage:re=>{const Q=new Image;Q.src=re,Q.onload=()=>{if(!h.current||!d.current)return;const X=d.current,Y=h.current;Y.fillStyle="#FFFFFF",Y.fillRect(0,0,X.width,X.height),Y.drawImage(Q,0,0,X.width,X.height),G()}},cut:()=>{$(),W()},copy:$,paste:z,applyFilter:re=>{d.current&&(G(),re.apply(d.current),i==null||i())}}),[r,s]),b.useEffect(()=>{const re=Q=>{(navigator.platform.toUpperCase().indexOf("MAC")>=0?Q.metaKey:Q.ctrlKey)&&!Q.shiftKey&&!Q.altKey&&(Q.key.toLowerCase()==="x"?(Q.preventDefault(),$(),W()):Q.key.toLowerCase()==="c"?(Q.preventDefault(),$()):Q.key.toLowerCase()==="v"&&(Q.preventDefault(),z()))};return window.addEventListener("keydown",re),()=>window.removeEventListener("keydown",re)},[$,W,z]);const P=re=>{var _e;const Q=d.current;if(!Q)return{x:0,y:0};const X=Q.getBoundingClientRect();let Y,fe;if("touches"in re)if(re.touches.length===0&&((_e=re.changedTouches)==null?void 0:_e.length)>0)Y=re.changedTouches[0].clientX,fe=re.changedTouches[0].clientY;else if(re.touches.length>0)Y=re.touches[0].clientX,fe=re.touches[0].clientY;else return w.current||{x:0,y:0};else Y=re.clientX,fe=re.clientY;return{x:Y-X.left,y:fe-X.top}},j=(re,Q)=>re.x>=Q.startX&&re.x<=Q.startX+Q.width&&re.y>=Q.startY&&re.y<=Q.startY+Q.height,J=(re,Q)=>{const X=d.current,Y=h.current;if(!X||!Y||!v.current)return;const fe=Y.getImageData(0,0,X.width,X.height),_e=fe.data,se=(Q*X.width+re)*4,ge=_e[se],he=_e[se+1],je=_e[se+2],Je=_e[se+3],mt=document.createElement("canvas");mt.width=X.width,mt.height=X.height;const Qt=mt.getContext("2d",{willReadFrequently:!0});if(!Qt)return;const Lr=Qt.createPattern(v.current,"repeat");if(!Lr)return;Qt.fillStyle=Lr,Qt.fillRect(0,0,X.width,X.height);const Tt=Qt.getImageData(0,0,X.width,X.height),Yt=(Q*X.width+re)*4;if(_e[Yt]===Tt.data[Yt]&&_e[Yt+1]===Tt.data[Yt+1]&&_e[Yt+2]===Tt.data[Yt+2]&&_e[Yt+3]===Tt.data[Yt+3])return;const da=Math.floor(X.width*X.height*.8);let di=0;const Is=Lt=>_e[Lt]===ge&&_e[Lt+1]===he&&_e[Lt+2]===je&&_e[Lt+3]===Je,lm=Lt=>{_e[Lt]=Tt.data[Lt],_e[Lt+1]=Tt.data[Lt+1],_e[Lt+2]=Tt.data[Lt+2],_e[Lt+3]=Tt.data[Lt+3],di++},vr=[];for(vr.push({y:Q,leftX:re,rightX:re,direction:1}),vr.push({y:Q,leftX:re,rightX:re,direction:-1});vr.length>0&&di<da;){const{y:Lt,leftX:cm,rightX:tc,direction:ha}=vr.pop(),hi=Lt+ha;if(hi<0||hi>=X.height)continue;let js=cm,cs=tc;for(;js>0&&Is((Lt*X.width+(js-1))*4);)js--;for(;cs<X.width-1&&Is((Lt*X.width+(cs+1))*4);)cs++;for(let dn=js;dn<=cs;dn++)lm((Lt*X.width+dn)*4);let xr=!1;for(let dn=js;dn<=cs;dn++){const md=(hi*X.width+dn)*4,nc=Is(md);!xr&&nc?(vr.push({y:hi,leftX:dn,rightX:dn,direction:ha}),xr=!0):xr&&!nc&&(vr[vr.length-1].rightX=dn-1,xr=!1)}xr&&(vr[vr.length-1].rightX=cs)}Y.putImageData(fe,0,0),G()},te=re=>{if(!h.current||!v.current||!k)return;const Q=h.current;Q.save(),Q.font="16px Geneva-12",Q.textBaseline="top";const X=Q.createPattern(v.current,"repeat");X&&(Q.fillStyle=X,Q.fillText(re,k.x,k.y)),Q.restore(),G()},ne=re=>{if(re.key==="Enter"){const Q=re.currentTarget.value;if(!Q){T(!1);return}te(Q),re.currentTarget.value="",T(!1)}},ue=re=>{const Q=re.currentTarget.value;Q&&te(Q),T(!1)},ce=b.useCallback(re=>{const Q=d.current;if(!Q||!h.current)return;const X=P(re);if(n!=="hand"){if("touches"in re&&(U.current=X,n==="bucket")){J(Math.floor(X.x),Math.floor(X.y));return}if(n==="rect-select"){if(O&&!j(X,O)&&(S.current&&h.current.putImageData(S.current,0,0),D(null)),O&&j(X,O)){L(!0),A.current=X;return}w.current=X,S.current=h.current.getImageData(0,0,Q.width,Q.height);return}if(O&&(S.current&&h.current.putImageData(S.current,0,0),D(null)),n==="text"){C||M(X),T(!0),setTimeout(()=>{N.current&&N.current.focus()},0);return}if(n==="bucket"&&!("touches"in re)){J(Math.floor(X.x),Math.floor(X.y));return}if(["line","rectangle","oval"].includes(n))S.current=h.current.getImageData(0,0,Q.width,Q.height),w.current=X;else{if(n==="eraser")h.current.globalCompositeOperation="destination-out",h.current.strokeStyle="#FFFFFF";else if(h.current.globalCompositeOperation="source-over",v.current){const Y=h.current.createPattern(v.current,"repeat");Y&&(h.current.strokeStyle=Y)}h.current.beginPath(),h.current.moveTo(X.x,X.y)}f.current=!0}},[n,O,C,J,j,D,M,T]),ae=b.useCallback(re=>{if(!h.current||!d.current)return;const Q=P(re);if(n!=="hand"){if(I&&O&&A.current){const X=Q.x-A.current.x,Y=Q.y-A.current.y;D(fe=>fe?{...fe,startX:fe.startX+X,startY:fe.startY+Y}:null),A.current=Q;return}if(n==="rect-select"&&w.current&&S.current){h.current.putImageData(S.current,0,0);const X=Q.x-w.current.x,Y=Q.y-w.current.y;h.current.save(),h.current.strokeStyle="#000",h.current.lineWidth=1,h.current.setLineDash([5,5]),h.current.strokeRect(w.current.x,w.current.y,X,Y),h.current.restore();return}if(f.current)if(["line","rectangle","oval"].includes(n)&&w.current&&S.current){if(h.current.putImageData(S.current,0,0),h.current.globalCompositeOperation="source-over",v.current){const X=h.current.createPattern(v.current,"repeat");X&&(h.current.strokeStyle=X)}if(h.current.beginPath(),n==="line")h.current.moveTo(w.current.x,w.current.y),h.current.lineTo(Q.x,Q.y);else if(n==="rectangle"){const X=Q.x-w.current.x,Y=Q.y-w.current.y;h.current.rect(w.current.x,w.current.y,X,Y)}else if(n==="oval"){const X=(w.current.x+Q.x)/2,Y=(w.current.y+Q.y)/2,fe=Math.abs(Q.x-w.current.x)/2,_e=Math.abs(Q.y-w.current.y)/2;h.current.ellipse(X,Y,fe,_e,0,0,2*Math.PI)}h.current.stroke()}else["line","rectangle","oval"].includes(n)||(h.current.lineTo(Q.x,Q.y),h.current.stroke())}},[n,I,O,D]),xe=b.useCallback(re=>{if(!d.current||!h.current||n==="hand")return;const X=P(re);if(U.current=null,n==="rect-select"&&w.current){const Y=X.x-w.current.x,fe=X.y-w.current.y,_e=Math.min(X.x,w.current.x),se=Math.min(X.y,w.current.y),ge=Math.abs(Y),he=Math.abs(fe);if(ge>0&&he>0){S.current&&h.current.putImageData(S.current,0,0);const je=h.current.getImageData(_e,se,ge,he);D({startX:_e,startY:se,width:ge,height:he,imageData:je})}else S.current&&h.current.putImageData(S.current,0,0),D(null)}if(I&&(L(!1),A.current=null),(f.current||I||n==="bucket")&&G(),f.current=!1,w.current=null,h.current&&n==="eraser"&&(h.current.globalCompositeOperation="source-over",v.current)){const Y=h.current.createPattern(v.current,"repeat");Y&&(h.current.strokeStyle=Y)}},[n,I,D,L,G]),ke=b.useCallback(re=>{re.preventDefault(),ce(re)},[ce]),pe=b.useCallback(re=>{re.preventDefault(),ae(re)},[ae]),ye=b.useCallback(re=>{re.preventDefault(),xe(re)},[xe]);return b.useEffect(()=>{const re=d.current;if(!re)return;const Q=fe=>ke(fe),X=fe=>pe(fe),Y=fe=>ye(fe);return re.addEventListener("touchstart",Q,{passive:!1}),re.addEventListener("touchmove",X,{passive:!1}),re.addEventListener("touchend",Y,{passive:!1}),()=>{re.removeEventListener("touchstart",Q),re.removeEventListener("touchmove",X),re.removeEventListener("touchend",Y)}},[ke,pe,ye]),g.jsx("div",{ref:q,className:"relative w-full h-full overflow-auto",style:{cursor:n==="hand"?"grab":n==="rect-select"?"crosshair":O?"move":"crosshair"},children:g.jsx(ei.div,{className:"bg-white",style:{minWidth:`${o}px`,minHeight:`${a}px`},drag:n==="hand",dragConstraints:q,dragElastic:.2,dragMomentum:!0,dragTransition:{bounceStiffness:300,bounceDamping:20,min:0,max:100},children:g.jsxs("div",{className:"relative",style:{width:`${o}px`,height:`${a}px`},children:[g.jsx("canvas",{ref:d,style:{imageRendering:"pixelated",width:"100%",height:"100%",touchAction:"none",cursor:n==="hand"?"grab":"crosshair"},className:`${n==="rect-select"?"cursor-crosshair":O?"cursor-move":"cursor-crosshair"}`,onMouseDown:ke,onMouseMove:pe,onMouseUp:ye,onMouseLeave:ye}),C&&k&&g.jsx("input",{ref:N,type:"text",className:"absolute bg-transparent border-none outline-none font-geneva-12 text-black pointer-events-auto",style:{left:`${k.x}px`,top:`${k.y}px`,fontSize:"16px",minWidth:"100px",padding:0,margin:0,transform:"translateZ(0)"},onKeyDown:ne,onBlur:ue})]})})})}),Gee=[{name:"Brightness +",apply:n=>{const e=n.getContext("2d");if(!e)return;const t=e.getImageData(0,0,n.width,n.height),r=t.data;for(let s=0;s<r.length;s+=4)r[s]=Math.min(255,r[s]+30),r[s+1]=Math.min(255,r[s+1]+30),r[s+2]=Math.min(255,r[s+2]+30);e.putImageData(t,0,0)}},{name:"Brightness -",apply:n=>{const e=n.getContext("2d");if(!e)return;const t=e.getImageData(0,0,n.width,n.height),r=t.data;for(let s=0;s<r.length;s+=4)r[s]=Math.max(0,r[s]-30),r[s+1]=Math.max(0,r[s+1]-30),r[s+2]=Math.max(0,r[s+2]-30);e.putImageData(t,0,0)}},{name:"Pixelate",apply:n=>{const e=n.getContext("2d");if(!e)return;const t=8,r=document.createElement("canvas");r.width=n.width,r.height=n.height;const s=r.getContext("2d");if(s){s.drawImage(n,0,0),e.clearRect(0,0,n.width,n.height);for(let i=0;i<n.height;i+=t)for(let o=0;o<n.width;o+=t){const a=s.getImageData(o,i,1,1),[c,d,h]=a.data;e.fillStyle=`rgb(${c},${d},${h})`,e.fillRect(o,i,t,t)}}}},{name:"Edge Detect",apply:n=>{const e=n.getContext("2d");if(!e)return;const t=e.getImageData(0,0,n.width,n.height),r=t.data,s=n.width,i=n.height,o=[-1,0,1,-2,0,2,-1,0,1],a=[-1,-2,-1,0,0,0,1,2,1],c=new Uint8ClampedArray(r);for(let d=1;d<i-1;d++)for(let h=1;h<s-1;h++){let f=0,m=0;for(let w=-1;w<=1;w++)for(let S=-1;S<=1;S++){const C=((d+w)*s+(h+S))*4,T=(w+1)*3+(S+1),k=(c[C]+c[C+1]+c[C+2])/3;f+=k*o[T],m+=k*a[T]}const y=Math.min(255,Math.sqrt(f*f+m*m)),v=(d*s+h)*4;r[v]=y,r[v+1]=y,r[v+2]=y}e.putImageData(t,0,0)}},{name:"Noise",apply:n=>{const e=n.getContext("2d");if(!e)return;const t=e.getImageData(0,0,n.width,n.height),r=t.data;for(let s=0;s<r.length;s+=4){const i=Math.random()*50-25;r[s]=Math.min(255,Math.max(0,r[s]+i)),r[s+1]=Math.min(255,Math.max(0,r[s+1]+i)),r[s+2]=Math.min(255,Math.max(0,r[s+2]+i))}e.putImageData(t,0,0)}},{name:"Old Photo",apply:n=>{const e=n.getContext("2d");if(!e)return;const t=e.getImageData(0,0,n.width,n.height),r=t.data;for(let s=0;s<r.length;s+=4){const i=r[s],o=r[s+1],a=r[s+2];r[s]=Math.min(255,i*.393+o*.769+a*.189+40),r[s+1]=Math.min(255,i*.349+o*.686+a*.168+20),r[s+2]=Math.min(255,i*.272+o*.534+a*.131);const c=Math.random()*20-10;r[s]=Math.min(255,Math.max(0,r[s]+c)),r[s+1]=Math.min(255,Math.max(0,r[s+1]+c)),r[s+2]=Math.min(255,Math.max(0,r[s+2]+c))}e.putImageData(t,0,0)}},{name:"Blur",apply:n=>{const e=n.getContext("2d");if(!e)return;e.filter="blur(2px)";const t=document.createElement("canvas");t.width=n.width,t.height=n.height;const r=t.getContext("2d");r&&(r.drawImage(n,0,0),e.clearRect(0,0,n.width,n.height),e.drawImage(t,0,0),e.filter="none")}},{name:"Sharpen",apply:n=>{const e=n.getContext("2d");if(!e)return;const t=document.createElement("canvas");if(t.width=n.width,t.height=n.height,!t.getContext("2d"))return;const i=e.getImageData(0,0,n.width,n.height).data,o=[0,-1,0,-1,5,-1,0,-1,0],a=new ImageData(n.width,n.height);for(let c=1;c<n.height-1;c++)for(let d=1;d<n.width-1;d++){const h=(c*n.width+d)*4;let f=0,m=0,y=0;for(let v=-1;v<=1;v++)for(let w=-1;w<=1;w++){const S=((c+v)*n.width+(d+w))*4,C=o[(v+1)*3+(w+1)];f+=i[S]*C,m+=i[S+1]*C,y+=i[S+2]*C}a.data[h]=Math.min(255,Math.max(0,f)),a.data[h+1]=Math.min(255,Math.max(0,m)),a.data[h+2]=Math.min(255,Math.max(0,y)),a.data[h+3]=i[h+3]}e.putImageData(a,0,0)}},{name:"Grayscale",apply:n=>{const e=n.getContext("2d");if(!e)return;const t=e.getImageData(0,0,n.width,n.height),r=t.data;for(let s=0;s<r.length;s+=4){const i=(r[s]+r[s+1]+r[s+2])/3;r[s]=i,r[s+1]=i,r[s+2]=i}e.putImageData(t,0,0)}},{name:"Invert",apply:n=>{const e=n.getContext("2d");if(!e)return;const t=e.getImageData(0,0,n.width,n.height),r=t.data;for(let s=0;s<r.length;s+=4)r[s]=255-r[s],r[s+1]=255-r[s+1],r[s+2]=255-r[s+2];e.putImageData(t,0,0)}},{name:"Sepia",apply:n=>{const e=n.getContext("2d");if(!e)return;const t=e.getImageData(0,0,n.width,n.height),r=t.data;for(let s=0;s<r.length;s+=4){const i=r[s],o=r[s+1],a=r[s+2];r[s]=Math.min(255,i*.393+o*.769+a*.189),r[s+1]=Math.min(255,i*.349+o*.686+a*.168),r[s+2]=Math.min(255,i*.272+o*.534+a*.131)}e.putImageData(t,0,0)}},{name:"Gaussian Blur",apply:n=>{const e=n.getContext("2d");if(!e)return;const t=e.getImageData(0,0,n.width,n.height),r=t.data,s=n.width,i=n.height,o=[1/16,2/16,1/16,2/16,4/16,2/16,1/16,2/16,1/16],a=new Uint8ClampedArray(r);for(let c=1;c<i-1;c++)for(let d=1;d<s-1;d++){let h=0,f=0,m=0;for(let v=-1;v<=1;v++)for(let w=-1;w<=1;w++){const S=((c+v)*s+(d+w))*4,C=o[(v+1)*3+(w+1)];h+=a[S]*C,f+=a[S+1]*C,m+=a[S+2]*C}const y=(c*s+d)*4;r[y]=h,r[y+1]=f,r[y+2]=m}e.putImageData(t,0,0)}},{name:"Motion Blur",apply:n=>{const e=n.getContext("2d");if(!e)return;const t=45,r=15,s=t*Math.PI/180,i=Math.cos(s)*r,o=Math.sin(s)*r;e.filter="blur(1px)";const a=document.createElement("canvas");a.width=n.width,a.height=n.height;const c=a.getContext("2d");if(!c)return;const d=10;for(let h=0;h<d;h++){const f=i*h/d,m=o*h/d;c.globalAlpha=1/d,c.drawImage(n,f,m)}e.clearRect(0,0,n.width,n.height),e.filter="none",e.drawImage(a,0,0)}},{name:"Radial Blur",apply:n=>{const e=n.getContext("2d");if(!e)return;const t=n.width/2,r=n.height/2,s=document.createElement("canvas");s.width=n.width,s.height=n.height;const i=s.getContext("2d");if(!i)return;i.drawImage(n,0,0),e.clearRect(0,0,n.width,n.height);const o=10;for(let a=0;a<o;a++){const c=1+a*.004;e.globalAlpha=1/o,e.save(),e.translate(t,r),e.scale(c,c),e.translate(-t,-r),e.drawImage(s,0,0),e.restore()}e.globalAlpha=1}},{name:"VHS",apply:n=>{const e=n.getContext("2d");if(!e)return;const t=e.getImageData(0,0,n.width,n.height),r=t.data,s=2,i=new Uint8ClampedArray(r);for(let o=0;o<n.height;o++)for(let a=0;a<n.width;a++){const c=(o*n.width+a)*4,d=o%2===0?.9:1,h=a>s?i[c-s*4]:i[c],f=a<n.width-s?i[c+s*4+2]:i[c+2];r[c]=h*d,r[c+1]=i[c+1]*d,r[c+2]=f*d}e.putImageData(t,0,0)}},{name:"CRT",apply:n=>{const e=n.getContext("2d");if(!e)return;const t=e.getImageData(0,0,n.width,n.height),r=t.data;for(let s=0;s<n.height;s++){const i=s%3;for(let o=0;o<n.width;o++){const a=(s*n.width+o)*4,c=i===0?1:.7,d=o%3;d===0?(r[a]*=c*1.1,r[a+1]*=c*.9,r[a+2]*=c*.9):d===1?(r[a]*=c*.9,r[a+1]*=c*1.1,r[a+2]*=c*.9):(r[a]*=c*.9,r[a+1]*=c*.9,r[a+2]*=c*1.1)}}e.putImageData(t,0,0)}},{name:"Glitch",apply:n=>{const e=n.getContext("2d");if(!e)return;const t=e.getImageData(0,0,n.width,n.height),r=t.data,s=new Uint8ClampedArray(r),i=10;for(let o=0;o<i;o++){const a=Math.floor(Math.random()*n.height),c=Math.floor(Math.random()*20)+5,d=Math.floor(Math.random()*20)-10;for(let h=0;h<c&&a+h<n.height;h++){const f=a+h;for(let m=0;m<n.width;m++){const y=Math.max(0,Math.min(n.width-1,m+d)),v=(f*n.width+y)*4,w=(f*n.width+m)*4;r[w]=s[v+o%3*1],r[w+1]=s[v+(o+1)%3*1],r[w+2]=s[v+(o+2)%3*1]}}}e.putImageData(t,0,0)}},{name:"Dither",apply:n=>{const e=n.getContext("2d");if(!e)return;const t=e.getImageData(0,0,n.width,n.height),r=t.data;for(let o=0;o<r.length;o+=4){const a=(r[o]+r[o+1]+r[o+2])/3;r[o]=r[o+1]=r[o+2]=a}const s=[[0,8,2,10],[12,4,14,6],[3,11,1,9],[15,7,13,5]],i=4;for(let o=0;o<n.height;o++)for(let a=0;a<n.width;a++){const c=(o*n.width+a)*4,h=s[o%i][a%i]/16*255;r[c]=r[c+1]=r[c+2]=r[c]>h?255:0}e.putImageData(t,0,0)}}],Kee={Color:["Brightness +","Brightness -","Grayscale","Invert","Sepia"],Artistic:["Pixelate","Edge Detect","Sharpen"],Blur:["Blur","Gaussian Blur","Motion Blur","Radial Blur"],Retro:["Noise","Old Photo","VHS","CRT","Glitch","Dither"]};function Yee({onClose:n,onShowHelp:e,onShowAbout:t,canUndo:r,canRedo:s,onUndo:i,onRedo:o,onClear:a,onNewFile:c,onSave:d,onImportFile:h,onExportFile:f,currentFilePath:m,handleFileSelect:y,onCut:v,onCopy:w,onPaste:S,onApplyFilter:C}){const T=Ct.useRef(null);return g.jsxs(Rs,{children:[g.jsx("input",{type:"file",ref:T,onChange:y,accept:".png,.jpg,.jpeg",className:"hidden"}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 text-md px-2 py-1 border-none hover:bg-gray-200 active:bg-gray-900 active:text-white focus-visible:ring-0",children:"File"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{onClick:c,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"New File"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:h,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Open..."}),g.jsx(de,{onClick:d,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:m?"Save":"Save..."}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:()=>{var k;return(k=T.current)==null?void 0:k.click()},className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Import from Device..."}),g.jsx(de,{onClick:f,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Export"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:n,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Close"})]})]}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 text-md px-2 py-1 border-none hover:bg-gray-200 active:bg-gray-900 active:text-white focus-visible:ring-0",children:"Edit"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{onClick:i,disabled:!r,className:`text-md h-6 px-3 active:bg-gray-900 active:text-white ${r?"":"text-gray-500"}`,children:"Undo"}),g.jsx(de,{onClick:o,disabled:!s,className:`text-md h-6 px-3 active:bg-gray-900 active:text-white ${s?"":"text-gray-500"}`,children:"Redo"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:v,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Cut"}),g.jsx(de,{onClick:w,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Copy"}),g.jsx(de,{onClick:S,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Paste"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:a,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Clear"})]})]}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 text-md px-2 py-1 border-none hover:bg-gray-200 active:bg-gray-900 active:text-white focus-visible:ring-0",children:"Filters"})}),g.jsx(qe,{align:"start",sideOffset:1,className:"px-0",children:Object.entries(Kee).map(([k,M])=>g.jsxs(iu,{children:[g.jsx(al,{className:"text-md h-6 px-3",children:k}),g.jsx(ll,{children:M.map(N=>{const O=Gee.find(D=>D.name===N);return O?g.jsx(de,{onClick:()=>C(O),className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:N},N):null})})]},k))})]}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 text-md px-2 py-1 border-none hover:bg-gray-200 active:bg-gray-900 active:text-white focus-visible:ring-0",children:"Help"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{onClick:e,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"MacPaint Help"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:t,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"About MacPaint"})]})]})]})}const Xee=({selectedPattern:n,onPatternSelect:e})=>{const t=Array.from({length:38},(r,s)=>s+1);return g.jsxs(Mw,{className:"w-full h-[72px]",children:[g.jsx("div",{className:"grid grid-flow-col auto-cols-[28px] grid-rows-2 gap-0 h-full",children:t.map(r=>g.jsx("button",{className:` hover:opacity-70 border-1 border-black ${n===`pattern-${r}`?"":"border-gray-800"}`,onClick:()=>e(`pattern-${r}`),children:g.jsx("img",{src:`/patterns/Property 1=${r}.svg`,alt:`Pattern ${r}`,className:"w-full h-full object-cover"})},r))}),g.jsx(Ow,{orientation:"horizontal"})]})};var qI=["PageUp","PageDown"],GI=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],KI={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ec="Slider",[N0,Jee,Zee]=mp(ec),[YI,_re]=Ir(ec,[Zee]),[Qee,im]=YI(ec),XI=b.forwardRef((n,e)=>{const{name:t,min:r=0,max:s=100,step:i=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[r],value:h,onValueChange:f=()=>{},onValueCommit:m=()=>{},inverted:y=!1,form:v,...w}=n,S=b.useRef(new Set),C=b.useRef(0),k=o==="horizontal"?ete:tte,[M=[],N]=Cs({prop:h,defaultProp:d,onChange:V=>{var U;(U=[...S.current][C.current])==null||U.focus(),f(V)}}),O=b.useRef(M);function D(V){const F=ote(M,V);A(V,F)}function I(V){A(V,C.current)}function L(){const V=O.current[C.current];M[C.current]!==V&&m(M)}function A(V,F,{commit:U}={commit:!1}){const B=ute(i),q=dte(Math.round((V-r)/i)*i+r,B),K=Ou(q,[r,s]);N((G=[])=>{const $=ste(G,K,F);if(cte($,c*i)){C.current=$.indexOf(K);const z=String($)!==String(G);return z&&U&&m($),z?$:G}else return G})}return g.jsx(Qee,{scope:n.__scopeSlider,name:t,disabled:a,min:r,max:s,valueIndexToChangeRef:C,thumbs:S.current,values:M,orientation:o,form:v,children:g.jsx(N0.Provider,{scope:n.__scopeSlider,children:g.jsx(N0.Slot,{scope:n.__scopeSlider,children:g.jsx(k,{"aria-disabled":a,"data-disabled":a?"":void 0,...w,ref:e,onPointerDown:Te(w.onPointerDown,()=>{a||(O.current=M)}),min:r,max:s,inverted:y,onSlideStart:a?void 0:D,onSlideMove:a?void 0:I,onSlideEnd:a?void 0:L,onHomeKeyDown:()=>!a&&A(r,0,{commit:!0}),onEndKeyDown:()=>!a&&A(s,M.length-1,{commit:!0}),onStepKeyDown:({event:V,direction:F})=>{if(!a){const q=qI.includes(V.key)||V.shiftKey&&GI.includes(V.key)?10:1,K=C.current,G=M[K],$=i*q*F;A(G+$,K,{commit:!0})}}})})})})});XI.displayName=ec;var[JI,ZI]=YI(ec,{startEdge:"left",endEdge:"right",size:"width",direction:1}),ete=b.forwardRef((n,e)=>{const{min:t,max:r,dir:s,inverted:i,onSlideStart:o,onSlideMove:a,onSlideEnd:c,onStepKeyDown:d,...h}=n,[f,m]=b.useState(null),y=Ye(e,k=>m(k)),v=b.useRef(void 0),w=Fl(s),S=w==="ltr",C=S&&!i||!S&&i;function T(k){const M=v.current||f.getBoundingClientRect(),N=[0,M.width],D=yb(N,C?[t,r]:[r,t]);return v.current=M,D(k-M.left)}return g.jsx(JI,{scope:n.__scopeSlider,startEdge:C?"left":"right",endEdge:C?"right":"left",direction:C?1:-1,size:"width",children:g.jsx(QI,{dir:w,"data-orientation":"horizontal",...h,ref:y,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:k=>{const M=T(k.clientX);o==null||o(M)},onSlideMove:k=>{const M=T(k.clientX);a==null||a(M)},onSlideEnd:()=>{v.current=void 0,c==null||c()},onStepKeyDown:k=>{const N=KI[C?"from-left":"from-right"].includes(k.key);d==null||d({event:k,direction:N?-1:1})}})})}),tte=b.forwardRef((n,e)=>{const{min:t,max:r,inverted:s,onSlideStart:i,onSlideMove:o,onSlideEnd:a,onStepKeyDown:c,...d}=n,h=b.useRef(null),f=Ye(e,h),m=b.useRef(void 0),y=!s;function v(w){const S=m.current||h.current.getBoundingClientRect(),C=[0,S.height],k=yb(C,y?[r,t]:[t,r]);return m.current=S,k(w-S.top)}return g.jsx(JI,{scope:n.__scopeSlider,startEdge:y?"bottom":"top",endEdge:y?"top":"bottom",size:"height",direction:y?1:-1,children:g.jsx(QI,{"data-orientation":"vertical",...d,ref:f,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:w=>{const S=v(w.clientY);i==null||i(S)},onSlideMove:w=>{const S=v(w.clientY);o==null||o(S)},onSlideEnd:()=>{m.current=void 0,a==null||a()},onStepKeyDown:w=>{const C=KI[y?"from-bottom":"from-top"].includes(w.key);c==null||c({event:w,direction:C?-1:1})}})})}),QI=b.forwardRef((n,e)=>{const{__scopeSlider:t,onSlideStart:r,onSlideMove:s,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:c,...d}=n,h=im(ec,t);return g.jsx(We.span,{...d,ref:e,onKeyDown:Te(n.onKeyDown,f=>{f.key==="Home"?(o(f),f.preventDefault()):f.key==="End"?(a(f),f.preventDefault()):qI.concat(GI).includes(f.key)&&(c(f),f.preventDefault())}),onPointerDown:Te(n.onPointerDown,f=>{const m=f.target;m.setPointerCapture(f.pointerId),f.preventDefault(),h.thumbs.has(m)?m.focus():r(f)}),onPointerMove:Te(n.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&s(f)}),onPointerUp:Te(n.onPointerUp,f=>{const m=f.target;m.hasPointerCapture(f.pointerId)&&(m.releasePointerCapture(f.pointerId),i(f))})})}),ej="SliderTrack",tj=b.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,s=im(ej,t);return g.jsx(We.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:e})});tj.displayName=ej;var A0="SliderRange",nj=b.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,s=im(A0,t),i=ZI(A0,t),o=b.useRef(null),a=Ye(e,o),c=s.values.length,d=s.values.map(m=>sj(m,s.min,s.max)),h=c>1?Math.min(...d):0,f=100-Math.max(...d);return g.jsx(We.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:a,style:{...n.style,[i.startEdge]:h+"%",[i.endEdge]:f+"%"}})});nj.displayName=A0;var M0="SliderThumb",rj=b.forwardRef((n,e)=>{const t=Jee(n.__scopeSlider),[r,s]=b.useState(null),i=Ye(e,a=>s(a)),o=b.useMemo(()=>r?t().findIndex(a=>a.ref.current===r):-1,[t,r]);return g.jsx(nte,{...n,ref:i,index:o})}),nte=b.forwardRef((n,e)=>{const{__scopeSlider:t,index:r,name:s,...i}=n,o=im(M0,t),a=ZI(M0,t),[c,d]=b.useState(null),h=Ye(e,T=>d(T)),f=c?o.form||!!c.closest("form"):!0,m=gx(c),y=o.values[r],v=y===void 0?0:sj(y,o.min,o.max),w=ite(r,o.values.length),S=m==null?void 0:m[a.size],C=S?ate(S,v,a.direction):0;return b.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),g.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${v}% + ${C}px)`},children:[g.jsx(N0.ItemSlot,{scope:n.__scopeSlider,children:g.jsx(We.span,{role:"slider","aria-label":n["aria-label"]||w,"aria-valuemin":o.min,"aria-valuenow":y,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:h,style:y===void 0?{display:"none"}:n.style,onFocus:Te(n.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),f&&g.jsx(rte,{name:s??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:y},r)]})});rj.displayName=M0;var rte=n=>{const{value:e,...t}=n,r=b.useRef(null),s=ww(e);return b.useEffect(()=>{const i=r.current,o=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(o,"value").set;if(s!==e&&c){const d=new Event("input",{bubbles:!0});c.call(i,e),i.dispatchEvent(d)}},[s,e]),g.jsx("input",{style:{display:"none"},...t,ref:r,defaultValue:e})};function ste(n=[],e,t){const r=[...n];return r[t]=e,r.sort((s,i)=>s-i)}function sj(n,e,t){const i=100/(t-e)*(n-e);return Ou(i,[0,100])}function ite(n,e){return e>2?`Value ${n+1} of ${e}`:e===2?["Minimum","Maximum"][n]:void 0}function ote(n,e){if(n.length===1)return 0;const t=n.map(s=>Math.abs(s-e)),r=Math.min(...t);return t.indexOf(r)}function ate(n,e,t){const r=n/2,i=yb([0,50],[0,r]);return(r-i(e)*t)*t}function lte(n){return n.slice(0,-1).map((e,t)=>n[t+1]-e)}function cte(n,e){if(e>0){const t=lte(n);return Math.min(...t)>=e}return!0}function yb(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function ute(n){return(String(n).split(".")[1]||"").length}function dte(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}var ij=XI,hte=tj,fte=nj,pte=rj;const oj=b.forwardRef(({className:n,...e},t)=>g.jsxs(ij,{ref:t,className:Pe("relative flex w-full touch-none select-none items-center",n),...e,children:[g.jsx(hte,{className:"relative h-1.5 w-full grow overflow-hidden bg-primary/20",children:g.jsx(fte,{className:"absolute h-full bg-primary"})}),g.jsx(pte,{className:"block h-4 w-4 border-2 border-primary bg-background shadow-[1px_1px_0px_0px_rgba(0,0,0,0.3)] transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));oj.displayName=ij.displayName;const mte=({strokeWidth:n,onStrokeWidthChange:e})=>g.jsx("div",{className:"space-y-2 p-2 py-3 border-t border-gray-200",children:g.jsx(oj,{value:[n],onValueChange:t=>e(t[0]),min:1,max:20,step:1,className:"w-full"})}),gte=({isWindowOpen:n,onClose:e,isForeground:t=!1})=>{const[r,s]=b.useState("pencil"),[i,o]=b.useState("pattern-1"),[a,c]=b.useState(1),[d,h]=b.useState(!1),[f,m]=b.useState(!1),[y,v]=b.useState(!1),[w,S]=b.useState(!1),[C,T]=b.useState(!1),[k,M]=b.useState(!1),[N,O]=b.useState(null),[D,I]=b.useState(!1),[L,A]=b.useState(""),[V,F]=b.useState(!1),[U,B]=b.useState(589),[q,K]=b.useState(418),G=b.useRef(),{files:$,saveFile:z}=Ep("/Images"),W=kp();b.useEffect(()=>{if(G.current){const Q=localStorage.getItem(me.paint.LAST_FILE_PATH);if(Q!=null&&Q.startsWith("/Images/")){const X=$.find(Y=>Y.path===Q);if(X!=null&&X.content&&!N){const Y=new Image;Y.onload=()=>{var se;let fe=Y.width,_e=Y.height;if(fe>589){const ge=589/fe;fe=589,_e=Math.round(Y.height*ge)}B(fe),K(_e),F(!0),(se=G.current)==null||se.importImage(X.content),O(Q),M(!1),F(!1)},Y.src=X.content}}}},[$,N]),b.useEffect(()=>{if(t&&G.current){const Q=localStorage.getItem("pending_file_open");if(Q)try{const{path:X,content:Y}=JSON.parse(Q);X.startsWith("/Images/")&&(k&&N?T(!0):P(X,Y))}catch(X){console.error("Failed to parse pending file open data:",X),localStorage.removeItem("pending_file_open")}}},[t,k,N]),b.useEffect(()=>{if(G.current&&k&&N&&!V){const Q=setTimeout(()=>{if(!G.current)return;const X=G.current.exportCanvas(),Y=N.split("/").pop()||"untitled.png";z({name:Y,path:N,content:X,icon:"/icons/image.png",isDirectory:!1});const fe=new CustomEvent("saveFile",{detail:{name:Y,path:N,content:X,icon:"/icons/image.png",isDirectory:!1}});window.dispatchEvent(fe),localStorage.setItem(me.paint.LAST_FILE_PATH,N),M(!1)},2e3);return()=>clearTimeout(Q)}},[k,N,z,V]);const P=(Q,X)=>{const Y=new Image;Y.onload=()=>{var se;let fe=Y.width,_e=Y.height;if(fe>589){const ge=589/fe;fe=589,_e=Math.round(Y.height*ge)}B(fe),K(_e),F(!0),(se=G.current)==null||se.importImage(X),O(Q),M(!1),localStorage.setItem(me.paint.LAST_FILE_PATH,Q),F(!1),localStorage.removeItem("pending_file_open")},Y.src=X},j=()=>{var Q;(Q=G.current)==null||Q.undo()},J=()=>{var Q;(Q=G.current)==null||Q.redo()},te=()=>{var Q;(Q=G.current)==null||Q.clear(),localStorage.removeItem(me.paint.LAST_FILE_PATH),M(!1),B(589),K(418)},ne=()=>{if(k){T(!0);return}te(),O(null),M(!1)},ue=()=>{if(G.current)if(!N)I(!0),A("untitled.png");else{const Q=G.current.exportCanvas(),X=N.split("/").pop()||"untitled.png";z({name:X,path:N,content:Q,icon:"/icons/image.png",isDirectory:!1});const Y=new CustomEvent("saveFile",{detail:{name:X,path:N,content:Q,icon:"/icons/image.png",isDirectory:!1}});window.dispatchEvent(Y),localStorage.setItem(me.paint.LAST_FILE_PATH,N),M(!1)}},ce=Q=>{if(!G.current)return;const X=G.current.exportCanvas(),Y=`/Images/${Q}${Q.endsWith(".png")?"":".png"}`;z({name:Q,path:Y,content:X,icon:"/icons/image.png",isDirectory:!1});const fe=new CustomEvent("saveFile",{detail:{name:Q,path:Y,content:X,icon:"/icons/image.png",isDirectory:!1}});window.dispatchEvent(fe),localStorage.setItem(me.paint.LAST_FILE_PATH,Y),O(Y),M(!1),I(!1)},ae=()=>{W("finder",{initialPath:"/Images"})},xe=()=>{if(!G.current)return;const Q=G.current.exportCanvas(),X=(N==null?void 0:N.split("/").pop())||"untitled.png",Y=document.createElement("a");Y.download=X,Y.href=Q,document.body.appendChild(Y),Y.click(),document.body.removeChild(Y)},ke=Q=>{var Y;const X=(Y=Q.target.files)==null?void 0:Y[0];if(X){const fe=new FileReader;fe.onload=_e=>{var he;const se=(he=_e.target)==null?void 0:he.result,ge=new Image;ge.onload=()=>{var mt;let je=ge.width,Je=ge.height;if(je>589){const Qt=589/je;je=589,Je=Math.round(ge.height*Qt)}B(je),K(Je),F(!0),(mt=G.current)==null||mt.importImage(se),F(!1),A(X.name),I(!0)},ge.src=se},fe.readAsDataURL(X)}},pe=()=>{var Q;(Q=G.current)==null||Q.cut()},ye=()=>{var Q;(Q=G.current)==null||Q.copy()},re=()=>{var Q;(Q=G.current)==null||Q.paste()};return n?g.jsxs(g.Fragment,{children:[g.jsx(Yee,{isWindowOpen:n,isForeground:t,onClose:e,canUndo:d,canRedo:f,onUndo:j,onRedo:J,onClear:te,onShowHelp:()=>v(!0),onShowAbout:()=>S(!0),onNewFile:ne,onSave:ue,onImportFile:ae,onExportFile:xe,hasUnsavedChanges:k,currentFilePath:N,handleFileSelect:ke,onCut:pe,onCopy:ye,onPaste:re,onApplyFilter:Q=>{var X;(X=G.current)==null||X.applyFilter(Q)}}),g.jsx(ai,{title:N?N.split("/").pop()||"Untitled":`Untitled${k?" ":""}`,onClose:e,isForeground:t,appId:"paint",children:g.jsx("div",{className:"flex flex-col h-full w-full min-h-0 p-2",style:{backgroundImage:'url("/patterns/Property 1=7.svg")',backgroundRepeat:"repeat",backgroundColor:"#c0c0c0"},children:g.jsxs("div",{className:"flex flex-1 gap-2 w-full min-h-0 px-1",children:[g.jsxs("div",{className:"flex flex-col gap-2 w-[84px] shrink-0",children:[g.jsx("div",{className:"bg-white border border-black w-full shadow-[2px_2px_0px_0px_rgba(0,0,0,0.5)]",children:g.jsx(Uee,{selectedTool:r,onToolSelect:s})}),g.jsx("div",{className:"bg-white border-2 border-black shadow-[2px_2px_0px_0px_rgba(0,0,0,0.5)]",children:g.jsx(mte,{strokeWidth:a,onStrokeWidthChange:c})})]}),g.jsxs("div",{className:"flex flex-col flex-1 gap-2 min-h-0 min-w-0",children:[g.jsx("div",{className:"flex-1 bg-white min-h-0 min-w-0 border border-black border-2 shadow-[2px_2px_0px_0px_rgba(0,0,0,0.5)] overflow-auto",children:g.jsx(qee,{ref:Q=>{Q&&(G.current={undo:Q.undo,redo:Q.redo,clear:Q.clear,exportCanvas:Q.exportCanvas,importImage:Q.importImage,cut:Q.cut,copy:Q.copy,paste:Q.paste,applyFilter:Q.applyFilter})},selectedTool:r,selectedPattern:i,strokeWidth:a,onCanUndoChange:h,onCanRedoChange:m,onContentChange:()=>{V||M(!0)},canvasWidth:U,canvasHeight:q})}),g.jsxs("div",{className:"h-[58px] bg-white border-black flex items-center border-2 shadow-[2px_2px_0px_0px_rgba(0,0,0,0.5)]",children:[g.jsx("div",{className:"border-r border-black h-full px-3 flex items-center",children:g.jsx("div",{className:"w-[36px] h-[32px] border border-black shrink-0",children:g.jsx("img",{src:`/patterns/Property 1=${i.split("-")[1]}.svg`,alt:"Selected Pattern",className:"w-full h-full object-cover"})})}),g.jsx("div",{className:"flex-1 h-full min-w-0 translate-y-[-1px]",children:g.jsx(Xee,{selectedPattern:i,onPatternSelect:o})})]})]})]})})}),g.jsx($l,{isOpen:D,onOpenChange:I,onSubmit:ce,title:"Save Image",description:"Enter a name for your image",value:L,onChange:A}),g.jsx(Ns,{isOpen:y,onOpenChange:v,helpItems:aj,appName:"MacPaint"}),g.jsx(As,{isOpen:w,onOpenChange:S,metadata:lj}),g.jsx(Ts,{isOpen:C,onOpenChange:T,onConfirm:()=>{te(),O(null),M(!1),T(!1),localStorage.removeItem(me.paint.LAST_FILE_PATH);const Q=localStorage.getItem("pending_file_open");if(Q)try{const{path:X,content:Y}=JSON.parse(Q);X.startsWith("/Images/")&&P(X,Y)}catch(X){console.error("Failed to parse pending file open data:",X),localStorage.removeItem("pending_file_open")}},title:"Discard Changes",description:"You have unsaved changes. Create new file anyway?"})]}):null},aj=[{icon:"",title:"Drawing Tools",description:"Use the toolbar on the left to select different drawing tools like pencil, brush, shapes, and more."},{icon:"",title:"Colors",description:"Select colors from the palette below the tools to change your drawing color."},{icon:"",title:"Undo",description:"Press Z or use Edit > Undo to undo your last action."},{icon:"",title:"Saving",description:"Use File > Save to save your artwork, or File > Save As to save it with a new name."},{icon:"",title:"Patterns",description:"Choose from various patterns in the bottom palette to fill shapes and areas."},{icon:"",title:"Shapes",description:"Draw rectangles, ovals, and lines using the shape tools in the toolbar."}],lj={name:"MacPaint",version:"1.0.4",creator:{name:"Ryo Lu",url:"https://github.com/ryokun6"},github:"https://github.com/ryokun6/ryos",icon:"/icons/paint.png"},Hk={id:"paint",name:"MacPaint",icon:{type:"image",src:"/icons/paint.png"},description:"Classic MacPaint-style drawing application",component:gte,helpItems:aj,metadata:lj},yte="modulepreload",vte=function(n){return"/"+n},Uk={},Zn=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(t.map(c=>{if(c=vte(c),c in Uk)return;Uk[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":yte,d||(f.as="script"),f.crossOrigin="",f.href=c,a&&f.setAttribute("nonce",a),document.head.appendChild(f),d)return new Promise((m,y)=>{f.addEventListener("load",m),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};var Ky,qk;function xte(){if(qk)return Ky;qk=1,Ky=function(s,i,o){var a=document.head||document.getElementsByTagName("head")[0],c=document.createElement("script");typeof i=="function"&&(o=i,i={}),i=i||{},o=o||function(){},c.type=i.type||"text/javascript",c.charset=i.charset||"utf8",c.async="async"in i?!!i.async:!0,c.src=s,i.attrs&&n(c,i.attrs),i.text&&(c.text=""+i.text);var d="onload"in c?e:t;d(c,o),c.onload||e(c,o),a.appendChild(c)};function n(r,s){for(var i in s)r.setAttribute(i,s[i])}function e(r,s){r.onload=function(){this.onerror=this.onload=null,s(null,r)},r.onerror=function(){this.onerror=this.onload=null,s(new Error("Failed to load "+this.src),r)}}function t(r,s){r.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,s(null,r))}}return Ky}var Yy,Gk;function cj(){if(Gk)return Yy;Gk=1;var n=function(T){return e(T)&&!t(T)};function e(C){return!!C&&typeof C=="object"}function t(C){var T=Object.prototype.toString.call(C);return T==="[object RegExp]"||T==="[object Date]"||i(C)}var r=typeof Symbol=="function"&&Symbol.for,s=r?Symbol.for("react.element"):60103;function i(C){return C.$$typeof===s}function o(C){return Array.isArray(C)?[]:{}}function a(C,T){return T.clone!==!1&&T.isMergeableObject(C)?w(o(C),C,T):C}function c(C,T,k){return C.concat(T).map(function(M){return a(M,k)})}function d(C,T){if(!T.customMerge)return w;var k=T.customMerge(C);return typeof k=="function"?k:w}function h(C){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(C).filter(function(T){return Object.propertyIsEnumerable.call(C,T)}):[]}function f(C){return Object.keys(C).concat(h(C))}function m(C,T){try{return T in C}catch{return!1}}function y(C,T){return m(C,T)&&!(Object.hasOwnProperty.call(C,T)&&Object.propertyIsEnumerable.call(C,T))}function v(C,T,k){var M={};return k.isMergeableObject(C)&&f(C).forEach(function(N){M[N]=a(C[N],k)}),f(T).forEach(function(N){y(C,N)||(m(C,N)&&k.isMergeableObject(T[N])?M[N]=d(N,k)(C[N],T[N],k):M[N]=a(T[N],k))}),M}function w(C,T,k){k=k||{},k.arrayMerge=k.arrayMerge||c,k.isMergeableObject=k.isMergeableObject||n,k.cloneUnlessOtherwiseSpecified=a;var M=Array.isArray(T),N=Array.isArray(C),O=M===N;return O?M?k.arrayMerge(C,T,k):v(C,T,k):a(T,k)}w.all=function(T,k){if(!Array.isArray(T))throw new Error("first argument should be an array");return T.reduce(function(M,N){return w(M,N,k)},{})};var S=w;return Yy=S,Yy}var Xy,Kk;function om(){if(Kk)return Xy;Kk=1;var n=Object.create,e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,s=Object.getPrototypeOf,i=Object.prototype.hasOwnProperty,o=(z,W)=>{for(var P in W)e(z,P,{get:W[P],enumerable:!0})},a=(z,W,P,j)=>{if(W&&typeof W=="object"||typeof W=="function")for(let J of r(W))!i.call(z,J)&&J!==P&&e(z,J,{get:()=>W[J],enumerable:!(j=t(W,J))||j.enumerable});return z},c=(z,W,P)=>(P=z!=null?n(s(z)):{},a(!z||!z.__esModule?e(P,"default",{value:z,enumerable:!0}):P,z)),d=z=>a(e({},"__esModule",{value:!0}),z),h={};o(h,{callPlayer:()=>B,getConfig:()=>F,getSDK:()=>V,isBlobUrl:()=>K,isMediaStream:()=>q,lazy:()=>v,omit:()=>U,parseEndTime:()=>O,parseStartTime:()=>N,queryString:()=>I,randomString:()=>D,supportsWebKitPresentationMode:()=>G}),Xy=d(h);var f=c(Il()),m=c(xte()),y=c(cj());const v=z=>f.default.lazy(async()=>{const W=await z();return typeof W.default=="function"?W:W.default}),w=/[?&#](?:start|t)=([0-9hms]+)/,S=/[?&#]end=([0-9hms]+)/,C=/(\d+)(h|m|s)/g,T=/^\d+$/;function k(z,W){if(z instanceof Array)return;const P=z.match(W);if(P){const j=P[1];if(j.match(C))return M(j);if(T.test(j))return parseInt(j)}}function M(z){let W=0,P=C.exec(z);for(;P!==null;){const[,j,J]=P;J==="h"&&(W+=parseInt(j,10)*60*60),J==="m"&&(W+=parseInt(j,10)*60),J==="s"&&(W+=parseInt(j,10)),P=C.exec(z)}return W}function N(z){return k(z,w)}function O(z){return k(z,S)}function D(){return Math.random().toString(36).substr(2,5)}function I(z){return Object.keys(z).map(W=>`${W}=${z[W]}`).join("&")}function L(z){return window[z]?window[z]:window.exports&&window.exports[z]?window.exports[z]:window.module&&window.module.exports&&window.module.exports[z]?window.module.exports[z]:null}const A={},V=function(W,P,j=null,J=()=>!0,te=m.default){const ne=L(P);return ne&&J(ne)?Promise.resolve(ne):new Promise((ue,ce)=>{if(A[W]){A[W].push({resolve:ue,reject:ce});return}A[W]=[{resolve:ue,reject:ce}];const ae=xe=>{A[W].forEach(ke=>ke.resolve(xe))};if(j){const xe=window[j];window[j]=function(){xe&&xe(),ae(L(P))}}te(W,xe=>{xe?(A[W].forEach(ke=>ke.reject(xe)),A[W]=null):j||ae(L(P))})})};function F(z,W){return(0,y.default)(W.config,z.config)}function U(z,...W){const P=[].concat(...W),j={},J=Object.keys(z);for(const te of J)P.indexOf(te)===-1&&(j[te]=z[te]);return j}function B(z,...W){if(!this.player||!this.player[z]){let P=`ReactPlayer: ${this.constructor.displayName} player could not call %c${z}%c  `;return this.player?this.player[z]||(P+="The method was not available"):P+="The player was not available",console.warn(P,"font-weight: bold",""),null}return this.player[z](...W)}function q(z){return typeof window<"u"&&typeof window.MediaStream<"u"&&z instanceof window.MediaStream}function K(z){return/^blob:/.test(z)}function G(z=document.createElement("video")){const W=/iPhone|iPod/.test(navigator.userAgent)===!1;return z.webkitSupportsPresentationMode&&typeof z.webkitSetPresentationMode=="function"&&W}function $(z){return z}return Xy}var Jy,Yk;function wte(){if(Yk)return Jy;Yk=1;var n=Object.defineProperty,e=Object.getOwnPropertyDescriptor,t=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,s=(B,q)=>{for(var K in q)n(B,K,{get:q[K],enumerable:!0})},i=(B,q,K,G)=>{if(q&&typeof q=="object"||typeof q=="function")for(let $ of t(q))!r.call(B,$)&&$!==K&&n(B,$,{get:()=>q[$],enumerable:!(G=e(q,$))||G.enumerable});return B},o=B=>i(n({},"__esModule",{value:!0}),B),a={};s(a,{AUDIO_EXTENSIONS:()=>D,DASH_EXTENSIONS:()=>A,FLV_EXTENSIONS:()=>V,HLS_EXTENSIONS:()=>L,MATCH_URL_DAILYMOTION:()=>k,MATCH_URL_FACEBOOK:()=>y,MATCH_URL_FACEBOOK_WATCH:()=>v,MATCH_URL_KALTURA:()=>O,MATCH_URL_MIXCLOUD:()=>M,MATCH_URL_MUX:()=>m,MATCH_URL_SOUNDCLOUD:()=>h,MATCH_URL_STREAMABLE:()=>w,MATCH_URL_TWITCH_CHANNEL:()=>T,MATCH_URL_TWITCH_VIDEO:()=>C,MATCH_URL_VIDYARD:()=>N,MATCH_URL_VIMEO:()=>f,MATCH_URL_WISTIA:()=>S,MATCH_URL_YOUTUBE:()=>d,VIDEO_EXTENSIONS:()=>I,canPlay:()=>U}),Jy=o(a);var c=om();const d=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,h=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/,f=/vimeo\.com\/(?!progressive_redirect).+/,m=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,y=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/,v=/^https?:\/\/fb\.watch\/.+$/,w=/streamable\.com\/([a-z0-9]+)$/,S=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,C=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/,T=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/,k=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/,M=/mixcloud\.com\/([^/]+\/[^/]+)/,N=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/,O=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/,D=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,I=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,L=/\.(m3u8)($|\?)/i,A=/\.(mpd)($|\?)/i,V=/\.(flv)($|\?)/i,F=B=>{if(B instanceof Array){for(const q of B)if(typeof q=="string"&&F(q)||F(q.src))return!0;return!1}return(0,c.isMediaStream)(B)||(0,c.isBlobUrl)(B)?!0:D.test(B)||I.test(B)||L.test(B)||A.test(B)||V.test(B)},U={youtube:B=>B instanceof Array?B.every(q=>d.test(q)):d.test(B),soundcloud:B=>h.test(B)&&!D.test(B),vimeo:B=>f.test(B)&&!I.test(B)&&!L.test(B),mux:B=>m.test(B),facebook:B=>y.test(B)||v.test(B),streamable:B=>w.test(B),wistia:B=>S.test(B),twitch:B=>C.test(B)||T.test(B),dailymotion:B=>k.test(B),mixcloud:B=>M.test(B),vidyard:B=>N.test(B),kaltura:B=>O.test(B),file:F};return Jy}var Zy,Xk;function bte(){if(Xk)return Zy;Xk=1;var n=Object.defineProperty,e=Object.getOwnPropertyDescriptor,t=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,s=(f,m)=>{for(var y in m)n(f,y,{get:m[y],enumerable:!0})},i=(f,m,y,v)=>{if(m&&typeof m=="object"||typeof m=="function")for(let w of t(m))!r.call(f,w)&&w!==y&&n(f,w,{get:()=>m[w],enumerable:!(v=e(m,w))||v.enumerable});return f},o=f=>i(n({},"__esModule",{value:!0}),f),a={};s(a,{default:()=>h}),Zy=o(a);var c=om(),d=wte(),h=[{key:"youtube",name:"YouTube",canPlay:d.canPlay.youtube,lazyPlayer:(0,c.lazy)(()=>Zn(()=>import("./YouTube-DBFOjc39.js").then(f=>f.Y),[]))},{key:"soundcloud",name:"SoundCloud",canPlay:d.canPlay.soundcloud,lazyPlayer:(0,c.lazy)(()=>Zn(()=>import("./SoundCloud-otZtcgnQ.js").then(f=>f.S),[]))},{key:"vimeo",name:"Vimeo",canPlay:d.canPlay.vimeo,lazyPlayer:(0,c.lazy)(()=>Zn(()=>import("./Vimeo-kRxu7I6n.js").then(f=>f.V),[]))},{key:"mux",name:"Mux",canPlay:d.canPlay.mux,lazyPlayer:(0,c.lazy)(()=>Zn(()=>import("./Mux-BGbeNFof.js").then(f=>f.M),[]))},{key:"facebook",name:"Facebook",canPlay:d.canPlay.facebook,lazyPlayer:(0,c.lazy)(()=>Zn(()=>import("./Facebook-CF1oppct.js").then(f=>f.F),[]))},{key:"streamable",name:"Streamable",canPlay:d.canPlay.streamable,lazyPlayer:(0,c.lazy)(()=>Zn(()=>import("./Streamable-D6Hl9oVf.js").then(f=>f.S),[]))},{key:"wistia",name:"Wistia",canPlay:d.canPlay.wistia,lazyPlayer:(0,c.lazy)(()=>Zn(()=>import("./Wistia-Cnyu_sj_.js").then(f=>f.W),[]))},{key:"twitch",name:"Twitch",canPlay:d.canPlay.twitch,lazyPlayer:(0,c.lazy)(()=>Zn(()=>import("./Twitch-C0fBlK8I.js").then(f=>f.T),[]))},{key:"dailymotion",name:"DailyMotion",canPlay:d.canPlay.dailymotion,lazyPlayer:(0,c.lazy)(()=>Zn(()=>import("./DailyMotion-BtQkERF4.js").then(f=>f.D),[]))},{key:"mixcloud",name:"Mixcloud",canPlay:d.canPlay.mixcloud,lazyPlayer:(0,c.lazy)(()=>Zn(()=>import("./Mixcloud-WhaUDEA6.js").then(f=>f.M),[]))},{key:"vidyard",name:"Vidyard",canPlay:d.canPlay.vidyard,lazyPlayer:(0,c.lazy)(()=>Zn(()=>import("./Vidyard-Cml4GayN.js").then(f=>f.V),[]))},{key:"kaltura",name:"Kaltura",canPlay:d.canPlay.kaltura,lazyPlayer:(0,c.lazy)(()=>Zn(()=>import("./Kaltura-_HqQse55.js").then(f=>f.K),[]))},{key:"file",name:"FilePlayer",canPlay:d.canPlay.file,canEnablePIP:f=>d.canPlay.file(f)&&(document.pictureInPictureEnabled||(0,c.supportsWebKitPresentationMode)())&&!d.AUDIO_EXTENSIONS.test(f),lazyPlayer:(0,c.lazy)(()=>Zn(()=>import("./FilePlayer-CDnehnjd.js").then(f=>f.F),[]))}];return Zy}var Jk=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Ste(n,e){return!!(n===e||Jk(n)&&Jk(e))}function Cte(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!Ste(n[t],e[t]))return!1;return!0}function _te(n,e){e===void 0&&(e=Cte);var t,r=[],s,i=!1;function o(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return i&&t===this&&e(a,r)||(s=n.apply(this,a),i=!0,t=this,r=a),s}return o}const Tte=Object.freeze(Object.defineProperty({__proto__:null,default:_te},Symbol.toStringTag,{value:"Module"})),kte=xL(Tte);var Qy,Zk;function uj(){if(Zk)return Qy;Zk=1;var n=typeof Element<"u",e=typeof Map=="function",t=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function s(i,o){if(i===o)return!0;if(i&&o&&typeof i=="object"&&typeof o=="object"){if(i.constructor!==o.constructor)return!1;var a,c,d;if(Array.isArray(i)){if(a=i.length,a!=o.length)return!1;for(c=a;c--!==0;)if(!s(i[c],o[c]))return!1;return!0}var h;if(e&&i instanceof Map&&o instanceof Map){if(i.size!==o.size)return!1;for(h=i.entries();!(c=h.next()).done;)if(!o.has(c.value[0]))return!1;for(h=i.entries();!(c=h.next()).done;)if(!s(c.value[1],o.get(c.value[0])))return!1;return!0}if(t&&i instanceof Set&&o instanceof Set){if(i.size!==o.size)return!1;for(h=i.entries();!(c=h.next()).done;)if(!o.has(c.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(i)&&ArrayBuffer.isView(o)){if(a=i.length,a!=o.length)return!1;for(c=a;c--!==0;)if(i[c]!==o[c])return!1;return!0}if(i.constructor===RegExp)return i.source===o.source&&i.flags===o.flags;if(i.valueOf!==Object.prototype.valueOf&&typeof i.valueOf=="function"&&typeof o.valueOf=="function")return i.valueOf()===o.valueOf();if(i.toString!==Object.prototype.toString&&typeof i.toString=="function"&&typeof o.toString=="function")return i.toString()===o.toString();if(d=Object.keys(i),a=d.length,a!==Object.keys(o).length)return!1;for(c=a;c--!==0;)if(!Object.prototype.hasOwnProperty.call(o,d[c]))return!1;if(n&&i instanceof Element)return!1;for(c=a;c--!==0;)if(!((d[c]==="_owner"||d[c]==="__v"||d[c]==="__o")&&i.$$typeof)&&!s(i[d[c]],o[d[c]]))return!1;return!0}return i!==i&&o!==o}return Qy=function(o,a){try{return s(o,a)}catch(c){if((c.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw c}},Qy}var ev={exports:{}},tv,Qk;function Ete(){if(Qk)return tv;Qk=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return tv=n,tv}var nv,eE;function Nte(){if(eE)return nv;eE=1;var n=Ete();function e(){}function t(){}return t.resetWarningCache=e,nv=function(){function r(o,a,c,d,h,f){if(f!==n){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}r.isRequired=r;function s(){return r}var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return i.PropTypes=i,i},nv}var tE;function Ate(){return tE||(tE=1,ev.exports=Nte()()),ev.exports}var rv,nE;function dj(){if(nE)return rv;nE=1;var n=Object.create,e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,s=Object.getPrototypeOf,i=Object.prototype.hasOwnProperty,o=(I,L)=>{for(var A in L)e(I,A,{get:L[A],enumerable:!0})},a=(I,L,A,V)=>{if(L&&typeof L=="object"||typeof L=="function")for(let F of r(L))!i.call(I,F)&&F!==A&&e(I,F,{get:()=>L[F],enumerable:!(V=t(L,F))||V.enumerable});return I},c=(I,L,A)=>(A=I!=null?n(s(I)):{},a(!I||!I.__esModule?e(A,"default",{value:I,enumerable:!0}):A,I)),d=I=>a(e({},"__esModule",{value:!0}),I),h={};o(h,{defaultProps:()=>D,propTypes:()=>N}),rv=d(h);var f=c(Ate());const{string:m,bool:y,number:v,array:w,oneOfType:S,shape:C,object:T,func:k,node:M}=f.default,N={url:S([m,w,T]),playing:y,loop:y,controls:y,volume:v,muted:y,playbackRate:v,width:S([m,v]),height:S([m,v]),style:T,progressInterval:v,playsinline:y,pip:y,stopOnUnmount:y,light:S([y,m,T]),playIcon:M,previewTabIndex:v,previewAriaLabel:m,fallback:M,oEmbedUrl:m,wrapper:S([m,k,C({render:k.isRequired})]),config:C({soundcloud:C({options:T}),youtube:C({playerVars:T,embedOptions:T,onUnstarted:k}),facebook:C({appId:m,version:m,playerId:m,attributes:T}),dailymotion:C({params:T}),vimeo:C({playerOptions:T,title:m}),mux:C({attributes:T,version:m}),file:C({attributes:T,tracks:w,forceVideo:y,forceAudio:y,forceHLS:y,forceSafariHLS:y,forceDisableHls:y,forceDASH:y,forceFLV:y,hlsOptions:T,hlsVersion:m,dashVersion:m,flvVersion:m}),wistia:C({options:T,playerId:m,customControls:w}),mixcloud:C({options:T}),twitch:C({options:T,playerId:m}),vidyard:C({options:T})}),onReady:k,onStart:k,onPlay:k,onPause:k,onBuffer:k,onBufferEnd:k,onEnded:k,onError:k,onDuration:k,onSeek:k,onPlaybackRateChange:k,onPlaybackQualityChange:k,onProgress:k,onClickPreview:k,onEnablePIP:k,onDisablePIP:k},O=()=>{},D={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:O},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},mux:{attributes:{},version:"2"},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0",forceDisableHls:!1},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:O,onStart:O,onPlay:O,onPause:O,onBuffer:O,onBufferEnd:O,onEnded:O,onError:O,onDuration:O,onSeek:O,onPlaybackRateChange:O,onPlaybackQualityChange:O,onProgress:O,onClickPreview:O,onEnablePIP:O,onDisablePIP:O};return rv}var sv,rE;function Mte(){if(rE)return sv;rE=1;var n=Object.create,e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,s=Object.getPrototypeOf,i=Object.prototype.hasOwnProperty,o=(k,M,N)=>M in k?e(k,M,{enumerable:!0,configurable:!0,writable:!0,value:N}):k[M]=N,a=(k,M)=>{for(var N in M)e(k,N,{get:M[N],enumerable:!0})},c=(k,M,N,O)=>{if(M&&typeof M=="object"||typeof M=="function")for(let D of r(M))!i.call(k,D)&&D!==N&&e(k,D,{get:()=>M[D],enumerable:!(O=t(M,D))||O.enumerable});return k},d=(k,M,N)=>(N=k!=null?n(s(k)):{},c(!k||!k.__esModule?e(N,"default",{value:k,enumerable:!0}):N,k)),h=k=>c(e({},"__esModule",{value:!0}),k),f=(k,M,N)=>(o(k,typeof M!="symbol"?M+"":M,N),N),m={};a(m,{default:()=>T}),sv=h(m);var y=d(Il()),v=d(uj()),w=dj(),S=om();const C=5e3;class T extends y.Component{constructor(){super(...arguments),f(this,"mounted",!1),f(this,"isReady",!1),f(this,"isPlaying",!1),f(this,"isLoading",!0),f(this,"loadOnReady",null),f(this,"startOnPlay",!0),f(this,"seekOnPlay",null),f(this,"onDurationCalled",!1),f(this,"handlePlayerMount",M=>{if(this.player){this.progress();return}this.player=M,this.player.load(this.props.url),this.progress()}),f(this,"getInternalPlayer",M=>this.player?this.player[M]:null),f(this,"progress",()=>{if(this.props.url&&this.player&&this.isReady){const M=this.getCurrentTime()||0,N=this.getSecondsLoaded(),O=this.getDuration();if(O){const D={playedSeconds:M,played:M/O};N!==null&&(D.loadedSeconds=N,D.loaded=N/O),(D.playedSeconds!==this.prevPlayed||D.loadedSeconds!==this.prevLoaded)&&this.props.onProgress(D),this.prevPlayed=D.playedSeconds,this.prevLoaded=D.loadedSeconds}}this.progressTimeout=setTimeout(this.progress,this.props.progressFrequency||this.props.progressInterval)}),f(this,"handleReady",()=>{if(!this.mounted)return;this.isReady=!0,this.isLoading=!1;const{onReady:M,playing:N,volume:O,muted:D}=this.props;M(),!D&&O!==null&&this.player.setVolume(O),this.loadOnReady?(this.player.load(this.loadOnReady,!0),this.loadOnReady=null):N&&this.player.play(),this.handleDurationCheck()}),f(this,"handlePlay",()=>{this.isPlaying=!0,this.isLoading=!1;const{onStart:M,onPlay:N,playbackRate:O}=this.props;this.startOnPlay&&(this.player.setPlaybackRate&&O!==1&&this.player.setPlaybackRate(O),M(),this.startOnPlay=!1),N(),this.seekOnPlay&&(this.seekTo(this.seekOnPlay),this.seekOnPlay=null),this.handleDurationCheck()}),f(this,"handlePause",M=>{this.isPlaying=!1,this.isLoading||this.props.onPause(M)}),f(this,"handleEnded",()=>{const{activePlayer:M,loop:N,onEnded:O}=this.props;M.loopOnEnded&&N&&this.seekTo(0),N||(this.isPlaying=!1,O())}),f(this,"handleError",(...M)=>{this.isLoading=!1,this.props.onError(...M)}),f(this,"handleDurationCheck",()=>{clearTimeout(this.durationCheckTimeout);const M=this.getDuration();M?this.onDurationCalled||(this.props.onDuration(M),this.onDurationCalled=!0):this.durationCheckTimeout=setTimeout(this.handleDurationCheck,100)}),f(this,"handleLoaded",()=>{this.isLoading=!1})}componentDidMount(){this.mounted=!0}componentWillUnmount(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}componentDidUpdate(M){if(!this.player)return;const{url:N,playing:O,volume:D,muted:I,playbackRate:L,pip:A,loop:V,activePlayer:F,disableDeferredLoading:U}=this.props;if(!(0,v.default)(M.url,N)){if(this.isLoading&&!F.forceLoad&&!U&&!(0,S.isMediaStream)(N)){console.warn(`ReactPlayer: the attempt to load ${N} is being deferred until the player has loaded`),this.loadOnReady=N;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(N,this.isReady)}!M.playing&&O&&!this.isPlaying&&this.player.play(),M.playing&&!O&&this.isPlaying&&this.player.pause(),!M.pip&&A&&this.player.enablePIP&&this.player.enablePIP(),M.pip&&!A&&this.player.disablePIP&&this.player.disablePIP(),M.volume!==D&&D!==null&&this.player.setVolume(D),M.muted!==I&&(I?this.player.mute():(this.player.unmute(),D!==null&&setTimeout(()=>this.player.setVolume(D)))),M.playbackRate!==L&&this.player.setPlaybackRate&&this.player.setPlaybackRate(L),M.loop!==V&&this.player.setLoop&&this.player.setLoop(V)}getDuration(){return this.isReady?this.player.getDuration():null}getCurrentTime(){return this.isReady?this.player.getCurrentTime():null}getSecondsLoaded(){return this.isReady?this.player.getSecondsLoaded():null}seekTo(M,N,O){if(!this.isReady){M!==0&&(this.seekOnPlay=M,setTimeout(()=>{this.seekOnPlay=null},C));return}if(N?N==="fraction":M>0&&M<1){const I=this.player.getDuration();if(!I){console.warn("ReactPlayer: could not seek using fraction duration not yet available");return}this.player.seekTo(I*M,O);return}this.player.seekTo(M,O)}render(){const M=this.props.activePlayer;return M?y.default.createElement(M,{...this.props,onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError}):null}}return f(T,"displayName","Player"),f(T,"propTypes",w.propTypes),f(T,"defaultProps",w.defaultProps),sv}var iv,sE;function Ote(){if(sE)return iv;sE=1;var n=Object.create,e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,s=Object.getPrototypeOf,i=Object.prototype.hasOwnProperty,o=(V,F,U)=>F in V?e(V,F,{enumerable:!0,configurable:!0,writable:!0,value:U}):V[F]=U,a=(V,F)=>{for(var U in F)e(V,U,{get:F[U],enumerable:!0})},c=(V,F,U,B)=>{if(F&&typeof F=="object"||typeof F=="function")for(let q of r(F))!i.call(V,q)&&q!==U&&e(V,q,{get:()=>F[q],enumerable:!(B=t(F,q))||B.enumerable});return V},d=(V,F,U)=>(U=V!=null?n(s(V)):{},c(!V||!V.__esModule?e(U,"default",{value:V,enumerable:!0}):U,V)),h=V=>c(e({},"__esModule",{value:!0}),V),f=(V,F,U)=>(o(V,typeof F!="symbol"?F+"":F,U),U),m={};a(m,{createReactPlayer:()=>A}),iv=h(m);var y=d(Il()),v=d(cj()),w=d(kte),S=d(uj()),C=dj(),T=om(),k=d(Mte());const M=(0,T.lazy)(()=>Zn(()=>import("./Preview-BmlBp0As.js").then(V=>V.P),[])),N=typeof window<"u"&&window.document&&typeof document<"u",O=typeof Gg<"u"&&Gg.window&&Gg.window.document,D=Object.keys(C.propTypes),I=N||O?y.Suspense:()=>null,L=[],A=(V,F)=>{var U;return U=class extends y.Component{constructor(){super(...arguments),f(this,"state",{showPreview:!!this.props.light}),f(this,"references",{wrapper:B=>{this.wrapper=B},player:B=>{this.player=B}}),f(this,"handleClickPreview",B=>{this.setState({showPreview:!1}),this.props.onClickPreview(B)}),f(this,"showPreview",()=>{this.setState({showPreview:!0})}),f(this,"getDuration",()=>this.player?this.player.getDuration():null),f(this,"getCurrentTime",()=>this.player?this.player.getCurrentTime():null),f(this,"getSecondsLoaded",()=>this.player?this.player.getSecondsLoaded():null),f(this,"getInternalPlayer",(B="player")=>this.player?this.player.getInternalPlayer(B):null),f(this,"seekTo",(B,q,K)=>{if(!this.player)return null;this.player.seekTo(B,q,K)}),f(this,"handleReady",()=>{this.props.onReady(this)}),f(this,"getActivePlayer",(0,w.default)(B=>{for(const q of[...L,...V])if(q.canPlay(B))return q;return F||null})),f(this,"getConfig",(0,w.default)((B,q)=>{const{config:K}=this.props;return v.default.all([C.defaultProps.config,C.defaultProps.config[q]||{},K,K[q]||{}])})),f(this,"getAttributes",(0,w.default)(B=>(0,T.omit)(this.props,D))),f(this,"renderActivePlayer",B=>{if(!B)return null;const q=this.getActivePlayer(B);if(!q)return null;const K=this.getConfig(B,q.key);return y.default.createElement(k.default,{...this.props,key:q.key,ref:this.references.player,config:K,activePlayer:q.lazyPlayer||q,onReady:this.handleReady})})}shouldComponentUpdate(B,q){return!(0,S.default)(this.props,B)||!(0,S.default)(this.state,q)}componentDidUpdate(B){const{light:q}=this.props;!B.light&&q&&this.setState({showPreview:!0}),B.light&&!q&&this.setState({showPreview:!1})}renderPreview(B){if(!B)return null;const{light:q,playIcon:K,previewTabIndex:G,oEmbedUrl:$,previewAriaLabel:z}=this.props;return y.default.createElement(M,{url:B,light:q,playIcon:K,previewTabIndex:G,previewAriaLabel:z,oEmbedUrl:$,onClick:this.handleClickPreview})}render(){const{url:B,style:q,width:K,height:G,fallback:$,wrapper:z}=this.props,{showPreview:W}=this.state,P=this.getAttributes(B),j=typeof z=="string"?this.references.wrapper:void 0;return y.default.createElement(z,{ref:j,style:{...q,width:K,height:G},...P},y.default.createElement(I,{fallback:$},W?this.renderPreview(B):this.renderActivePlayer(B)))}},f(U,"displayName","ReactPlayer"),f(U,"propTypes",C.propTypes),f(U,"defaultProps",C.defaultProps),f(U,"addCustomPlayer",B=>{L.push(B)}),f(U,"removeCustomPlayers",()=>{L.length=0}),f(U,"canPlay",B=>{for(const q of[...L,...V])if(q.canPlay(B))return!0;return!1}),f(U,"canEnablePIP",B=>{for(const q of[...L,...V])if(q.canEnablePIP&&q.canEnablePIP(B))return!0;return!1}),U};return iv}var ov,iE;function Pte(){if(iE)return ov;iE=1;var n=Object.create,e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,s=Object.getPrototypeOf,i=Object.prototype.hasOwnProperty,o=(w,S)=>{for(var C in S)e(w,C,{get:S[C],enumerable:!0})},a=(w,S,C,T)=>{if(S&&typeof S=="object"||typeof S=="function")for(let k of r(S))!i.call(w,k)&&k!==C&&e(w,k,{get:()=>S[k],enumerable:!(T=t(S,k))||T.enumerable});return w},c=(w,S,C)=>(C=w!=null?n(s(w)):{},a(!w||!w.__esModule?e(C,"default",{value:w,enumerable:!0}):C,w)),d=w=>a(e({},"__esModule",{value:!0}),w),h={};o(h,{default:()=>v}),ov=d(h);var f=c(bte()),m=Ote();const y=f.default[f.default.length-1];var v=(0,m.createReactPlayer)(f.default,y);return ov}var Dte=Pte();const Rte=D0(Dte);function Ite({onClose:n,onShowHelp:e,onShowAbout:t,videos:r,currentIndex:s,onPlayVideo:i,onClearPlaylist:o,onShufflePlaylist:a,onToggleLoopAll:c,onToggleLoopCurrent:d,onTogglePlay:h,onNext:f,onPrevious:m,onAddVideo:y,onOpenVideo:v,isLoopAll:w,isLoopCurrent:S,isPlaying:C,isShuffled:T,onFullScreen:k}){return g.jsxs(Rs,{children:[g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 text-md px-2 py-1 border-none hover:bg-gray-200 active:bg-gray-900 active:text-white focus-visible:ring-0",children:"File"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{onClick:v,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Open Video..."}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:n,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Close"})]})]}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 px-2 py-1 text-md focus-visible:ring-0 hover:bg-gray-200 active:bg-gray-900 active:text-white",children:"Controls"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{onClick:h,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",disabled:r.length===0,children:C?"Pause":"Play"}),g.jsx(de,{onClick:m,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",disabled:r.length===0,children:"Previous"}),g.jsx(de,{onClick:f,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",disabled:r.length===0,children:"Next"}),g.jsx(de,{onClick:k,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Full Screen"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:a,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:g.jsx("span",{className:Pe(!T&&"pl-4"),children:T?" Shuffle":"Shuffle"})}),g.jsx(de,{onClick:c,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:g.jsx("span",{className:Pe(!w&&"pl-4"),children:w?" Repeat All":"Repeat All"})}),g.jsx(de,{onClick:d,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:g.jsx("span",{className:Pe(!S&&"pl-4"),children:S?" Repeat One":"Repeat One"})})]})]}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 px-2 py-1 text-md focus-visible:ring-0 hover:bg-gray-200 active:bg-gray-900 active:text-white",children:"Playlist"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{onClick:y,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Add to Playlist..."}),g.jsx(de,{onClick:o,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Clear Playlist"}),r.length>0&&g.jsxs(g.Fragment,{children:[g.jsx(Le,{className:"h-[2px] bg-black my-1"}),r.map((M,N)=>g.jsx(de,{onClick:()=>i(N),className:Pe("text-md h-6 px-3 active:bg-gray-900 active:text-white max-w-[220px] truncate",N===s&&"bg-gray-200"),children:g.jsxs("div",{className:"flex items-center w-full truncate",children:[g.jsx("span",{className:Pe("flex-none",N===s?"mr-1":"pl-5"),children:N===s?" ":""}),g.jsx("span",{className:"truncate",children:M.title})]})},M.id))]})]})]}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 px-2 py-1 text-md focus-visible:ring-0 hover:bg-gray-200 active:bg-gray-900 active:text-white",children:"Help"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{onClick:e,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Videos Help"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:t,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"About Videos"})]})]})]})}async function jte(n){const e=await fetch(`https://www.youtube.com/oembed?url=http://www.youtube.com/watch?v=${n}&format=json`);if(!e.ok)throw new Error("Failed to fetch video info");return{title:(await e.json()).title}}function Lte({digit:n,direction:e}){const t=e==="next"?30:-30;return g.jsx("div",{className:"relative w-[0.6em] h-[28px] overflow-hidden inline-block",children:g.jsx(Of,{mode:"popLayout",initial:!1,children:g.jsx(ei.div,{initial:{y:t,opacity:0},animate:{y:0,opacity:1},exit:{y:t,opacity:0},transition:{y:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},className:"absolute inset-0 flex justify-center",children:n},n)})})}function Fte({number:n}){const[e,t]=b.useState(n),r=n>e?"next":"prev";b.useEffect(()=>{t(n)},[n]);const s=String(n).padStart(2,"0").split("");return g.jsx("div",{className:"flex",children:s.map((i,o)=>g.jsx(Lte,{digit:i,direction:r},o))})}function Vte({title:n,direction:e,isPlaying:t}){const r=e==="next"?30:-30;return g.jsx("div",{className:"relative h-[22px] mb-[3px] overflow-hidden",children:g.jsx(Of,{mode:"popLayout",initial:!1,children:g.jsxs(ei.div,{initial:{y:r,opacity:0},animate:{y:0,opacity:1},exit:{y:r,opacity:0},transition:{y:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},className:"absolute inset-0 flex whitespace-nowrap",children:[g.jsx(ei.div,{initial:{x:"0%"},animate:{x:t?"-100%":"0%"},transition:t?{duration:20,ease:"linear",repeat:1/0,repeatType:"loop"}:{duration:.3},className:Pe("shrink-0 font-geneva-12 px-2 transition-colors duration-300",t?"text-[#ff00ff]":"text-gray-600",!t&&"opacity-50"),children:n}),g.jsx(ei.div,{initial:{x:"0%"},animate:{x:t?"-100%":"0%"},transition:t?{duration:20,ease:"linear",repeat:1/0,repeatType:"loop"}:{duration:.3},className:Pe("shrink-0 font-geneva-12 px-2 transition-colors duration-300",t?"text-[#ff00ff]":"text-gray-600",!t&&"opacity-50"),"aria-hidden":!0,children:n})]},n)})})}function Bte(){const n=b.useRef(null),e=b.useRef(),[t,r]=b.useState(0),[s,i]=b.useState(0);return b.useEffect(()=>{const o=n.current;if(!o)return;const a=o.getContext("2d");if(!a)return;const c=()=>{const h=a.createImageData(o.width,o.height),f=h.data;for(let m=0;m<f.length;m+=4){const y=Math.random()*255*t;f[m]=y,f[m+1]=y,f[m+2]=y,f[m+3]=255}for(let m=0;m<o.height;m+=2)for(let y=0;y<o.width;y++){const v=(m*o.width+y)*4;f[v]*=.8,f[v+1]*=.8,f[v+2]*=.8}a.putImageData(h,0,0),e.current=requestAnimationFrame(c)},d=()=>{o.width=o.offsetWidth,o.height=o.offsetHeight};return d(),window.addEventListener("resize",d),c(),()=>{window.removeEventListener("resize",d),e.current&&cancelAnimationFrame(e.current)}},[t]),b.useEffect(()=>{const a=Date.now(),c=t,d=1,h=()=>{const f=Date.now()-a,m=Math.min(f/1e3,1),y=1-Math.pow(1-m,3);r(c+(d-c)*y),m<1&&requestAnimationFrame(h)};h()},[]),b.useEffect(()=>{const o=setInterval(()=>{i(a=>(a+1)%2)},100);return()=>clearInterval(o)},[]),g.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[g.jsx("canvas",{ref:n,className:"absolute inset-0 w-full h-full"}),g.jsx("div",{className:"absolute inset-0",style:{background:"rgba(0,0,0,0.1)",opacity:1-t,transition:"opacity 0.05s linear"}}),g.jsx("div",{className:"absolute inset-0",style:{background:`linear-gradient(
            to bottom,
            rgba(0,0,0,0.1) 0%,
            rgba(0,0,0,0.1) 50%,
            rgba(0,0,0,0.1) 100%
          )`,transform:`translateY(${s}px)`,transition:"transform 0.1s linear"}})]})}function zte({message:n}){return g.jsx("div",{className:"absolute top-4 left-4 pointer-events-none",children:g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"font-geneva-12 text-white text-xl relative z-10",children:n}),g.jsx("div",{className:"font-geneva-12 text-black text-xl absolute inset-0",style:{WebkitTextStroke:"3px black",textShadow:"none"},children:n})]})})}function Wte({isWindowOpen:n,onClose:e,isForeground:t}){const{play:r}=pt(ut.VIDEO_TAPE),{play:s}=pt(ut.BUTTON_CLICK),i=yne(),[o,a]=b.useState(i),[c,d]=b.useState(xne()),[h,f]=b.useState("next"),[m,y]=b.useState(!1),[v,w]=b.useState(Cne()),[S,C]=b.useState(bne()),[T,k]=b.useState(Tne()),[M,N]=b.useState(i),[O,D]=b.useState(""),[I,L]=b.useState(!1),[A,V]=b.useState(!1),[F,U]=b.useState(!1),[B,q]=b.useState(!1),K=b.useRef(null),[G,$]=b.useState(0),[z,W]=b.useState(!1),[P,j]=b.useState(null),J=b.useRef(),te=se=>{j(se),J.current&&clearTimeout(J.current),J.current=setTimeout(()=>{j(null)},2e3)},ne=se=>{const ge=typeof se=="number"?se:se(c);f(ge>c?"next":"prev"),d(ge)},ue=()=>{o.length!==0&&(s(),ne(se=>se===o.length-1?S?(te("REPEATING PLAYLIST"),0):se:(te("NEXT "),se+1)),y(!0))},ce=()=>{o.length!==0&&(s(),ne(se=>se===0?S?(te("REPEATING PLAYLIST"),o.length-1):se:(te("PREV "),se-1)),y(!0))};b.useEffect(()=>{vne(o)},[o]),b.useEffect(()=>{wne(c)},[c]),b.useEffect(()=>{Sne(S)},[S]),b.useEffect(()=>{_ne(v)},[v]),b.useEffect(()=>{kne(T)},[T]),b.useEffect(()=>{$(0)},[c]),b.useEffect(()=>{if(T){const se=[...o].sort(()=>Math.random()-.5);a(se)}else a([...M])},[T]),b.useEffect(()=>{T||N(o)},[o,T]);const ae=se=>{const ge=Math.floor(se/60),he=se%60;return`${String(ge).padStart(2,"0")}:${String(he).padStart(2,"0")}`},xe=se=>{const ge=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/,he=se.match(ge);return he&&he[7].length===11?he[7]:null},ke=async se=>{try{const ge=xe(se);if(!ge)throw new Error("Invalid YouTube URL");const he=await jte(ge),je={id:ge,url:se,title:he.title};a(Je=>[...Je,je]),te("VIDEO ADDED"),z&&(d(o.length),y(!0),W(!1),r()),D(""),L(!1)}catch(ge){console.error("Failed to add video:",ge)}},pe=()=>{y(!m),te(m?"PAUSED ":"PLAY "),r()},ye=()=>{k(!T),te(T?"SHUFFLE OFF":"SHUFFLE ON")},re=()=>{var se;v?((se=K.current)==null||se.seekTo(0),y(!0)):ue()},Q=se=>{$(Math.floor(se.playedSeconds))},X=()=>{y(!0)},Y=()=>{y(!1)},fe=()=>{var se;m&&((se=K.current)==null||se.seekTo(0))},_e=()=>{var se;try{const ge=(se=K.current)==null?void 0:se.getInternalPlayer();if(ge){const Je=ge.getIframe?ge.getIframe():ge;if(Je&&Je.requestFullscreen){Je.requestFullscreen(),te("FULLSCREEN");return}}const he=document.querySelector(".react-player iframe");if(he&&he.requestFullscreen){he.requestFullscreen(),te("FULLSCREEN");return}const je=document.querySelector(".react-player");je&&je.requestFullscreen&&(je.requestFullscreen(),te("FULLSCREEN"))}catch(ge){console.error("Fullscreen error:",ge)}};return b.useEffect(()=>()=>{J.current&&clearTimeout(J.current)},[]),n?g.jsxs(g.Fragment,{children:[g.jsx(Ite,{onClose:e,onShowHelp:()=>V(!0),onShowAbout:()=>U(!0),videos:o,currentIndex:c,onPlayVideo:se=>{d(se),y(!0),r()},onClearPlaylist:()=>{q(!0)},onShufflePlaylist:ye,onToggleLoopAll:()=>C(!S),onToggleLoopCurrent:()=>w(!v),isLoopAll:S,isLoopCurrent:v,onTogglePlay:()=>{pe(),r()},onNext:()=>{c<o.length-1&&(s(),d(c+1),y(!0),te("NEXT "))},onPrevious:()=>{c>0&&(s(),d(c-1),y(!0),te("PREV "))},onAddVideo:()=>L(!0),onOpenVideo:()=>{W(!0),L(!0)},isPlaying:m,isShuffled:T,onFullScreen:_e}),g.jsxs(ai,{title:"Videos",onClose:e,isForeground:t,appId:"videos",children:[g.jsxs("div",{className:"flex flex-col w-full h-full bg-[#1a1a1a] text-white",children:[g.jsx("div",{className:"flex-1 relative",children:o.length>0?g.jsxs("div",{className:"w-full h-full overflow-hidden relative",children:[g.jsxs("div",{className:"w-full pointer-events-none",style:{height:"calc(100% + 140px)",marginTop:"-70px"},children:[g.jsx(Rte,{ref:K,url:o[c].url,playing:m,controls:!1,width:"100%",height:"100%",onEnded:re,onProgress:Q,onPlay:X,onPause:Y,onReady:fe,loop:v,config:{youtube:{playerVars:{modestbranding:1,rel:0,showinfo:0,iv_load_policy:3,fs:0,disablekb:1,playsinline:1}}}}),g.jsx(Of,{children:!m&&g.jsx(ei.div,{initial:{opacity:0,scale:1.15},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.15},transition:{duration:.2,delay:.1,ease:[.4,0,.2,1]},className:"absolute inset-0",children:g.jsx(Bte,{})})})]}),g.jsx("div",{className:"absolute inset-0 cursor-pointer",onClick:pe,"aria-label":m?"Pause":"Play"}),g.jsx(Of,{children:P&&g.jsx(ei.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:g.jsx(zte,{message:P})})})]}):g.jsxs("div",{className:"flex items-center justify-center h-full text-gray-400 font-geneva-12 text-sm",children:[g.jsx("a",{onClick:()=>L(!0),className:"text-[#ff00ff] hover:underline cursor-pointer",children:"Add videos"}),"to get started"]})}),g.jsxs("div",{className:"p-4 bg-[#2a2a2a] border-t border-[#3a3a3a] flex flex-col gap-4",children:[g.jsxs("div",{className:"bg-black py-2 px-4 flex items-center justify-between w-full",children:[g.jsxs("div",{className:"flex items-center gap-8",children:[g.jsxs("div",{className:Pe("font-geneva-12 text-[10px] transition-colors duration-300",m?"text-[#ff00ff]":"text-gray-600"),children:[g.jsx("div",{children:"Track"}),g.jsx("div",{className:"text-xl",children:g.jsx(Fte,{number:c+1})})]}),g.jsxs("div",{className:Pe("font-geneva-12 text-[10px] transition-colors duration-300",m?"text-[#ff00ff]":"text-gray-600"),children:[g.jsx("div",{children:"Time"}),g.jsx("div",{className:"text-xl",children:ae(G)})]})]}),g.jsxs("div",{className:"relative overflow-hidden flex-1 px-2",children:[g.jsx("div",{className:Pe("font-geneva-12 text-[10px] transition-colors duration-300 mb-[3px] pl-2",m?"text-[#ff00ff]":"text-gray-600"),children:"Title"}),o.length>0&&g.jsxs("div",{className:"relative overflow-hidden",children:[g.jsx(Vte,{title:o[c].title,direction:h,isPlaying:m}),m&&g.jsx("div",{className:"absolute left-0 top-0 h-full w-4 bg-gradient-to-r from-black to-transparent"}),g.jsx("div",{className:"absolute right-0 top-0 h-full w-4 bg-gradient-to-l from-black to-transparent"})]})]})]}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("div",{className:"flex items-center gap-2",children:g.jsxs("div",{className:"flex gap-0",children:[g.jsx("button",{onClick:ce,className:Pe("flex items-center justify-center disabled:opacity-50 focus:outline-none","hover:brightness-75 active:brightness-50"),disabled:o.length===0,children:g.jsx("img",{src:"/assets/videos/prev.png",alt:"Previous",width:32,height:22,className:"pointer-events-none"})}),g.jsx("button",{onClick:pe,className:Pe("flex items-center justify-center disabled:opacity-50 focus:outline-none","hover:brightness-75 active:brightness-50"),disabled:o.length===0,children:g.jsx("img",{src:m?"/assets/videos/pause.png":"/assets/videos/play.png",alt:m?"Pause":"Play",width:50,height:22,className:"pointer-events-none"})}),g.jsx("button",{onClick:ue,className:Pe("flex items-center justify-center disabled:opacity-50 focus:outline-none","hover:brightness-75 active:brightness-50"),disabled:o.length===0,children:g.jsx("img",{src:"/assets/videos/next.png",alt:"Next",width:32,height:22,className:"pointer-events-none"})})]})}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("div",{className:"flex gap-0",children:[g.jsx(Re,{onClick:ye,variant:"player","data-state":T?"on":"off",className:"h-[22px] px-2",children:"SHUFFLE"}),g.jsx(Re,{onClick:()=>C(!S),variant:"player","data-state":S?"on":"off",className:"h-[22px] px-2",children:"REPEAT"}),g.jsx(Re,{onClick:()=>w(!v),variant:"player","data-state":v?"on":"off",className:"h-[22px] px-2",children:v?"":""})]}),g.jsx(Re,{onClick:()=>L(!0),variant:"player",className:"h-[22px] px-2",children:"ADD"})]})]})]})]}),g.jsx(Ns,{isOpen:A,onOpenChange:V,helpItems:hj,appName:"Videos"}),g.jsx(As,{isOpen:F,onOpenChange:U,metadata:O0}),g.jsx(Ts,{isOpen:B,onOpenChange:q,onConfirm:()=>{a([]),d(0),y(!1),q(!1)},title:"Clear Playlist",description:"Are you sure you want to clear the entire playlist? This action cannot be undone."}),g.jsx($l,{isOpen:I,onOpenChange:L,onSubmit:ke,title:"Add Video",description:"Enter YouTube, Vimeo, or a video URL",value:O,onChange:D})]})]}):null}const hj=[{icon:"",title:"Add Video",description:"Paste any YouTube URL to add to playlist"},{icon:"",title:"Playback",description:"Play, pause, next, previous controls"},{icon:"",title:"Loop",description:"Loop current video or entire playlist"},{icon:"",title:"Shuffle",description:"Randomize playlist order"},{icon:"",title:"Playlist",description:"Manage and organize your video playlist"},{icon:"",title:"Retro UI",description:"Classic QuickTime player aesthetics"}],O0={name:"Videos",version:"0.1",creator:{name:"Ryo Lu",url:"https://ryo.lu"},github:"https://github.com/ryokun6/ryos",icon:"/icons/videos.png"},oE={id:"videos",name:"Videos",icon:{type:"image",src:O0.icon},description:"A retro-style YouTube playlist player",component:Wte,helpItems:hj,metadata:O0};function $te({onClose:n,onShowHelp:e,onShowAbout:t,onSaveState:r,onLoadState:s,onReset:i,onLoadGame:o,selectedGame:a,onSetMouseCapture:c,onSetFullScreen:d,onSetRenderAspect:h,onSetMouseSensitivity:f,isMouseCaptured:m,isFullScreen:y,currentRenderAspect:v,mouseSensitivity:w}){const S=cf(),C=["AsIs","1/1","5/4","4/3","16/10","16/9","Fit"],T=[.25,.5,.75,1,1.25,1.5,2];return g.jsxs(Rs,{children:[g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 text-md px-2 py-1 border-none hover:bg-gray-200 active:bg-gray-900 active:text-white focus-visible:ring-0",children:"File"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsxs(iu,{children:[g.jsx(al,{className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Load Game"}),g.jsx(ll,{className:"px-0",children:S.map(k=>g.jsx(de,{onClick:()=>o(k),className:`text-md h-6 px-3 active:bg-gray-900 active:text-white ${a.id===k.id?"bg-gray-100":""}`,children:k.name},k.id))})]}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:r,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Save State"}),g.jsx(de,{onClick:s,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Load State"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:i,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Reset"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:n,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Close"})]})]}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 px-2 py-1 text-md focus-visible:ring-0 hover:bg-gray-200 active:bg-gray-900 active:text-white",children:"Controls"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{onClick:()=>d(!y),className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Full Screen"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:()=>c(!m),className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Toggle Mouse Capture"}),g.jsxs(iu,{children:[g.jsx(al,{className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Mouse Sensitivity"}),g.jsx(ll,{className:"px-0",children:T.map(k=>g.jsxs(de,{onClick:()=>f(k),className:`text-md h-6 px-3 active:bg-gray-900 active:text-white ${w===k?"bg-gray-100":""}`,children:[k,"x"]},k))})]}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsxs(iu,{children:[g.jsx(al,{className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Aspect Ratio"}),g.jsx(ll,{className:"px-0",children:C.map(k=>g.jsx(de,{onClick:()=>h(k),className:`text-md h-6 px-3 active:bg-gray-900 active:text-white ${v===k?"bg-gray-100":""}`,children:k},k))})]})]})]}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 px-2 py-1 text-md focus-visible:ring-0 hover:bg-gray-200 active:bg-gray-900 active:text-white",children:"Help"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{onClick:e,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Virtual PC Help"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:t,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"About Virtual PC"})]})]})]})}let aE=null,lE=!1;function Hte(){const[n,e]=b.useState(lE);return b.useEffect(()=>{if(!aE&&!window.Dos){console.log("Loading js-dos script...");const t=document.createElement("script");t.src="https://v8.js-dos.com/latest/js-dos.js",t.async=!0,t.onload=()=>{console.log("js-dos script loaded successfully"),setTimeout(()=>{console.log("Checking if Dos function is available:",!!window.Dos),lE=!0,e(!0)},1e3)},t.onerror=r=>{console.error("Failed to load js-dos script:",r)},aE=t,document.body.appendChild(t)}return()=>{}},[]),{isScriptLoaded:n}}function Ute({isWindowOpen:n,onClose:e,isForeground:t}){const[r,s]=b.useState(!1),[i,o]=b.useState(!1),[a,c]=b.useState(!1),[d,h]=b.useState(!1),{isScriptLoaded:f}=Hte(),[m,y]=b.useState(()=>cf()[0]),[v,w]=b.useState(null),[S,C]=b.useState(!1),[T,k]=b.useState(!1),[M,N]=b.useState(!1),[O,D]=b.useState("4/3"),[I,L]=b.useState(1),A=b.useRef(null),V=b.useRef(null);b.useEffect(()=>{!n&&V.current&&(console.log("Stopping dosbox instance..."),V.current.stop().then(()=>{console.log("Dosbox instance stopped"),V.current=null,C(!1),A.current&&(A.current.innerHTML="")}).catch(W=>{console.error("Error stopping dosbox:",W),V.current=null,C(!1),A.current&&(A.current.innerHTML="")}))},[n]),b.useEffect(()=>()=>{V.current&&(console.log("Cleaning up dosbox instance on unmount..."),V.current.stop().catch(console.error),V.current=null,A.current&&(A.current.innerHTML=""))},[]),b.useEffect(()=>{f&&v&&(console.log("Loading pending game:",v),K(v),w(null))},[f,v]);const F=W=>{k(W),V.current&&V.current.setMouseCapture(W)},U=W=>{N(W),V.current&&V.current.setFullScreen(W)},B=W=>{D(W),V.current&&V.current.setRenderAspect(W)},q=W=>{L(W),V.current&&V.current.setMouseSensitivity(W)},K=async W=>{if(y(W),C(!0),!A.current){console.error("Container ref is null");return}if(!window.Dos){if(console.error("Dos function is not available"),!f){console.log("Script not loaded yet, queuing game load..."),w(W);return}return}if(!f){console.log("Script not fully loaded yet, queuing game load..."),w(W);return}try{console.log("Starting game load..."),console.log("Selected game:",W),console.log("Container dimensions:",{width:A.current.offsetWidth,height:A.current.offsetHeight}),h(!0),V.current&&(console.log("Stopping existing instance..."),await V.current.stop(),V.current=null),A.current.innerHTML="",await new Promise(j=>setTimeout(j,100)),console.log("Creating new Dos instance...");const P={url:W.path,theme:"dark",renderAspect:O,renderBackend:"webgl",imageRendering:"pixelated",mouseCapture:T,mouseSensitivity:I,workerThread:!0,autoStart:!0,kiosk:!0,onEvent:(j,J)=>{console.log("js-dos event:",j,J),j==="emu-ready"?console.log("Emulator is ready"):j==="ci-ready"?(console.log("Command interface is ready"),h(!1)):j==="bnd-play"?console.log("Play button clicked"):j==="exit"&&(console.log("Program terminated:",J),A.current&&(A.current.innerHTML="",K(m)))},onload:()=>{console.log("Game bundle loaded successfully")},onerror:j=>{console.error("Failed to load game:",j),h(!1)}};console.log("Dos options:",P),V.current=window.Dos(A.current,P),console.log("Dos instance created:",!!V.current)}catch(P){console.error("Failed to start DOSBox:",P),h(!1)}},G=()=>{console.log("Save state not available in v8")},$=()=>{console.log("Load state not available in v8")},z=async()=>{A.current&&(V.current&&(console.log("Stopping dosbox instance before reset..."),await V.current.stop(),V.current=null),A.current.innerHTML="",C(!1)),c(!1)};return n?g.jsxs(g.Fragment,{children:[g.jsx($te,{onClose:e,onShowHelp:()=>s(!0),onShowAbout:()=>o(!0),onSaveState:G,onLoadState:$,onReset:()=>c(!0),onLoadGame:K,selectedGame:m,onSetMouseCapture:F,onSetFullScreen:U,onSetRenderAspect:B,onSetMouseSensitivity:q,isMouseCaptured:T,isFullScreen:M,currentRenderAspect:O,mouseSensitivity:I}),g.jsxs(ai,{title:"Virtual PC",onClose:e,isForeground:t,appId:"pc",children:[g.jsx("div",{className:"flex flex-col h-full w-full bg-[#1a1a1a]",children:g.jsxs("div",{className:"flex-1 relative h-full",children:[g.jsx("div",{id:"dosbox",ref:A,className:`w-full h-full ${S?"block":"hidden"}`,style:{minHeight:"400px",position:"relative"}}),d&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50",children:g.jsx("div",{className:"px-4 py-2 rounded bg-black/50 backdrop-blur-sm",children:g.jsxs("div",{className:"font-geneva-12 text-sm shimmer",children:["Loading ",m.name,"..."]})})}),!S&&g.jsxs("div",{className:"flex flex-col h-full",children:[g.jsx("div",{className:"bg-black px-4 py-2 border-b border-[#3a3a3a]",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("div",{className:"font-apple-garamond text-white text-lg",children:"Virtual PC"}),g.jsx("div",{className:"font-geneva-12 text-gray-400 text-[12px] flex items-center gap-2",children:f?`${cf().length} PROGRAMS AVAILABLE`:g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-3 h-3 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}),"LOADING EMULATOR"]})})]})}),g.jsx("div",{className:"flex-1 p-4 overflow-y-auto flex justify-start md:justify-center w-full",children:g.jsx("div",{className:`grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 transition-opacity duration-300 w-full ${f?"opacity-100":"opacity-50 pointer-events-none"}`,children:cf().map(W=>g.jsx(ei.button,{onClick:()=>K(W),className:"group relative aspect-video rounded overflow-hidden bg-[#2a2a2a] hover:bg-[#3a3a3a] transition-all duration-200 shadow-[0_4px_12px_rgba(0,0,0,0.5)] hover:shadow-[0_8px_24px_rgba(0,0,0,0.7)] border border-[#3a3a3a] hover:border-[#4a4a4a] w-full h-full",style:{aspectRatio:"16/9"},whileHover:{scale:1.05,y:-2,transition:{duration:.08,ease:"linear"}},whileTap:{scale:.95,y:0,transition:{type:"spring",duration:.15}},children:g.jsxs("div",{className:"relative w-full h-full",children:[g.jsx("img",{src:W.image,alt:W.name,className:"w-full h-full object-cover",width:320,height:180,loading:"lazy"}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-3",children:g.jsx("span",{className:"text-white font-geneva-12 text-[12px]",children:W.name})})]})},W.id))})})]})]})}),g.jsx(Ns,{isOpen:r,onOpenChange:s,helpItems:pj,appName:"Virtual PC"}),g.jsx(As,{isOpen:i,onOpenChange:o,metadata:fj}),g.jsx(Ts,{isOpen:a,onOpenChange:c,onConfirm:z,title:"Reset Virtual PC",description:"Are you sure you want to reset the PC? This will clear all current state."})]})]}):null}const fj={name:"Virtual PC",version:"1.0.0",creator:{name:"Ryo",url:"https://github.com/ryokun6"},github:"https://github.com/ryokun6/ryos",icon:"/icons/pc.png"},pj=[{icon:"",title:"PC Emulator",description:"Run classic DOS games and applications in your browser"},{icon:"",title:"Keyboard Controls",description:"Use your keyboard to control the DOS environment"},{icon:"",title:"Save States",description:"Save and load your game progress"}],cE={id:"pc",name:"Virtual PC",icon:{type:"image",src:"/icons/pc.png"},description:"DOSBox Emulator",component:Ute,windowConstraints:{minWidth:640,minHeight:480},helpItems:pj,metadata:fj},qte={defaultSize:{width:730,height:475},minSize:{width:300,height:200}},pd={[$k.id]:{...$k,windowConfig:{defaultSize:{width:400,height:300},minSize:{width:300,height:200}}},[Wk.id]:{...Wk,windowConfig:{defaultSize:{width:650,height:475},minSize:{width:550,height:375}}},[mk.id]:{...mk,windowConfig:{defaultSize:{width:730,height:600},minSize:{width:400,height:300}}},[Hk.id]:{...Hk,windowConfig:{defaultSize:{width:713,height:480},minSize:{width:400,height:400},maxSize:{width:713,height:535}}},[oE.id]:{...oE,windowConfig:{defaultSize:{width:400,height:389},minSize:{width:400,height:340}}},[cE.id]:{...cE,windowConfig:{defaultSize:{width:645,height:511},minSize:{width:645,height:511},maxSize:{width:645,height:511}}},[pk.id]:{...pk,windowConfig:{defaultSize:{width:368,height:475},minSize:{width:368,height:200}}},[zk.id]:{...zk,windowConfig:{defaultSize:{width:305,height:400},minSize:{width:305,height:400},maxSize:{width:305,height:400}}},[Bk.id]:{...Bk,windowConfig:{defaultSize:{width:365,height:400},minSize:{width:320,height:400},maxSize:{width:365,height:600}}}},mj=n=>{const e=pd[n];return typeof e.icon=="string"?e.icon:e.icon.src},gj=()=>Object.entries(pd).filter(([n])=>n!=="finder").map(([n,e])=>({name:e.name,icon:mj(n),id:n})),Gte=n=>pd[n].component,am=n=>pd[n].windowConfig||qte,Kte=n=>{const e=am(n);return e.mobileDefaultSize?e.mobileDefaultSize:{width:window.innerWidth,height:e.defaultSize.height}},me={soundboard:{BOARDS:"soundboard:boards",WINDOW:"soundboard:window",SELECTED_DEVICE_ID:"soundboard:selectedDeviceId",HAS_SEEN_HELP:"soundboard:hasSeenHelp"},"internet-explorer":{WINDOW:"internet-explorer:window",HISTORY:"internet-explorer:history",FAVORITES:"internet-explorer:favorites",LAST_URL:"internet-explorer:last-url"},chats:{WINDOW:"chats:window",MESSAGES:"chats:messages",HAS_SEEN_HELP:"chats:hasSeenHelp"},textedit:{WINDOW:"textedit:window",CONTENT:"textedit:content",HAS_SEEN_HELP:"textedit:hasSeenHelp",LAST_FILE_PATH:"textedit:last-file-path"},"control-panels":{WINDOW:"control-panels:window",HAS_SEEN_HELP:"control-panels:hasSeenHelp",DESKTOP_VISIBLE:"control-panels:desktop-visible",WALLPAPER:"control-panels:wallpaper",UI_SOUNDS_ENABLED:"control-panels:ui-sounds-enabled",CHAT_SYNTH_ENABLED:"control-panels:chat-synth-enabled",TYPING_SYNTH_ENABLED:"control-panels:typing-synth-enabled",SYNTH_PRESET:"control-panels:synth-preset"},minesweeper:{WINDOW:"minesweeper:window",HAS_SEEN_HELP:"minesweeper:hasSeenHelp"},finder:{WINDOW:"finder:window",CURRENT_PATH:"finder:current-path",DOCUMENTS:"finder:documents",IMAGES:"finder:images",TRASH:"finder:trash"},paint:{WINDOW:"paint:window",HAS_SEEN_HELP:"paint:hasSeenHelp",LAST_FILE_PATH:"paint:lastFilePath"},videos:{WINDOW:"videos:window",HAS_SEEN_HELP:"videos:hasSeenHelp",PLAYLIST:"videos:playlist",CURRENT_INDEX:"videos:currentIndex",IS_LOOP_ALL:"videos:isLoopAll",IS_LOOP_CURRENT:"videos:isLoopCurrent",IS_SHUFFLED:"videos:isShuffled"},pc:{WINDOW:"pc:window",HAS_SEEN_HELP:"pc:hasSeenHelp",SAVE_STATE:"pc:saveState",GAMES:"pc:games"}},Yte=n=>{const e=me[n].WINDOW,t=localStorage.getItem(e);if(t)return JSON.parse(t);const r=window.innerWidth<768,s=28,i=am(n);return{position:{x:r?0:16+Object.keys(me).indexOf(n)*32,y:r?s:40+Object.keys(me).indexOf(n)*20},size:r?Kte(n):i.defaultSize}},uE=(n,e)=>{const t=me[n].WINDOW;localStorage.setItem(t,JSON.stringify(e))},Xte=async()=>{const n=localStorage.getItem(me.soundboard.BOARDS);if(n)return JSON.parse(n);try{const t=await(await fetch("/soundboards.json")).json(),s=(t.boards||[t]).map(i=>({...i,id:Date.now().toString()+Math.random().toString(36).slice(2),slots:i.slots.map(o=>({audioData:o.audioData,emoji:o.emoji,title:o.title}))}));return ys(s),s}catch(e){console.error("Error loading initial boards:",e);const t=P0();return ys([t]),[t]}},ys=n=>{const e=n.map(t=>({...t,slots:t.slots.map(r=>({audioData:r.audioData,emoji:r.emoji,title:r.title}))}));localStorage.setItem(me.soundboard.BOARDS,JSON.stringify(e))},Jte=()=>localStorage.getItem(me.soundboard.SELECTED_DEVICE_ID)||"",Zte=n=>{localStorage.setItem(me.soundboard.SELECTED_DEVICE_ID,n)},P0=()=>({id:"default",name:"New Soundboard",slots:Array(9).fill({audioData:null,emoji:void 0,title:void 0})}),Qte=()=>localStorage.getItem(me.soundboard.HAS_SEEN_HELP)==="true",ene=()=>{localStorage.setItem(me.soundboard.HAS_SEEN_HELP,"true")},tne=[{title:"Apple",url:"https://apple.com",favicon:"https://www.google.com/s2/favicons?domain=apple.com&sz=32",year:"2002"},{title:"EveryNoise",url:"https://everynoise.com/engenremap.html",favicon:"https://www.google.com/s2/favicons?domain=ryo.lu&sz=32",year:"2024"},{title:"HyperCards",url:"https://hcsimulator.com",favicon:"https://www.google.com/s2/favicons?domain=hcsimulator.com&sz=32",year:"current"}],nne=()=>{const n=localStorage.getItem(me["internet-explorer"].FAVORITES);return n?JSON.parse(n):tne},dE=n=>{localStorage.setItem(me["internet-explorer"].FAVORITES,JSON.stringify(n))},yj="app:state",rne=()=>{const n=localStorage.getItem(yj),e={windowOrder:[],apps:Object.keys(me).reduce((t,r)=>({...t,[r]:{isOpen:!1}}),{})};if(n){const t=JSON.parse(n);if(!("windowOrder"in t)){const s=t;return{windowOrder:Object.entries(s).filter(([,i])=>i.isOpen).sort((i,o)=>(i[1].zIndex||0)-(o[1].zIndex||0)).map(([i])=>i),apps:Object.entries(s).reduce((i,[o,a])=>({...i,[o]:{isOpen:a.isOpen,position:a.position,isForeground:a.isForeground}}),{})}}const r=t;return{windowOrder:r.windowOrder,apps:{...e.apps,...r.apps}}}return e},sne=n=>{localStorage.setItem(yj,JSON.stringify(n))},vj="https://apple.com",xj="2002",hE=()=>localStorage.getItem(me["internet-explorer"].LAST_URL)||vj,ine=n=>{localStorage.setItem(me["internet-explorer"].LAST_URL,n)},wj=()=>{const n=localStorage.getItem(me["internet-explorer"].HISTORY);return n?JSON.parse(n):[]},one=n=>{localStorage.setItem(me["internet-explorer"].HISTORY,JSON.stringify(n))},ane=n=>{const e=wj(),t={...n,timestamp:Date.now()};e.unshift(t),one(e.slice(0,100))},fE=()=>localStorage.getItem(me["internet-explorer"].LAST_URL+":year")||xj,lne=n=>{localStorage.setItem(me["internet-explorer"].LAST_URL+":year",n)},pE=()=>{let n=0,e=0;try{n=10*1024*1024;for(let t=0;t<localStorage.length;t++){const r=localStorage.key(t);if(r){const s=localStorage.getItem(r);s&&(e+=s.length*2)}}}catch(t){console.error("Error calculating storage space:",t)}return{total:n,used:e,available:n-e,percentUsed:Math.round(e/n*100)}},mE=()=>localStorage.getItem(me["control-panels"].WALLPAPER)||"/wallpapers/tiles/default.png",cne=n=>{localStorage.setItem(me["control-panels"].WALLPAPER,n)},bj=()=>localStorage.getItem(me["control-panels"].UI_SOUNDS_ENABLED)!=="false",une=n=>{localStorage.setItem(me["control-panels"].UI_SOUNDS_ENABLED,n.toString())},dne=()=>localStorage.getItem(me["control-panels"].TYPING_SYNTH_ENABLED)==="true",hne=n=>{localStorage.setItem(me["control-panels"].TYPING_SYNTH_ENABLED,n.toString())},fne=()=>{localStorage.removeItem(me.soundboard.BOARDS),localStorage.removeItem(me.soundboard.WINDOW),localStorage.removeItem(me.soundboard.SELECTED_DEVICE_ID),localStorage.removeItem(me.soundboard.HAS_SEEN_HELP),localStorage.removeItem(me["internet-explorer"].WINDOW),localStorage.removeItem(me["internet-explorer"].HISTORY),localStorage.removeItem(me["internet-explorer"].FAVORITES),localStorage.removeItem(me["internet-explorer"].LAST_URL),localStorage.removeItem(me.chats.WINDOW),localStorage.removeItem(me.chats.MESSAGES),localStorage.removeItem(me.chats.HAS_SEEN_HELP),localStorage.removeItem(me.textedit.WINDOW),localStorage.removeItem(me.textedit.CONTENT),localStorage.removeItem(me.textedit.HAS_SEEN_HELP),localStorage.removeItem(me.textedit.LAST_FILE_PATH),localStorage.removeItem(me["control-panels"].WINDOW),localStorage.removeItem(me["control-panels"].HAS_SEEN_HELP),localStorage.removeItem(me["control-panels"].DESKTOP_VISIBLE),localStorage.removeItem(me["control-panels"].WALLPAPER),localStorage.removeItem(me["control-panels"].UI_SOUNDS_ENABLED),localStorage.removeItem(me["control-panels"].CHAT_SYNTH_ENABLED),localStorage.removeItem(me["control-panels"].TYPING_SYNTH_ENABLED),localStorage.removeItem(me["control-panels"].SYNTH_PRESET),localStorage.removeItem(me.minesweeper.WINDOW),localStorage.removeItem(me.minesweeper.HAS_SEEN_HELP),localStorage.removeItem(me.finder.WINDOW),localStorage.removeItem(me.finder.CURRENT_PATH),localStorage.removeItem(me.finder.DOCUMENTS),localStorage.removeItem(me.finder.IMAGES),localStorage.removeItem(me.finder.TRASH),localStorage.removeItem(me.paint.WINDOW),localStorage.removeItem(me.paint.HAS_SEEN_HELP),localStorage.removeItem(me.paint.LAST_FILE_PATH),localStorage.removeItem(me.videos.WINDOW),localStorage.removeItem(me.videos.HAS_SEEN_HELP),localStorage.removeItem(me.videos.PLAYLIST),localStorage.removeItem(me.videos.CURRENT_INDEX),localStorage.removeItem(me.videos.IS_LOOP_ALL),localStorage.removeItem(me.videos.IS_LOOP_CURRENT),localStorage.removeItem(me.videos.IS_SHUFFLED),localStorage.removeItem(me.pc.WINDOW),localStorage.removeItem(me.pc.HAS_SEEN_HELP),localStorage.removeItem(me.pc.SAVE_STATE),localStorage.removeItem("desktop:icons"),localStorage.removeItem("app:state"),localStorage.removeItem("synthPreset"),localStorage.removeItem("displayMode")},Sj="synthPreset";function pne(){return localStorage.getItem(Sj)}function mne(n){localStorage.setItem(Sj,n)}const gne=[{id:"YYyskjq1vSc",url:"https://www.youtube.com/watch?v=xVAulCSj_Lw",title:"One Turntable Loop Pedal Funk 45 - Cut Chemist"},{id:"m7Ct6cR_NS4",url:"https://youtu.be/JRnDYB28bL8?si=eNi15ueW6AYK9z2u",title:"Severance  Music To Refine To feat. ODESZA"},{id:"GYLUSHZl8M0",url:"https://www.youtube.com/watch?v=YWaTsluOXNY",title:"Veneno - La Dame Blanche"},{id:"pSUydWEqKwE",url:"https://www.youtube.com/watch?v=-zqgzn6HbQs",title:"My Year (Official Visualiser) - MORGAN"},{id:"ZncbtRo7RXs",url:"https://www.youtube.com/watch?v=N4bFqW_eu2I",title:"House Of The Rising Sun - The Animals"},{id:"Q3K0TOvTOno",url:"https://youtube.com/shorts/iwJkqBwXZw8?si=6xLGCzry6emvFRUj",title:"C.R.E.A.M. - Zeus Martinez"},{id:"FonjL7DQAUQ",url:"https://www.youtube.com/watch?v=eWAdpUyzCkI",title:"ExtraL - JENNIE, Doechii"},{id:"Rk6aQvlmsWo",url:"https://www.youtube.com/watch?v=0G383538qzQ",title:"Colors (Official Live Session) - Black Pumas"},{id:"_wgeHqXr4Hc",url:"https://www.youtube.com/watch?v=-osHKZS6KGM",title:"Finesse - Michael Prince"},{id:"DskqpUrvlmw",url:"https://www.youtube.com/watch?v=a1Femq4NPxs",title:"BAILE INoLVIDABLE - Bad Bunny"}],yne=()=>{const n=localStorage.getItem(me.videos.PLAYLIST);return n?JSON.parse(n):gne},vne=n=>{localStorage.setItem(me.videos.PLAYLIST,JSON.stringify(n))},xne=()=>{const n=localStorage.getItem(me.videos.CURRENT_INDEX);return n?parseInt(n):0},wne=n=>{localStorage.setItem(me.videos.CURRENT_INDEX,n.toString())},bne=()=>{const n=localStorage.getItem(me.videos.IS_LOOP_ALL);return n===null?!0:n==="true"},Sne=n=>{localStorage.setItem(me.videos.IS_LOOP_ALL,n.toString())},Cne=()=>localStorage.getItem(me.videos.IS_LOOP_CURRENT)==="true",_ne=n=>{localStorage.setItem(me.videos.IS_LOOP_CURRENT,n.toString())},Tne=()=>{const n=localStorage.getItem(me.videos.IS_SHUFFLED);return n===null?!0:n==="true"},kne=n=>{localStorage.setItem(me.videos.IS_SHUFFLED,n.toString())},Ene=[{id:"doom",name:"Doom",path:"https://cdn.dos.zone/custom/dos/doom.jsdos",image:"https://dos.zone/images/containers/assets/backgrounds/doom_1.jpg/4f71dd317326a9a9722bdd9cd2151390.webp"},{id:"simcity2000",name:"SimCity 2000",path:"https://cdn.dos.zone/original/2X/b/b1ed3b93829bdff0c9062c5642767825dd52baf1.jsdos",image:"https://dos.zone/images/http/original/2X/4/41f12cbd023b7732e669b6ade8e811bb5e7c28b1.jpeg/082780351bd2601b6da9741b2ed45eed.webp"},{id:"mario",name:"Mario & Luigi",path:"https://cdn.dos.zone/custom/dos/mario-luigi.jsdos",image:"https://dos.zone/images/http/original/2X/8/8e82677e3744f3d72049b6a8042412066312198e.png/cf6f1f35180540104cdb09ae7d909ca2.webp"},{id:"ageofempires",name:"Age of Empires",path:"https://cdn.dos.zone/custom/dos/aoe-nic.jsdos",image:"https://dos.zone/images/containers/assets/backgrounds/aoe.jpg/8e9b9790eb7b714952713aafc169c802.webp"},{id:"ageofempires2",name:"Age of Empires II",path:"https://br.cdn.dos.zone/published/br.clfmbm.AgeOfEmpires2eng.jsdos",image:"https://dos.zone/images/containers/assets/backgrounds/clfmbm.ss_9ccf9acb373b3e26f9e42a053147845561b2c224.1920x1080.jpg/6d8639336a03258300ab31f690f569ba.webp"},{id:"princeofpersia",name:"Prince of Persia",path:"https://cdn.dos.zone/original/2X/1/1179a7c9e05b1679333ed6db08e7884f6e86c155.jsdos",image:"https://dos.zone/images/http/original/2X/9/9c5f757776e4e9891e063c3e935889ec857dce92.jpeg/66435bae6f294c35ad3c7de8a48f90cf.webp"},{id:"aladdin",name:"Aladdin",path:"https://cdn.dos.zone/original/2X/6/64ae157f1baa4317f626ccbc74364d9da87d5558.jsdos",image:"https://dos.zone/images/http/original/2X/0/0c804843419df5ca544296ed56b41967b0c6a0d9.gif/7847075ce59afcb0c973b259f6e92946.webp"},{id:"oregontrail",name:"The Oregon Trail",path:"https://cdn.dos.zone/original/2X/5/53e616496b4da1d95136e235ad90c9cc3f3f760d.jsdos",image:"https://dos.zone/images/http/original/2X/1/1df856616f960f116e21b33a2fa104bd86f6ee33.jpeg/4756dbf35d654c8815b708c03cc0df22.webp"},{id:"commandandconquer",name:"Command & Conquer",path:"https://cdn.dos.zone/custom/dos/cc_gdi_novid.jsdos",image:"https://dos.zone/images/http/original/2X/a/ae3116154ac2b9725465dc1fe59fa39507886432.png/7bf1bed5bf22f0a6ecc8c7fb43d74591.webp"}],cf=()=>{const n=localStorage.getItem(me.pc.GAMES);return n?JSON.parse(n):Ene};let av=null;const lv=new Map,gE=new Set,Bi=()=>(av||(av=new AudioContext),av),Cj=async n=>{if(lv.has(n))return lv.get(n);try{const t=await(await fetch(n)).arrayBuffer(),r=await Bi().decodeAudioData(t);return lv.set(n,r),r}catch(e){throw console.error("Error loading sound:",e),e}},Nne=async n=>{await Promise.all(n.map(Cj))};function pt(n,e=.3){const t=b.useRef(null);b.useEffect(()=>(t.current=Bi().createGain(),t.current.gain.value=e,t.current.connect(Bi().destination),()=>{t.current&&t.current.disconnect()}),[e]);const r=b.useCallback(async()=>{if(bj())try{const a=await Cj(n),c=Bi().createBufferSource();c.buffer=a,c.connect(t.current),t.current.gain.value=e,c.start(0),gE.add(c),c.onended=()=>{gE.delete(c)}}catch(a){console.error("Error playing sound:",a)}},[e,n]),s=b.useCallback(()=>{t.current&&(t.current.gain.value=0)},[]),i=b.useCallback((a=.5)=>{t.current&&(t.current.gain.setValueAtTime(e,Bi().currentTime),t.current.gain.linearRampToValueAtTime(0,Bi().currentTime+a))},[e]),o=b.useCallback((a=.5)=>{t.current&&(t.current.gain.setValueAtTime(0,Bi().currentTime),t.current.gain.linearRampToValueAtTime(e,Bi().currentTime+a))},[e]);return{play:r,stop:s,fadeOut:i,fadeIn:o}}const ut={ALERT_SOSUMI:"/sounds/AlertSosumi.mp3",WINDOW_CLOSE:"/sounds/WindowClose.mp3",WINDOW_OPEN:"/sounds/WindowOpen.mp3",BUTTON_CLICK:"/sounds/ButtonClickDown.mp3",MENU_OPEN:"/sounds/MenuOpen.mp3",MENU_CLOSE:"/sounds/MenuClose.mp3",WINDOW_MOVE_MOVING:"/sounds/WindowMoveMoving.mp3",WINDOW_MOVE_STOP:"/sounds/WindowMoveStop.mp3",WINDOW_RESIZE_RESIZING:"/sounds/WindowResizeResizing.mp3",WINDOW_RESIZE_STOP:"/sounds/WindowResizeStop.mp3",CLICK:"/sounds/Click.mp3",ALERT_BONK:"/sounds/AlertBonk.mp3",ALERT_INDIGO:"/sounds/AlertIndigo.mp3",MSN_NUDGE:"/sounds/MSNNudge.mp3",VIDEO_TAPE:"/sounds/VideoTapeIn.mp3"};Nne(Object.values(ut));const Ane=_E("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground  hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",retro:"border-[5px] border-solid border-transparent [border-image:url('/button.svg')_30_stretch] active:[border-image:url('/button-default.svg')_60_stretch] focus:[border-image:url('/button-default.svg')_60_stretch] shadow-none focus:outline-none focus:ring-0",player:"text-[9px] flex items-center justify-center focus:outline-none relative min-w-[45px] h-[20px] border border-solid border-transparent [border-image:url('/assets/videos/switch.png')_1_fill] [border-image-slice:1] bg-none font-geneva-12 text-black hover:brightness-90 active:brightness-50 [&[data-state=on]]:brightness-60"},size:{default:"h-9 px-4 py-2",sm:"h-8 px-3 text-xs",lg:"h-10 px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Re=b.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},i)=>{const{play:o}=pt(ut.BUTTON_CLICK),a=r?eo:"button",c=d=>{var h;o(),(h=s.onClick)==null||h.call(s,d)};return g.jsx(a,{className:Pe(Ane({variant:e,size:t,className:n})),ref:i,...s,onClick:c})});Re.displayName="Button";function Mne({isOpen:n,onOpenChange:e}){const{appStates:t}=ep(),r=b.useMemo(()=>{const c=gj().filter(h=>{var f;return(f=t[h.id])==null?void 0:f.isOpen});return[{name:"System",memoryMB:8.5,percentage:8.5/32*100},...c.map((h,f)=>{const m=1.5+f*.5;return{name:h.name,memoryMB:m,percentage:m/32*100}})]},[t]),s=b.useMemo(()=>r.reduce((i,o)=>i+o.memoryMB,0),[r]);return g.jsx(Wl,{open:n,onOpenChange:e,children:g.jsxs(ia,{className:"bg-system7-window-bg border-2 border-black rounded-lg shadow-[2px_2px_0px_0px_rgba(0,0,0,0.5)] max-w-[400px] focus:outline-none",children:[g.jsx(oa,{children:"About This Computer"}),g.jsx("div",{className:"flex",children:g.jsxs("div",{className:"space-y-3 flex-1 ",children:[g.jsxs("div",{className:"flex flex-row items-center space-x-2 p-2 px-4",children:[g.jsxs("div",{className:"flex flex-col w-1/3 items-center space-x-2",children:[g.jsx("img",{src:"/icons/mac-classic.png",alt:"Happy Mac",className:"w-10 h-10 mb-0 [image-rendering:pixelated]"}),g.jsx("div",{className:"font-apple-garamond text-xl",children:"JasCore 1.0"})]}),g.jsx("div",{className:"space-y-4 font-geneva-12 text-[10px]",children:g.jsxs("div",{children:[g.jsx("div",{children:"Built-in Memory: 32MB"}),g.jsx("div",{children:"Virtual Memory: Off"}),g.jsxs("div",{children:["Largest Unused Block: ",(32-s).toFixed(1),"MB"]}),g.jsxs("div",{className:"text-[10px] text-gray-500  mt-2  font-geneva-12 text-[10px]",children:[" Jasmine Sarabia. 1992-",new Date().getFullYear()]})]})})]}),g.jsx("hr",{className:"border-gray-300"}),g.jsx("div",{className:"space-y-2 font-geneva-12 text-[10px] p-2 px-4 pb-4",children:r.map((i,o)=>g.jsxs("div",{className:"flex flex-row gap-1",children:[g.jsxs("div",{className:"flex justify-between w-full",children:[g.jsx("div",{className:"w-1/2 truncate",children:i.name}),g.jsxs("div",{className:"w-1/3",children:[i.memoryMB.toFixed(1)," MB"]})]}),g.jsx("div",{className:"h-2 bg-gray-200 w-full ",children:g.jsx("div",{className:"h-full bg-gray-900 ",style:{width:`${i.percentage}%`}})})]},o))})]})})]})})}function One({apps:n}){const[e,t]=b.useState(!1),{appStates:r,toggleApp:s,bringToForeground:i}=ep(),o=a=>{var d;((d=r[a])==null?void 0:d.isOpen)?i(a):s(a)};return g.jsxs(g.Fragment,{children:[g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 text-md px-3 py-1 border-none hover:bg-gray-200 active:bg-gray-900 active:text-white focus-visible:ring-0",children:""})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{onClick:()=>t(!0),className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"About This Computer"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),n.map(a=>g.jsxs(de,{onClick:()=>o(a.id),className:"text-md h-6 px-3 active:bg-gray-900 active:text-white flex items-center gap-2",children:[typeof a.icon=="string"?g.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:a.icon}):g.jsx("img",{src:a.icon.src,alt:"",className:"w-4 h-4 [image-rendering:pixelated]"}),a.name]},a.id))]})]}),g.jsx(Mne,{isOpen:e,onOpenChange:t})]})}const Pne=[{icon:"",title:"Browse Files",description:"Navigate through your files and folders"},{icon:"",title:"Create Folders",description:"Organize your files with new folders"},{icon:"",title:"Delete Files",description:"Remove unwanted files and folders"}],Dne={name:"Finder",version:"1.0.0",creator:{name:"Jasmine",url:"https://github.com/coolstoryjas"},icon:"/icons/mac.png"};function Rne(){const[n,e]=b.useState(new Date);return b.useEffect(()=>{const t=setInterval(()=>{e(new Date)},1e3);return()=>clearInterval(t)},[]),g.jsx("div",{className:"ml-auto mr-2",children:n.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})})}function Ine(){const n=kp(),[e,t]=b.useState(!1),[r,s]=b.useState(!1),i=o=>{n("finder",{initialPath:o})};return g.jsxs(g.Fragment,{children:[g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 text-md px-2 py-1 border-none hover:bg-gray-200 active:bg-gray-900 active:text-white focus-visible:ring-0",children:"File"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{onClick:()=>i("/"),className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"New Finder Window"}),g.jsx(de,{disabled:!0,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"New Folder"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{disabled:!0,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:"Move to Trash"}),g.jsx(de,{disabled:!0,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:"Empty Trash..."}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Close"})]})]}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 text-md px-2 py-1 border-none hover:bg-gray-200 active:bg-gray-900 active:text-white focus-visible:ring-0",children:"Edit"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{disabled:!0,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Undo"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{disabled:!0,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Cut"}),g.jsx(de,{disabled:!0,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Copy"}),g.jsx(de,{disabled:!0,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Paste"}),g.jsx(de,{disabled:!0,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Clear"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{disabled:!0,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Select All"})]})]}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 text-md px-2 py-1 border-none hover:bg-gray-200 active:bg-gray-900 active:text-white focus-visible:ring-0",children:"View"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(at,{checked:!1,className:"text-md h-6 px-3 pl-8 active:bg-gray-900 active:text-white flex justify-between items-center",children:g.jsx("span",{children:"by Small Icon"})}),g.jsx(at,{checked:!0,className:"text-md h-6 px-3 pl-8 active:bg-gray-900 active:text-white flex justify-between items-center",children:g.jsx("span",{children:"by Icon"})}),g.jsx(at,{checked:!1,className:"text-md h-6 px-3 pl-8 active:bg-gray-900 active:text-white flex justify-between items-center",children:g.jsx("span",{children:"by List"})}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(at,{checked:!0,className:"text-md h-6 px-3 pl-8 active:bg-gray-900 active:text-white flex justify-between items-center",children:g.jsx("span",{children:"by Name"})}),g.jsx(at,{checked:!1,className:"text-md h-6 px-3 pl-8 active:bg-gray-900 active:text-white flex justify-between items-center",children:g.jsx("span",{children:"by Date"})}),g.jsx(at,{checked:!1,className:"text-md h-6 px-3 pl-8 active:bg-gray-900 active:text-white flex justify-between items-center",children:g.jsx("span",{children:"by Size"})}),g.jsx(at,{checked:!1,className:"text-md h-6 px-3 pl-8 active:bg-gray-900 active:text-white flex justify-between items-center",children:g.jsx("span",{children:"by Kind"})})]})]}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 text-md px-2 py-1 border-none hover:bg-gray-200 active:bg-gray-900 active:text-white focus-visible:ring-0",children:"Go"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{disabled:!0,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:"Back"}),g.jsx(de,{disabled:!0,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:"Forward"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsxs(de,{onClick:()=>i("/Documents"),className:"text-md h-6 px-3 active:bg-gray-900 active:text-white flex items-center gap-2",children:[g.jsx("img",{src:"/icons/documents.png",alt:"",className:"w-4 h-4 [image-rendering:pixelated]"}),"Documents"]}),g.jsxs(de,{onClick:()=>i("/Applications"),className:"text-md h-6 px-3 active:bg-gray-900 active:text-white flex items-center gap-2",children:[g.jsx("img",{src:"/icons/applications.png",alt:"",className:"w-4 h-4 [image-rendering:pixelated]"}),"Applications"]}),g.jsxs(de,{onClick:()=>i("/Trash"),className:"text-md h-6 px-3 active:bg-gray-900 active:text-white flex items-center gap-2",children:[g.jsx("img",{src:"/icons/trash-empty.png",alt:"",className:"w-4 h-4 [image-rendering:pixelated]"}),"Trash"]})]})]}),g.jsxs(Ue,{children:[g.jsx(Qe,{asChild:!0,children:g.jsx(Re,{variant:"ghost",size:"default",className:"h-6 text-md px-2 py-1 border-none hover:bg-gray-200 active:bg-gray-900 active:text-white focus-visible:ring-0",children:"Help"})}),g.jsxs(qe,{align:"start",sideOffset:1,className:"px-0",children:[g.jsx(de,{onClick:()=>t(!0),className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"Finder Help"}),g.jsx(Le,{className:"h-[2px] bg-black my-1"}),g.jsx(de,{onClick:()=>s(!0),className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:"About Finder"})]})]}),g.jsx(Ns,{isOpen:e,onOpenChange:t,appName:"Finder",helpItems:Pne}),g.jsx(As,{isOpen:r,onOpenChange:s,metadata:Dne})]})}function Rs({children:n}){const{apps:e,appStates:t}=ep(),r=Object.values(t).some(s=>(s==null?void 0:s.isForeground)&&(s==null?void 0:s.isOpen));return g.jsxs("div",{className:"fixed top-0 left-0 right-0 flex bg-system7-menubar-bg border-b-[2px] border-black px-2 h-7 items-center",children:[g.jsx(One,{apps:e}),r?n:g.jsx(Ine,{}),g.jsx(Rne,{})]})}function jne({apps:n,toggleApp:e,onClick:t,desktopStyles:r,wallpaperPath:s}){const[i,o]=b.useState(null),[a,c]=b.useState(s);b.useEffect(()=>{const y=v=>{c(v.detail)};return window.addEventListener("wallpaperChange",y),()=>window.removeEventListener("wallpaperChange",y)},[]),b.useEffect(()=>{c(s)},[s]);const h={...(y=>{const v=y.includes("/wallpapers/tiles/");return{backgroundImage:`url(${y})`,backgroundSize:v?"64px 64px":"cover",backgroundRepeat:v?"repeat":"no-repeat",backgroundPosition:"center",transition:"background-image 0.3s ease-in-out"}})(a),...r},f=(y,v)=>{v.stopPropagation(),o(y)},m=y=>{y.stopPropagation(),localStorage.setItem("app_finder_initialPath","/");const v=n.find(w=>w.id==="finder");v&&e(v.id),o(null)};return g.jsx("div",{className:"absolute inset-0 min-h-screen h-full z-[-1] desktop-background",onClick:t,style:h,children:g.jsx("div",{className:"pt-8 p-4 flex flex-col items-end h-[calc(100%-2rem)]",children:g.jsxs("div",{className:"flex flex-col flex-wrap-reverse justify-start gap-1 content-start h-full",children:[g.jsx(_0,{name:"LaunchPad",isDirectory:!0,icon:"/icons/disk.png",onClick:y=>{y.stopPropagation(),o("macintosh-hd")},onDoubleClick:m,isSelected:i==="macintosh-hd",size:"large"}),n.filter(y=>y.id!=="finder"&&y.id!=="control-panels").map(y=>g.jsx(_0,{name:y.name,isDirectory:!1,icon:mj(y.id),onClick:v=>f(y.id,v),onDoubleClick:v=>{v.stopPropagation(),e(y.id),o(null)},isSelected:i===y.id,size:"large"},y.id))]})})})}const yE=1,Lne=1;function Fne({apps:n}){const[e,t]=b.useState(()=>rne()),{currentWallpaper:r}=mR();b.useEffect(()=>{sne(e)},[e]);const s=d=>{const h=e.windowOrder.indexOf(d);return h===-1?yE:yE+(h+1)*Lne},i=d=>{t(h=>{var y;const f={...h};if(!d)return Object.keys(f.apps).forEach(v=>{f.apps[v]={...f.apps[v],isForeground:!1}}),f;f.windowOrder=[...f.windowOrder.filter(v=>v!==d),d],Object.keys(f.apps).forEach(v=>{f.apps[v]={...f.apps[v],isForeground:v===d}});const m=new CustomEvent("appStateChange",{detail:{appId:d,isOpen:((y=f.apps[d])==null?void 0:y.isOpen)||!1,isForeground:!0}});return window.dispatchEvent(m),f})},o=d=>{t(h=>{var v;const f={...h},m=(v=h.apps[d])==null?void 0:v.isOpen;m?f.windowOrder=h.windowOrder.filter(w=>w!==d):f.windowOrder=[...h.windowOrder,d],Object.keys(f.apps).forEach(w=>{w===d?f.apps[w]={...f.apps[w],isOpen:!m,isForeground:!m}:f.apps[w]={...f.apps[w],isForeground:!1}});const y=new CustomEvent("appStateChange",{detail:{appId:d,isOpen:!m,isForeground:!m}});return window.dispatchEvent(y),f})},a=d=>{const{windowOrder:h}=e;if(h.length<=1)return;const f=h.indexOf(d);if(f===-1)return;const m=(f+1)%h.length,y=h[m];i(y)},c=d=>{const{windowOrder:h}=e;if(h.length<=1)return;const f=h.indexOf(d);if(f===-1)return;const m=(f-1+h.length)%h.length,y=h[m];i(y)};return b.useEffect(()=>{const d=h=>{var y;const{appId:f,initialPath:m}=h.detail;(y=e.apps[f])!=null&&y.isOpen?i(f):(o(f),m&&localStorage.setItem(`app_${f}_initialPath`,m))};return window.addEventListener("launchApp",d),()=>{window.removeEventListener("launchApp",d)}},[e]),g.jsxs(wE.Provider,{value:{appStates:e.apps,toggleApp:o,bringToForeground:i,apps:n,navigateToNextApp:a,navigateToPreviousApp:c},children:[g.jsx(Rs,{}),n.map(d=>{var w,S;const h=d.id,f=((w=e.apps[h])==null?void 0:w.isOpen)??!1,m=((S=e.apps[h])==null?void 0:S.isForeground)??!1,y=s(h),v=Gte(h);return f?g.jsx("div",{style:{zIndex:y},className:"absolute inset-x-0 md:inset-x-auto w-full md:w-auto",onClick:()=>!m&&i(h),children:g.jsx(v,{isWindowOpen:f,isForeground:m,onClose:()=>o(h),className:"pointer-events-auto",helpItems:d.helpItems})},h):null}),g.jsx(jne,{apps:n,toggleApp:o,appStates:e,wallpaperPath:r})]})}const Vne=Object.values(pd);function Bne(){return b.useEffect(()=>{const n=gR();yR(n)},[]),g.jsx(Fne,{apps:Vne})}xE.createRoot(document.getElementById("root")).render(g.jsx(b.StrictMode,{children:g.jsx(Bne,{})}));export{Zn as _,om as a,wte as b,D0 as g,Il as r};
